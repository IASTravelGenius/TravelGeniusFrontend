"use strict";var e9=Object.defineProperty,t9=Object.defineProperties,n9=Object.getOwnPropertyDescriptors,vT=Object.getOwnPropertySymbols,q3=Object.prototype.hasOwnProperty,W3=Object.prototype.propertyIsEnumerable,YR=(nt,De,L)=>De in nt?e9(nt,De,{enumerable:!0,configurable:!0,writable:!0,value:L}):nt[De]=L,Dt=(nt,De)=>{for(var L in De||(De={}))q3.call(De,L)&&YR(nt,L,De[L]);if(vT)for(var L of vT(De))W3.call(De,L)&&YR(nt,L,De[L]);return nt},ii=(nt,De)=>t9(nt,n9(De)),Z3=(nt,De)=>{var L={};for(var h in nt)q3.call(nt,h)&&De.indexOf(h)<0&&(L[h]=nt[h]);if(null!=nt&&vT)for(var h of vT(nt))De.indexOf(h)<0&&W3.call(nt,h)&&(L[h]=nt[h]);return L},ht=(nt,De,L)=>(YR(nt,"symbol"!=typeof De?De+"":De,L),L);(self.webpackChunkTravellingAdvisor=self.webpackChunkTravellingAdvisor||[]).push([[179],{2011:(nt,De,L)=>{L.d(De,{Dh:()=>Ie,GT:()=>ve,cc:()=>Pe,hO:()=>et,on:()=>K,pX:()=>fe,xv:()=>we});var h=L(5e3),te=L(9260),V=L(4976);nt=L.hmd(nt);const pe=["ngOnDestroy"],fe=(Fe,dt,gt,He={})=>new Proxy(Fe,{get:(Se,Ee)=>gt.runOutsideAngular(()=>{var Xe;if(Fe[Ee])return(null===(Xe=null==He?void 0:He.spy)||void 0===Xe?void 0:Xe.get)&&He.spy.get(Ee,Fe[Ee]),Fe[Ee];if(pe.indexOf(Ee)>-1)return()=>{};const We=dt.toPromise().then(xt=>{const le=xt&&xt[Ee];return"function"==typeof le?le.bind(xt):le&&le.then?le.then(Vt=>gt.run(()=>Vt)):gt.run(()=>le)});return new Proxy(()=>{},{get:(xt,le)=>We[le],apply:(xt,le,Vt)=>We.then(Gt=>{var Mt;const un=Gt&&Gt(...Vt);return(null===(Mt=null==He?void 0:He.spy)||void 0===Mt?void 0:Mt.apply)&&He.spy.apply(Ee,Vt,un),un})})})}),ve=(Fe,dt)=>{dt.forEach(gt=>{Object.getOwnPropertyNames(gt.prototype||gt).forEach(He=>{Object.defineProperty(Fe.prototype,He,Object.getOwnPropertyDescriptor(gt.prototype||gt,He))})})};class ue{constructor(dt){return dt}}const Ie=new h.OlP("angularfire2.app.options"),we=new h.OlP("angularfire2.app.name");function K(Fe,dt,gt){const Se="object"==typeof gt&&gt||{};Se.name=Se.name||"string"==typeof gt&&gt||"[DEFAULT]";const Xe=te.Z.apps.filter(We=>We&&We.name===Se.name)[0]||dt.runOutsideAngular(()=>te.Z.initializeApp(Fe,Se));try{JSON.stringify(Fe)!==JSON.stringify(Xe.options)&&q("error",`${Xe.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(We){}return new ue(Xe)}const q=(Fe,...dt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Fe](...dt)},ie={provide:ue,useFactory:K,deps:[Ie,h.R0b,[new h.FiY,we]]};let et=(()=>{class Fe{constructor(gt){te.Z.registerVersion("angularfire",V.q4.full,"core"),te.Z.registerVersion("angularfire",V.q4.full,"app-compat"),te.Z.registerVersion("angular",h.q4F.full,gt.toString())}static initializeApp(gt,He){return{ngModule:Fe,providers:[{provide:Ie,useValue:gt},{provide:we,useValue:He}]}}}return Fe.\u0275fac=function(gt){return new(gt||Fe)(h.LFG(h.Lbi))},Fe.\u0275mod=h.oAB({type:Fe}),Fe.\u0275inj=h.cJS({providers:[ie]}),Fe})();function Pe(Fe,dt,gt,He,Se){const[,Ee,Xe]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===Fe)||[];if(Ee)return function ze(Fe,dt){try{return Fe.toString()===dt.toString()}catch(gt){return Fe===dt}}(Se,Xe)||(ye("error",`${dt} was already initialized on the ${gt} Firebase App with different settings.${Qe?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Se,was:Xe})),Ee;{const We=He();return globalThis.\u0275AngularfireInstanceCache.push([Fe,We,Se]),We}}const Qe=!!nt.hot,ye=(Fe,...dt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Fe](...dt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(nt,De,L)=>{L.d(De,{q4:()=>sc,iC:()=>fd,HU:()=>Us,vb:()=>cd,JM:()=>Wi});var h=L(5e3),te=L(259),V=L(5861),pe=L(6881),fe=L(2090),ve=L(4859),ue=L(1877);let we,K;const et=new WeakMap,Pe=new WeakMap,ze=new WeakMap,Qe=new WeakMap,ye=new WeakMap;let gt={get(C,S,P){if(C instanceof IDBTransaction){if("done"===S)return Pe.get(C);if("objectStoreNames"===S)return C.objectStoreNames||ze.get(C);if("store"===S)return P.objectStoreNames[1]?void 0:P.objectStore(P.objectStoreNames[0])}return Xe(C[S])},set:(C,S,P)=>(C[S]=P,!0),has:(C,S)=>C instanceof IDBTransaction&&("done"===S||"store"===S)||S in C};function Ee(C){return"function"==typeof C?function Se(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return K||(K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...S){return C.apply(We(this),S),Xe(et.get(this))}:function(...S){return Xe(C.apply(We(this),S))}:function(S,...P){const B=C.call(We(this),S,...P);return ze.set(B,S.sort?S.sort():[S]),Xe(B)}}(C):(C instanceof IDBTransaction&&function dt(C){if(Pe.has(C))return;const S=new Promise((P,B)=>{const W=()=>{C.removeEventListener("complete",X),C.removeEventListener("error",me),C.removeEventListener("abort",me)},X=()=>{P(),W()},me=()=>{B(C.error||new DOMException("AbortError","AbortError")),W()};C.addEventListener("complete",X),C.addEventListener("error",me),C.addEventListener("abort",me)});Pe.set(C,S)}(C),((C,S)=>S.some(P=>C instanceof P))(C,function q(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,gt):C)}function Xe(C){if(C instanceof IDBRequest)return function Fe(C){const S=new Promise((P,B)=>{const W=()=>{C.removeEventListener("success",X),C.removeEventListener("error",me)},X=()=>{P(Xe(C.result)),W()},me=()=>{B(C.error),W()};C.addEventListener("success",X),C.addEventListener("error",me)});return S.then(P=>{P instanceof IDBCursor&&et.set(P,C)}).catch(()=>{}),ye.set(S,C),S}(C);if(Qe.has(C))return Qe.get(C);const S=Ee(C);return S!==C&&(Qe.set(C,S),ye.set(S,C)),S}const We=C=>ye.get(C),Vt=["get","getKey","getAll","getAllKeys","count"],Gt=["put","add","delete","clear"],Mt=new Map;function un(C,S){if(!(C instanceof IDBDatabase)||S in C||"string"!=typeof S)return;if(Mt.get(S))return Mt.get(S);const P=S.replace(/FromIndex$/,""),B=S!==P,W=Gt.includes(P);if(!(P in(B?IDBIndex:IDBObjectStore).prototype)||!W&&!Vt.includes(P))return;const X=function(){var me=(0,V.Z)(function*(Je,...Ze){const ut=this.transaction(Je,W?"readwrite":"readonly");let jt=ut.store;return B&&(jt=jt.index(Ze.shift())),(yield Promise.all([jt[P](...Ze),W&&ut.done]))[0]});return function(Ze){return me.apply(this,arguments)}}();return Mt.set(S,X),X}!function He(C){gt=C(gt)}(C=>ii(Dt({},C),{get:(S,P,B)=>un(S,P)||C.get(S,P,B),has:(S,P)=>!!un(S,P)||C.has(S,P)}));const bt="@firebase/installations",ks="w:0.6.4",se="FIS_v2",vt=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Yt(C){return C instanceof fe.ZR&&C.code.includes("request-failed")}function on({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Et(C){return{token:C.token,requestStatus:2,expiresIn:Br(C.expiresIn),creationTime:Date.now()}}function gn(C,S){return qn.apply(this,arguments)}function qn(){return(qn=(0,V.Z)(function*(C,S){const B=(yield S.json()).error;return vt.create("request-failed",{requestName:C,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Nn({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Wn(C,{refreshToken:S}){const P=Nn(C);return P.append("Authorization",function It(C){return`${se} ${C}`}(S)),P}function Ni(C){return hi.apply(this,arguments)}function hi(){return(hi=(0,V.Z)(function*(C){const S=yield C();return S.status>=500&&S.status<600?C():S})).apply(this,arguments)}function Br(C){return Number(C.replace("s","000"))}function kl(C,S){return ri.apply(this,arguments)}function ri(){return(ri=(0,V.Z)(function*({appConfig:C,heartbeatServiceProvider:S},{fid:P}){const B=on(C),W=Nn(C),X=S.getImmediate({optional:!0});if(X){const ut=yield X.getHeartbeatsHeader();ut&&W.append("x-firebase-client",ut)}const Je={method:"POST",headers:W,body:JSON.stringify({fid:P,authVersion:se,appId:C.appId,sdkVersion:ks})},Ze=yield Ni(()=>fetch(B,Je));if(Ze.ok){const ut=yield Ze.json();return{fid:ut.fid||P,registrationStatus:2,refreshToken:ut.refreshToken,authToken:Et(ut.authToken)}}throw yield gn("Create Installation",Ze)})).apply(this,arguments)}function fi(C){return new Promise(S=>{setTimeout(S,C)})}const Ic=/^[cdef][\w-]{21}$/;function Li(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const P=function Vi(C){return function Dc(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Ic.test(P)?P:""}catch(C){return""}}function wr(C){return`${C.appName}!${C.appId}`}const Wt=new Map;function Tt(C,S){const P=wr(C);Co(P,S),function Xt(C,S){const P=function ei(){return!pr&&"BroadcastChannel"in self&&(pr=new BroadcastChannel("[Firebase] FID Change"),pr.onmessage=C=>{Co(C.data.key,C.data.fid)}),pr}();P&&P.postMessage({key:C,fid:S}),function Ur(){0===Wt.size&&pr&&(pr.close(),pr=null)}()}(P,S)}function Co(C,S){const P=Wt.get(C);if(P)for(const B of P)B(S)}let pr=null;const sn="firebase-installations-store";let ss=null;function tr(){return ss||(ss=function xt(C,S,{blocked:P,upgrade:B,blocking:W,terminated:X}={}){const me=indexedDB.open(C,S),Je=Xe(me);return B&&me.addEventListener("upgradeneeded",Ze=>{B(Xe(me.result),Ze.oldVersion,Ze.newVersion,Xe(me.transaction))}),P&&me.addEventListener("blocked",()=>P()),Je.then(Ze=>{X&&Ze.addEventListener("close",()=>X()),W&&Ze.addEventListener("versionchange",()=>W())}).catch(()=>{}),Je}("firebase-installations-database",1,{upgrade:(C,S)=>{0===S&&C.createObjectStore(sn)}})),ss}function Ln(C,S){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,V.Z)(function*(C,S){const P=wr(C),W=(yield tr()).transaction(sn,"readwrite"),X=W.objectStore(sn),me=yield X.get(P);return yield X.put(S,P),yield W.done,(!me||me.fid!==S.fid)&&Tt(C,S.fid),S})).apply(this,arguments)}function Io(C){return si.apply(this,arguments)}function si(){return(si=(0,V.Z)(function*(C){const S=wr(C),B=(yield tr()).transaction(sn,"readwrite");yield B.objectStore(sn).delete(S),yield B.done})).apply(this,arguments)}function Ps(C,S){return zi.apply(this,arguments)}function zi(){return(zi=(0,V.Z)(function*(C,S){const P=wr(C),W=(yield tr()).transaction(sn,"readwrite"),X=W.objectStore(sn),me=yield X.get(P),Je=S(me);return void 0===Je?yield X.delete(P):yield X.put(Je,P),yield W.done,Je&&(!me||me.fid!==Je.fid)&&Tt(C,Je.fid),Je})).apply(this,arguments)}function $(C){return j.apply(this,arguments)}function j(){return(j=(0,V.Z)(function*(C){let S;const P=yield Ps(C.appConfig,B=>{const W=Q(B),X=ke(C,W);return S=X.registrationPromise,X.installationEntry});return""===P.fid?{installationEntry:yield S}:{installationEntry:P,registrationPromise:S}})).apply(this,arguments)}function Q(C){return kn(C||{fid:Li(),registrationStatus:0})}function ke(C,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(vt.create("app-offline"))};const P={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},B=function oe(C,S){return ct.apply(this,arguments)}(C,P);return{installationEntry:P,registrationPromise:B}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:qt(C)}:{installationEntry:S}}function ct(){return(ct=(0,V.Z)(function*(C,S){try{const P=yield kl(C,S);return Ln(C.appConfig,P)}catch(P){throw Yt(P)&&409===P.customData.serverCode?yield Io(C.appConfig):yield Ln(C.appConfig,{fid:S.fid,registrationStatus:0}),P}})).apply(this,arguments)}function qt(C){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,V.Z)(function*(C){let S=yield Un(C.appConfig);for(;1===S.registrationStatus;)yield fi(100),S=yield Un(C.appConfig);if(0===S.registrationStatus){const{installationEntry:P,registrationPromise:B}=yield $(C);return B||P}return S})).apply(this,arguments)}function Un(C){return Ps(C,S=>{if(!S)throw vt.create("installation-not-found");return kn(S)})}function kn(C){return function yn(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Jt(C,S){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,V.Z)(function*({appConfig:C,heartbeatServiceProvider:S},P){const B=jr(C,P),W=Wn(C,P),X=S.getImmediate({optional:!0});if(X){const ut=yield X.getHeartbeatsHeader();ut&&W.append("x-firebase-client",ut)}const Je={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:ks,appId:C.appId}})},Ze=yield Ni(()=>fetch(B,Je));if(Ze.ok)return Et(yield Ze.json());throw yield gn("Generate Auth Token",Ze)})).apply(this,arguments)}function jr(C,{fid:S}){return`${on(C)}/${S}/authTokens:generate`}function gr(C){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,V.Z)(function*(C,S=!1){let P;const B=yield Ps(C.appConfig,X=>{if(!ft(X))throw vt.create("not-registered");const me=X.authToken;if(!S&&Qt(me))return X;if(1===me.requestStatus)return P=de(C,S),X;{if(!navigator.onLine)throw vt.create("app-offline");const Je=an(X);return P=be(C,Je),Je}});return P?yield P:B.authToken})).apply(this,arguments)}function de(C,S){return re.apply(this,arguments)}function re(){return(re=(0,V.Z)(function*(C,S){let P=yield Re(C.appConfig);for(;1===P.authToken.requestStatus;)yield fi(100),P=yield Re(C.appConfig);const B=P.authToken;return 0===B.requestStatus?gr(C,S):B})).apply(this,arguments)}function Re(C){return Ps(C,S=>{if(!ft(S))throw vt.create("not-registered");return function ki(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function be(C,S){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,V.Z)(function*(C,S){try{const P=yield Jt(C,S),B=Object.assign(Object.assign({},S),{authToken:P});return yield Ln(C.appConfig,B),P}catch(P){if(!Yt(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const B=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Ln(C.appConfig,B)}else yield Io(C.appConfig);throw P}})).apply(this,arguments)}function ft(C){return void 0!==C&&2===C.registrationStatus}function Qt(C){return 2===C.requestStatus&&!function Kn(C){const S=Date.now();return S<C.creationTime||C.creationTime+C.expiresIn<S+36e5}(C)}function an(C){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:S})}function So(){return(So=(0,V.Z)(function*(C){const S=C,{installationEntry:P,registrationPromise:B}=yield $(S);return B?B.catch(console.error):gr(S).catch(console.error),P.fid})).apply(this,arguments)}function Zt(){return(Zt=(0,V.Z)(function*(C,S=!1){const P=C;return yield Ha(P),(yield gr(P,S)).token})).apply(this,arguments)}function Ha(C){return nr.apply(this,arguments)}function nr(){return(nr=(0,V.Z)(function*(C){const{registrationPromise:S}=yield $(C);S&&(yield S)})).apply(this,arguments)}function $a(C){return vt.create("missing-app-config-values",{valueName:C})}const Er="installations",Lu=C=>{const S=C.getProvider("app").getImmediate(),P=function Nu(C){if(!C||!C.options)throw $a("App Configuration");if(!C.name)throw $a("App Name");const S=["projectId","apiKey","appId"];for(const P of S)if(!C.options[P])throw $a(P);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(S);return{app:S,appConfig:P,heartbeatServiceProvider:(0,pe._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Ao=C=>{const S=C.getProvider("app").getImmediate(),P=(0,pe._getProvider)(S,Er).getImmediate();return{getId:()=>function In(C){return So.apply(this,arguments)}(P),getToken:W=>function ja(C){return Zt.apply(this,arguments)}(P,W)}};(function za(){(0,pe._registerComponent)(new ve.wA(Er,Lu,"PUBLIC")),(0,pe._registerComponent)(new ve.wA("installations-internal",Ao,"PRIVATE"))})(),(0,pe.registerVersion)(bt,"0.6.4"),(0,pe.registerVersion)(bt,"0.6.4","esm2017");const rr="@firebase/remote-config",sr=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Rs{constructor(S,P,B,W){this.client=S,this.storage=P,this.storageCache=B,this.logger=W}isCachedDataFresh(S,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-P,W=B<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${W}.`),W}fetch(S){var P=this;return(0,V.Z)(function*(){const[B,W]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(W&&P.isCachedDataFresh(S.cacheMaxAgeMillis,B))return W;S.eTag=W&&W.eTag;const X=yield P.client.fetch(S),me=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&me.push(P.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(me),X})()}}function Ol(C=navigator){return C.languages&&C.languages[0]||C.language}class Ga{constructor(S,P,B,W,X,me){this.firebaseInstallations=S,this.sdkVersion=P,this.namespace=B,this.projectId=W,this.apiKey=X,this.appId=me}fetch(S){var P=this;return(0,V.Z)(function*(){const[B,W]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Ze={sdk_version:P.sdkVersion,app_instance_id:B,app_instance_id_token:W,app_id:P.appId,language_code:Ol()},ut={method:"POST",headers:Je,body:JSON.stringify(Ze)},jt=fetch(me,ut),Kt=new Promise((gs,ms)=>{S.signal.addEventListener(()=>{const gd=new Error("The operation was aborted.");gd.name="AbortError",ms(gd)})});let wi;try{yield Promise.race([jt,Kt]),wi=yield jt}catch(gs){let ms="fetch-client-network";throw"AbortError"===(null==gs?void 0:gs.name)&&(ms="fetch-timeout"),sr.create(ms,{originalErrorMessage:null==gs?void 0:gs.message})}let Bn=wi.status;const js=wi.headers.get("ETag")||void 0;let Vo,Ar;if(200===wi.status){let gs;try{gs=yield wi.json()}catch(ms){throw sr.create("fetch-client-parse",{originalErrorMessage:null==ms?void 0:ms.message})}Vo=gs.entries,Ar=gs.state}if("INSTANCE_STATE_UNSPECIFIED"===Ar?Bn=500:"NO_CHANGE"===Ar?Bn=304:("NO_TEMPLATE"===Ar||"EMPTY_CONFIG"===Ar)&&(Vo={}),304!==Bn&&200!==Bn)throw sr.create("fetch-status",{httpStatus:Bn});return{status:Bn,eTag:js,config:Vo}})()}}class ea{constructor(S,P){this.client=S,this.storage=P}fetch(S){var P=this;return(0,V.Z)(function*(){const B=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(S,B)})()}attemptFetch(S,{throttleEndTimeMillis:P,backoffCount:B}){var W=this;return(0,V.Z)(function*(){yield function Ep(C,S){return new Promise((P,B)=>{const W=Math.max(S-Date.now(),0),X=setTimeout(P,W);C.addEventListener(()=>{clearTimeout(X),B(sr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,P);try{const X=yield W.client.fetch(S);return yield W.storage.deleteThrottleMetadata(),X}catch(X){if(!function wh(C){if(!(C instanceof fe.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}(X))throw X;const me={throttleEndTimeMillis:Date.now()+(0,fe.$s)(B),backoffCount:B+1};return yield W.storage.setThrottleMetadata(me),W.attemptFetch(S,me)}})()}}class Uu{constructor(S,P,B,W,X){this.app=S,this._client=P,this._storageCache=B,this._storage=W,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qa(C,S){const P=C.target.error||void 0;return sr.create(S,{originalErrorMessage:P&&(null==P?void 0:P.message)})}const jn="app_namespace_store";class Zv{constructor(S,P,B,W=function Wa(){return new Promise((C,S)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=B=>{S(qa(B,"storage-open"))},P.onsuccess=B=>{C(B.target.result)},P.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(jn,{keyPath:"compositeKey"})}}catch(P){S(sr.create("storage-open",{originalErrorMessage:null==P?void 0:P.message}))}})}()){this.appId=S,this.appName=P,this.namespace=B,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var P=this;return(0,V.Z)(function*(){const B=yield P.openDbPromise;return new Promise((W,X)=>{const Je=B.transaction([jn],"readonly").objectStore(jn),Ze=P.createCompositeKey(S);try{const ut=Je.get(Ze);ut.onerror=jt=>{X(qa(jt,"storage-get"))},ut.onsuccess=jt=>{const Kt=jt.target.result;W(Kt?Kt.value:void 0)}}catch(ut){X(sr.create("storage-get",{originalErrorMessage:null==ut?void 0:ut.message}))}})})()}set(S,P){var B=this;return(0,V.Z)(function*(){const W=yield B.openDbPromise;return new Promise((X,me)=>{const Ze=W.transaction([jn],"readwrite").objectStore(jn),ut=B.createCompositeKey(S);try{const jt=Ze.put({compositeKey:ut,value:P});jt.onerror=Kt=>{me(qa(Kt,"storage-set"))},jt.onsuccess=()=>{X()}}catch(jt){me(sr.create("storage-set",{originalErrorMessage:null==jt?void 0:jt.message}))}})})()}delete(S){var P=this;return(0,V.Z)(function*(){const B=yield P.openDbPromise;return new Promise((W,X)=>{const Je=B.transaction([jn],"readwrite").objectStore(jn),Ze=P.createCompositeKey(S);try{const ut=Je.delete(Ze);ut.onerror=jt=>{X(qa(jt,"storage-delete"))},ut.onsuccess=()=>{W()}}catch(ut){X(sr.create("storage-delete",{originalErrorMessage:null==ut?void 0:ut.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class ju{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,V.Z)(function*(){const P=S.storage.getLastFetchStatus(),B=S.storage.getLastSuccessfulFetchTimestampMillis(),W=S.storage.getActiveConfig(),X=yield P;X&&(S.lastFetchStatus=X);const me=yield B;me&&(S.lastSuccessfulFetchTimestampMillis=me);const Je=yield W;Je&&(S.activeConfig=Je)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function xm(){return On.apply(this,arguments)}function On(){return(On=(0,V.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(C){return!1}})).apply(this,arguments)}let kc,En;!function os(){(0,pe._registerComponent)(new ve.wA("remote-config",function C(S,{instanceIdentifier:P}){const B=S.getProvider("app").getImmediate(),W=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw sr.create("registration-window");if(!(0,fe.hl)())throw sr.create("indexed-db-unavailable");const{projectId:X,apiKey:me,appId:Je}=B.options;if(!X)throw sr.create("registration-project-id");if(!me)throw sr.create("registration-api-key");if(!Je)throw sr.create("registration-app-id");const Ze=new Zv(Je,B.name,P=P||"firebase"),ut=new ju(Ze),jt=new ue.Yd(rr);jt.logLevel=ue.in.ERROR;const Kt=new Ga(W,pe.SDK_VERSION,P,X,me,Je),wi=new ea(Kt,Ze),Bn=new Rs(wi,Ze,ut,jt),js=new Uu(B,Bn,ut,Ze,jt);return function Sm(C){const S=(0,fe.m9)(C);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(js),js},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(rr,"0.4.4"),(0,pe.registerVersion)(rr,"0.4.4","esm2017")}();const Ya=new WeakMap,yi=new WeakMap,Pc=new WeakMap,Gi=new WeakMap,as=new WeakMap;let ls={get(C,S,P){if(C instanceof IDBTransaction){if("done"===S)return yi.get(C);if("objectStoreNames"===S)return C.objectStoreNames||Pc.get(C);if("store"===S)return P.objectStoreNames[1]?void 0:P.objectStore(P.objectStoreNames[0])}return mr(C[S])},set:(C,S,P)=>(C[S]=P,!0),has:(C,S)=>C instanceof IDBTransaction&&("done"===S||"store"===S)||S in C};function Qa(C){return"function"==typeof C?function Ns(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ka(){return En||(En=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...S){return C.apply(Ft(this),S),mr(Ya.get(this))}:function(...S){return mr(C.apply(Ft(this),S))}:function(S,...P){const B=C.call(Ft(this),S,...P);return Pc.set(B,S.sort?S.sort():[S]),mr(B)}}(C):(C instanceof IDBTransaction&&function ta(C){if(yi.has(C))return;const S=new Promise((P,B)=>{const W=()=>{C.removeEventListener("complete",X),C.removeEventListener("error",me),C.removeEventListener("abort",me)},X=()=>{P(),W()},me=()=>{B(C.error||new DOMException("AbortError","AbortError")),W()};C.addEventListener("complete",X),C.addEventListener("error",me),C.addEventListener("abort",me)});yi.set(C,S)}(C),((C,S)=>S.some(P=>C instanceof P))(C,function Dp(){return kc||(kc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,ls):C)}function mr(C){if(C instanceof IDBRequest)return function Dr(C){const S=new Promise((P,B)=>{const W=()=>{C.removeEventListener("success",X),C.removeEventListener("error",me)},X=()=>{P(mr(C.result)),W()},me=()=>{B(C.error),W()};C.addEventListener("success",X),C.addEventListener("error",me)});return S.then(P=>{P instanceof IDBCursor&&Ya.set(P,C)}).catch(()=>{}),as.set(S,C),S}(C);if(Gi.has(C))return Gi.get(C);const S=Qa(C);return S!==C&&(Gi.set(C,S),as.set(S,C)),S}const Ft=C=>as.get(C);function na(C,S,{blocked:P,upgrade:B,blocking:W,terminated:X}={}){const me=indexedDB.open(C,S),Je=mr(me);return B&&me.addEventListener("upgradeneeded",Ze=>{B(mr(me.result),Ze.oldVersion,Ze.newVersion,mr(me.transaction))}),P&&me.addEventListener("blocked",()=>P()),Je.then(Ze=>{X&&Ze.addEventListener("close",()=>X()),W&&Ze.addEventListener("versionchange",()=>W())}).catch(()=>{}),Je}function Xa(C,{blocked:S}={}){const P=indexedDB.deleteDatabase(C);return S&&P.addEventListener("blocked",()=>S()),mr(P).then(()=>{})}const Oc=["get","getKey","getAll","getAllKeys","count"],Eh=["put","add","delete","clear"],Fl=new Map;function Rc(C,S){if(!(C instanceof IDBDatabase)||S in C||"string"!=typeof S)return;if(Fl.get(S))return Fl.get(S);const P=S.replace(/FromIndex$/,""),B=S!==P,W=Eh.includes(P);if(!(P in(B?IDBIndex:IDBObjectStore).prototype)||!W&&!Oc.includes(P))return;const X=function(){var me=(0,V.Z)(function*(Je,...Ze){const ut=this.transaction(Je,W?"readwrite":"readonly");let jt=ut.store;return B&&(jt=jt.index(Ze.shift())),(yield Promise.all([jt[P](...Ze),W&&ut.done]))[0]});return function(Ze){return me.apply(this,arguments)}}();return Fl.set(S,X),X}!function $u(C){ls=C(ls)}(C=>ii(Dt({},C),{get:(S,P,B)=>Rc(S,P)||C.get(S,P,B),has:(S,P)=>!!Rc(S,P)||C.has(S,P)}));const zu="/firebase-messaging-sw.js",ia="/firebase-cloud-messaging-push-scope",Ne="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ra="google.c.a.c_id",ti="google.c.a.c_l",Fc="google.c.a.ts",Ja="google.c.a.e";var Mo=(()=>{return(C=Mo||(Mo={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Mo;var C})();function Ir(C){const S=new Uint8Array(C);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Nl(C){const P=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(P),W=new Uint8Array(B.length);for(let X=0;X<B.length;++X)W[X]=B.charCodeAt(X);return W}const Ll="fcm_token_details_db",us="fcm_token_object_Store";function or(C){return Sr.apply(this,arguments)}function Sr(){return Sr=(0,V.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Ll))return null;let S=null;return(yield na(Ll,5,{upgrade:(B=(0,V.Z)(function*(W,X,me,Je){var Ze;if(X<2||!W.objectStoreNames.contains(us))return;const ut=Je.objectStore(us),jt=yield ut.index("fcmSenderId").get(C);if(yield ut.clear(),jt)if(2===X){const Kt=jt;if(!Kt.auth||!Kt.p256dh||!Kt.endpoint)return;S={token:Kt.fcmToken,createTime:null!==(Ze=Kt.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:Kt.auth,p256dh:Kt.p256dh,endpoint:Kt.endpoint,swScope:Kt.swScope,vapidKey:"string"==typeof Kt.vapidKey?Kt.vapidKey:Ir(Kt.vapidKey)}}}else if(3===X){const Kt=jt;S={token:Kt.fcmToken,createTime:Kt.createTime,subscriptionOptions:{auth:Ir(Kt.auth),p256dh:Ir(Kt.p256dh),endpoint:Kt.endpoint,swScope:Kt.swScope,vapidKey:Ir(Kt.vapidKey)}}}else if(4===X){const Kt=jt;S={token:Kt.fcmToken,createTime:Kt.createTime,subscriptionOptions:{auth:Ir(Kt.auth),p256dh:Ir(Kt.p256dh),endpoint:Kt.endpoint,swScope:Kt.swScope,vapidKey:Ir(Kt.vapidKey)}}}}),function(X,me,Je,Ze){return B.apply(this,arguments)})})).close(),yield Xa(Ll),yield Xa("fcm_vapid_details_db"),yield Xa("undefined"),Dh(S)?S:null;var B}),Sr.apply(this,arguments)}function Dh(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:S}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Js="firebase-messaging-store";let Vl=null;function Bl(){return Vl||(Vl=na("firebase-messaging-database",1,{upgrade:(C,S)=>{0===S&&C.createObjectStore(Js)}})),Vl}function Ih(C){return Po.apply(this,arguments)}function Po(){return(Po=(0,V.Z)(function*(C){const S=tl(C),B=yield(yield Bl()).transaction(Js).objectStore(Js).get(S);if(B)return B;{const W=yield or(C.appConfig.senderId);if(W)return yield Nc(C,W),W}})).apply(this,arguments)}function Nc(C,S){return el.apply(this,arguments)}function el(){return(el=(0,V.Z)(function*(C,S){const P=tl(C),W=(yield Bl()).transaction(Js,"readwrite");return yield W.objectStore(Js).put(S,P),yield W.done,S})).apply(this,arguments)}function Sh(C){return Th.apply(this,arguments)}function Th(){return(Th=(0,V.Z)(function*(C){const S=tl(C),B=(yield Bl()).transaction(Js,"readwrite");yield B.objectStore(Js).delete(S),yield B.done})).apply(this,arguments)}function tl({appConfig:C}){return C.appId}const Pi=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Gu(C,S){return qu.apply(this,arguments)}function qu(){return(qu=(0,V.Z)(function*(C,S){const P=yield ds(C),B=Ip(S),W={method:"POST",headers:P,body:JSON.stringify(B)};let X;try{X=yield(yield fetch(oi(C.appConfig),W)).json()}catch(me){throw Pi.create("token-subscribe-failed",{errorInfo:null==me?void 0:me.toString()})}if(X.error)throw Pi.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Pi.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function Ul(C,S){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,V.Z)(function*(C,S){const P=yield ds(C),B=Ip(S.subscriptionOptions),W={method:"PATCH",headers:P,body:JSON.stringify(B)};let X;try{X=yield(yield fetch(`${oi(C.appConfig)}/${S.token}`,W)).json()}catch(me){throw Pi.create("token-update-failed",{errorInfo:null==me?void 0:me.toString()})}if(X.error)throw Pi.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Pi.create("token-update-no-token");return X.token})).apply(this,arguments)}function Vc(C,S){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,V.Z)(function*(C,S){const B={method:"DELETE",headers:yield ds(C)};try{const X=yield(yield fetch(`${oi(C.appConfig)}/${S}`,B)).json();if(X.error)throw Pi.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(W){throw Pi.create("token-unsubscribe-failed",{errorInfo:null==W?void 0:W.toString()})}})).apply(this,arguments)}function oi({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function ds(C){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,V.Z)(function*({appConfig:C,installations:S}){const P=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Ip({p256dh:C,auth:S,endpoint:P,vapidKey:B}){const W={web:{endpoint:P,auth:S,p256dh:C}};return B!==Ne&&(W.web.applicationPubKey=B),W}const xh=6048e5;function Sp(C){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,V.Z)(function*(C){const S=yield kh(C.swRegistration,C.vapidKey),P={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:S.endpoint,auth:Ir(S.getKey("auth")),p256dh:Ir(S.getKey("p256dh"))},B=yield Ih(C.firebaseDependencies);if(B){if(oa(B.subscriptionOptions,P))return Date.now()>=B.createTime+xh?Uc(C,{token:B.token,createTime:Date.now(),subscriptionOptions:P}):B.token;try{yield Vc(C.firebaseDependencies,B.token)}catch(W){console.warn(W)}return jl(C.firebaseDependencies,P)}return jl(C.firebaseDependencies,P)})).apply(this,arguments)}function Ah(C){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,V.Z)(function*(C){const S=yield Ih(C.firebaseDependencies);S&&(yield Vc(C.firebaseDependencies,S.token),yield Sh(C.firebaseDependencies));const P=yield C.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function Uc(C,S){return sa.apply(this,arguments)}function sa(){return(sa=(0,V.Z)(function*(C,S){try{const P=yield Ul(C.firebaseDependencies,S),B=Object.assign(Object.assign({},S),{token:P,createTime:Date.now()});return yield Nc(C.firebaseDependencies,B),P}catch(P){throw yield Ah(C),P}})).apply(this,arguments)}function jl(C,S){return eo.apply(this,arguments)}function eo(){return(eo=(0,V.Z)(function*(C,S){const B={token:yield Gu(C,S),createTime:Date.now(),subscriptionOptions:S};return yield Nc(C,B),B.token})).apply(this,arguments)}function kh(C,S){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,V.Z)(function*(C,S){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Nl(S)})})).apply(this,arguments)}function oa(C,S){return S.vapidKey===C.vapidKey&&S.endpoint===C.endpoint&&S.auth===C.auth&&S.p256dh===C.p256dh}function Hl(C){const S={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Am(C,S){if(!S.notification)return;C.notification={};const P=S.notification.title;P&&(C.notification.title=P);const B=S.notification.body;B&&(C.notification.body=B);const W=S.notification.image;W&&(C.notification.image=W);const X=S.notification.icon;X&&(C.notification.icon=X)}(S,C),function Mm(C,S){!S.data||(C.data=S.data)}(S,C),function Zu(C,S){var P,B,W,X,me;if(!S.fcmOptions&&!(null===(P=S.notification)||void 0===P?void 0:P.click_action))return;C.fcmOptions={};const Je=null!==(W=null===(B=S.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==W?W:null===(X=S.notification)||void 0===X?void 0:X.click_action;Je&&(C.fcmOptions.link=Je);const Ze=null===(me=S.fcmOptions)||void 0===me?void 0:me.analytics_label;Ze&&(C.fcmOptions.analyticsLabel=Ze)}(S,C),S}function Oh(C){return"object"==typeof C&&!!C&&ra in C}function Tp(C,S){const P=[];for(let B=0;B<C.length;B++)P.push(C.charAt(B)),B<S.length&&P.push(S.charAt(B));return P.join("")}function ni(C){return Pi.create("missing-app-config-values",{valueName:C})}Tp("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Tp("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Nt{constructor(S,P,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function nl(C){if(!C||!C.options)throw ni("App Configuration Object");if(!C.name)throw ni("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:P}=C;for(const B of S)if(!P[B])throw ni(B);return{appName:C.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:W,installations:P,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Ui(C){return gi.apply(this,arguments)}function gi(){return(gi=(0,V.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(zu,{scope:ia}),C.swRegistration.update().catch(()=>{})}catch(S){throw Pi.create("failed-service-worker-registration",{browserErrorMessage:null==S?void 0:S.message})}})).apply(this,arguments)}function hs(C,S){return xr.apply(this,arguments)}function xr(){return(xr=(0,V.Z)(function*(C,S){if(!S&&!C.swRegistration&&(yield Ui(C)),S||!C.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Pi.create("invalid-sw-registration");C.swRegistration=S}})).apply(this,arguments)}function Hn(C,S){return $n.apply(this,arguments)}function $n(){return($n=(0,V.Z)(function*(C,S){S?C.vapidKey=S:C.vapidKey||(C.vapidKey=Ne)})).apply(this,arguments)}function $t(){return($t=(0,V.Z)(function*(C,S){if(!navigator)throw Pi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pi.create("permission-blocked");return yield Hn(C,null==S?void 0:S.vapidKey),yield hs(C,null==S?void 0:S.serviceWorkerRegistration),Sp(C)})).apply(this,arguments)}function aa(C,S,P){return $l.apply(this,arguments)}function $l(){return($l=(0,V.Z)(function*(C,S,P){const B=_r(S);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:P[ra],message_name:P[ti],message_time:P[Fc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function _r(C){switch(C){case Mo.NOTIFICATION_CLICKED:return"notification_open";case Mo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function il(){return(il=(0,V.Z)(function*(C,S){const P=S.data;if(!P.isFirebaseMessaging)return;C.onMessageHandler&&P.messageType===Mo.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Hl(P)):C.onMessageHandler.next(Hl(P)));const B=P.data;Oh(B)&&"1"===B[Ja]&&(yield aa(C,P.messageType,B))})).apply(this,arguments)}const zl="@firebase/messaging",Gl=C=>{const S=new Nt(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function km(C,S){return il.apply(this,arguments)}(S,P)),S},la=C=>{const S=C.getProvider("messaging").getImmediate();return{getToken:B=>function ai(C,S){return $t.apply(this,arguments)}(S,B)}};function Ku(){return rl.apply(this,arguments)}function rl(){return(rl=(0,V.Z)(function*(){try{yield(0,fe.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ls(){(0,pe._registerComponent)(new ve.wA("messaging",Gl,"PUBLIC")),(0,pe._registerComponent)(new ve.wA("messaging-internal",la,"PRIVATE")),(0,pe.registerVersion)(zl,"0.12.4"),(0,pe.registerVersion)(zl,"0.12.4","esm2017")}();const Tn="analytics",Ro="firebase_id",sl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",no="https://www.googletagmanager.com/gtag/js",mi=new ue.Yd("@firebase/analytics"),qi=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Fo(C){if(!C.startsWith(no)){const S=qi.create("invalid-gtag-resource",{gtagURL:C});return mi.warn(S.message),""}return C}function ua(C){return Promise.all(C.map(S=>S.catch(P=>P)))}function zc(C,S){const P=function io(C,S){let P;return window.trustedTypes&&(P=window.trustedTypes.createPolicy(C,S)),P}("firebase-js-sdk-policy",{createScriptURL:Fo}),B=document.createElement("script"),W=`${no}?l=${C}&id=${S}`;B.src=P?null==P?void 0:P.createScriptURL(W):W,B.async=!0,document.head.appendChild(B)}function da(C,S,P,B,W,X){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,V.Z)(function*(C,S,P,B,W,X){const me=B[W];try{if(me)yield S[me];else{const Ze=(yield ua(P)).find(ut=>ut.measurementId===W);Ze&&(yield S[Ze.appId])}}catch(Je){mi.error(Je)}C("config",W,X)})).apply(this,arguments)}function Qu(C,S,P,B,W){return zn.apply(this,arguments)}function zn(){return(zn=(0,V.Z)(function*(C,S,P,B,W){try{let X=[];if(W&&W.send_to){let me=W.send_to;Array.isArray(me)||(me=[me]);const Je=yield ua(P);for(const Ze of me){const ut=Je.find(Kt=>Kt.measurementId===Ze),jt=ut&&S[ut.appId];if(!jt){X=[];break}X.push(jt)}}0===X.length&&(X=Object.values(S)),yield Promise.all(X),C("event",B,W||{})}catch(X){mi.error(X)}})).apply(this,arguments)}function Bh(C){const S=window.document.getElementsByTagName("script");for(const P of Object.values(S))if(P.src&&P.src.includes(no)&&P.src.includes(C))return P;return null}const Mp=new class ha{constructor(S={},P=1e3){this.throttleMetadata=S,this.intervalMillis=P}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,P){this.throttleMetadata[S]=P}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function qc(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Yv(C){return li.apply(this,arguments)}function li(){return(li=(0,V.Z)(function*(C){var S;const{appId:P,apiKey:B}=C,W={method:"GET",headers:qc(B)},X=sl.replace("{app-id}",P),me=yield fetch(X,W);if(200!==me.status&&304!==me.status){let Je="";try{const Ze=yield me.json();(null===(S=Ze.error)||void 0===S?void 0:S.message)&&(Je=Ze.error.message)}catch(Ze){}throw qi.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Je})}return me.json()})).apply(this,arguments)}function Ju(C){return ro.apply(this,arguments)}function ro(){return(ro=(0,V.Z)(function*(C,S=Mp,P){const{appId:B,apiKey:W,measurementId:X}=C.options;if(!B)throw qi.create("no-app-id");if(!W){if(X)return{measurementId:X,appId:B};throw qi.create("no-api-key")}const me=S.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Je=new Uh;return setTimeout((0,V.Z)(function*(){Je.abort()}),void 0!==P?P:6e4),Pm({appId:B,apiKey:W,measurementId:X},me,Je,S)})).apply(this,arguments)}function Pm(C,S,P){return ed.apply(this,arguments)}function ed(){return(ed=(0,V.Z)(function*(C,{throttleEndTimeMillis:S,backoffCount:P},B,W=Mp){var X;const{appId:me,measurementId:Je}=C;try{yield Gr(B,S)}catch(Ze){if(Je)return mi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Je} provided in the "measurementId" field in the local Firebase config. [${null==Ze?void 0:Ze.message}]`),{appId:me,measurementId:Je};throw Ze}try{const Ze=yield Yv(C);return W.deleteThrottleMetadata(me),Ze}catch(Ze){const ut=Ze;if(!qr(ut)){if(W.deleteThrottleMetadata(me),Je)return mi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Je} provided in the "measurementId" field in the local Firebase config. [${null==ut?void 0:ut.message}]`),{appId:me,measurementId:Je};throw Ze}const jt=503===Number(null===(X=null==ut?void 0:ut.customData)||void 0===X?void 0:X.httpStatus)?(0,fe.$s)(P,W.intervalMillis,30):(0,fe.$s)(P,W.intervalMillis),Kt={throttleEndTimeMillis:Date.now()+jt,backoffCount:P+1};return W.setThrottleMetadata(me,Kt),mi.debug(`Calling attemptFetch again in ${jt} millis`),Pm(C,Kt,B,W)}})).apply(this,arguments)}function Gr(C,S){return new Promise((P,B)=>{const W=Math.max(S-Date.now(),0),X=setTimeout(P,W);C.addEventListener(()=>{clearTimeout(X),B(qi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function qr(C){if(!(C instanceof fe.ZR&&C.customData))return!1;const S=Number(C.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Uh{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let fa,nd;function Vs(){return(Vs=(0,V.Z)(function*(C,S,P,B,W){if(W&&W.global)C("event",P,B);else{const X=yield S;C("event",P,Object.assign(Object.assign({},B),{send_to:X}))}})).apply(this,arguments)}function Zc(C){nd=C}function Wl(C){fa=C}function ga(){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,V.Z)(function*(){if(!(0,fe.hl)())return mi.warn(qi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(C){return mi.warn(qi.create("indexeddb-unavailable",{errorInfo:null==C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function Gn(){return(Gn=(0,V.Z)(function*(C,S,P,B,W,X,me){var Je;const Ze=Ju(C);Ze.then(Bn=>{P[Bn.measurementId]=Bn.appId,C.options.measurementId&&Bn.measurementId!==C.options.measurementId&&mi.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Bn=>mi.error(Bn)),S.push(Ze);const ut=ga().then(Bn=>{if(Bn)return B.getId()}),[jt,Kt]=yield Promise.all([Ze,ut]);Bh(X)||zc(X,jt.measurementId),nd&&(W("consent","default",nd),Zc(void 0)),W("js",new Date);const wi=null!==(Je=null==me?void 0:me.config)&&void 0!==Je?Je:{};return wi.origin="firebase",wi.update=!0,null!=Kt&&(wi[Ro]=Kt),W("config",jt.measurementId,wi),fa&&(W("set",fa),Wl(void 0)),jt.measurementId})).apply(this,arguments)}class ji{constructor(S){this.app=S}_delete(){return delete fs[this.app.options.appId],Promise.resolve()}}let fs={},Kl=[];const Yl={};let Kc,ps,No="dataLayer",Xl=!1;function ma(C,S,P){!function ol(){const C=[];if((0,fe.ru)()&&C.push("This is a browser extension environment."),(0,fe.zI)()||C.push("Cookies are not available."),C.length>0){const S=C.map((B,W)=>`(${W+1}) ${B}`).join(" "),P=qi.create("invalid-analytics-context",{errorInfo:S});mi.warn(P.message)}}();const B=C.options.appId;if(!B)throw qi.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw qi.create("no-api-key");mi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fs[B])throw qi.create("already-exists",{id:B});if(!Xl){!function Lh(C){let S=[];Array.isArray(window[C])?S=window[C]:window[C]=S}(No);const{wrappedGtag:X,gtagCore:me}=function Xu(C,S,P,B,W){let X=function(...me){window[B].push(arguments)};return window[W]&&"function"==typeof window[W]&&(X=window[W]),window[W]=function Gc(C,S,P,B){function X(){return(X=(0,V.Z)(function*(me,...Je){try{if("event"===me){const[Ze,ut]=Je;yield Qu(C,S,P,Ze,ut)}else if("config"===me){const[Ze,ut]=Je;yield da(C,S,P,B,Ze,ut)}else if("consent"===me){const[Ze]=Je;C("consent","update",Ze)}else if("get"===me){const[Ze,ut,jt]=Je;C("get",Ze,ut,jt)}else if("set"===me){const[Ze]=Je;C("set",Ze)}else C(me,...Je)}catch(Ze){mi.error(Ze)}})).apply(this,arguments)}return function W(me){return X.apply(this,arguments)}}(X,C,S,P),{gtagCore:X,wrappedGtag:window[W]}}(fs,Kl,Yl,No,"gtag");ps=X,Kc=me,Xl=!0}return fs[B]=function Zl(C,S,P,B,W,X,me){return Gn.apply(this,arguments)}(C,Kl,Yl,S,Kc,No,P),new ji(C)}function Jl(){return ec.apply(this,arguments)}function ec(){return(ec=(0,V.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(C){return!1}})).apply(this,arguments)}const rc="@firebase/analytics";!function Xc(){(0,pe._registerComponent)(new ve.wA(Tn,(S,{options:P})=>ma(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,pe._registerComponent)(new ve.wA("analytics-internal",function C(S){try{const P=S.getProvider(Tn).getImmediate();return{logEvent:(B,W,X)=>function ic(C,S,P,B){C=(0,fe.m9)(C),function ql(C,S,P,B,W){return Vs.apply(this,arguments)}(ps,fs[C.app.options.appId],S,P,B).catch(W=>mi.error(W))}(P,B,W,X)}}catch(P){throw qi.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,pe.registerVersion)(rc,"0.10.0"),(0,pe.registerVersion)(rc,"0.10.0","esm2017")}();var va=L(4408),Lo=L(7565);const ya=new class Hi extends Lo.v{}(class sd extends va.o{constructor(S,P){super(S,P),this.scheduler=S,this.work=P}schedule(S,P=0){return P>0?super.schedule(S,P):(this.delay=P,this.state=S,this.scheduler.flush(this),this)}execute(S,P){return P>0||this.closed?super.execute(S,P):this._execute(S,P)}requestAsyncId(S,P,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(S,P,B):(S.flush(this),0)}});var $h=L(4986),zh=L(8505),ul=L(9468),dl=L(5363);const sc=new h.GfV("7.6.1"),Jc="__angularfire_symbol__analyticsIsSupportedValue",ba="__angularfire_symbol__analyticsIsSupported",ad="__angularfire_symbol__remoteConfigIsSupportedValue",ld="__angularfire_symbol__remoteConfigIsSupported",Gh="__angularfire_symbol__messagingIsSupportedValue",Wr="__angularfire_symbol__messagingIsSupported";function Wi(C,S,P){if(S){if(1===S.length)return S[0];const X=S.filter(me=>me.app===P);if(1===X.length)return X[0]}return P.container.getProvider(C).getImmediate({optional:!0})}globalThis[ba]||(globalThis[ba]=Jl().then(C=>globalThis[Jc]=C).catch(()=>globalThis[Jc]=!1)),globalThis[Wr]||(globalThis[Wr]=Ku().then(C=>globalThis[Gh]=C).catch(()=>globalThis[Gh]=!1)),globalThis[ld]||(globalThis[ld]=xm().then(C=>globalThis[ad]=C).catch(()=>globalThis[ad]=!1));const cd=(C,S)=>{const P=S?[S]:(0,te.C6)(),B=[];return P.forEach(W=>{W.container.getProvider(C).instances.forEach(me=>{B.includes(me)||B.push(me)})}),B};function oo(){}class ud{constructor(S,P=ya){this.zone=S,this.delegate=P}now(){return this.delegate.now()}schedule(S,P,B){const W=this.zone;return this.delegate.schedule(function(me){W.runGuarded(()=>{S.apply(this,[me])})},P,B)}}class bi{constructor(S){this.zone=S,this.task=null}call(S,P){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oo,{},oo,oo)),P.pipe((0,zh.b)({next:B,complete:B,error:B})).subscribe(S).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Us=(()=>{class C{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new ud(Zone.current)),this.insideAngular=P.run(()=>new ud(Zone.current,$h.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(P){return new(P||C)(h.LFG(h.R0b))},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Zr(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function fd(C){return Zr(),function Fp(C){return function(P){return(P=P.lift(new bi(C.ngZone))).pipe((0,ul.R)(C.outsideAngular),(0,dl.Q)(C.insideAngular))}}(Zr())(C)}},2090:(nt,De,L)=>{L.d(De,{$s:()=>Io,BH:()=>Ee,G6:()=>ks,L:()=>we,LL:()=>Ce,Pz:()=>Se,Sg:()=>Xe,UG:()=>le,US:()=>ve,ZB:()=>ie,ZR:()=>Ue,aH:()=>He,b$:()=>Mt,eu:()=>ne,hl:()=>se,jU:()=>Vt,m9:()=>zi,ne:()=>wr,pd:()=>Li,r3:()=>hi,ru:()=>Gt,tV:()=>K,uI:()=>xt,vZ:()=>ri,w1:()=>bt,xO:()=>Ic,xb:()=>It,z$:()=>We,zI:()=>Ae,zd:()=>pi});const pe=function($){const j=[];let Q=0;for(let ke=0;ke<$.length;ke++){let oe=$.charCodeAt(ke);oe<128?j[Q++]=oe:oe<2048?(j[Q++]=oe>>6|192,j[Q++]=63&oe|128):55296==(64512&oe)&&ke+1<$.length&&56320==(64512&$.charCodeAt(ke+1))?(oe=65536+((1023&oe)<<10)+(1023&$.charCodeAt(++ke)),j[Q++]=oe>>18|240,j[Q++]=oe>>12&63|128,j[Q++]=oe>>6&63|128,j[Q++]=63&oe|128):(j[Q++]=oe>>12|224,j[Q++]=oe>>6&63|128,j[Q++]=63&oe|128)}return j},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,j){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,ke=[];for(let oe=0;oe<$.length;oe+=3){const ct=$[oe],qt=oe+1<$.length,Ut=qt?$[oe+1]:0,Un=oe+2<$.length,kn=Un?$[oe+2]:0;let Bi=(15&Ut)<<2|kn>>6,jr=63&kn;Un||(jr=64,qt||(Bi=64)),ke.push(Q[ct>>2],Q[(3&ct)<<4|Ut>>4],Q[Bi],Q[jr])}return ke.join("")},encodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa($):this.encodeByteArray(pe($),j)},decodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?atob($):function($){const j=[];let Q=0,ke=0;for(;Q<$.length;){const oe=$[Q++];if(oe<128)j[ke++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const ct=$[Q++];j[ke++]=String.fromCharCode((31&oe)<<6|63&ct)}else if(oe>239&&oe<365){const Un=((7&oe)<<18|(63&$[Q++])<<12|(63&$[Q++])<<6|63&$[Q++])-65536;j[ke++]=String.fromCharCode(55296+(Un>>10)),j[ke++]=String.fromCharCode(56320+(1023&Un))}else{const ct=$[Q++],qt=$[Q++];j[ke++]=String.fromCharCode((15&oe)<<12|(63&ct)<<6|63&qt)}}return j.join("")}(this.decodeStringToByteArray($,j))},decodeStringToByteArray($,j){this.init_();const Q=j?this.charToByteMapWebSafe_:this.charToByteMap_,ke=[];for(let oe=0;oe<$.length;){const ct=Q[$.charAt(oe++)],Ut=oe<$.length?Q[$.charAt(oe)]:0;++oe;const kn=oe<$.length?Q[$.charAt(oe)]:64;++oe;const Jt=oe<$.length?Q[$.charAt(oe)]:64;if(++oe,null==ct||null==Ut||null==kn||null==Jt)throw new ue;ke.push(ct<<2|Ut>>4),64!==kn&&(ke.push(Ut<<4&240|kn>>2),64!==Jt&&ke.push(kn<<6&192|Jt))}return ke},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class ue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const we=function($){return function($){const j=pe($);return ve.encodeByteArray(j,!0)}($).replace(/\./g,"")},K=function($){try{return ve.decodeString($,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function ie($,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return j}for(const Q in j)!j.hasOwnProperty(Q)||!et(Q)||($[Q]=ie($[Q],j[Q]));return $}function et($){return"__proto__"!==$}const Fe=()=>{try{return function Pe(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if("undefined"==typeof document)return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Q){return}const j=$&&K($[1]);return j&&JSON.parse(j)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},He=()=>{var $;return null===($=Fe())||void 0===$?void 0:$.config},Se=$=>{var j;return null===(j=Fe())||void 0===j?void 0:j[`_${$}`]};class Ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,Q)=>{this.resolve=j,this.reject=Q})}wrapCallback(j){return(Q,ke)=>{Q?this.reject(Q):this.resolve(ke),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(Q):j(Q,ke))}}}function Xe($,j){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ke=j||"demo-project",oe=$.iat||0,ct=$.sub||$.user_id;if(!ct)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const qt=Object.assign({iss:`https://securetoken.google.com/${ke}`,aud:ke,iat:oe,exp:oe+3600,auth_time:oe,sub:ct,user_id:ct,firebase:{sign_in_provider:"custom",identities:{}}},$);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(qt)),""].join(".")}function We(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function le(){var $;const j=null===($=Fe())||void 0===$?void 0:$.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Q){return!1}}function Vt(){return"object"==typeof self&&self.self===self}function Gt(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Mt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bt(){const $=We();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function ks(){return!le()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function se(){try{return"object"==typeof indexedDB}catch($){return!1}}function ne(){return new Promise(($,j)=>{try{let Q=!0;const ke="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(ke);oe.onsuccess=()=>{oe.result.close(),Q||self.indexedDB.deleteDatabase(ke),$(!0)},oe.onupgradeneeded=()=>{Q=!1},oe.onerror=()=>{var ct;j((null===(ct=oe.error)||void 0===ct?void 0:ct.message)||"")}}catch(Q){j(Q)}})}function Ae(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ue extends Error{constructor(j,Q,ke){super(Q),this.code=j,this.customData=ke,this.name="FirebaseError",Object.setPrototypeOf(this,Ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ce.prototype.create)}}class Ce{constructor(j,Q,ke){this.service=j,this.serviceName=Q,this.errors=ke}create(j,...Q){const ke=Q[0]||{},oe=`${this.service}/${j}`,ct=this.errors[j],qt=ct?function vt($,j){return $.replace(Yt,(Q,ke)=>{const oe=j[ke];return null!=oe?String(oe):`<${ke}?>`})}(ct,ke):"Error";return new Ue(oe,`${this.serviceName}: ${qt} (${oe}).`,ke)}}const Yt=/\{\$([^}]+)}/g;function hi($,j){return Object.prototype.hasOwnProperty.call($,j)}function It($){for(const j in $)if(Object.prototype.hasOwnProperty.call($,j))return!1;return!0}function ri($,j){if($===j)return!0;const Q=Object.keys($),ke=Object.keys(j);for(const oe of Q){if(!ke.includes(oe))return!1;const ct=$[oe],qt=j[oe];if(fi(ct)&&fi(qt)){if(!ri(ct,qt))return!1}else if(ct!==qt)return!1}for(const oe of ke)if(!Q.includes(oe))return!1;return!0}function fi($){return null!==$&&"object"==typeof $}function Ic($){const j=[];for(const[Q,ke]of Object.entries($))Array.isArray(ke)?ke.forEach(oe=>{j.push(encodeURIComponent(Q)+"="+encodeURIComponent(oe))}):j.push(encodeURIComponent(Q)+"="+encodeURIComponent(ke));return j.length?"&"+j.join("&"):""}function pi($){const j={};return $.replace(/^\?/,"").split("&").forEach(ke=>{if(ke){const[oe,ct]=ke.split("=");j[decodeURIComponent(oe)]=decodeURIComponent(ct)}}),j}function Li($){const j=$.indexOf("?");if(!j)return"";const Q=$.indexOf("#",j);return $.substring(j,Q>0?Q:void 0)}function wr($,j){const Q=new Wt($,j);return Q.subscribe.bind(Q)}class Wt{constructor(j,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{j(this)}).catch(ke=>{this.error(ke)})}next(j){this.forEachObserver(Q=>{Q.next(j)})}error(j){this.forEachObserver(Q=>{Q.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,Q,ke){let oe;if(void 0===j&&void 0===Q&&void 0===ke)throw new Error("Missing Observer.");oe=function Ht($,j){if("object"!=typeof $||null===$)return!1;for(const Q of j)if(Q in $&&"function"==typeof $[Q])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:Q,complete:ke},void 0===oe.next&&(oe.next=Eo),void 0===oe.error&&(oe.error=Eo),void 0===oe.complete&&(oe.complete=Eo);const ct=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch(qt){}}),this.observers.push(oe),ct}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,j)}sendOne(j,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{Q(this.observers[j])}catch(ke){"undefined"!=typeof console&&console.error&&console.error(ke)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Eo(){}function Io($,j=1e3,Q=2){const ke=j*Math.pow(Q,$),oe=Math.round(.5*ke*(Math.random()-.5)*2);return Math.min(144e5,ke+oe)}function zi($){return $&&$._delegate?$._delegate:$}},4117:(nt,De,L)=>{var h=L(5e3);let te=null;function V(){return te}const ue=new h.OlP("DocumentToken");let Ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function we(){return(0,h.LFG)(q)}()},providedIn:"platform"}),n})();const K=new h.OlP("Location Initialized");let q=(()=>{class n extends Ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){ie()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){ie()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function et(){return new q((0,h.LFG)(ue))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ze(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Fe(n){const e=(0,h.LFG)(ue).location;return new gt((0,h.LFG)(Ie),e&&e.origin||"")}()},providedIn:"root"}),n})();const dt=new h.OlP("appBaseHref");let gt=(()=>{class n extends ye{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Qe(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const l=this.prepareExternalUrl(r+Qe(s));this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){const l=this.prepareExternalUrl(r+Qe(s));this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ie),h.LFG(dt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),He=(()=>{class n extends ye{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Pe(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let l=this.prepareExternalUrl(r+Qe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){let l=this.prepareExternalUrl(r+Qe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ie),h.LFG(dt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t,i){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=ze(We(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Qe(i))}normalize(t){return n.stripTrailingSlash(function Xe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,We(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=Pe,n.stripTrailingSlash=ze,n.\u0275fac=function(t){return new(t||n)(h.LFG(ye),h.LFG(Ie))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ee(){return new Se((0,h.LFG)(ye),(0,h.LFG)(Ie))}()},providedIn:"root"}),n})();function We(n){return n.replace(/\/index.html$/,"")}function Ha(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let ea=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Rl="browser";function Mc(n){return"server"===n}let ju=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new os((0,h.LFG)(ue),window)}),n})();class os{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Fs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Za(this.window.history)||Za(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Za(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class On{}class kc extends class Hu extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fe(n){te||(te=n)}(new kc)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Dp(){return En=En||document.querySelector("base"),En?En.getAttribute("href"):null}();return null==t?null:function Ya(n){Ka=Ka||document.createElement("a"),Ka.setAttribute("href",n);const e=Ka.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){En=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ha(document.cookie,e)}}let Ka,En=null;const yi=new h.OlP("TRANSITION_ID"),Gi=[{provide:h.ip1,useFactory:function Pc(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const i=V(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[yi,ue,h.zs3],multi:!0}];class as{static init(){(0,h.VLi)(new as)}addToWindow(e){h.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(i=>{const r=h.dqk.getAllAngularTestabilities();let s=r.length,l=!1;const u=function(g){l=l||g,s--,0==s&&i(l)};r.forEach(function(g){g.whenStable(u)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Dr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ta=new h.OlP("EventManagerPlugins");let ls=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const l=r[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ta),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class $u{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=V().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Ns=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Qa=(()=>{class n extends Ns{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,r.push(i.appendChild(l))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(mr),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(mr))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function mr(n){V().remove(n)}const Ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},na=/%COMP%/g;function ia(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?ia(n,r,t):(r=r.replace(na,n),t.push(r))}return t}function Ne(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ra=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ti(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case h.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new cs(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case h.ifc.ShadowDom:return new Mo(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=ia(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ls),h.LFG(Qa),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ti{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Ft[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Ft[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,i,r&h.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ne(i)):this.eventManager.addEventListener(e,t,Ne(i))}}class cs extends ti{constructor(e,t,i,r){super(e),this.component=i;const s=ia(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function Rc(n){return"_ngcontent-%COMP%".replace(na,n)}(r+"-"+i.id),this.hostAttr=function zu(n){return"_nghost-%COMP%".replace(na,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Mo extends ti{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ia(r.id,r.styles,[]);for(let l=0;l<s.length;l++){const u=document.createElement("style");u.textContent=s[l],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ir=(()=>{class n extends $u{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Nl=["alt","control","meta","shift"],Ch={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},us={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},or={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sr=(()=>{class n extends $u{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let l="";if(Nl.forEach(g=>{const v=i.indexOf(g);v>-1&&(i.splice(v,1),l+=g+".")}),l+=s,0!=i.length||0===s.length)return null;const u={};return u.domEventName=r,u.fullKey=l,u}static getEventFullKey(t){let i="",r=function Dh(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&us.hasOwnProperty(e)&&(e=us[e]))}return Ch[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Nl.forEach(s=>{s!=r&&or[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Bl=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Rl},{provide:h.g9A,useValue:function ko(){kc.makeCurrent(),as.init()},multi:!0},{provide:ue,useFactory:function Js(){return(0,h.RDi)(document),document},deps:[]}]),Ih=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Xs(){return new h.qLn},deps:[]},{provide:ta,useClass:Ir,multi:!0,deps:[ue,h.R0b,h.Lbi]},{provide:ta,useClass:Sr,multi:!0,deps:[ue]},{provide:ra,useClass:ra,deps:[ls,Qa,h.AFp]},{provide:h.FYo,useExisting:ra},{provide:Ns,useExisting:Qa},{provide:Qa,useClass:Qa,deps:[ue]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:ls,useClass:ls,deps:[ta,h.R0b]},{provide:On,useClass:Dr,deps:[]}];let Po=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:yi,useExisting:h.AFp},Gi]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Ih,imports:[ea,h.hGG]}),n})();"undefined"!=typeof window&&window;var nl=L(3269),ni=L(8996);function Nt(...n){const e=(0,nl.yG)(n);return(0,ni.D)(n,e)}var Ui=L(8306),gi=L(5577),hs=L(576);function xr(n,e){return(0,hs.m)(e)?(0,gi.z)(n,e,1):(0,gi.z)(n,1)}var Hn=L(4482),$n=L(5403);function ai(n,e){return(0,Hn.e)((t,i)=>{let r=0;t.subscribe((0,$n.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}var $t=L(4004);class aa{}class $l{}class _r{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),l=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof _r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new _r;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof _r?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(u=>-1===s.indexOf(u)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class km{encodeKey(e){return Gl(e)}encodeValue(e){return Gl(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const zl=/%(\d[a-f0-9])/gi,Rh={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Gl(n){return encodeURIComponent(n).replace(zl,(e,t)=>{var i;return null!==(i=Rh[t])&&void 0!==i?i:e})}function la(n){return`${n}`}class Ls{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new km,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function il(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[l,u]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],g=t.get(l)||[];g.push(u),t.set(l,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ls({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(la(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(la(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rl{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ca(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Fh(n){return"undefined"!=typeof Blob&&n instanceof Blob}function to(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Oo{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Yu(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new _r),this.context||(this.context=new rl),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const u=t.indexOf("?");this.urlWithParams=t+(-1===u?"?":u<t.length-1?"&":"")+l}}else this.params=new Ls,this.urlWithParams=t}serializeBody(){return null===this.body?null:ca(this.body)||Fh(this.body)||to(this.body)||function xp(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ls?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||to(this.body)?null:Fh(this.body)?this.body.type||null:ca(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ls?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,u=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,w=e.params||this.params;const I=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((M,O)=>M.set(O,e.setHeaders[O]),v)),e.setParams&&(w=Object.keys(e.setParams).reduce((M,O)=>M.set(O,e.setParams[O]),w)),new Oo(i,r,l,{params:w,headers:v,context:I,reportProgress:g,responseType:s,withCredentials:u})}}var Yn=(()=>((Yn=Yn||{})[Yn.Sent=0]="Sent",Yn[Yn.UploadProgress=1]="UploadProgress",Yn[Yn.ResponseHeader=2]="ResponseHeader",Yn[Yn.DownloadProgress=3]="DownloadProgress",Yn[Yn.Response=4]="Response",Yn[Yn.User=5]="User",Yn))();class Nh{constructor(e,t=200,i="OK"){this.headers=e.headers||new _r,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Tn extends Nh{constructor(e={}){super(e),this.type=Yn.ResponseHeader}clone(e={}){return new Tn({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ro extends Nh{constructor(e={}){super(e),this.type=Yn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ro({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class jc extends Nh{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Hc(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let sl=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Oo)s=t;else{let g,v;g=r.headers instanceof _r?r.headers:new _r(r.headers),r.params&&(v=r.params instanceof Ls?r.params:new Ls({fromObject:r.params})),s=new Oo(t,i,void 0!==r.body?r.body:null,{headers:g,context:r.context,params:v,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const l=Nt(s).pipe(xr(g=>this.handler.handle(g)));if(t instanceof Oo||"events"===r.observe)return l;const u=l.pipe(ai(g=>g instanceof Ro));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe((0,$t.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return u.pipe((0,$t.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return u.pipe((0,$t.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return u.pipe((0,$t.U)(g=>g.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Ls).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Hc(r,i))}post(t,i,r={}){return this.request("POST",t,Hc(r,i))}put(t,i,r={}){return this.request("PUT",t,Hc(r,i))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(aa))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class no{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const mi=new h.OlP("HTTP_INTERCEPTORS");let $c=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Qu=/^\)\]\}',?\n/;let Gc=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ui.y(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((O,N)=>r.setRequestHeader(O,N.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const O=t.detectContentTypeHeader();null!==O&&r.setRequestHeader("Content-Type",O)}if(t.responseType){const O=t.responseType.toLowerCase();r.responseType="json"!==O?O:"text"}const s=t.serializeBody();let l=null;const u=()=>{if(null!==l)return l;const O=r.statusText||"OK",N=new _r(r.getAllResponseHeaders()),H=function zn(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return l=new Tn({headers:N,status:r.status,statusText:O,url:H}),l},g=()=>{let{headers:O,status:N,statusText:H,url:Y}=u(),he=null;204!==N&&(he=void 0===r.response?r.responseText:r.response),0===N&&(N=he?200:0);let _e=N>=200&&N<300;if("json"===t.responseType&&"string"==typeof he){const Oe=he;he=he.replace(Qu,"");try{he=""!==he?JSON.parse(he):null}catch(Ge){he=Oe,_e&&(_e=!1,he={error:Ge,text:he})}}_e?(i.next(new Ro({body:he,headers:O,status:N,statusText:H,url:Y||void 0})),i.complete()):i.error(new jc({error:he,headers:O,status:N,statusText:H,url:Y||void 0}))},v=O=>{const{url:N}=u(),H=new jc({error:O,status:r.status||0,statusText:r.statusText||"Unknown Error",url:N||void 0});i.error(H)};let w=!1;const I=O=>{w||(i.next(u()),w=!0);let N={type:Yn.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(N.total=O.total),"text"===t.responseType&&!!r.responseText&&(N.partialText=r.responseText),i.next(N)},M=O=>{let N={type:Yn.UploadProgress,loaded:O.loaded};O.lengthComputable&&(N.total=O.total),i.next(N)};return r.addEventListener("load",g),r.addEventListener("error",v),r.addEventListener("timeout",v),r.addEventListener("abort",v),t.reportProgress&&(r.addEventListener("progress",I),null!==s&&r.upload&&r.upload.addEventListener("progress",M)),r.send(s),i.next({type:Yn.Sent}),()=>{r.removeEventListener("error",v),r.removeEventListener("abort",v),r.removeEventListener("load",g),r.removeEventListener("timeout",v),t.reportProgress&&(r.removeEventListener("progress",I),null!==s&&r.upload&&r.upload.removeEventListener("progress",M)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(On))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Xu=new h.OlP("XSRF_COOKIE_NAME"),Bh=new h.OlP("XSRF_HEADER_NAME");class Ap{}let Kv=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ha(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(h.Lbi),h.LFG(Xu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ha=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ap),h.LFG(Bh))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Mp=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(mi,[]);this.chain=i.reduceRight((r,s)=>new no(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG($l),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),li=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:ha,useClass:$c}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Xu,useValue:t.cookieName}:[],t.headerName?{provide:Bh,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[ha,{provide:mi,useExisting:ha,multi:!0},{provide:Ap,useClass:Kv},{provide:Xu,useValue:"XSRF-TOKEN"},{provide:Bh,useValue:"X-XSRF-TOKEN"}]}),n})(),Ju=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[sl,{provide:aa,useClass:Mp},Gc,{provide:$l,useExisting:Gc}],imports:[[li.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const{isArray:ed}=Array,{getPrototypeOf:Gr,prototype:qr,keys:Uh}=Object;function fa(n){if(1===n.length){const e=n[0];if(ed(e))return{args:e,keys:null};if(function ql(n){return n&&"object"==typeof n&&Gr(n)===qr}(e)){const t=Uh(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var Vs=L(8421);const{isArray:kp}=Array;function jh(n){return(0,$t.U)(e=>function Wc(n,e){return kp(e)?n(...e):n(e)}(n,e))}function td(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}let Oi=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),so=(()=>{class n extends Oi{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=h.n5z(n)))(i||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ci=new h.OlP("NgValueAccessor"),nd={provide:ci,useExisting:(0,h.Gpc)(()=>ga),multi:!0},Wl=new h.OlP("CompositionEventMode");let ga=(()=>{class n extends Oi{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Zc(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Wl,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&h.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[h._Bn([nd]),h.qOj]}),n})();const Gn=new h.OlP("NgValidators"),ji=new h.OlP("NgAsyncValidators");function Ql(n){return function Bs(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function ma(n){return null}function Pp(n){return null!=n}function _i(n){const e=(0,h.QGY)(n)?(0,ni.D)(n):n;return(0,h.CqO)(e),e}function Jl(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ec(n,e){return e.map(t=>t(n))}function tc(n){return n.map(e=>function al(n){return!n.validate}(e)?e:t=>e.validate(t))}function Qc(n){return null!=n?function Yc(n){if(!n)return null;const e=n.filter(Pp);return 0==e.length?null:function(t){return Jl(ec(t,e))}}(tc(n)):null}function _a(n){return null!=n?function rd(n){if(!n)return null;const e=n.filter(Pp);return 0==e.length?null:function(t){return function Hh(...n){const e=(0,nl.jO)(n),{args:t,keys:i}=fa(n),r=new Ui.y(s=>{const{length:l}=t;if(!l)return void s.complete();const u=new Array(l);let g=l,v=l;for(let w=0;w<l;w++){let I=!1;(0,Vs.Xf)(t[w]).subscribe((0,$n.x)(s,M=>{I||(I=!0,v--),u[w]=M},()=>g--,void 0,()=>{(!g||!I)&&(v||s.next(i?td(i,u):u),s.complete())}))}});return e?r.pipe(jh(e)):r}(ec(t,e).map(_i)).pipe((0,$t.U)(Jl))}}(tc(n)):null}function nc(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function rc(n){return n?Array.isArray(n)?n:[n]:[]}function cl(n,e){return Array.isArray(n)?n.includes(e):n===e}function Xc(n,e){const t=rc(e);return rc(n).forEach(r=>{cl(t,r)||t.push(r)}),t}function va(n,e){return rc(e).filter(t=>!cl(n,t))}class sd{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Qc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_a(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Lo extends sd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Hi extends sd{get formDirective(){return null}get path(){return null}}class ya{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}let zh=(()=>{class n extends ya{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lo,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&h.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[h.qOj]}),n})(),ul=(()=>{class n extends ya{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Hi,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&h.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[h.qOj]}),n})();function Us(n,e){dd(n,e),e.valueAccessor.writeValue(n.value),function fd(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&pd(n,e)})}(n,e),function Fm(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Fp(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&pd(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ea(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function wa(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dd(n,e){const t=function ic(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(nc(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function ll(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(nc(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();wa(e._rawValidators,r),wa(e._rawAsyncValidators,r)}function pd(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jt(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Bn="VALID",js="INVALID",Vo="PENDING",Ar="DISABLED";function ms(n){return(Np(n)?n.validators:n)||null}function gd(n){return Array.isArray(n)?Qc(n):n||null}function md(n,e){return(Np(e)?e.asyncValidators:n)||null}function Nm(n){return Array.isArray(n)?_a(n):n||null}function Np(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const eu=n=>n instanceof Ca;function yd(n){return(n=>n instanceof Vp)(n)?n.value:n.getRawValue()}function Lp(n,e){const t=eu(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new h.vHH(1e3,"");if(!i[e])throw new h.vHH(1001,"")}function Lm(n,e){eu(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new h.vHH(1002,"")})}class Wh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=gd(this._rawValidators),this._composedAsyncValidatorFn=Nm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Bn}get invalid(){return this.status===js}get pending(){return this.status==Vo}get disabled(){return this.status===Ar}get enabled(){return this.status!==Ar}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=gd(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Nm(e)}addValidators(e){this.setValidators(Xc(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Xc(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(va(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(va(e,this._rawAsyncValidators))}hasValidator(e){return cl(this._rawValidators,e)}hasAsyncValidator(e){return cl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Vo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ar,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Bn,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bn||this.status===Vo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ar:Bn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Vo,this._hasOwnPendingAsyncValidator=!0;const t=_i(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function gs(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=eu(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof Vm)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Ar:this.errors?js:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vo)?Vo:this._anyControlsHaveStatus(js)?js:Bn}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Np(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Vp extends Wh{constructor(e=null,t,i){super(ms(t),md(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Np(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jt(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jt(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ca extends Wh{constructor(e,t,i){super(ms(t),md(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Lm(this,e),Object.keys(e).forEach(i=>{Lp(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=yd(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Vm extends Wh{constructor(e,t,i){super(ms(t),md(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Lm(this,e),e.forEach((i,r)=>{Lp(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>yd(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Bp={provide:Hi,useExisting:(0,h.Gpc)(()=>oc)},bd=(()=>Promise.resolve(null))();let oc=(()=>{class n extends Hi{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new Ca({},Qc(t),_a(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){bd.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Us(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){bd.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){bd.then(()=>{const i=this._findContainer(t.path),r=new Ca({});(function C(n,e){dd(n,e)})(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){bd.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){bd.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function Ze(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Gn,10),h.Y36(ji,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&h.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Bp]),h.qOj]}),n})();const Kh={provide:Lo,useExisting:(0,h.Gpc)(()=>tu)},Ed=(()=>Promise.resolve(null))();let tu=(()=>{class n extends Lo{constructor(t,i,r,s,l){super(),this._changeDetectorRef=l,this.control=new Vp,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function ut(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===ga?t=s:function Je(n){return Object.getPrototypeOf(n.constructor)===so}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function me(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Us(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Ed.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;Ed.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function bi(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Hi,9),h.Y36(Gn,10),h.Y36(ji,10),h.Y36(ci,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([Kh]),h.qOj,h.TTD]}),n})(),Cd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Um=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Td=new h.OlP("NgModelWithFormControlWarning");let Ia=(()=>{class n{constructor(){this._validator=ma}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):ma,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const ay={provide:Gn,useExisting:(0,h.Gpc)(()=>pl),multi:!0};let au,pl=(()=>{class n extends Ia{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function sy(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>Ql}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=h.n5z(n)))(i||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&h.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([ay]),h.qOj]}),n})(),uy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Um]]}),n})(),Bo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[uy]}),n})(),kd=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Td,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[uy]}),n})();try{au="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){au=!1}let p,F,Ve,lo=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function jn(n){return n===Rl}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!au)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function E(n){return function m(){if(null==p&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>p=!0}))}finally{p=p||!1}return p}()?n:!!n.capture}function z(){if(null==F){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return F=!1,F;if("scrollBehavior"in document.documentElement.style)F=!0;else{const n=Element.prototype.scrollTo;F=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return F}function ot(n){if(function Ye(){if(null==Ve){const n="undefined"!=typeof document?document.head:null;Ve=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Ve}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function ln(n){return n.composedPath?n.composedPath()[0]:n.target}function kr(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function Zp(n){return Array.isArray(n)?n:[n]}function Ei(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Ci(n){return n instanceof h.SBq?n.nativeElement:n}var dn=L(7579);class Pr extends dn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}var Fd=L(4671);function YT(n,e){return n===e}var yE=L(5032);function Ey(n){return(0,Hn.e)((e,t)=>{(0,Vs.Xf)(n).subscribe((0,$n.x)(t,()=>t.complete(),yE.Z)),!t.closed&&e.subscribe(t)})}const kE="cdk-high-contrast-black-on-white",PE="cdk-high-contrast-white-on-black",Jm="cdk-high-contrast-active";let sf=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Jm),t.remove(kE),t.remove(PE),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(Jm),t.add(kE)):2===i&&(t.add(Jm),t.add(PE))}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lo),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var jo=L(727),ng=L(4986),af=L(3532);function Iy(n=0,e,t=ng.P){let i=-1;return null!=e&&((0,af.K)(e)?t=e:i=e),new Ui.y(r=>{let s=function mx(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},s)})}var OE=L(4408);const Hs={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Hs;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new jo.w0(()=>null==t?void 0:t(r))},requestAnimationFrame(...n){const{delegate:e}=Hs;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Hs;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var Ty=L(7565);const xy=new class RE extends Ty.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Sy extends OE.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Hs.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Hs.cancelAnimationFrame(t),e._scheduled=void 0)}});var Nd=L(6451),yx=L(1144);const bx=["addListener","removeListener"],wx=["addEventListener","removeEventListener"],FE=["on","off"];function ig(n,e,t,i){if((0,hs.m)(t)&&(i=t,t=void 0),i)return ig(n,e,t).pipe(jh(i));const[r,s]=function NF(n){return(0,hs.m)(n.addEventListener)&&(0,hs.m)(n.removeEventListener)}(n)?wx.map(l=>u=>n[l](e,u,t)):function Ex(n){return(0,hs.m)(n.addListener)&&(0,hs.m)(n.removeListener)}(n)?bx.map(Ay(n,e)):function Cx(n){return(0,hs.m)(n.on)&&(0,hs.m)(n.off)}(n)?FE.map(Ay(n,e)):[];if(!r&&(0,yx.z)(n))return(0,gi.z)(l=>ig(l,e,t))((0,Vs.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Ui.y(l=>{const u=(...g)=>l.next(1<g.length?g:g[0]);return r(u),()=>s(u)})}function Ay(n,e){return t=>i=>n[t](e,i)}let rg,LF=1;const e_={};function My(n){return n in e_&&(delete e_[n],!0)}const NE={setImmediate(n){const e=LF++;return e_[e]=!0,rg||(rg=Promise.resolve()),rg.then(()=>My(e)&&n()),e},clearImmediate(n){My(n)}},{setImmediate:xa,clearImmediate:VF}=NE,ky={setImmediate(...n){const{delegate:e}=ky;return((null==e?void 0:e.setImmediate)||xa)(...n)},clearImmediate(n){const{delegate:e}=ky;return((null==e?void 0:e.clearImmediate)||VF)(n)},delegate:void 0};new class VE extends Ty.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class LE extends OE.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=ky.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(ky.clearImmediate(t),e._scheduled=void 0)}});function Py(n,e=ng.z){return function UF(n){return(0,Hn.e)((e,t)=>{let i=!1,r=null,s=null,l=!1;const u=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const v=r;r=null,t.next(v)}l&&t.complete()},g=()=>{s=null,l&&t.complete()};e.subscribe((0,$n.x)(t,v=>{i=!0,r=v,s||(0,Vs.Xf)(n(v)).subscribe(s=(0,$n.x)(t,u,g))},()=>{l=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>Iy(n,e))}const Oy=new h.OlP("cdk-dir-doc",{providedIn:"root",factory:function Dx(){return(0,h.f3M)(ue)}}),Ry=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Fy=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new h.vpe,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function Ix(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Ry.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Oy,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Tx=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new dn.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ui.y(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(Py(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Nt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(ai(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Ci(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ig(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(lo),h.LFG(ue,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uu=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new dn.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Py(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lo),h.LFG(h.R0b),h.LFG(ue,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Ld=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[sg,bl],sg,bl]}),n})();function du(n,e,t){for(let i in e)if(e.hasOwnProperty(i)){const r=e[i];r?n.setProperty(i,r,(null==t?void 0:t.has(i))?"important":""):n.removeProperty(i)}return n}function Ma(n,e){const t=e?"":"none";du(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function Vd(n,e,t){du(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function uc(n,e){return e&&"none"!=e?n+" "+e:n}function Bd(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function hu(n,e){return n.getPropertyValue(e).split(",").map(i=>i.trim())}function n_(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function i_(n,e,t){const{top:i,bottom:r,left:s,right:l}=n;return t>=i&&t<=r&&e>=s&&e<=l}function uf(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function Vy(n,e,t,i){const{top:r,right:s,bottom:l,left:u,width:g,height:v}=n,w=g*e,I=v*e;return i>r-I&&i<l+I&&t>u-w&&t<s+w}class By{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:n_(t)})})}handleScroll(e){const t=ln(e),i=this.positions.get(t);if(!i)return null;const r=i.scrollPosition;let s,l;if(t===this._document){const v=this.getViewportScrollPosition();s=v.top,l=v.left}else s=t.scrollTop,l=t.scrollLeft;const u=r.top-s,g=r.left-l;return this.positions.forEach((v,w)=>{v.clientRect&&t!==w&&t.contains(w)&&uf(v.clientRect,u,g)}),r.top=s,r.left=l,{top:u,left:g}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Uy(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<t.length;r++)t[r].removeAttribute("id");return"canvas"===i?$E(n,e):("input"===i||"select"===i||"textarea"===i)&&Hy(n,e),jy("canvas",n,e,$E),jy("input, textarea, select",n,e,Hy),e}function jy(n,e,t,i){const r=e.querySelectorAll(n);if(r.length){const s=t.querySelectorAll(n);for(let l=0;l<r.length;l++)i(r[l],s[l])}}let HE=0;function Hy(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${HE++}`)}function $E(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch(i){}}const zE=E({passive:!0}),r_=E({passive:!1}),s_=new Set(["position"]);class Ax{constructor(e,t,i,r,s,l){this._config=t,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=l,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new dn.x,this._pointerMoveSubscription=jo.w0.EMPTY,this._pointerUpSubscription=jo.w0.EMPTY,this._scrollSubscription=jo.w0.EMPTY,this._resizeSubscription=jo.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new dn.x,this.started=new dn.x,this.released=new dn.x,this.ended=new dn.x,this.entered=new dn.x,this.exited=new dn.x,this.dropped=new dn.x,this.moved=this._moveEvents,this._pointerDown=u=>{if(this.beforeStarted.next(),this._handles.length){const g=this._getTargetHandle(u);g&&!this._disabledHandles.has(g)&&!this.disabled&&this._initializeDragSequence(g,u)}else this.disabled||this._initializeDragSequence(this._rootElement,u)},this._pointerMove=u=>{const g=this._getPointerPositionOnPage(u);if(!this._hasStartedDragging){if(Math.abs(g.x-this._pickupPositionOnPage.x)+Math.abs(g.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const O=Date.now()>=this._dragStartTime+this._getDragStartDelay(u),N=this._dropContainer;if(!O)return void this._endDragSequence(u);(!N||!N.isDragging()&&!N.isReceiving())&&(u.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(u)))}return}u.preventDefault();const v=this._getConstrainedPointerPosition(g);if(this._hasMoved=!0,this._lastKnownPointerPosition=g,this._updatePointerDirectionDelta(v),this._dropContainer)this._updateActiveDropContainer(v,g);else{const w=this._activeTransform;w.x=v.x-this._pickupPositionOnPage.x+this._passiveTransform.x,w.y=v.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(w.x,w.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:v,event:u,distance:this._getDragDistance(v),delta:this._pointerDirectionDelta})})},this._pointerUp=u=>{this._endDragSequence(u)},this._nativeDragStart=u=>{if(this._handles.length){const g=this._getTargetHandle(u);g&&!this._disabledHandles.has(g)&&!this.disabled&&u.preventDefault()}else this.disabled||u.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new By(i),l.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=function Ta(n){return null!=n&&"false"!=`${n}`}(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(i=>Ma(i,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>Ci(i)),this._handles.forEach(i=>Ma(i,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Ci(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,r_),t.addEventListener("touchstart",this._pointerDown,zE),t.addEventListener("dragstart",this._nativeDragStart,r_)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Ci(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){var e,t;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(e=this._rootElement)||void 0===e||e.remove()),null===(t=this._anchor)||void 0===t||t.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Ma(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Ma(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var e,t;null===(e=this._preview)||void 0===e||e.remove(),null===(t=this._previewRef)||void 0===t||t.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var e,t;null===(e=this._placeholder)||void 0===e||e.remove(),null===(t=this._placeholderRef)||void 0===t||t.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){ag(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const i=this._rootElement,r=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),l=this._anchor=this._anchor||this._document.createComment(""),u=this._getShadowRoot();r.insertBefore(l,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),Vd(i,!1,s_),this._document.body.appendChild(r.replaceChild(s,i)),this._getPreviewInsertionPoint(r,u).appendChild(this._preview),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const i=this.isDragging(),r=ag(t),s=!r&&0!==t.button,l=this._rootElement,u=ln(t),g=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),v=r?function Jp(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(t):function vl(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(t);if(u&&u.draggable&&"mousedown"===t.type&&t.preventDefault(),i||s||g||v)return;if(this._handles.length){const M=l.style;this._rootElementTapHighlight=M.webkitTapHighlightColor||"",M.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(M=>this._updateOnScroll(M)),this._boundaryElement&&(this._boundaryRect=n_(this._boundaryElement));const w=this._previewTemplate;this._pickupPositionInElement=w&&w.template&&!w.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const I=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:I.x,y:I.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){Vd(this._rootElement,!0,s_),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,i=t.getItemIndex(this),r=this._getPointerPositionOnPage(e),s=this._getDragDistance(r),l=t._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:l,distance:s,dropPoint:r}),t.drop(this,i,this._initialIndex,this._initialContainer,l,s,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,i=e?e.template:null;let r;if(i&&e){const s=e.matchSize?this._rootElement.getBoundingClientRect():null,l=e.viewContainer.createEmbeddedView(i,e.context);l.detectChanges(),r=zy(l,this._document),this._previewRef=l,e.matchSize?GE(r,s):r.style.transform=o_(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const s=this._rootElement;r=Uy(s),GE(r,s.getBoundingClientRect()),this._initialTransform&&(r.style.transform=this._initialTransform)}return du(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},s_),Ma(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>r.classList.add(s)):r.classList.add(t)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function cf(n){const e=getComputedStyle(n),t=hu(e,"transition-property"),i=t.find(u=>"transform"===u||"all"===u);if(!i)return 0;const r=t.indexOf(i),s=hu(e,"transition-duration"),l=hu(e,"transition-delay");return Bd(s[r])+Bd(l[r])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const r=l=>{var u;(!l||ln(l)===this._preview&&"transform"===l.propertyName)&&(null===(u=this._preview)||void 0===u||u.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,1.5*t);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=zy(this._placeholderRef,this._document)):i=Uy(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(e,t){const i=this._rootElement.getBoundingClientRect(),r=e===this._rootElement?null:e,s=r?r.getBoundingClientRect():i,l=ag(t)?t.targetTouches[0]:t,u=this._getViewportScrollPosition();return{x:s.left-i.left+(l.pageX-s.left-u.left),y:s.top-i.top+(l.pageY-s.top-u.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),i=ag(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=i.pageX-t.left,s=i.pageY-t.top;if(this._ownerSVGElement){const l=this._ownerSVGElement.getScreenCTM();if(l){const u=this._ownerSVGElement.createSVGPoint();return u.x=r,u.y=s,u.matrixTransform(l.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:r}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===t?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:l}=this._pickupPositionInElement,u=this._boundaryRect,{width:g,height:v}=this._getPreviewRect(),w=u.top+l,I=u.bottom-(v-l);i=$y(i,u.left+s,u.right-(g-s)),r=$y(r,w,I)}return{x:i,y:r}}_updatePointerDirectionDelta(e){const{x:t,y:i}=e,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,l=Math.abs(t-s.x),u=Math.abs(i-s.y);return l>this._config.pointerDirectionChangeThreshold&&(r.x=t>s.x?1:-1,s.x=t),u>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Ma(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,r_),e.removeEventListener("touchstart",this._pointerDown,zE),e.removeEventListener("dragstart",this._nativeDragStart,r_)}_applyRootElementTransform(e,t){const i=o_(e,t),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=uc(i,this._initialTransform)}_applyPreviewTransform(e,t){var i;const r=(null===(i=this._previewTemplate)||void 0===i?void 0:i.template)?void 0:this._initialTransform,s=o_(e,t);this._preview.style.transform=uc(s,r)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const s=i.left-r.left,l=r.right-i.right,u=i.top-r.top,g=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),l>0&&(e-=l)):e=0,i.height>r.height?(u>0&&(t+=u),g>0&&(t-=g)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:ag(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const i=ln(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&uf(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var e;return(null===(e=this._parentPositions.positions.get(this._document))||void 0===e?void 0:e.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=ot(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const i=this._previewContainer||"global";if("parent"===i)return e;if("global"===i){const r=this._document;return t||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Ci(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function o_(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function $y(n,e,t){return Math.max(e,Math.min(t,n))}function ag(n){return"t"===n.type[0]}function zy(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const i=e.createElement("div");return t.forEach(r=>i.appendChild(r)),i}function GE(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=o_(e.left,e.top)}function Ud(n,e){return Math.max(0,Math.min(e,n))}class qF{constructor(e,t,i,r,s){this._dragDropRegistry=t,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new dn.x,this.entered=new dn.x,this.exited=new dn.x,this.dropped=new dn.x,this.sorted=new dn.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=jo.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new dn.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function _x(n=0,e=ng.z){return n<0&&(n=0),Iy(n,n,e)}(0,xy).pipe(Ey(this._stopScrollTimers)).subscribe(()=>{const l=this._scrollNode,u=this.autoScrollStep;1===this._verticalScrollDirection?l.scrollBy(0,-u):2===this._verticalScrollDirection&&l.scrollBy(0,u),1===this._horizontalScrollDirection?l.scrollBy(-u,0):2===this._horizontalScrollDirection&&l.scrollBy(u,0)})},this.element=Ci(e),this._document=i,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new By(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,i,r){let s;this._draggingStarted(),null==r?(s=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===s&&(s=this._getItemIndexFromPointerPosition(e,t,i))):s=r;const l=this._activeDraggables,u=l.indexOf(e),g=e.getPlaceholderElement();let v=l[s];if(v===e&&(v=l[s+1]),!v&&(null==s||-1===s||s<l.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(v=l[0]),u>-1&&l.splice(u,1),v&&!this._dragDropRegistry.isDragging(v)){const w=v.getRootElement();w.parentElement.insertBefore(g,w),l.splice(s,0,e)}else Ci(this.element).appendChild(g),l.push(e);g.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,r,s,l,u){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:l,dropPoint:u})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(r=>r.isDragging()).every(r=>-1===e.indexOf(r))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=Ci(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,r){if(this.sortingDisabled||!this._clientRect||!Vy(this._clientRect,.05,t,i))return;const s=this._itemPositions,l=this._getItemIndexFromPointerPosition(e,t,i,r);if(-1===l&&s.length>0)return;const u="horizontal"===this._orientation,g=s.findIndex(Y=>Y.drag===e),v=s[l],I=v.clientRect,M=g>l?1:-1,O=this._getItemOffsetPx(s[g].clientRect,I,M),N=this._getSiblingOffsetPx(g,s,M),H=s.slice();(function Mx(n,e,t){const i=Ud(e,n.length-1),r=Ud(t,n.length-1);if(i===r)return;const s=n[i],l=r<i?-1:1;for(let u=i;u!==r;u+=l)n[u]=n[u+l];n[r]=s})(s,g,l),this.sorted.next({previousIndex:g,currentIndex:l,container:this,item:e}),s.forEach((Y,he)=>{if(H[he]===Y)return;const _e=Y.drag===e,Oe=_e?O:N,Ge=_e?e.getPlaceholderElement():Y.drag.getRootElement();Y.offset+=Oe,u?(Ge.style.transform=uc(`translate3d(${Math.round(Y.offset)}px, 0, 0)`,Y.initialTransform),uf(Y.clientRect,0,Oe)):(Ge.style.transform=uc(`translate3d(0, ${Math.round(Y.offset)}px, 0)`,Y.initialTransform),uf(Y.clientRect,Oe,0))}),this._previousSwap.overlaps=i_(I,t,i),this._previousSwap.drag=v.drag,this._previousSwap.delta=u?r.x:r.y}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,r=0,s=0;if(this._parentPositions.positions.forEach((l,u)=>{u===this._document||!l.clientRect||i||Vy(l.clientRect,.05,e,t)&&([r,s]=function Ox(n,e,t,i){const r=kx(e,i),s=Px(e,t);let l=0,u=0;if(r){const g=n.scrollTop;1===r?g>0&&(l=1):n.scrollHeight-g>n.clientHeight&&(l=2)}if(s){const g=n.scrollLeft;1===s?g>0&&(u=1):n.scrollWidth-g>n.clientWidth&&(u=2)}return[l,u]}(u,l.clientRect,e,t),(r||s)&&(i=u))}),!r&&!s){const{width:l,height:u}=this._viewportRuler.getViewportSize(),g={width:l,height:u,top:0,right:l,bottom:u,left:0};r=kx(g,t),s=Px(g,e),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Ci(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Ci(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:n_(i)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const e=Ci(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=>{var i;const r=t.getRootElement();if(r){const s=null===(i=this._itemPositions.find(l=>l.drag===t))||void 0===i?void 0:i.initialTransform;r.style.transform=s||""}}),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,i){const r="horizontal"===this._orientation,s=t[e].clientRect,l=t[e+-1*i];let u=s[r?"width":"height"]*i;if(l){const g=r?"left":"top",v=r?"right":"bottom";-1===i?u-=l.clientRect[g]-s[v]:u+=s[g]-l.clientRect[v]}return u}_getItemOffsetPx(e,t,i){const r="horizontal"===this._orientation;let s=r?t.left-e.left:t.top-e.top;return-1===i&&(s+=r?t.width-e.width:t.height-e.height),s}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,r="horizontal"===this._orientation;if(i[0].drag!==this._activeDraggables[0]){const l=i[i.length-1].clientRect;return r?e>=l.right:t>=l.bottom}{const l=i[0].clientRect;return r?e<=l.left:t<=l.top}}_getItemIndexFromPointerPosition(e,t,i,r){const s="horizontal"===this._orientation,l=this._itemPositions.findIndex(({drag:u,clientRect:g})=>{if(u===e)return!1;if(r){const v=s?r.x:r.y;if(u===this._previousSwap.drag&&this._previousSwap.overlaps&&v===this._previousSwap.delta)return!1}return s?t>=Math.floor(g.left)&&t<Math.floor(g.right):i>=Math.floor(g.top)&&i<Math.floor(g.bottom)});return-1!==l&&this.sortPredicate(l,e,this)?l:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,t){return null!=this._clientRect&&i_(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(r=>r._canReceive(e,t,i))}_canReceive(e,t,i){if(!this._clientRect||!i_(this._clientRect,t,i)||!this.enterPredicate(e,this))return!1;const r=this._getShadowRoot().elementFromPoint(t,i);if(!r)return!1;const s=Ci(this.element);return r===s||s.contains(r)}_startReceiving(e,t){const i=this._activeSiblings;!i.has(e)&&t.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&(this._itemPositions.forEach(({clientRect:i})=>{uf(i,t.top,t.left)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=ot(Ci(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._activeDraggables.filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function kx(n,e){const{top:t,bottom:i,height:r}=n,s=.05*r;return e>=t-s&&e<=t+s?1:e>=i-s&&e<=i+s?2:0}function Px(n,e){const{left:t,right:i,width:r}=n,s=.05*r;return e>=t-s&&e<=t+s?1:e>=i-s&&e<=i+s?2:0}const lg=E({passive:!1,capture:!0});let WF=(()=>{class n{constructor(t,i){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new dn.x,this.pointerUp=new dn.x,this.scroll=new dn.x,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,lg)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,lg)}startDragging(t,i){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:lg}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:lg}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,l)=>{this._document.addEventListener(l,s.handler,s.options)})})}}stopDragging(t){const i=this._activeDragInstances.indexOf(t);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const i=[this.scroll];return t&&t!==this._document&&i.push(new Ui.y(r=>this._ngZone.runOutsideAngular(()=>{const l=u=>{this._activeDragInstances.length&&r.next(u)};return t.addEventListener("scroll",l,!0),()=>{t.removeEventListener("scroll",l,!0)}}))),(0,Nd.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,i)=>{this._document.removeEventListener(i,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rx={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let df=(()=>{class n{constructor(t,i,r,s){this._document=t,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(t,i=Rx){return new Ax(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new qF(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(h.R0b),h.LFG(uu),h.LFG(WF))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[df],imports:[bl]}),n})();const d_=new h.OlP("mat-sanity-checks",{providedIn:"root",factory:function u_(){return!0}});let Or=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!kr()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(sf),h.LFG(d_,8),h.LFG(ue))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[sg],sg]}),n})(),Ky=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Or],Or]}),n})(),sC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Or]]}),n})(),co=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[rC,ea,Or,sC]]}),n})();class aC{}const yr="*";function Xy(n,e=null){return{type:2,steps:n,options:e}}function fu(n){return{type:6,styles:n,offset:null}}function Jy(n){Promise.resolve(null).then(n)}class ff{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Jy(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class dg{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?Jy(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,u)=>Math.max(l,u.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const mn=!1;function g_(n){return new h.vHH(3e3,mn)}function IC(){return"undefined"!=typeof window&&void 0!==window.document}function fg(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function dc(n){switch(n.length){case 0:return new ff;case 1:return n[0];default:return new dg(n)}}function pu(n,e,t,i,r={},s={}){const l=[],u=[];let g=-1,v=null;if(i.forEach(w=>{const I=w.offset,M=I==g,O=M&&v||{};Object.keys(w).forEach(N=>{let H=N,Y=w[N];if("offset"!==N)switch(H=e.normalizePropertyName(H,l),Y){case"!":Y=r[N];break;case yr:Y=s[N];break;default:Y=e.normalizeStyleValue(N,H,Y,l)}O[H]=Y}),M||u.push(O),v=O,g=I}),l.length)throw function bA(n){return new h.vHH(3502,mn)}();return u}function n0(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&r0(t,"start",n)));break;case"done":n.onDone(()=>i(t&&r0(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&r0(t,"destroy",n)))}}function r0(n,e,t){const i=t.totalTime,s=gu(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function gu(n,e,t,i,r="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!l}}function Ho(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function m_(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let SC=(n,e)=>!1,s0=(n,e,t)=>[],o0=null;function TC(n){const e=n.parentNode||n.host;return e===o0?null:e}(fg()||"undefined"!=typeof Element)&&(IC()?(o0=(()=>document.documentElement)(),SC=(n,e)=>{for(;e;){if(e===n)return!0;e=TC(e)}return!1}):SC=(n,e)=>n.contains(e),s0=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let jd=null,xC=!1;function pg(n){jd||(jd=function SA(){return"undefined"!=typeof document?document.body:null}()||{},xC=!!jd.style&&"WebkitAppearance"in jd.style);let e=!0;return jd.style&&!function IA(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in jd.style,!e&&xC&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in jd.style)),e}const gg=SC,mg=s0;let TA=(()=>{class n{validateStyleProperty(t){return pg(t)}matchesElement(t,i){return!1}containsElement(t,i){return gg(t,i)}getParentElement(t){return TC(t)}query(t,i,r){return mg(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,l,u=[],g){return new ff(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),__=(()=>{class n{}return n.NOOP=new TA,n})();const v_="ng-enter",_g="ng-leave",vg="ng-trigger",y_=".ng-trigger",kC="ng-animating",a0=".ng-animating";function ka(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:l0(parseFloat(e[1]),e[2])}function l0(n,e){return"s"===e?1e3*n:n}function b_(n,e,t){return n.hasOwnProperty("duration")?n:function AA(n,e,t){let r,s=0,l="";if("string"==typeof n){const u=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===u)return e.push(g_()),{duration:0,delay:0,easing:""};r=l0(parseFloat(u[1]),u[2]);const g=u[3];null!=g&&(s=l0(parseFloat(g),u[4]));const v=u[5];v&&(l=v)}else r=n;if(!t){let u=!1,g=e.length;r<0&&(e.push(function t0(){return new h.vHH(3100,mn)}()),u=!0),s<0&&(e.push(function uC(){return new h.vHH(3101,mn)}()),u=!0),u&&e.splice(g,0,g_())}return{duration:r,delay:s,easing:l}}(n,e,t)}function hc(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function fc(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else hc(n,t);return t}function u0(n,e,t){return t?e+":"+t+";":""}function PC(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=u0(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=u0(0,PA(t),n.style[t]));n.setAttribute("style",e)}function $s(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=w_(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),fg()&&PC(n))}function Pa(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=w_(t);n.style[i]=""}),fg()&&PC(n))}function yg(n){return Array.isArray(n)?1==n.length?n[0]:Xy(n):n}const d0=new RegExp("{{\\s*(.+?)\\s*}}","g");function h0(n){let e=[];if("string"==typeof n){let t;for(;t=d0.exec(n);)e.push(t[1]);d0.lastIndex=0}return e}function bg(n,e,t){const i=n.toString(),r=i.replace(d0,(s,l)=>{let u=e[l];return e.hasOwnProperty(l)||(t.push(function hC(n){return new h.vHH(3003,mn)}()),u=""),u.toString()});return r==i?n:r}function wg(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const kA=/-+([a-z0-9])/g;function w_(n){return n.replace(kA,(...e)=>e[1].toUpperCase())}function PA(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function $o(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function fC(n){return new h.vHH(3004,mn)}()}}function RA(n,e){return window.getComputedStyle(n)[e]}function VA(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function BA(n,e,t){if(":"==n[0]){const g=function UA(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function mA(n){return new h.vHH(3016,mn)}()),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function gA(n){return new h.vHH(3015,mn)}()),e;const r=i[1],s=i[2],l=i[3];e.push(OC(r,l));"<"==s[0]&&!("*"==r&&"*"==l)&&e.push(OC(l,r))}(i,t,e)):t.push(n),t}const I_=new Set(["true","1"]),Cg=new Set(["false","0"]);function OC(n,e){const t=I_.has(n)||Cg.has(n),i=I_.has(e)||Cg.has(e);return(r,s)=>{let l="*"==n||n==r,u="*"==e||e==s;return!l&&t&&"boolean"==typeof r&&(l=r?I_.has(n):Cg.has(n)),!u&&i&&"boolean"==typeof s&&(u=s?I_.has(e):Cg.has(e)),l&&u}}const pf=new RegExp("s*:selfs*,?","g");function p0(n,e,t,i){return new jA(n).build(e,t,i)}class jA{constructor(e){this._driver=e}build(e,t,i){const r=new NC(t);this._resetContextStyleTimingState(r);const s=$o(this,yg(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function gC(){return new h.vHH(3006,mn)}()),e.definitions.forEach(u=>{if(this._resetContextStyleTimingState(t),0==u.type){const g=u,v=g.name;v.toString().split(/\s*,\s*/).forEach(w=>{g.name=w,s.push(this.visitState(g,t))}),g.name=v}else if(1==u.type){const g=this.visitTransition(u,t);i+=g.queryCount,r+=g.depCount,l.push(g)}else t.errors.push(function mC(){return new h.vHH(3007,mn)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,l=r||{};i.styles.forEach(u=>{if(gf(u)){const g=u;Object.keys(g).forEach(v=>{h0(g[v]).forEach(w=>{l.hasOwnProperty(w)||s.add(w)})})}}),s.size&&(wg(s.values()),t.errors.push(function _C(n,e){return new h.vHH(3008,mn)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=$o(this,yg(e.animation),t);return{type:1,matchers:VA(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:mu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>$o(this,i,t)),options:mu(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(l=>{t.currentTime=i;const u=$o(this,l,t);return r=Math.max(r,t.currentTime),u});return t.currentTime=r,{type:3,steps:s,options:mu(e.options)}}visitAnimate(e,t){const i=function zA(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return S_(b_(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=S_(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=b_(t,e);return S_(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:fu({});if(5==s.type)r=this.visitKeyframes(s,t);else{let l=e.styles,u=!1;if(!l){u=!0;const v={};i.easing&&(v.easing=i.easing),l=fu(v)}t.currentTime+=i.duration+i.delay;const g=this.visitStyle(l,t);g.isEmptyStep=u,r=g}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==yr?i.push(l):t.errors.push(function aA(n){return new h.vHH(3002,mn)}()):i.push(l)}):i.push(e.styles);let r=!1,s=null;return i.forEach(l=>{if(gf(l)){const u=l,g=u.easing;if(g&&(s=g,delete u.easing),!r)for(let v in u)if(u[v].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(u=>{if(!this._driver.validateStyleProperty(u))return delete l[u],void t.unsupportedCSSPropertiesFound.add(u);const g=t.collectedStyles[t.currentQuerySelector],v=g[u];let w=!0;v&&(s!=r&&s>=v.startTime&&r<=v.endTime&&(t.errors.push(function lA(n,e,t,i,r){return new h.vHH(3010,mn)}()),w=!1),s=v.startTime),w&&(g[u]={startTime:s,endTime:r}),t.options&&function MA(n,e,t){const i=e.params||{},r=h0(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function dC(n){return new h.vHH(3001,mn)}())})}(l[u],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function cA(){return new h.vHH(3011,mn)}()),i;let s=0;const l=[];let u=!1,g=!1,v=0;const w=e.steps.map(he=>{const _e=this._makeStyleAst(he,t);let Oe=null!=_e.offset?_e.offset:function $A(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(gf(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(gf(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(_e.styles),Ge=0;return null!=Oe&&(s++,Ge=_e.offset=Oe),g=g||Ge<0||Ge>1,u=u||Ge<v,v=Ge,l.push(Ge),_e});g&&t.errors.push(function uA(){return new h.vHH(3012,mn)}()),u&&t.errors.push(function dA(){return new h.vHH(3200,mn)}());const I=e.steps.length;let M=0;s>0&&s<I?t.errors.push(function hA(){return new h.vHH(3202,mn)}()):0==s&&(M=1/(I-1));const O=I-1,N=t.currentTime,H=t.currentAnimateTimings,Y=H.duration;return w.forEach((he,_e)=>{const Oe=M>0?_e==O?1:M*_e:l[_e],Ge=Oe*Y;t.currentTime=N+H.delay+Ge,H.duration=Ge,this._validateStyleAst(he,t),he.offset=Oe,i.styles.push(he)}),i}visitReference(e,t){return{type:8,animation:$o(this,yg(e.animation),t),options:mu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:mu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:mu(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function FC(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(pf,"")),n=n.replace(/@\*/g,y_).replace(/@\w+/g,t=>y_+"-"+t.substr(1)).replace(/:animating/g,a0),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Ho(t.collectedStyles,t.currentQuerySelector,{});const u=$o(this,yg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:u,originalSelector:e.selector,options:mu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function fA(){return new h.vHH(3013,mn)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:b_(e.timings,t.errors,!0);return{type:12,animation:$o(this,yg(e.animation),t),timings:i,options:null}}}class NC{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function gf(n){return!Array.isArray(n)&&"object"==typeof n}function mu(n){return n?(n=hc(n)).params&&(n.params=function HA(n){return n?hc(n):null}(n.params)):n={},n}function S_(n,e,t){return{duration:n,delay:e,easing:t}}function m0(n,e,t,i,r,s,l=null,u=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:u}}class T_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const qA=new RegExp(":enter","g"),WA=new RegExp(":leave","g");function v0(n,e,t,i,r,s={},l={},u,g,v=[]){return(new ZA).buildKeyframes(n,e,t,i,r,s,l,u,g,v)}class ZA{buildKeyframes(e,t,i,r,s,l,u,g,v,w=[]){v=v||new T_;const I=new y0(e,t,v,r,s,w,[]);I.options=g,I.currentTimeline.setStyles([l],null,I.errors,g),$o(this,i,I);const M=I.timelines.filter(O=>O.containsAnimation());if(Object.keys(u).length){let O;for(let N=M.length-1;N>=0;N--){const H=M[N];if(H.element===t){O=H;break}}O&&!O.allowOnlyTimelineStyles()&&O.setStyles([u],null,I.errors,g)}return M.length?M.map(O=>O.buildKeyframes()):[m0(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const l=null!=i.duration?ka(i.duration):null,u=null!=i.delay?ka(i.delay):null;return 0!==l&&e.forEach(g=>{const v=t.appendInstructionToTimeline(g,l,u);s=Math.max(s,v.duration+v.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),$o(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=x_);const l=ka(s.delay);r.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>$o(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ka(e.options.delay):0;e.steps.forEach(l=>{const u=t.createSubContext(e.options);s&&u.delayNextStep(s),$o(this,l,u),r=Math.max(r,u.currentTimeline.currentTime),i.push(u.currentTimeline)}),i.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return b_(t.params?bg(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,u=t.createSubContext().currentTimeline;u.easing=i.easing,e.styles.forEach(g=>{u.forwardTime((g.offset||0)*s),u.setStyles(g.styles,g.easing,t.errors,t.options),u.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(u),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?ka(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=x_);let l=i;const u=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=u.length;let g=null;u.forEach((v,w)=>{t.currentQueryIndex=w;const I=t.createSubContext(e.options,v);s&&I.delayNextStep(s),v===t.element&&(g=I.currentTimeline),$o(this,e.animation,I),I.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,I.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),u=l*(t.currentQueryTotal-1);let g=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":g=u-g;break;case"full":g=i.currentStaggerTime}const w=t.currentTimeline;g&&w.delayNextStep(g);const I=w.currentTime;$o(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-I+(r.startTime-i.currentTimeline.startTime)}}const x_={};class y0{constructor(e,t,i,r,s,l,u,g){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=u,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=x_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new A_(this._driver,t,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=ka(i.duration)),null!=i.delay&&(r.delay=ka(i.delay));const s=i.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(u=>{(!t||!l.hasOwnProperty(u))&&(l[u]=bg(s[u],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new y0(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=x_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new KA(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,l){let u=[];if(r&&u.push(this.element),e.length>0){e=(e=e.replace(qA,"."+this._enterClassName)).replace(WA,"."+this._leaveClassName);let v=this._driver.query(this.element,e,1!=i);0!==i&&(v=i<0?v.slice(v.length+i,v.length):v.slice(0,i)),u.push(...v)}return!s&&0==u.length&&l.push(function pA(n){return new h.vHH(3014,mn)}()),u}}class A_{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new A_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||yr,this._currentKeyframe[t]=yr}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},l=function BC(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=yr})):fc(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(u=>{const g=bg(l[u],s,i);this._pendingStyles[u]=g,this._localTimelineStyles.hasOwnProperty(u)||(this._backFill[u]=this._globalTimelineStyles.hasOwnProperty(u)?this._globalTimelineStyles[u]:yr),this._updateStyle(u,g)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((u,g)=>{const v=fc(u,!0);Object.keys(v).forEach(w=>{const I=v[w];"!"==I?e.add(w):I==yr&&t.add(w)}),i||(v.offset=g/this.duration),r.push(v)});const s=e.size?wg(e.values()):[],l=t.size?wg(t.values()):[];if(i){const u=r[0],g=hc(u);u.offset=0,g.offset=1,r=[u,g]}return m0(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}}class KA extends A_{constructor(e,t,i,r,s,l,u=!1){super(e,t,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=u,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=i+t,u=t/l,g=fc(e[0],!1);g.offset=0,s.push(g);const v=fc(e[0],!1);v.offset=VC(u),s.push(v);const w=e.length-1;for(let I=1;I<=w;I++){let M=fc(e[I],!1);M.offset=VC((t+M.offset*i)/l),s.push(M)}i=l,t=0,r="",e=s}return m0(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function VC(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class b0{}class UC extends b0{normalizePropertyName(e,t){return w_(e)}normalizeStyleValue(e,t,i,r){let s="";const l=i.toString().trim();if(QA[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const u=i.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&0==u[1].length&&r.push(function pC(n,e){return new h.vHH(3005,mn)}())}return l+s}}const QA=(()=>function XA(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function jC(n,e,t,i,r,s,l,u,g,v,w,I,M){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:l,timelines:u,queriedElements:g,preStyleProps:v,postStyleProps:w,totalTime:I,errors:M}}const Dg={};class M_{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function HC(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],l=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):l}build(e,t,i,r,s,l,u,g,v,w){const I=[],M=this.ast.options&&this.ast.options.params||Dg,N=this.buildStyles(i,u&&u.params||Dg,I),H=g&&g.params||Dg,Y=this.buildStyles(r,H,I),he=new Set,_e=new Map,Oe=new Map,Ge="void"===r,st={params:Object.assign(Object.assign({},M),H)},wt=w?[]:v0(e,t,this.ast.animation,s,l,N,Y,st,v,I);let Ot=0;if(wt.forEach(bn=>{Ot=Math.max(bn.duration+bn.delay,Ot)}),I.length)return jC(t,this._triggerName,i,r,Ge,N,Y,[],[],_e,Oe,Ot,I);wt.forEach(bn=>{const Mi=bn.element,Ou=Ho(_e,Mi,{});bn.preStyleProps.forEach(xs=>Ou[xs]=!0);const rs=Ho(Oe,Mi,{});bn.postStyleProps.forEach(xs=>rs[xs]=!0),Mi!==t&&he.add(Mi)});const Rt=wg(he.values());return jC(t,this._triggerName,i,r,Ge,N,Y,wt,Rt,_e,Oe,Ot)}}class w0{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=hc(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!=l&&(r[s]=l)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const l=s;Object.keys(l).forEach(u=>{let g=l[u];g.length>1&&(g=bg(g,r,t));const v=this.normalizer.normalizePropertyName(u,t);g=this.normalizer.normalizeStyleValue(u,v,g,t),i[v]=g})}}),i}}class eM{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new w0(r.style,r.options&&r.options.params||{},i)}),$C(this.states,"true","1"),$C(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new M_(e,r,this.states))}),this.fallbackTransition=function E0(n,e,t){return new M_(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,u)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(l=>l.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function $C(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const zC=new T_;class tM{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=p0(this._driver,t,i,[]);if(i.length)throw function wA(n){return new h.vHH(3503,mn)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=pu(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let l;const u=new Map;if(s?(l=v0(this._driver,t,s,v_,_g,{},{},i,zC,r),l.forEach(w=>{const I=Ho(u,w.element,{});w.postStyleProps.forEach(M=>I[M]=null)})):(r.push(function EA(){return new h.vHH(3300,mn)}()),l=[]),r.length)throw function CA(n){return new h.vHH(3504,mn)}();u.forEach((w,I)=>{Object.keys(w).forEach(M=>{w[M]=this._driver.computeStyle(I,M,yr)})});const v=dc(l.map(w=>{const I=u.get(w.element);return this._buildPlayer(w,{},I)}));return this._playersById[e]=v,v.onDestroy(()=>this.destroy(e)),this.players.push(v),v}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function vC(n){return new h.vHH(3301,mn)}();return t}listen(e,t,i,r){const s=gu(t,"","","");return n0(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const C0="ng-animate-queued",k_="ng-animate-disabled",rM=[],Hd={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ig={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zo="__ng_removed";class GC{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function WC(n){return null!=n?n:null}(i?e.value:e),i){const s=hc(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const mf="void",D0=new GC(mf);class sM{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,fo(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function yC(n,e){return new h.vHH(3302,mn)}();if(null==i||0==i.length)throw function bC(n){return new h.vHH(3303,mn)}();if(!function O_(n){return"start"==n||"done"==n}(i))throw function wC(n,e){return new h.vHH(3400,mn)}();const s=Ho(this._elementListeners,e,[]),l={name:t,phase:i,callback:r};s.push(l);const u=Ho(this._engine.statesByElement,e,{});return u.hasOwnProperty(t)||(fo(e,vg),fo(e,vg+"-"+t),u[t]=D0),()=>{this._engine.afterFlush(()=>{const g=s.indexOf(l);g>=0&&s.splice(g,1),this._triggers[t]||delete u[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function EC(n){return new h.vHH(3401,mn)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),l=new I0(this.id,t,e);let u=this._engine.statesByElement.get(e);u||(fo(e,vg),fo(e,vg+"-"+t),this._engine.statesByElement.set(e,u={}));let g=u[t];const v=new GC(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&g&&v.absorbOptions(g.options),u[t]=v,g||(g=D0),v.value!==mf&&g.value===v.value){if(!function DN(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(g.params,v.params)){const H=[],Y=s.matchStyles(g.value,g.params,H),he=s.matchStyles(v.value,v.params,H);H.length?this._engine.reportError(H):this._engine.afterFlush(()=>{Pa(e,Y),$s(e,he)})}return}const M=Ho(this._engine.playersByElement,e,[]);M.forEach(H=>{H.namespaceId==this.id&&H.triggerName==t&&H.queued&&H.destroy()});let O=s.matchTransition(g.value,v.value,e,v.params),N=!1;if(!O){if(!r)return;O=s.fallbackTransition,N=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:g,toState:v,player:l,isFallbackTransition:N}),N||(fo(e,C0),l.onStart(()=>{yf(e,C0)})),l.onDone(()=>{let H=this.players.indexOf(l);H>=0&&this.players.splice(H,1);const Y=this._engine.playersByElement.get(e);if(Y){let he=Y.indexOf(l);he>=0&&Y.splice(he,1)}}),this.players.push(l),M.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,y_,!0);i.forEach(r=>{if(r[zo])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const u=[];if(Object.keys(s).forEach(g=>{if(l.set(g,s[g].value),this._triggers[g]){const v=this.trigger(e,g,mf,r);v&&u.push(v)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),i&&dc(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const l=s.name;if(r.has(l))return;r.add(l);const g=this._triggers[l].fallbackTransition,v=i[l]||D0,w=new GC(mf),I=new I0(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:g,fromState:v,toState:w,player:I,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let l=e;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[zo];(!s||s===Hd)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){fo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,l=this._elementListeners.get(s);l&&l.forEach(u=>{if(u.name==i.triggerName){const g=gu(s,i.triggerName,i.fromState.value,i.toState.value);g._data=e,n0(i.player,u.phase,g,u.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class oM{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new sM(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let l=!1;if(void 0!==this.driver.getParentElement){let u=this.driver.getParentElement(t);for(;u;){const g=r.get(u);if(g){const v=i.indexOf(g);i.splice(v+1,0,e),l=!0;break}u=this.driver.getParentElement(u)}}else for(let u=s;u>=0;u--)if(this.driver.containsElement(i[u].hostElement,t)){i.splice(u+1,0,e),l=!0;break}l||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const l=i[r[s]].namespaceId;if(l){const u=this._fetchNamespace(l);u&&t.add(u)}}}return t}trigger(e,t,i,r){if(_f(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!_f(t))return;const s=t[zo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),fo(e,k_)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),yf(e,k_))}removeNode(e,t,i,r){if(_f(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[zo]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return _f(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,y_,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,a0,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return dc(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[zo];if(i&&i.setForRemoval){if(e[zo]=Hd,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(k_))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)fo(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?dc(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function CC(n){return new h.vHH(3402,mn)}()}_flushAnimations(e,t){const i=new T_,r=[],s=new Map,l=[],u=new Map,g=new Map,v=new Map,w=new Set;this.disabledNodes.forEach(_t=>{w.add(_t);const St=this.driver.query(_t,".ng-animate-queued",!0);for(let Lt=0;Lt<St.length;Lt++)w.add(St[Lt])});const I=this.bodyNode,M=Array.from(this.statesByElement.keys()),O=S0(M,this.collectedEnterElements),N=new Map;let H=0;O.forEach((_t,St)=>{const Lt=v_+H++;N.set(St,Lt),_t.forEach(rn=>fo(rn,Lt))});const Y=[],he=new Set,_e=new Set;for(let _t=0;_t<this.collectedLeaveElements.length;_t++){const St=this.collectedLeaveElements[_t],Lt=St[zo];Lt&&Lt.setForRemoval&&(Y.push(St),he.add(St),Lt.hasAnimation?this.driver.query(St,".ng-star-inserted",!0).forEach(rn=>he.add(rn)):_e.add(St))}const Oe=new Map,Ge=S0(M,Array.from(he));Ge.forEach((_t,St)=>{const Lt=_g+H++;Oe.set(St,Lt),_t.forEach(rn=>fo(rn,Lt))}),e.push(()=>{O.forEach((_t,St)=>{const Lt=N.get(St);_t.forEach(rn=>yf(rn,Lt))}),Ge.forEach((_t,St)=>{const Lt=Oe.get(St);_t.forEach(rn=>yf(rn,Lt))}),Y.forEach(_t=>{this.processLeaveNode(_t)})});const st=[],wt=[];for(let _t=this._namespaceList.length-1;_t>=0;_t--)this._namespaceList[_t].drainQueuedTransitions(t).forEach(Lt=>{const rn=Lt.player,di=Lt.element;if(st.push(rn),this.collectedEnterElements.length){const Ms=di[zo];if(Ms&&Ms.setForMove){if(Ms.previousTriggersValues&&Ms.previousTriggersValues.has(Lt.triggerName)){const fh=Ms.previousTriggersValues.get(Lt.triggerName),Fu=this.statesByElement.get(Lt.element);Fu&&Fu[Lt.triggerName]&&(Fu[Lt.triggerName].value=fh)}return void rn.destroy()}}const As=!I||!this.driver.containsElement(I,di),Jn=Oe.get(di),fr=N.get(di),wn=this._buildInstruction(Lt,i,fr,Jn,As);if(wn.errors&&wn.errors.length)return void wt.push(wn);if(As)return rn.onStart(()=>Pa(di,wn.fromStyles)),rn.onDestroy(()=>$s(di,wn.toStyles)),void r.push(rn);if(Lt.isFallbackTransition)return rn.onStart(()=>Pa(di,wn.fromStyles)),rn.onDestroy(()=>$s(di,wn.toStyles)),void r.push(rn);const hh=[];wn.timelines.forEach(Ms=>{Ms.stretchStartingKeyframe=!0,this.disabledNodes.has(Ms.element)||hh.push(Ms)}),wn.timelines=hh,i.append(di,wn.timelines),l.push({instruction:wn,player:rn,element:di}),wn.queriedElements.forEach(Ms=>Ho(u,Ms,[]).push(rn)),wn.preStyleProps.forEach((Ms,fh)=>{const Fu=Object.keys(Ms);if(Fu.length){let Qs=g.get(fh);Qs||g.set(fh,Qs=new Set),Fu.forEach(Kw=>Qs.add(Kw))}}),wn.postStyleProps.forEach((Ms,fh)=>{const Fu=Object.keys(Ms);let Qs=v.get(fh);Qs||v.set(fh,Qs=new Set),Fu.forEach(Kw=>Qs.add(Kw))})});if(wt.length){const _t=[];wt.forEach(St=>{_t.push(function DC(n,e){return new h.vHH(3505,mn)}())}),st.forEach(St=>St.destroy()),this.reportError(_t)}const Ot=new Map,Rt=new Map;l.forEach(_t=>{const St=_t.element;i.has(St)&&(Rt.set(St,St),this._beforeAnimationBuild(_t.player.namespaceId,_t.instruction,Ot))}),r.forEach(_t=>{const St=_t.element;this._getPreviousPlayers(St,!1,_t.namespaceId,_t.triggerName,null).forEach(rn=>{Ho(Ot,St,[]).push(rn),rn.destroy()})});const bn=Y.filter(_t=>YC(_t,g,v)),Mi=new Map;ZC(Mi,this.driver,_e,v,yr).forEach(_t=>{YC(_t,g,v)&&bn.push(_t)});const rs=new Map;O.forEach((_t,St)=>{ZC(rs,this.driver,new Set(_t),g,"!")}),bn.forEach(_t=>{const St=Mi.get(_t),Lt=rs.get(_t);Mi.set(_t,Object.assign(Object.assign({},St),Lt))});const xs=[],Ba=[],Ua={};l.forEach(_t=>{const{element:St,player:Lt,instruction:rn}=_t;if(i.has(St)){if(w.has(St))return Lt.onDestroy(()=>$s(St,rn.toStyles)),Lt.disabled=!0,Lt.overrideTotalTime(rn.totalTime),void r.push(Lt);let di=Ua;if(Rt.size>1){let Jn=St;const fr=[];for(;Jn=Jn.parentNode;){const wn=Rt.get(Jn);if(wn){di=wn;break}fr.push(Jn)}fr.forEach(wn=>Rt.set(wn,di))}const As=this._buildAnimation(Lt.namespaceId,rn,Ot,s,rs,Mi);if(Lt.setRealPlayer(As),di===Ua)xs.push(Lt);else{const Jn=this.playersByElement.get(di);Jn&&Jn.length&&(Lt.parentPlayer=dc(Jn)),r.push(Lt)}}else Pa(St,rn.fromStyles),Lt.onDestroy(()=>$s(St,rn.toStyles)),Ba.push(Lt),w.has(St)&&r.push(Lt)}),Ba.forEach(_t=>{const St=s.get(_t.element);if(St&&St.length){const Lt=dc(St);_t.setRealPlayer(Lt)}}),r.forEach(_t=>{_t.parentPlayer?_t.syncPlayerEvents(_t.parentPlayer):_t.destroy()});for(let _t=0;_t<Y.length;_t++){const St=Y[_t],Lt=St[zo];if(yf(St,_g),Lt&&Lt.hasAnimation)continue;let rn=[];if(u.size){let As=u.get(St);As&&As.length&&rn.push(...As);let Jn=this.driver.query(St,a0,!0);for(let fr=0;fr<Jn.length;fr++){let wn=u.get(Jn[fr]);wn&&wn.length&&rn.push(...wn)}}const di=rn.filter(As=>!As.destroyed);di.length?aM(this,St,di):this.processLeaveNode(St)}return Y.length=0,xs.forEach(_t=>{this.players.push(_t),_t.onDone(()=>{_t.destroy();const St=this.players.indexOf(_t);this.players.splice(St,1)}),_t.play()}),xs}elementContainsData(e,t){let i=!1;const r=t[zo];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let l=[];if(t){const u=this.playersByQueriedElement.get(e);u&&(l=u)}else{const u=this.playersByElement.get(e);if(u){const g=!s||s==mf;u.forEach(v=>{v.queued||!g&&v.triggerName!=r||l.push(v)})}}return(i||r)&&(l=l.filter(u=>!(i&&i!=u.namespaceId||r&&r!=u.triggerName))),l}_beforeAnimationBuild(e,t,i){const s=t.element,l=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const v=g.element,w=v!==s,I=Ho(i,v,[]);this._getPreviousPlayers(v,w,l,u,t.toState).forEach(O=>{const N=O.getRealPlayer();N.beforeDestroy&&N.beforeDestroy(),O.destroy(),I.push(O)})}Pa(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,l){const u=t.triggerName,g=t.element,v=[],w=new Set,I=new Set,M=t.timelines.map(N=>{const H=N.element;w.add(H);const Y=H[zo];if(Y&&Y.removedBeforeQueried)return new ff(N.duration,N.delay);const he=H!==g,_e=function T0(n){const e=[];return KC(n,e),e}((i.get(H)||rM).map(Ot=>Ot.getRealPlayer())).filter(Ot=>!!Ot.element&&Ot.element===H),Oe=s.get(H),Ge=l.get(H),st=pu(0,this._normalizer,0,N.keyframes,Oe,Ge),wt=this._buildPlayer(N,st,_e);if(N.subTimeline&&r&&I.add(H),he){const Ot=new I0(e,u,H);Ot.setRealPlayer(wt),v.push(Ot)}return wt});v.forEach(N=>{Ho(this.playersByQueriedElement,N.element,[]).push(N),N.onDone(()=>function qC(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,N.element,N))}),w.forEach(N=>fo(N,kC));const O=dc(M);return O.onDestroy(()=>{w.forEach(N=>yf(N,kC)),$s(g,t.toStyles)}),I.forEach(N=>{Ho(r,N,[]).push(O)}),O}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new ff(e.duration,e.delay)}}class I0{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new ff,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>n0(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ho(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function _f(n){return n&&1===n.nodeType}function vf(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function ZC(n,e,t,i,r){const s=[];t.forEach(g=>s.push(vf(g)));const l=[];i.forEach((g,v)=>{const w={};g.forEach(I=>{const M=w[I]=e.computeStyle(v,I,r);(!M||0==M.length)&&(v[zo]=Ig,l.push(v))}),n.set(v,w)});let u=0;return t.forEach(g=>vf(g,s[u++])),l}function S0(n,e){const t=new Map;if(n.forEach(u=>t.set(u,[])),0==e.length)return t;const r=new Set(e),s=new Map;function l(u){if(!u)return 1;let g=s.get(u);if(g)return g;const v=u.parentNode;return g=t.has(v)?v:r.has(v)?1:l(v),s.set(u,g),g}return e.forEach(u=>{const g=l(u);1!==g&&t.get(g).push(u)}),t}function fo(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function yf(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function aM(n,e,t){dc(t).onDone(()=>n.processLeaveNode(e))}function KC(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof dg?KC(i.players,e):e.push(i)}}function YC(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class R_{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new oM(e,t,i),this._timelineEngine=new tM(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const l=e+"-"+r;let u=this._triggerCache[l];if(!u){const g=[],w=p0(this._driver,s,g,[]);if(g.length)throw function yA(n,e){return new h.vHH(3404,mn)}();u=function JA(n,e,t){return new eM(n,e,t)}(r,w,this._normalizer),this._triggerCache[l]=u}this._transitionEngine.registerTrigger(t,r,u)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,l]=m_(i);this._timelineEngine.command(s,t,l,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[l,u]=m_(i);return this._timelineEngine.listen(l,t,u,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let QC=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&$s(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($s(this._element,this._initialStyles),this._endStyles&&($s(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Pa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pa(this._element,this._endStyles),this._endStyles=null),$s(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function _u(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];IN(r)&&(e=e||{},e[r]=n[r])}return e}function IN(n){return"display"===n||"position"===n}class x0{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:RA(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class lM{validateStyleProperty(e){return pg(e)}matchesElement(e,t){return!1}containsElement(e,t){return gg(e,t)}getParentElement(e){return TC(e)}query(e,t,i){return mg(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,l=[]){const g={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(g.easing=s);const v={},w=l.filter(M=>M instanceof x0);(function OA(n,e){return 0===n||0===e})(i,r)&&w.forEach(M=>{let O=M.currentSnapshot;Object.keys(O).forEach(N=>v[N]=O[N])}),t=function wN(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],l=[];if(i.forEach(u=>{s.hasOwnProperty(u)||l.push(u),s[u]=t[u]}),l.length)for(var r=1;r<e.length;r++){let u=e[r];l.forEach(function(g){u[g]=RA(n,g)})}}return e}(e,t=t.map(M=>fc(M,!1)),v);const I=function bf(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=_u(e[0]),e.length>1&&(i=_u(e[e.length-1]))):e&&(t=_u(e)),t||i?new QC(n,t,i):null}(e,t);return new x0(e,t,g,I)}}let SN=(()=>{class n extends aC{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?Xy(t):t;return A0(this._renderer,null,i,"register",[r]),new XC(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class XC extends class sA{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new TN(this._id,e,t||{},this._renderer)}}class TN{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return A0(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function A0(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const M0="@.disabled";let cM=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,l)=>{const u=null==l?void 0:l.parentNode(s);u&&l.removeChild(u,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let w=this._rendererCache.get(s);return w||(w=new JC("",s,this.engine),this._rendererCache.set(s,w)),w}const l=i.id,u=i.id+"-"+this._currentId;this._currentId++,this.engine.register(u,t);const g=w=>{Array.isArray(w)?w.forEach(g):this.engine.registerTrigger(l,u,t,w.name,w)};return i.data.animation.forEach(g),new uM(this,u,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,u]=s;l(u)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(R_),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class JC{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==M0?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class uM extends JC{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==M0?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function dM(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),l="";return"@"!=s.charAt(0)&&([s,l]=function hM(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,l,u=>{this.factory.scheduleListenerCallback(u._data||-1,i,u)})}return this.delegate.listen(e,t,i)}}let fM=(()=>{class n extends R_{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(__),h.LFG(b0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const k0=new h.OlP("AnimationModuleType"),Ef=[{provide:aC,useClass:SN},{provide:b0,useFactory:function pM(){return new UC}},{provide:R_,useClass:fM},{provide:h.FYo,useFactory:function gM(n,e,t){return new cM(n,e,t)},deps:[ra,R_,h.R0b]}],P0=[{provide:__,useFactory:()=>new lM},{provide:k0,useValue:"BrowserAnimations"},...Ef],eD=[{provide:__,useClass:TA},{provide:k0,useValue:"NoopAnimations"},...Ef];let tD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?eD:P0}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:P0,imports:[Po]}),n})(),DM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[ea,Or],Or]}),n})();var IM=L(9672);function Ag(n,e,t){n?(0,IM.f)(t,n,e):e()}function Cf(n,e){const t=(0,hs.m)(n)?n:()=>n,i=r=>r.error(t());return new Ui.y(e?r=>e.schedule(i,0,r):i)}const Mg=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var kg=L(8189);function Pg(...n){return function O0(){return(0,kg.J)(1)}()((0,ni.D)(n,(0,nl.yG)(n)))}function R0(n){return new Ui.y(e=>{(0,Vs.Xf)(n()).subscribe(e)})}var $d=L(515);function xM(){return(0,Hn.e)((n,e)=>{let t=null;n._refCount++;const i=(0,$n.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class F0 extends Ui.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Hn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new jo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,$n.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=jo.w0.EMPTY)}return e}refCount(){return xM()(this)}}function Zi(n,e){return(0,Hn.e)((t,i)=>{let r=null,s=0,l=!1;const u=()=>l&&!r&&i.complete();t.subscribe((0,$n.x)(i,g=>{null==r||r.unsubscribe();let v=0;const w=s++;(0,Vs.Xf)(n(g,w)).subscribe(r=(0,$n.x)(i,I=>i.next(e?e(g,I,w,v++):I),()=>{r=null,u()}))},()=>{l=!0,u()}))})}function wl(n){return n<=0?()=>$d.E:(0,Hn.e)((e,t)=>{let i=0;e.subscribe((0,$n.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function zd(...n){const e=(0,nl.yG)(n);return(0,Hn.e)((t,i)=>{(e?Pg(n,t,e):Pg(n,t)).subscribe(i)})}function N0(n,e,t,i,r){return(s,l)=>{let u=t,g=e,v=0;s.subscribe((0,$n.x)(l,w=>{const I=v++;g=u?n(g,w,I):(u=!0,w),i&&l.next(g)},r&&(()=>{u&&l.next(g),l.complete()})))}}function Og(n,e){return(0,Hn.e)(N0(n,e,arguments.length>=2,!0))}function El(n){return(0,Hn.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,$n.x)(t,void 0,void 0,l=>{s=(0,Vs.Xf)(n(l,El(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function L0(n){return n<=0?()=>$d.E:(0,Hn.e)((e,t)=>{let i=[];e.subscribe((0,$n.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function rD(n=sD){return(0,Hn.e)((e,t)=>{let i=!1;e.subscribe((0,$n.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function sD(){return new Mg}function L_(n){return(0,Hn.e)((e,t)=>{let i=!1;e.subscribe((0,$n.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function vu(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ai((r,s)=>n(r,s,i)):Fd.y,wl(1),t?L_(e):rD(()=>new Mg))}var vs=L(8505);class pc{constructor(e,t){this.id=e,this.url=t}}class Df extends pc{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Gd extends pc{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lD extends pc{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cD extends pc{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class AM extends pc{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ys extends pc{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class If extends pc{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class MM extends pc{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kM extends pc{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PM{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Sf{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class OM{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class V0{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RM{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uD{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dD{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const fn="primary";class B0{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qd(n){return new B0(n)}const U0="ngNavigationCancelingError";function Tf(n){const e=Error("NavigationCancelingError: "+n);return e[U0]=!0,e}function xN(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const l=i[s],u=n[s];if(l.startsWith(":"))r[l.substring(1)]=u;else if(l!==u.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Cl(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!H0(n[r],e[r]))return!1;return!0}function H0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Rg(n){return Array.prototype.concat.apply([],n)}function $0(n){return n.length>0?n[n.length-1]:null}function ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function qo(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,ni.D)(Promise.resolve(n)):Nt(n)}const FM={exact:function gD(n,e,t){if(!bu(n.segments,e.segments)||!V_(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!gD(n.children[i],e.children[i],t))return!1;return!0},subset:G0},fD={exact:function pD(n,e){return Cl(n,e)},subset:function mD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>H0(n[t],e[t]))},ignored:()=>!0};function z0(n,e,t){return FM[t.paths](n.root,e.root,t.matrixParams)&&fD[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function G0(n,e,t){return _D(n,e,e.segments,t)}function _D(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!bu(r,t)||e.hasChildren()||!V_(r,t,i))}if(n.segments.length===t.length){if(!bu(n.segments,t)||!V_(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!G0(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(bu(n.segments,r)&&V_(n.segments,r,i)&&n.children[fn])&&_D(n.children[fn],e,s,i)}}function V_(n,e,t){return e.every((i,r)=>fD[t](n[r].parameters,i.parameters))}class yu{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qd(this.queryParams)),this._queryParamMap}toString(){return kN.serialize(this)}}class vn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ar(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fg(this)}}class xf{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qd(this.parameters)),this._parameterMap}toString(){return VM(this)}}function bu(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class bD{}class wD{parse(e){const t=new SD(e);return new yu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${B_(e.root,!0)}`,i=function ON(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${q0(t)}=${q0(r)}`).join("&"):`${q0(t)}=${q0(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function PN(n){return encodeURI(n)}(e.fragment)}`:""}`}}const kN=new wD;function Fg(n){return n.segments.map(e=>VM(e)).join("/")}function B_(n,e){if(!n.hasChildren())return Fg(n);if(e){const t=n.children[fn]?B_(n.children[fn],!1):"",i=[];return ar(n.children,(r,s)=>{s!==fn&&i.push(`${s}:${B_(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function yD(n,e){let t=[];return ar(n.children,(i,r)=>{r===fn&&(t=t.concat(e(i,r)))}),ar(n.children,(i,r)=>{r!==fn&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===fn?[B_(n.children[fn],!1)]:[`${r}:${B_(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[fn]?`${Fg(n)}/${t[0]}`:`${Fg(n)}/(${t.join("//")})`}}function NM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function q0(n){return NM(n).replace(/%3B/gi,";")}function ED(n){return NM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function W0(n){return decodeURIComponent(n)}function LM(n){return W0(n.replace(/\+/g,"%20"))}function VM(n){return`${ED(n.path)}${function U_(n){return Object.keys(n).map(e=>`;${ED(e)}=${ED(n[e])}`).join("")}(n.parameters)}`}const CD=/^[^\/()?;=#]+/;function Af(n){const e=n.match(CD);return e?e[0]:""}const DD=/^[^=?&#]+/,RN=/^[^&#]+/;class SD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vn([],{}):new vn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[fn]=new vn(e,t)),i}parseSegment(){const e=Af(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new xf(W0(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Af(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Af(this.remaining);r&&(i=r,this.capture(i))}e[W0(t)]=W0(i)}parseQueryParam(e){const t=function ID(n){const e=n.match(DD);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const l=function Z0(n){const e=n.match(RN);return e?e[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=LM(t),s=LM(i);if(e.hasOwnProperty(r)){let l=e[r];Array.isArray(l)||(l=[l],e[r]=l),l.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Af(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=fn);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[fn]:new vn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class TD{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=j_(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=j_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=xD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return xD(e,this._root).map(t=>t.value)}}function j_(n,e){if(n===e.value)return e;for(const t of e.children){const i=j_(n,t);if(i)return i}return null}function xD(n,e){if(n===e.value)return[e];for(const t of e.children){const i=xD(n,t);if(i.length)return i.unshift(e),i}return[]}class gc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class H_ extends TD{constructor(e,t){super(e),this.snapshot=t,kD(this,e)}toString(){return this.snapshot.toString()}}function AD(n,e){const t=function FN(n,e){const l=new $_([],{},{},"",{},fn,e,null,n.root,-1,{});return new MD("",new gc(l,[]))}(n,e),i=new Pr([new xf("",{})]),r=new Pr({}),s=new Pr({}),l=new Pr({}),u=new Pr(""),g=new Ng(i,r,l,u,s,fn,e,t.root);return g.snapshot=t.root,new H_(new gc(g,[]),t)}class Ng{constructor(e,t,i,r,s,l,u,g){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=u,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,$t.U)(e=>qd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,$t.U)(e=>qd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function BM(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function UM(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class $_{constructor(e,t,i,r,s,l,u,g,v,w,I){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=u,this.routeConfig=g,this._urlSegment=v,this._lastPathIndex=w,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class MD extends TD{constructor(e,t){super(t),this.url=e,kD(this,t)}toString(){return PD(this._root)}}function kD(n,e){e.value._routerState=n,e.children.forEach(t=>kD(n,t))}function PD(n){const e=n.children.length>0?` { ${n.children.map(PD).join(", ")} } `:"";return`${n.value}${e}`}function Lg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Cl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Cl(e.params,t.params)||n.params.next(t.params),function hD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Cl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Cl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function K0(n,e){const t=Cl(n.params,e.params)&&function vD(n,e){return bu(n,e)&&n.every((t,i)=>Cl(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||K0(n.parent,e.parent))}function Vg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Y0(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Vg(n,i,r);return Vg(n,i)})}(n,e,t);return new gc(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(u=>Vg(n,u)),l}}const i=function jM(n){return new Ng(new Pr(n.url),new Pr(n.params),new Pr(n.queryParams),new Pr(n.fragment),new Pr(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Vg(n,s));return new gc(i,r)}}function kf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Pf(n){return"object"==typeof n&&null!=n&&n.outlets}function z_(n,e,t,i,r){let s={};if(i&&ar(i,(u,g)=>{s[g]=Array.isArray(u)?u.map(v=>`${v}`):`${u}`}),n===e)return new yu(t,s,r);const l=OD(n,e,t);return new yu(l,s,r)}function OD(n,e,t){const i={};return ar(n.children,(r,s)=>{i[s]=r===e?t:OD(r,e,t)}),new vn(n.segments,i)}class Q0{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&kf(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Pf);if(r&&r!==$0(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class X0{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function eb(n,e,t){if(n||(n=new vn([],{})),0===n.segments.length&&n.hasChildren())return Bg(n,e,t);const i=function GM(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const l=n.segments[r],u=t[i];if(Pf(u))break;const g=`${u}`,v=i<t.length-1?t[i+1]:null;if(r>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!ND(g,v,l))return s;i+=2}else{if(!ND(g,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new vn(n.segments.slice(0,i.pathIndex),{});return s.children[fn]=new vn(n.segments.slice(i.pathIndex),n.children),Bg(s,0,r)}return i.match&&0===r.length?new vn(n.segments,{}):i.match&&!n.hasChildren()?RD(n,e,t):i.match?Bg(n,0,r):RD(n,e,t)}function Bg(n,e,t){if(0===t.length)return new vn(n.segments,{});{const i=function Wd(n){return Pf(n[0])?n[0].outlets:{[fn]:n}}(t),r={};return ar(i,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[l]=eb(n.children[l],e,s))}),ar(n.children,(s,l)=>{void 0===i[l]&&(r[l]=s)}),new vn(n.segments,r)}}function RD(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Pf(s)){const g=qM(s.outlets);return new vn(i,g)}if(0===r&&kf(t[0])){i.push(new xf(n.segments[e].path,FD(t[0]))),r++;continue}const l=Pf(s)?s.outlets[fn]:`${s}`,u=r<t.length-1?t[r+1]:null;l&&u&&kf(u)?(i.push(new xf(l,FD(u))),r+=2):(i.push(new xf(l,{})),r++)}return new vn(i,{})}function qM(n){const e={};return ar(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=RD(new vn([],{}),0,t))}),e}function FD(n){const e={};return ar(n,(t,i)=>e[i]=`${t}`),e}function ND(n,e,t){return n==t.path&&Cl(e,t.parameters)}class WM{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Lg(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Mf(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),ar(r,(s,l)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Mf(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);if(i&&i.outlet){const l=i.outlet.detach(),u=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Mf(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Mf(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new uD(s.value.snapshot))}),e.children.length&&this.forwardEvent(new V0(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Lg(r),r===s)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(u.contexts),l.attachRef=u.componentRef,l.route=u.route.value,l.outlet&&l.outlet.attach(u.componentRef,u.route.value),Lg(u.route.value),this.activateChildRoutes(e,null,l.children)}else{const u=function ZM(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),g=u?u.module.componentFactoryResolver:null;l.attachRef=null,l.route=r,l.resolver=g,l.outlet&&l.outlet.activateWith(r,g),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,i)}}class VD{constructor(e,t){this.routes=e,this.module=t}}function Dl(n){return"function"==typeof n}function Zd(n){return n instanceof yu}const Of=Symbol("INITIAL_VALUE");function Ug(){return Zi(n=>function SM(...n){const e=(0,nl.yG)(n),t=(0,nl.jO)(n),{args:i,keys:r}=fa(n);if(0===i.length)return(0,ni.D)([],e);const s=new Ui.y(function N_(n,e,t=Fd.y){return i=>{Ag(e,()=>{const{length:r}=n,s=new Array(r);let l=r,u=r;for(let g=0;g<r;g++)Ag(e,()=>{const v=(0,ni.D)(n[g],e);let w=!1;v.subscribe((0,$n.x)(i,I=>{s[g]=I,w||(w=!0,u--),u||i.next(t(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,e,r?l=>td(r,l):Fd.y));return t?s.pipe(jh(t)):s}(n.map(e=>e.pipe(wl(1),zd(Of)))).pipe(Og((e,t)=>{let i=!1;return t.reduce((r,s,l)=>r!==Of?r:(s===Of&&(i=!0),i||!1!==s&&l!==t.length-1&&!Zd(s)?r:s),e)},Of),ai(e=>e!==Of),(0,$t.U)(e=>Zd(e)?e:!0===e),wl(1)))}class jD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Rf,this.attachRef=null}}class Rf{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new jD,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ib=(()=>{class n{constructor(t,i,r,s,l){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=s||fn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),u=this.parentContexts.getOrCreateContext(this.name).children,g=new YM(t,u,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rf),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class YM{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ng?this.route:e===Rf?this.childContexts:this.parent.get(e,t)}}let QM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&h._UZ(0,"router-outlet")},directives:[ib],encapsulation:2}),n})();function XM(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];HD(i,JM(e,i))}}function HD(n,e){n.children&&XM(n.children,e)}function JM(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function rb(n){const e=n.children&&n.children.map(rb),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fn&&(t.component=QM),t}function Wo(n){return n.outlet||fn}function e1(n,e){const t=n.filter(i=>Wo(i)===e);return t.push(...n.filter(i=>Wo(i)!==e)),t}const t1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sb(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},t1):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||xN)(t,n,e);if(!s)return Object.assign({},t1);const l={};ar(s.posParams,(g,v)=>{l[v]=g.path});const u=s.consumed.length>0?Object.assign(Object.assign({},l),s.consumed[s.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:u,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function ob(n,e,t,i,r="corrected"){if(t.length>0&&function G_(n,e,t){return t.some(i=>q_(n,e,i)&&Wo(i)!==fn)}(n,t,i)){const l=new vn(e,function n1(n,e,t,i){const r={};r[fn]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Wo(s)!==fn){const l=new vn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,r[Wo(s)]=l}return r}(n,e,i,new vn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function r1(n,e,t){return t.some(i=>q_(n,e,i))}(n,t,i)){const l=new vn(n.segments,function NN(n,e,t,i,r,s){const l={};for(const u of i)if(q_(n,t,u)&&!r[Wo(u)]){const g=new vn([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===s?n.segments.length:e.length,l[Wo(u)]=g}return Object.assign(Object.assign({},r),l)}(n,e,t,i,n.children,r));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const s=new vn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function q_(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ab(n,e,t,i){return!!(Wo(n)===i||i!==fn&&q_(e,t,n))&&("**"===n.path||sb(e,n,t).matched)}function wu(n,e,t){return 0===e.length&&!n.children[t]}class jg{constructor(e){this.segmentGroup=e||null}}class W_{constructor(e){this.urlTree=e}}function Kd(n){return Cf(new jg(n))}function $D(n){return Cf(new W_(n))}class LN{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=ob(this.urlTree.root,[],[],this.config).segmentGroup,t=new vn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,fn).pipe((0,$t.U)(s=>this.createUrlTree(zD(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(El(s=>{if(s instanceof W_)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof jg?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,fn).pipe((0,$t.U)(r=>this.createUrlTree(zD(r),e.queryParams,e.fragment))).pipe(El(r=>{throw r instanceof jg?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new vn([],{[fn]:e}):e;return new yu(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,$t.U)(s=>new vn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,ni.D)(r).pipe(xr(s=>{const l=i.children[s],u=e1(t,s);return this.expandSegmentGroup(e,u,l,s).pipe((0,$t.U)(g=>({segment:g,outlet:s})))}),Og((s,l)=>(s[l.outlet]=l.segment,s),{}),function oD(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ai((r,s)=>n(r,s,i)):Fd.y,L0(1),t?L_(e):rD(()=>new Mg))}())}expandSegment(e,t,i,r,s,l){return(0,ni.D)(i).pipe(xr(u=>this.expandSegmentAgainstRoute(e,t,i,u,r,s,l).pipe(El(v=>{if(v instanceof jg)return Nt(null);throw v}))),vu(u=>!!u),El((u,g)=>{if(u instanceof Mg||"EmptyError"===u.name)return wu(t,r,s)?Nt(new vn([],{})):Kd(t);throw u}))}expandSegmentAgainstRoute(e,t,i,r,s,l,u){return ab(r,t,s,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,l):u&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l):Kd(t):Kd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?$D(s):this.lineralizeSegments(i,s).pipe((0,gi.z)(l=>{const u=new vn(l,{});return this.expandSegment(e,u,t,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){const{matched:u,consumedSegments:g,remainingSegments:v,positionalParamSegments:w}=sb(t,r,s);if(!u)return Kd(t);const I=this.applyRedirectCommands(g,r.redirectTo,w);return r.redirectTo.startsWith("/")?$D(I):this.lineralizeSegments(r,I).pipe((0,gi.z)(M=>this.expandSegment(e,t,i,M.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?Nt(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe((0,$t.U)(I=>(i._loadedConfig=I,new vn(r,{})))):Nt(new vn(r,{}));const{matched:l,consumedSegments:u,remainingSegments:g}=sb(t,i,r);return l?this.getChildConfig(e,i,r).pipe((0,gi.z)(w=>{const I=w.module,M=w.routes,{segmentGroup:O,slicedSegments:N}=ob(t,u,g,M),H=new vn(O.segments,O.children);if(0===N.length&&H.hasChildren())return this.expandChildren(I,M,H).pipe((0,$t.U)(Oe=>new vn(u,Oe)));if(0===M.length&&0===N.length)return Nt(new vn(u,{}));const Y=Wo(i)===s;return this.expandSegment(I,H,M,N,Y?fn:s,!0).pipe((0,$t.U)(_e=>new vn(u.concat(_e.segments),_e.children)))})):Kd(t)}getChildConfig(e,t,i){return t.children?Nt(new VD(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Nt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe((0,gi.z)(r=>r?this.configLoader.load(e.injector,t).pipe((0,$t.U)(s=>(t._loadedConfig=s,s))):function cb(n){return Cf(Tf(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Nt(new VD([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;return r&&0!==r.length?Nt(r.map(l=>{const u=e.get(l);let g;if(function KM(n){return n&&Dl(n.canLoad)}(u))g=u.canLoad(t,i);else{if(!Dl(u))throw new Error("Invalid CanLoad guard");g=u(t,i)}return qo(g)})).pipe(Ug(),(0,vs.b)(l=>{if(!Zd(l))return;const u=Tf(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw u.url=l,u}),(0,$t.U)(l=>!0===l)):Nt(!0)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Nt(i);if(r.numberOfChildren>1||!r.children[fn])return Cf(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));r=r.children[fn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new yu(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return ar(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const u=r.substring(1);i[s]=t[u]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let l={};return ar(t.children,(u,g)=>{l[g]=this.createSegmentGroup(e,u,i,r)}),new vn(s,l)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function zD(n){const e={};for(const i of Object.keys(n.children)){const s=zD(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function VN(n){if(1===n.numberOfChildren&&n.children[fn]){const e=n.children[fn];return new vn(n.segments.concat(e.segments),e.children)}return n}(new vn(n.segments,e))}class ub{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class K_{constructor(e,t){this.component=e,this.route=t}}function s1(n,e,t){const i=n._root;return Ff(i,e?e._root:null,t,[i.value])}function Y_(n,e,t){const i=function GD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function Ff(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Mf(e);return n.children.forEach(l=>{(function qD(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,u=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const g=function a1(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!bu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bu(n.url,e.url)||!Cl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!K0(n,e)||!Cl(n.queryParams,e.queryParams);default:return!K0(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);g?r.canActivateChecks.push(new ub(i)):(s.data=l.data,s._resolvedData=l._resolvedData),Ff(n,e,s.component?u?u.children:null:t,i,r),g&&u&&u.outlet&&u.outlet.isActivated&&r.canDeactivateChecks.push(new K_(u.outlet.component,l))}else l&&Hg(e,u,r),r.canActivateChecks.push(new ub(i)),Ff(n,null,s.component?u?u.children:null:t,i,r)})(l,s[l.value.outlet],t,i.concat([l.value]),r),delete s[l.value.outlet]}),ar(s,(l,u)=>Hg(l,t.getContext(u),r)),r}function Hg(n,e,t){const i=Mf(n),r=n.value;ar(i,(s,l)=>{Hg(s,r.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new K_(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class HN{}function KD(n){return new Ui.y(e=>e.error(n))}class $N{constructor(e,t,i,r,s,l){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=l}recognize(){const e=ob(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,fn);if(null===t)return null;const i=new $_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},fn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new gc(i,t),s=new MD(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=BM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const l=t.children[s],u=e1(e,s),g=this.processSegmentGroup(u,l,s);if(null===g)return null;i.push(...g)}const r=d1(i);return function zN(n){n.sort((e,t)=>e.value.outlet===fn?-1:t.value.outlet===fn?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const l=this.processSegmentAgainstRoute(s,t,i,r);if(null!==l)return l}return wu(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!ab(e,t,i,r))return null;let s,l=[],u=[];if("**"===e.path){const O=i.length>0?$0(i).parameters:{};s=new $_(i,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,p1(e),Wo(e),e.component,e,h1(t),f1(t)+i.length,g1(e))}else{const O=sb(t,e,i);if(!O.matched)return null;l=O.consumedSegments,u=O.remainingSegments,s=new $_(l,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,p1(e),Wo(e),e.component,e,h1(t),f1(t)+l.length,g1(e))}const g=function GN(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:w}=ob(t,l,u,g.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);if(0===w.length&&v.hasChildren()){const O=this.processChildren(g,v);return null===O?null:[new gc(s,O)]}if(0===g.length&&0===w.length)return[new gc(s,[])];const I=Wo(e)===r,M=this.processSegment(g,v,w,I?fn:r);return null===M?null:[new gc(s,M)]}}function qN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function d1(n){const e=[],t=new Set;for(const i of n){if(!qN(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=d1(i.children);e.push(new gc(i.value,r))}return e.filter(i=>!t.has(i))}function h1(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function f1(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function p1(n){return n.data||{}}function g1(n){return n.resolve||{}}function f(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function b(n){return Zi(e=>{const t=n(e);return t?(0,ni.D)(t).pipe((0,$t.U)(()=>e)):Nt(e)})}class k extends class T{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const R=new h.OlP("ROUTES");class U{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe((0,$t.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=s.create(e);return new VD(Rg(l.injector.get(R,void 0,h.XFs.Self|h.XFs.Optional)).map(rb),l)}),El(s=>{throw t._loader$=void 0,s}));return t._loader$=new F0(r,()=>new dn.x).pipe(xM()),t._loader$}loadModuleFactory(e){return qo(e()).pipe((0,gi.z)(t=>t instanceof h.YKP?Nt(t):(0,ni.D)(this.compiler.compileModuleAsync(t))))}}class J{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Te(n){throw n}function qe(n,e,t){return e.parse("/")}function tt(n,e){return Nt(null)}const yt={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Le={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lt=(()=>{class n{constructor(t,i,r,s,l,u,g){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new dn.x,this.errorHandler=Te,this.malformedUriErrorHandler=qe,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:tt,afterPreactivation:tt},this.urlHandlingStrategy=new J,this.routeReuseStrategy=new k,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(h.h0i),this.console=l.get(h.c2e);const I=l.get(h.R0b);this.isNgZoneEnabled=I instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function MN(){return new yu(new vn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new U(l,u,M=>this.triggerEvent(new PM(M)),M=>this.triggerEvent(new Sf(M))),this.routerState=AD(this.currentUrlTree,this.rootComponentType),this.transitions=new Pr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(ai(r=>0!==r.id),(0,$t.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Zi(r=>{let s=!1,l=!1;return Nt(r).pipe((0,vs.b)(u=>{this.currentNavigation={id:u.id,initialUrl:u.currentRawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Zi(u=>{const g=this.browserUrlTree.toString(),v=!this.navigated||u.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Mn(u.source)&&(this.browserUrlTree=u.extractedUrl),Nt(u).pipe(Zi(I=>{const M=this.transitions.getValue();return i.next(new Df(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),M!==this.transitions.getValue()?$d.E:Promise.resolve(I)}),function BN(n,e,t,i){return Zi(r=>function Z_(n,e,t,i,r){return new LN(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,$t.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,vs.b)(I=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function o(n,e,t,i,r){return(0,gi.z)(s=>function u1(n,e,t,i,r="emptyOnly",s="legacy"){try{const l=new $N(n,e,t,i,r,s).recognize();return null===l?KD(new HN):Nt(l)}catch(l){return KD(l)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe((0,$t.U)(l=>Object.assign(Object.assign({},s),{targetSnapshot:l}))))}(this.rootComponentType,this.config,I=>this.serializeUrl(I),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,vs.b)(I=>{if("eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(O,I)}this.browserUrlTree=I.urlAfterRedirects}const M=new AM(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);i.next(M)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:O,source:N,restoredState:H,extras:Y}=u,he=new Df(M,this.serializeUrl(O),N,H);i.next(he);const _e=AD(O,this.rootComponentType).snapshot;return Nt(Object.assign(Object.assign({},u),{targetSnapshot:_e,urlAfterRedirects:O,extras:Object.assign(Object.assign({},Y),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=u.rawUrl,u.resolve(null),$d.E}),b(u=>{const{targetSnapshot:g,id:v,extractedUrl:w,rawUrl:I,extras:{skipLocationChange:M,replaceUrl:O}}=u;return this.hooks.beforePreactivation(g,{navigationId:v,appliedUrlTree:w,rawUrlTree:I,skipLocationChange:!!M,replaceUrl:!!O})}),(0,vs.b)(u=>{const g=new ys(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(g)}),(0,$t.U)(u=>Object.assign(Object.assign({},u),{guards:s1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)})),function WD(n,e){return(0,gi.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?Nt(Object.assign(Object.assign({},t),{guardsResult:!0})):function db(n,e,t,i){return(0,ni.D)(n).pipe((0,gi.z)(r=>function jN(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Nt(s.map(u=>{const g=Y_(u,e,r);let v;if(function nb(n){return n&&Dl(n.canDeactivate)}(g))v=qo(g.canDeactivate(n,e,t,i));else{if(!Dl(g))throw new Error("Invalid CanDeactivate guard");v=qo(g(n,e,t,i))}return v.pipe(vu())})).pipe(Ug()):Nt(!0)}(r.component,r.route,t,e,i)),vu(r=>!0!==r,!0))}(l,i,r,n).pipe((0,gi.z)(u=>u&&function BD(n){return"boolean"==typeof n}(u)?function UN(n,e,t,i){return(0,ni.D)(e).pipe(xr(r=>Pg(function hb(n,e){return null!==n&&e&&e(new OM(n)),Nt(!0)}(r.route.parent,i),function ZD(n,e){return null!==n&&e&&e(new RM(n)),Nt(!0)}(r.route,i),function c1(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function o1(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>R0(()=>Nt(l.guards.map(g=>{const v=Y_(g,l.node,t);let w;if(function tb(n){return n&&Dl(n.canActivateChild)}(v))w=qo(v.canActivateChild(i,n));else{if(!Dl(v))throw new Error("Invalid CanActivateChild guard");w=qo(v(i,n))}return w.pipe(vu())})).pipe(Ug())));return Nt(s).pipe(Ug())}(n,r.path,t),function l1(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Nt(!0);const r=i.map(s=>R0(()=>{const l=Y_(s,e,t);let u;if(function UD(n){return n&&Dl(n.canActivate)}(l))u=qo(l.canActivate(e,n));else{if(!Dl(l))throw new Error("Invalid CanActivate guard");u=qo(l(e,n))}return u.pipe(vu())}));return Nt(r).pipe(Ug())}(n,r.route,t))),vu(r=>!0!==r,!0))}(i,s,n,e):Nt(u)),(0,$t.U)(u=>Object.assign(Object.assign({},t),{guardsResult:u})))})}(this.ngModule.injector,u=>this.triggerEvent(u)),(0,vs.b)(u=>{if(Zd(u.guardsResult)){const v=Tf(`Redirecting to "${this.serializeUrl(u.guardsResult)}"`);throw v.url=u.guardsResult,v}const g=new If(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.triggerEvent(g)}),ai(u=>!!u.guardsResult||(this.restoreHistory(u),this.cancelNavigationTransition(u,""),!1)),b(u=>{if(u.guards.canActivateChecks.length)return Nt(u).pipe((0,vs.b)(g=>{const v=new MM(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),Zi(g=>{let v=!1;return Nt(g).pipe(function a(n,e){return(0,gi.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Nt(t);let s=0;return(0,ni.D)(r).pipe(xr(l=>function c(n,e,t,i){return function d(n,e,t,i){const r=f(n);if(0===r.length)return Nt({});const s={};return(0,ni.D)(r).pipe((0,gi.z)(l=>function _(n,e,t,i){const r=Y_(n,e,i);return qo(r.resolve?r.resolve(e,t):r(e,t))}(n[l],e,t,i).pipe((0,vs.b)(u=>{s[l]=u}))),L0(1),(0,gi.z)(()=>f(s).length===r.length?Nt(s):$d.E))}(n._resolve,n,e,i).pipe((0,$t.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),BM(n,t).resolve),null)))}(l.route,i,n,e)),(0,vs.b)(()=>s++),L0(1),(0,gi.z)(l=>s===r.length?Nt(t):$d.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,vs.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,vs.b)(g=>{const v=new kM(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}))}),b(u=>{const{targetSnapshot:g,id:v,extractedUrl:w,rawUrl:I,extras:{skipLocationChange:M,replaceUrl:O}}=u;return this.hooks.afterPreactivation(g,{navigationId:v,appliedUrlTree:w,rawUrlTree:I,skipLocationChange:!!M,replaceUrl:!!O})}),(0,$t.U)(u=>{const g=function Oa(n,e,t){const i=Vg(n,e._root,t?t._root:void 0);return new H_(i,e)}(this.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return Object.assign(Object.assign({},u),{targetRouterState:g})}),(0,vs.b)(u=>{this.currentUrlTree=u.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),this.routerState=u.targetRouterState,"deferred"===this.urlUpdateStrategy&&(u.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,u),this.browserUrlTree=u.urlAfterRedirects)}),((n,e,t)=>(0,$t.U)(i=>(new WM(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,u=>this.triggerEvent(u)),(0,vs.b)({next(){s=!0},complete(){s=!0}}),function aD(n){return(0,Hn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var u;s||l||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(u=this.currentNavigation)||void 0===u?void 0:u.id)===r.id&&(this.currentNavigation=null)}),El(u=>{if(l=!0,function j0(n){return n&&n[U0]}(u)){const g=Zd(u.url);g||(this.navigated=!0,this.restoreHistory(r,!0));const v=new lD(r.id,this.serializeUrl(r.extractedUrl),u.message);i.next(v),g?setTimeout(()=>{const w=this.urlHandlingStrategy.merge(u.url,this.rawUrlTree),I={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Mn(r.source)};this.scheduleNavigation(w,"imperative",null,I,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const g=new cD(r.id,this.serializeUrl(r.extractedUrl),u);i.next(g);try{r.resolve(this.errorHandler(u))}catch(v){r.reject(v)}}return $d.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},l=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(l){const g=Object.assign({},l);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(s.state=g)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,i,l,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){XM(t),this.config=t.map(rb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:l,queryParamsHandling:u,preserveFragment:g}=i,v=r||this.routerState.root,w=g?this.currentUrlTree.fragment:l;let I=null;switch(u){case"merge":I=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}return null!==I&&(I=this.removeEmptyProps(I)),function HM(n,e,t,i,r){if(0===t.length)return z_(e.root,e.root,e.root,i,r);const s=function $M(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Q0(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const u={};return ar(s.outlets,(g,v)=>{u[v]="string"==typeof g?g.split("/"):g}),[...r,{outlets:u}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===l?(s.split("/").forEach((u,g)=>{0==g&&"."===u||(0==g&&""===u?t=!0:".."===u?e++:""!=u&&r.push(u))}),r):[...r,s]},[]);return new Q0(t,e,i)}(t);if(s.toRoot())return z_(e.root,e.root,new vn([],{}),i,r);const l=function zM(n,e,t){if(n.isAbsolute)return new X0(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new X0(s,s===e.root,0)}const i=kf(n.commands[0])?0:1;return function J0(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new X0(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),u=l.processChildren?Bg(l.segmentGroup,l.index,s.commands):eb(l.segmentGroup,l.index,s.commands);return z_(e.root,l.segmentGroup,u,i,r)}(v,this.currentUrlTree,t,I,null!=w?w:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Zd(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function _n(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},yt):!1===i?Object.assign({},Le):i,Zd(t))return z0(this.currentUrlTree,t,r);const s=this.parseUrl(t);return z0(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Gd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,l){var u,g;if(this.disposed)return Promise.resolve(!1);let v,w,I;l?(v=l.resolve,w=l.reject,I=l.promise):I=new Promise((N,H)=>{v=N,w=H});const M=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),O=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(u=this.browserPageId)&&void 0!==u?u:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):O=0,this.setTransition({id:M,targetPageId:O,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:v,reject:w,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(N=>Promise.reject(N))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===l?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new lD(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Mn(n){return"imperative"!==n}let Yr=(()=>{class n{constructor(t,i,r,s,l){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=l,this.commands=null,this.onChanges=new dn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==t?i.setAttribute(r,"tabindex",t):i.removeAttribute(r,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Eu(this.skipLocationChange),replaceUrl:Eu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Eu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lt),h.Y36(Ng),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,i){1&t&&h.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function Eu(n){return""===n||!!n}class Q_{}class X_{preload(e,t){return Nt(null)}}let J_=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new U(r,i,g=>t.triggerEvent(new PM(g)),g=>t.triggerEvent(new Sf(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(ai(t=>t instanceof Gd),xr(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const l=s._loadedConfig;r.push(this.processRoutes(l.module,l.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return(0,ni.D)(r).pipe((0,kg.J)(),(0,$t.U)(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?Nt(i._loadedConfig):this.loader.load(t.injector,i)).pipe((0,gi.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lt),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(Q_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),$g=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Df?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dD&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new dD(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const zg=new h.OlP("ROUTER_CONFIGURATION"),ZN=new h.OlP("ROUTER_FORROOT_GUARD"),C$=[Se,{provide:bD,useClass:wD},{provide:lt,useFactory:function x$(n,e,t,i,r,s,l={},u,g){const v=new lt(null,n,e,t,i,r,Rg(s));return u&&(v.urlHandlingStrategy=u),g&&(v.routeReuseStrategy=g),function A$(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,v),l.enableTracing&&v.events.subscribe(w=>{var I,M;null===(I=console.group)||void 0===I||I.call(console,`Router Event: ${w.constructor.name}`),console.log(w.toString()),console.log(w),null===(M=console.groupEnd)||void 0===M||M.call(console)}),v},deps:[bD,Rf,Se,h.zs3,h.Sil,R,zg,[class G{},new h.FiY],[class D{},new h.FiY]]},Rf,{provide:Ng,useFactory:function M$(n){return n.routerState.root},deps:[lt]},J_,X_,class gb{preload(e,t){return t().pipe(El(()=>Nt(null)))}},{provide:zg,useValue:{enableTracing:!1}}];function D$(){return new h.PXZ("Router",lt)}let KN=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[C$,YN(t),{provide:ZN,useFactory:T$,deps:[[lt,new h.FiY,new h.tp0]]},{provide:zg,useValue:i||{}},{provide:ye,useFactory:S$,deps:[Ie,[new h.tBr(dt),new h.FiY],zg]},{provide:$g,useFactory:I$,deps:[lt,ju,zg]},{provide:Q_,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:X_},{provide:h.PXZ,multi:!0,useFactory:D$},[m1,{provide:h.ip1,multi:!0,useFactory:k$,deps:[m1]},{provide:QN,useFactory:P$,deps:[m1]},{provide:h.tb,multi:!0,useExisting:QN}]]}}static forChild(t){return{ngModule:n,providers:[YN(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ZN,8),h.LFG(lt,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function I$(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new $g(n,e,t)}function S$(n,e,t={}){return t.useHash?new He(n,e):new gt(n,e)}function T$(n){return"guarded"}function YN(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:R,multi:!0,useValue:n}]}let m1=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new dn.x}appInitializer(){return this.injector.get(K,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(u=>i=u),s=this.injector.get(lt),l=this.injector.get(zg);return"disabled"===l.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Nt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(zg),r=this.injector.get(J_),s=this.injector.get($g),l=this.injector.get(lt),u=this.injector.get(h.z2F);t===u.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&l.initialNavigation(),r.setUpPreloading(),s.init(),l.resetRootComponentType(u.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function k$(n){return n.appInitializer.bind(n)}function P$(n){return n.bootstrapListener.bind(n)}const QN=new h.OlP("Router Initializer"),ae="undefined"!=typeof window?window:void 0,Zo="undefined"!=typeof globalThis?globalThis:ae,XN=Array.prototype,JN=XN.forEach,eL=XN.indexOf,Ra=null==Zo?void 0:Zo.navigator,Ct=null==Zo?void 0:Zo.document,Ko=null==Zo?void 0:Zo.location,_1=null==Zo?void 0:Zo.fetch,v1=null!=Zo&&Zo.XMLHttpRequest&&"withCredentials"in new Zo.XMLHttpRequest?Zo.XMLHttpRequest:void 0,tL=null==Zo?void 0:Zo.AbortController,Qr=null==Ra?void 0:Ra.userAgent,pn=null!=ae?ae:{},Nf={DEBUG:!1,LIB_VERSION:"1.181.0"},nL=Object.prototype,iL=nL.hasOwnProperty,QD=nL.toString,Rr=Array.isArray||function(n){return"[object Array]"===QD.call(n)},Il=function(n){return"function"==typeof n},lr=function(n){return n===Object(n)&&!Rr(n)},mb=function(n){if(lr(n)){for(const e in n)if(iL.call(n,e))return!1;return!0}return!1},Pt=function(n){return void 0===n},Gs=function(n){return"[object String]"==QD.call(n)},rL=function(n){return Gs(n)&&0===n.trim().length},Lf=function(n){return null===n},Ki=function(n){return Pt(n)||Lf(n)},Fa=function(n){return"[object Number]"==QD.call(n)},Vf=function(n){return"[object Boolean]"===QD.call(n)},sL="[PostHog.js]",je={_log:function(n){if(ae&&(Nf.DEBUG||pn.POSTHOG_DEBUG)&&!Pt(ae.console)&&ae.console){const r="__rrweb_original__"in ae.console[n]?ae.console[n].__rrweb_original__:ae.console[n];for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];r(sL,...t)}},info:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];je._log("log",...e)},warn:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];je._log("warn",...e)},error:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];je._log("error",...e)},critical:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];console.error(sL,...e)},uninitializedWarning:n=>{je.error(`You must initialize PostHog before calling ${n}`)}},oL=(n,e,t)=>{if(n.config.disable_external_dependency_loading)return je.warn(`${e} was requested but loading of external scripts is disabled.`),t("Loading of external scripts is disabled");const i=()=>{if(!Ct)return t("document not found");const r=Ct.createElement("script");r.type="text/javascript",r.crossOrigin="anonymous",r.src=e,r.onload=u=>t(void 0,u),r.onerror=u=>t(u);const s=Ct.querySelectorAll("body > script");var l;s.length>0?null===(l=s[0].parentNode)||void 0===l||l.insertBefore(r,s[0]):Ct.body.appendChild(r)};null!=Ct&&Ct.body?i():null==Ct||Ct.addEventListener("DOMContentLoaded",i)};pn.__PosthogExtensions__=pn.__PosthogExtensions__||{},pn.__PosthogExtensions__.loadExternalDependency=(n,e,t)=>{let i=`/static/${e}.js?v=${n.version}`;"toolbar"===e&&(i=`${i}&t=${3e5*Math.floor(Date.now()/3e5)}`);const r=n.requestRouter.endpointFor("assets",i);oL(n,r,t)},pn.__PosthogExtensions__.loadSiteApp=(n,e,t)=>{const i=n.requestRouter.endpointFor("api",e);oL(n,i,t)};const XD={},JD=function(n){return n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function ev(n,e,t){if(Rr(n))if(JN&&n.forEach===JN)n.forEach(e,t);else if("length"in n&&n.length===+n.length)for(let i=0,r=n.length;i<r;i++)if(i in n&&e.call(t,n[i],i)===XD)return}function ui(n,e,t){if(!Ki(n)){if(Rr(n))return ev(n,e,t);if((n=>n instanceof FormData)(n)){for(const i of n.entries())if(e.call(t,i[1],i[0])===XD)return}else for(const i in n)if(iL.call(n,i)&&e.call(t,n[i],i)===XD)return}}const po=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return ev(t,function(r){for(const s in r)void 0!==r[s]&&(n[s]=r[s])}),n};function Sn(n,e){return-1!==n.indexOf(e)}function eI(n){const e=Object.keys(n);let t=e.length;const i=new Array(t);for(;t--;)i[t]=[e[t],n[e[t]]];return i}const aL=function(n){try{return n()}catch(e){return}},N$=function(n){return function(){try{for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.apply(this,t)}catch(r){je.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),je.critical(r)}}},tI=function(n){const e={};return ui(n,function(t,i){Gs(t)&&t.length>0&&(e[i]=t)}),e},y1=function(n){return n.replace(/^\$/,"")},Yd=function(){function n(e){return e&&(e.preventDefault=n.preventDefault,e.stopPropagation=n.stopPropagation),e}return n.preventDefault=function(){this.returnValue=!1},n.stopPropagation=function(){this.cancelBubble=!0},function(e,t,i,r,s){if(e)if(e.addEventListener&&!r)e.addEventListener(t,i,!!s);else{const l="on"+t;e[l]=(g=e,v=i,w=e[l],function(I){if(!(I=I||n(null==ae?void 0:ae.event)))return;let M,O=!0;Il(w)&&(M=w(I));const N=v.call(g,I);return!1!==M&&!1!==N||(O=!1),O})}else je.error("No valid element provided to register_event");var g,v,w}}();function B$(n){const e=null==n?void 0:n.hostname;return!!Gs(e)&&"herokuapp.com"!==e.split(".").slice(-2).join(".")}function lL(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return n[t]}let _c;var n;(n=_c||(_c={})).GZipJS="gzip-js",n.Base64="base64";const cL="$people_distinct_id",_b="__alias",vb="__timers",uL="$autocapture_disabled_server_side",b1="$heatmaps_enabled_server_side",dL="$exception_capture_enabled_server_side",hL="$exception_capture_endpoint_suffix",fL="$web_vitals_enabled_server_side",pL="$dead_clicks_enabled_server_side",gL="$web_vitals_allowed_metrics",w1="$session_recording_enabled_server_side",mL="$console_log_recording_enabled_server_side",_L="$session_recording_network_payload_capture",vL="$session_recording_canvas_recording",yL="$replay_sample_rate",bL="$replay_minimum_duration",nI="$sesid",yb="$session_is_sampled",iI="$session_recording_url_trigger_activated_session",rI="$session_recording_url_trigger_status",tv="$enabled_feature_flags",E1="$early_access_features",nv="$stored_person_properties",Bf="$stored_group_properties",C1="$surveys",sI="$surveys_activated",oI="$flag_call_reported",Qd="$user_state",D1="$client_session_props",I1="$capture_rate_limit",S1="$initial_campaign_params",T1="$initial_referrer_info",wL="$initial_person_info",aI="$epp",x1="__POSTHOG_TOOLBAR__",U$=[cL,_b,"__cmpns",vb,w1,b1,nI,tv,Qd,E1,Bf,nv,C1,oI,D1,I1,S1,T1,aI],A1="$active_feature_flags",lI="$override_feature_flags",EL="$feature_flag_payloads",CL=n=>{const e={};for(const[t,i]of eI(n||{}))i&&(e[t]=i);return e};class j${constructor(e){this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}getFlags(){return Object.keys(this.getFlagVariants())}getFlagVariants(){const e=this.instance.get_property(tv),t=this.instance.get_property(lI);if(!t)return e||{};const i=po({},e),r=Object.keys(t);for(let s=0;s<r.length;s++)i[r[s]]=t[r[s]];return this._override_warning||(je.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:i}),this._override_warning=!0),i}getFlagPayloads(){return this.instance.get_property(EL)||{}}reloadFeatureFlags(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.reloadFeatureFlagsInAction=e}resetRequestQueue(){this.reloadFeatureFlagsQueued=!1}_startReloadTimer(){this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(()=>{!this.reloadFeatureFlagsInAction&&this.reloadFeatureFlagsQueued&&(this.reloadFeatureFlagsQueued=!1,this._reloadFeatureFlagsRequest())},5)}_reloadFeatureFlagsRequest(){if(this.instance.config.advanced_disable_feature_flags)return;this.setReloadingPaused(!0);const e=this.instance.config.token,t=this.instance.get_property(nv),i=this.instance.get_property(Bf),r={token:e,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:t,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:r,compression:this.instance.config.disable_compression?void 0:_c.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:s=>{var l;this.setReloadingPaused(!1);let u=!0;200===s.statusCode&&(this.$anon_distinct_id=void 0,u=!1),this.receivedFeatureFlags(null!==(l=s.json)&&void 0!==l?l:{},u),this._startReloadTimer()}})}getFeatureFlag(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0))return void je.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.");const i=this.getFlagVariants()[e],r=`${i}`,s=this.instance.get_property(oI)||{};var l;return!t.send_event&&"send_event"in t||e in s&&s[e].includes(r)||(Rr(s[e])?s[e].push(r):s[e]=[r],null===(l=this.instance.persistence)||void 0===l||l.register({[oI]:s}),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:i})),i}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}isFeatureEnabled(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);je.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(!this.instance.persistence)return;this.instance.decideEndpointWasHit=!0;const i=this.getFlagVariants(),r=this.getFlagPayloads();(function(s,l){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const v=s.featureFlags,w=s.featureFlagPayloads;if(!v)return;if(Rr(v)){const O={};if(v)for(let N=0;N<v.length;N++)O[v[N]]=!0;return void(l&&l.register({[A1]:v,[tv]:O}))}let I=v,M=w;s.errorsWhileComputingFlags&&(I=Dt(Dt({},u),I),M=Dt(Dt({},g),M)),l&&l.register({[A1]:Object.keys(CL(I)),[tv]:I||{},[EL]:M||{}})})(e,this.instance.persistence,i,r),this._fireFeatureFlagsCallbacks(t)}override(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return je.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=t,!1===e)this.instance.persistence.unregister(lI);else if(Rr(e)){const i={};for(let r=0;r<e.length;r++)i[e[r]]=!0;this.instance.persistence.register({[lI]:i})}else this.instance.persistence.register({[lI]:e})}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){const{flags:t,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();e(t,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t){var i;const r={[`$feature_enrollment/${e}`]:t};this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:t,$set:r}),this.setPersonPropertiesForFlags(r,!1);const s=ii(Dt({},this.getFlagVariants()),{[e]:t});null===(i=this.instance.persistence)||void 0===i||i.register({[A1]:Object.keys(CL(s)),[tv]:s}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.instance.get_property(E1);if(i&&!t)return e(i);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api",`/api/early_access_features/?token=${this.instance.config.token}`),method:"GET",callback:r=>{var s;if(!r.json)return;const l=r.json.earlyAccessFeatures;return null===(s=this.instance.persistence)||void 0===s||s.register({[E1]:l}),e(l)}})}_prepareFeatureFlagsForCallbacks(){const e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(i=>t[i]),flagVariants:Object.keys(t).filter(i=>t[i]).reduce((i,r)=>(i[r]=t[r],i),{})}}_fireFeatureFlagsCallbacks(e){const{flags:t,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach(r=>r(t,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.instance.get_property(nv)||{};this.instance.register({[nv]:Dt(Dt({},i),e)}),t&&this.instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.instance.unregister(nv)}setGroupPropertiesForFlags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.instance.get_property(Bf)||{};0!==Object.keys(i).length&&Object.keys(i).forEach(r=>{i[r]=Dt(Dt({},i[r]),e[r]),delete e[r]}),this.instance.register({[Bf]:Dt(Dt({},i),e)}),t&&this.instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){const t=this.instance.get_property(Bf)||{};this.instance.register({[Bf]:ii(Dt({},t),{[e]:{}})})}else this.instance.unregister(Bf)}}Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)}),Number.isInteger||(Number.isInteger=function(n){return Fa(n)&&isFinite(n)&&Math.floor(n)===n});const DL="0123456789abcdef";class cI{constructor(e){if(this.bytes=e,16!==e.length)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,i,r){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||t<0||i<0||r<0||e>0xffffffffffff||t>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");const s=new Uint8Array(16);return s[0]=e/2**40,s[1]=e/2**32,s[2]=e/2**24,s[3]=e/65536,s[4]=e/256,s[5]=e,s[6]=112|t>>>8,s[7]=t,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new cI(s)}toString(){let e="";for(let t=0;t<this.bytes.length;t++)e=e+DL.charAt(this.bytes[t]>>>4)+DL.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new cI(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(let t=0;t<16;t++){const i=this.bytes[t]-e.bytes[t];if(0!==i)return Math.sign(i)}return 0}}class H${constructor(){ht(this,"timestamp",0),ht(this,"counter",0),ht(this,"random",new $$)}generate(){const e=this.generateOrAbort();if(Pt(e)){this.timestamp=0;const t=this.generateOrAbort();if(Pt(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){const e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return cI.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}let IL,SL=n=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(let e=0;e<n.length;e++)n[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return n};ae&&!Pt(ae.crypto)&&crypto.getRandomValues&&(SL=n=>crypto.getRandomValues(n));class $${constructor(){ht(this,"buffer",new Uint32Array(8)),ht(this,"cursor",1/0)}nextUint32(){return this.cursor>=this.buffer.length&&(SL(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}const Uf=()=>z$().toString(),z$=()=>(IL||(IL=new H$)).generate(),G$="Thu, 01 Jan 1970 00:00:00 GMT";let bb="";const q$=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,Xd={is_supported:()=>!!Ct,error:function(n){je.error("cookieStore error: "+n)},get:function(n){if(Ct){try{const e=n+"=",t=Ct.cookie.split(";").filter(i=>i.length);for(let i=0;i<t.length;i++){let r=t[i];for(;" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return decodeURIComponent(r.substring(e.length,r.length))}}catch(e){}return null}},parse:function(n){let e;try{e=JSON.parse(Xd.get(n))||{}}catch(t){}return e},set:function(n,e,t,i,r){if(Ct)try{let s="",l="";const u=function W$(n,e){if(e){let t=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ct;if(bb)return bb;if(!r||["localhost","127.0.0.1"].includes(i))return"";const s=i.split(".");let l=Math.min(s.length,8);const u="dmn_chk_"+Uf(),g=new RegExp("(^|;)\\s*"+u+"=1");for(;!bb&&l--;){const v=s.slice(l).join("."),w=u+"=1;domain=."+v;r.cookie=w,g.test(r.cookie)&&(r.cookie=w+";expires="+G$,bb=v)}return bb}(n);if(!t){const i=(r=>{const s=r.match(q$);return s?s[0]:""})(n);i!==t&&je.info("Warning: cookie subdomain discovery mismatch",i,t),t=i}return t?"; domain=."+t:""}return""}(Ct.location.hostname,i);if(t){const v=new Date;v.setTime(v.getTime()+24*t*60*60*1e3),s="; expires="+v.toUTCString()}r&&(l="; secure");const g=n+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+u+l;return g.length>3686.4&&je.warn("cookieStore warning: large cookie, len="+g.length),Ct.cookie=g,g}catch(s){return}},remove:function(n,e){try{Xd.set(n,"",-1,e)}catch(t){return}}};let M1=null;const Fr={is_supported:function(){if(!Lf(M1))return M1;let n=!0;if(Pt(ae))n=!1;else try{const e="__mplssupport__";Fr.set(e,"xyz"),'"xyz"'!==Fr.get(e)&&(n=!1),Fr.remove(e)}catch(e){n=!1}return n||je.error("localStorage unsupported; falling back to cookie store"),M1=n,n},error:function(n){je.error("localStorage error: "+n)},get:function(n){try{return null==ae?void 0:ae.localStorage.getItem(n)}catch(e){Fr.error(e)}return null},parse:function(n){try{return JSON.parse(Fr.get(n))||{}}catch(e){}return null},set:function(n,e){try{null==ae||ae.localStorage.setItem(n,JSON.stringify(e))}catch(t){Fr.error(t)}},remove:function(n){try{null==ae||ae.localStorage.removeItem(n)}catch(e){Fr.error(e)}}},Z$=["distinct_id",nI,yb,aI],uI=ii(Dt({},Fr),{parse:function(n){try{let e={};try{e=Xd.parse(n)||{}}catch(i){}const t=po(e,JSON.parse(Fr.get(n)||"{}"));return Fr.set(n,t),t}catch(e){}return null},set:function(n,e,t,i,r,s){try{Fr.set(n,e,void 0,void 0,s);const l={};Z$.forEach(u=>{e[u]&&(l[u]=e[u])}),Object.keys(l).length&&Xd.set(n,l,t,i,r,s)}catch(l){Fr.error(l)}},remove:function(n,e){try{null==ae||ae.localStorage.removeItem(n),Xd.remove(n,e)}catch(t){Fr.error(t)}}}),dI={},K$={is_supported:function(){return!0},error:function(n){je.error("memoryStorage error: "+n)},get:function(n){return dI[n]||null},parse:function(n){return dI[n]||null},set:function(n,e){dI[n]=e},remove:function(n){delete dI[n]}};let Gg=null;const bs={is_supported:function(){if(!Lf(Gg))return Gg;if(Gg=!0,Pt(ae))Gg=!1;else try{const n="__support__";bs.set(n,"xyz"),'"xyz"'!==bs.get(n)&&(Gg=!1),bs.remove(n)}catch(n){Gg=!1}return Gg},error:function(n){je.error("sessionStorage error: ",n)},get:function(n){try{return null==ae?void 0:ae.sessionStorage.getItem(n)}catch(e){bs.error(e)}return null},parse:function(n){try{return JSON.parse(bs.get(n))||null}catch(e){}return null},set:function(n,e){try{null==ae||ae.sessionStorage.setItem(n,JSON.stringify(e))}catch(t){bs.error(t)}},remove:function(n){try{null==ae||ae.sessionStorage.removeItem(n)}catch(e){bs.error(e)}}},Y$=["localhost","127.0.0.1"],wb=n=>{const e=null==Ct?void 0:Ct.createElement("a");return Pt(e)?null:(e.href=n,e)},iv=function(n,e){return!!function(t){try{new RegExp(t)}catch(i){return!1}return!0}(e)&&new RegExp(e).test(n)},hI=function(n,e){const t=((n.split("#")[0]||"").split("?")[1]||"").split("&");let i;for(let r=0;r<t.length;r++){const s=t[r].split("=");if(s[0]===e){i=s;break}}if(!Rr(i)||i.length<2)return"";{let r=i[1];try{r=decodeURIComponent(r)}catch(s){je.error("Skipping decoding for malformed query param: "+r)}return r.replace(/\+/g," ")}},fI=function(n,e){const t=n.match(new RegExp(e+"=([^&]*)"));return t?t[1]:null},Sl="Mobile",pI="iOS",Cu="Android",Eb="Tablet",TL=Cu+" "+Eb,ML="Apple Watch",Cb="Safari",rv="BlackBerry",kL="Samsung",PL=kL+"Browser",OL=kL+" Internet",jf="Chrome",RL=jf+" "+pI,k1="Internet Explorer",FL=k1+" "+Sl,O1="Edge",NL="Microsoft "+O1,sv="Firefox",LL=sv+" "+pI,Db="Nintendo",Ib="PlayStation",ov="Xbox",VL=Cu+" "+Sl,BL=Sl+" "+Cb,Sb="Windows",R1=Sb+" Phone",F1="Ouya",jL="Generic",ez=jL+" "+Sl.toLowerCase(),HL=jL+" "+Eb.toLowerCase(),N1="Konqueror",go="(\\d+(\\.\\d+)?)",L1=new RegExp("Version/"+go),tz=new RegExp(ov,"i"),nz=new RegExp(Ib+" \\w+","i"),iz=new RegExp(Db+" \\w+","i"),V1=new RegExp(rv+"|PlayBook|BB10","i"),rz={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},$L=function(n,e){return e=e||"",Sn(n," OPR/")&&Sn(n,"Mini")?"Opera Mini":Sn(n," OPR/")?"Opera":V1.test(n)?rv:Sn(n,"IE"+Sl)||Sn(n,"WPDesktop")?FL:Sn(n,PL)?OL:Sn(n,O1)||Sn(n,"Edg/")?NL:Sn(n,"FBIOS")?"Facebook "+Sl:Sn(n,"UCWEB")||Sn(n,"UCBrowser")?"UC Browser":Sn(n,"CriOS")?RL:Sn(n,"CrMo")?jf:Sn(n,Cu)&&Sn(n,Cb)?VL:Sn(n,jf)?jf:Sn(n,"FxiOS")?LL:Sn(n.toLowerCase(),N1.toLowerCase())?N1:((n,e)=>{return e&&Sn(e,"Apple")||Sn(t=n,Cb)&&!Sn(t,jf)&&!Sn(t,Cu);var t})(n,e)?Sn(n,Sl)?BL:Cb:Sn(n,sv)?sv:Sn(n,"MSIE")||Sn(n,"Trident/")?k1:Sn(n,"Gecko")?sv:""},oz={[FL]:[new RegExp("rv:"+go)],[NL]:[new RegExp(O1+"?\\/"+go)],[jf]:[new RegExp("(Chrome|CrMo)\\/"+go)],[RL]:[new RegExp("CriOS\\/"+go)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+go)],[Cb]:[L1],[BL]:[L1],Opera:[new RegExp("(Opera|OPR)\\/"+go)],[sv]:[new RegExp(sv+"\\/"+go)],[LL]:[new RegExp("FxiOS\\/"+go)],[N1]:[new RegExp("Konqueror[:/]?"+go,"i")],[rv]:[new RegExp(rv+" "+go),L1],[VL]:[new RegExp("android\\s"+go,"i")],[OL]:[new RegExp(PL+"\\/"+go)],[k1]:[new RegExp("(rv:|MSIE )"+go)],Mozilla:[new RegExp("rv:"+go)]},zL=[[new RegExp("Xbox; Xbox (.*?)[);]","i"),n=>[ov,n&&n[1]||""]],[new RegExp(Db,"i"),[Db,""]],[new RegExp(Ib,"i"),[Ib,""]],[V1,[rv,""]],[new RegExp(Sb,"i"),(n,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[R1,""];if(new RegExp(Sl).test(e)&&!/IEMobile\b/.test(e))return[Sb+" "+Sl,""];const t=/Windows NT ([0-9.]+)/i.exec(e);if(t&&t[1]){let r=rz[t[1]]||"";return/arm/i.test(e)&&(r="RT"),[Sb,r]}return[Sb,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,n=>n&&n[3]?[pI,[n[3],n[4],n[5]||"0"].join(".")]:[pI,""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,n=>{let e="";return n&&n.length>=3&&(e=Pt(n[2])?n[3]:n[2]),["watchOS",e]}],[new RegExp("("+Cu+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Cu+")","i"),n=>n&&n[2]?[Cu,[n[2],n[3],n[4]||"0"].join(".")]:[Cu,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,n=>{const e=["Mac OS X",""];return n&&n[1]&&(e[1]=[n[1],n[2],n[3]||"0"].join(".")),e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,["Chrome OS",""]],[/Linux|debian/i,["Linux",""]]],GL=function(n){return iz.test(n)?Db:nz.test(n)?Ib:tz.test(n)?ov:new RegExp(F1,"i").test(n)?F1:new RegExp("("+R1+"|WPDesktop)","i").test(n)?R1:/iPad/.test(n)?"iPad":/iPod/.test(n)?"iPod Touch":/iPhone/.test(n)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(n)?ML:V1.test(n)?rv:/(kobo)\s(ereader|touch)/i.test(n)?"Kobo":new RegExp("Nokia","i").test(n)?"Nokia":/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(n)||/(kf[a-z]+)( bui|\)).+silk\//i.test(n)?"Kindle Fire":/(Android|ZTE)/i.test(n)?!new RegExp(Sl).test(n)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(n)?/pixel[\daxl ]{1,6}/i.test(n)&&!/pixel c/i.test(n)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(n)||/lmy47v/i.test(n)&&!/QTAQZ3/i.test(n)?Cu:TL:Cu:new RegExp("(pda|Mobile)","i").test(n)?ez:new RegExp(Eb,"i").test(n)&&!new RegExp(Eb+" pc","i").test(n)?HL:""},gI="https?://(.*)",az=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],cr={campaignParams:function(n){return Ct?this._campaignParamsFromUrl(Ct.URL,n):{}},_campaignParamsFromUrl:function(n,e){const t=az.concat(e||[]),i={};return ui(t,function(r){const s=hI(n,r);i[r]=s||null}),i},_searchEngine:function(n){return n?0===n.search(gI+"google.([^/?]*)")?"google":0===n.search(gI+"bing.com")?"bing":0===n.search(gI+"yahoo.com")?"yahoo":0===n.search(gI+"duckduckgo.com")?"duckduckgo":null:null},_searchInfoFromReferrer:function(n){const e=cr._searchEngine(n),t="yahoo"!=e?"q":"p",i={};if(!Lf(e)){i.$search_engine=e;const r=Ct?hI(Ct.referrer,t):"";r.length&&(i.ph_keyword=r)}return i},searchInfo:function(){const n=null==Ct?void 0:Ct.referrer;return n?this._searchInfoFromReferrer(n):{}},browser:$L,browserVersion:function(n,e){const t=$L(n,e),i=oz[t];if(Pt(i))return null;for(let r=0;r<i.length;r++){const l=n.match(i[r]);if(l)return parseFloat(l[l.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(n){for(let e=0;e<zL.length;e++){const[t,i]=zL[e],r=t.exec(n),s=r&&(Il(i)?i(r,n):i);if(s)return s}return["",""]},device:GL,deviceType:function(n){const e=GL(n);return"iPad"===e||e===TL||"Kobo"===e||"Kindle Fire"===e||e===HL?Eb:e===Db||e===ov||e===Ib||e===F1?"Console":e===ML?"Wearable":e?Sl:"Desktop"},referrer:function(){return(null==Ct?void 0:Ct.referrer)||"$direct"},referringDomain:function(){var n;return null!=Ct&&Ct.referrer&&(null===(n=wb(Ct.referrer))||void 0===n?void 0:n.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer(),u:null==Ko?void 0:Ko.href}},initialPersonPropsFromInfo:function(n){var e;const{r:t,u:i}=n,r={$initial_referrer:t,$initial_referring_domain:null==t?void 0:"$direct"==t?"$direct":null===(e=wb(t))||void 0===e?void 0:e.host};if(i){r.$initial_current_url=i;const s=wb(i);r.$initial_host=null==s?void 0:s.host,r.$initial_pathname=null==s?void 0:s.pathname,ui(this._campaignParamsFromUrl(i),function(l,u){r["$initial_"+y1(u)]=l})}return t&&ui(this._searchInfoFromReferrer(t),function(s,l){r["$initial_"+y1(l)]=s}),r},timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(n){return}},properties:function(){if(!Qr)return{};const[n,e]=cr.os(Qr);return po(tI({$os:n,$os_version:e,$browser:cr.browser(Qr,navigator.vendor),$device:cr.device(Qr),$device_type:cr.deviceType(Qr),$timezone:cr.timezone()}),{$current_url:null==Ko?void 0:Ko.href,$host:null==Ko?void 0:Ko.host,$pathname:null==Ko?void 0:Ko.pathname,$raw_user_agent:Qr.length>1e3?Qr.substring(0,997)+"...":Qr,$browser_version:cr.browserVersion(Qr,navigator.vendor),$browser_language:cr.browserLanguage(),$screen_height:null==ae?void 0:ae.screen.height,$screen_width:null==ae?void 0:ae.screen.width,$viewport_height:null==ae?void 0:ae.innerHeight,$viewport_width:null==ae?void 0:ae.innerWidth,$lib:"web",$lib_version:Nf.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!Qr)return{};const[n,e]=cr.os(Qr);return po(tI({$os:n,$os_version:e,$browser:cr.browser(Qr,navigator.vendor)}),{$browser_version:cr.browserVersion(Qr,navigator.vendor)})}},lz=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class B1{constructor(e){this.config=e,this.props={},this.campaign_params_saved=!1,this.name=(t=>{let i="";return t.token&&(i=t.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),t.persistence_name?"ph_"+t.persistence_name:"ph_"+i+"_posthog"})(e),this.storage=this.buildStorage(e),this.load(),e.debug&&je.info("Persistence loaded",e.persistence,Dt({},this.props)),this.update_config(e,e),this.save()}buildStorage(e){let t;-1===lz.indexOf(e.persistence.toLowerCase())&&(je.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");const i=e.persistence.toLowerCase();return t="localstorage"===i&&Fr.is_supported()?Fr:"localstorage+cookie"===i&&uI.is_supported()?uI:"sessionstorage"===i&&bs.is_supported()?bs:"memory"===i?K$:"cookie"===i?Xd:uI.is_supported()?uI:Xd,t}properties(){const e={};return ui(this.props,function(t,i){if(i===tv&&lr(t)){const r=Object.keys(t);for(let s=0;s<r.length;s++)e[`$feature/${r[s]}`]=t[r[s]]}else(function(r,s){let l=!1;return Lf(r)?l:eL&&r.indexOf===eL?-1!=r.indexOf(s):(ui(r,function(u){if(l||(l=u===s))return XD}),l)})(U$,i)||(e[i]=t)}),e}load(){if(this.disabled)return;const e=this.storage.parse(this.name);e&&(this.props=po({},e))}save(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}remove(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}clear(){this.remove(),this.props={}}register_once(e,t,i){if(lr(e)){Pt(t)&&(t="None"),this.expire_days=Pt(i)?this.default_expiry:i;let r=!1;if(ui(e,(s,l)=>{this.props.hasOwnProperty(l)&&this.props[l]!==t||(this.props[l]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,t){if(lr(e)){this.expire_days=Pt(t)?this.default_expiry:t;let i=!1;if(ui(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.campaign_params_saved){const e=cr.campaignParams(this.config.custom_campaign_params);mb(tI(e))||this.register(cr.campaignParams(this.config.custom_campaign_params)),this.campaign_params_saved=!0}}update_search_keyword(){this.register(cr.searchInfo())}update_referrer_info(){this.register_once(cr.referrerInfo(),void 0)}set_initial_person_info(){this.props[S1]||this.props[T1]||this.register_once({[wL]:cr.initialPersonInfo()},void 0)}get_referrer_info(){return tI({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}get_initial_props(){const e={};ui([T1,S1],i=>{const r=this.props[i];r&&ui(r,function(s,l){e["$initial_"+y1(l)]=s})});const t=this.props[wL];if(t){const i=cr.initialPersonPropsFromInfo(t);po(e,i)}return e}safe_merge(e){return ui(this.props,function(t,i){i in e||(e[i]=t)}),e}update_config(e,t){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){const i=this.buildStorage(e),r=this.props;this.clear(),this.storage=i,this.props=r,this.save()}}set_disabled(e){this.disabled=e,this.disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}get_cross_subdomain(){return!!this.cross_subdomain}set_secure(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}set_event_timer(e,t){const i=this.props[vb]||{};i[e]=t,this.props[vb]=i,this.save()}remove_event_timer(e){const t=(this.props[vb]||{})[e];return Pt(t)||(delete this.props[vb][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}function mI(n){var e;return(null===(e=JSON.stringify(n,function(){const t=[];return function(i,r){if(lr(r)){for(;t.length>0&&t.at(-1)!==this;)t.pop();return t.includes(r)?"[Circular]":(t.push(r),r)}return r}}()))||void 0===e?void 0:e.length)||0}function U1(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6606028.8;if(n.size>=e&&n.data.length>1){const t=Math.floor(n.data.length/2),i=n.data.slice(0,t),r=n.data.slice(t);return[U1({size:mI(i),data:i,sessionId:n.sessionId,windowId:n.windowId}),U1({size:mI(r),data:r,sessionId:n.sessionId,windowId:n.windowId})].flatMap(s=>s)}return[n]}var Hf=(n=>(n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n))(Hf||{}),vc=(n=>(n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n[n.CustomElement=16]="CustomElement",n))(vc||{});function qL(n){var e;return n.id===x1||!(null===(e=n.closest)||void 0===e||!e.call(n,"#"+x1))}function _I(n){return!!n&&1===n.nodeType}function $f(n,e){return!!n&&!!n.tagName&&n.tagName.toLowerCase()===e.toLowerCase()}function WL(n){return!!n&&3===n.nodeType}function ZL(n){return!!n&&11===n.nodeType}function j1(n){return n?JD(n).split(/\s+/):[]}function KL(n){const e=null==ae?void 0:ae.location.href;return!!(e&&n&&n.some(t=>e.match(t)))}function vI(n){let e="";switch(typeof n.className){case"string":e=n.className;break;case"object":e=(n.className&&"baseVal"in n.className?n.className.baseVal:null)||n.getAttribute("class")||"";break;default:e=""}return j1(e)}function YL(n){return Ki(n)?null:JD(n).split(/(\s+)/).filter(e=>av(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function yI(n){let e="";return $1(n)&&!JL(n)&&n.childNodes&&n.childNodes.length&&ui(n.childNodes,function(t){var i;WL(t)&&t.textContent&&(e+=null!==(i=YL(t.textContent))&&void 0!==i?i:"")}),JD(e)}function QL(n){return Pt(n.target)?n.srcElement||null:null!==(e=n.target)&&void 0!==e&&e.shadowRoot?n.composedPath()[0]||null:n.target||null;var e}const H1=["a","button","form","input","select","textarea","label"];function XL(n){const e=n.parentNode;return!(!e||!_I(e))&&e}function $1(n){for(let i=n;i.parentNode&&!$f(i,"body");i=i.parentNode){const r=vI(i);if(Sn(r,"ph-sensitive")||Sn(r,"ph-no-capture"))return!1}if(Sn(vI(n),"ph-include"))return!0;const e=n.type||"";if(Gs(e))switch(e.toLowerCase()){case"hidden":case"password":return!1}const t=n.name||n.id||"";return!(Gs(t)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(t.replace(/[^a-zA-Z0-9]/g,"")))}function JL(n){return!!($f(n,"input")&&!["button","checkbox","submit","reset"].includes(n.type)||$f(n,"select")||$f(n,"textarea")||"true"===n.getAttribute("contenteditable"))}const e2="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",uz=new RegExp(`^(?:${e2})$`),dz=new RegExp(e2),t2="\\d{3}-?\\d{2}-?\\d{4}",hz=new RegExp(`^(${t2})$`),fz=new RegExp(`(${t2})`);function av(n){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!(Ki(n)||Gs(n)&&(n=JD(n),(e?uz:dz).test((n||"").replace(/[- ]/g,""))||(e?hz:fz).test(n)))}function n2(n){let e=yI(n);return e=`${e} ${r2(n)}`.trim(),av(e)?e:""}function r2(n){let e="";return n&&n.childNodes&&n.childNodes.length&&ui(n.childNodes,function(t){var i;if(t&&"span"===(null===(i=t.tagName)||void 0===i?void 0:i.toLowerCase()))try{const r=yI(t);e=`${e} ${r}`.trim(),t.childNodes&&t.childNodes.length&&(e=`${e} ${r2(t)}`.trim())}catch(r){je.error(r)}}),e}function pz(n){return function(e){return e.map(i=>{var r,s;let l="";if(i.tag_name&&(l+=i.tag_name),i.attr_class){i.attr_class.sort();for(const v of i.attr_class)l+=`.${v.replace(/"/g,"")}`}const u=Dt(Dt(Dt(ii(Dt({},i.text?{text:i.text}:{}),{"nth-child":null!==(r=i.nth_child)&&void 0!==r?r:0,"nth-of-type":null!==(s=i.nth_of_type)&&void 0!==s?s:0}),i.href?{href:i.href}:{}),i.attr_id?{attr_id:i.attr_id}:{}),i.attributes),g={};return eI(u).sort((v,w)=>{let[I]=v,[M]=w;return I.localeCompare(M)}).forEach(v=>{let[w,I]=v;return g[s2(w.toString())]=s2(I.toString())}),l+=":",l+=eI(u).map(v=>{let[w,I]=v;return`${w}="${I}"`}).join(""),l}).join(";")}(n.map(t=>{var i,r;const s={text:null===(i=t.$el_text)||void 0===i?void 0:i.slice(0,400),tag_name:t.tag_name,href:null===(r=t.attr__href)||void 0===r?void 0:r.slice(0,2048),attr_class:gz(t),attr_id:t.attr__id,nth_child:t.nth_child,nth_of_type:t.nth_of_type,attributes:{}};return eI(t).filter(l=>{let[u]=l;return 0===u.indexOf("attr__")}).forEach(l=>{let[u,g]=l;return s.attributes[u]=g}),s}))}function s2(n){return n.replace(/"|\\"/g,'\\"')}function gz(n){const e=n.attr__class;return e?Rr(e)?e:j1(e):void 0}const z1="[SessionRecording]",G1="redacted",bI={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:n=>n,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]},mz=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],_z=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],vz=["/s/","/e/","/i/"];function o2(n,e,t,i){if(Ki(n))return n;let r=(null==e?void 0:e["content-length"])||new Blob([n]).size;return Gs(r)&&(r=parseInt(r)),r>t?`[SessionRecording] ${i} body too large to record (${r} bytes)`:n}function a2(n,e){if(Ki(n))return n;let t=n;return av(t,!1)||(t=z1+" "+e+" body "+G1),ui(_z,i=>{var r,s;null!==(r=t)&&void 0!==r&&r.length&&-1!==(null===(s=t)||void 0===s?void 0:s.indexOf(i))&&(t=z1+" "+e+" body "+G1+" as might contain: "+i)}),t}function Jd(n,e,t,i){return e>t&&(je.warn("min cannot be greater than max."),e=t),Fa(n)?n>t?(i&&je.warn(i+" cannot be  greater than max: "+t+". Using max value instead."),t):n<e?(i&&je.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):n:(i&&je.warn(i+" must be a number. Defaulting to max value:"+t),t)}class bz{constructor(e){var t,i;ht(this,"bucketSize",100),ht(this,"refillRate",10),ht(this,"mutationBuckets",{}),ht(this,"loggedTracker",{}),ht(this,"refillBuckets",()=>{Object.keys(this.mutationBuckets).forEach(e=>{this.mutationBuckets[e]=this.mutationBuckets[e]+this.refillRate,this.mutationBuckets[e]>=this.bucketSize&&delete this.mutationBuckets[e]})}),ht(this,"getNodeOrRelevantParent",e=>{const t=this.rrweb.mirror.getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){const i=t.closest("svg");if(i)return[this.rrweb.mirror.getId(i),i]}return[e,t]}),ht(this,"numberOfChanges",e=>{var t,i,r,s,l,u,g,v;return(null!==(t=null===(i=e.removes)||void 0===i?void 0:i.length)&&void 0!==t?t:0)+(null!==(r=null===(s=e.attributes)||void 0===s?void 0:s.length)&&void 0!==r?r:0)+(null!==(l=null===(u=e.texts)||void 0===u?void 0:u.length)&&void 0!==l?l:0)+(null!==(g=null===(v=e.adds)||void 0===v?void 0:v.length)&&void 0!==g?g:0)}),ht(this,"throttleMutations",e=>{if(3!==e.type||0!==e.data.source)return e;const t=e.data,i=this.numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter(s=>{var l;const[u,g]=this.getNodeOrRelevantParent(s.id);return 0!==this.mutationBuckets[u]&&(this.mutationBuckets[u]=null!==(l=this.mutationBuckets[u])&&void 0!==l?l:this.bucketSize,this.mutationBuckets[u]=Math.max(this.mutationBuckets[u]-1,0),0===this.mutationBuckets[u]&&(this.loggedTracker[u]||(this.loggedTracker[u]=!0,null===(v=(w=this.options).onBlockedNode)||void 0===v||v.call(w,u,g))),s);var v,w}));const r=this.numberOfChanges(t);return 0!==r||i===r?e:void 0});let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.rrweb=e,this.options=r,this.refillRate=Jd(null!==(t=this.options.refillRate)&&void 0!==t?t:this.refillRate,0,100,"mutation throttling refill rate"),this.bucketSize=Jd(null!==(i=this.options.bucketSize)&&void 0!==i?i:this.bucketSize,0,100,"mutation throttling bucket size"),setInterval(()=>{this.refillBuckets()},1e3)}}var Tl=Uint8Array,mo=Uint16Array,lv=Uint32Array,q1=new Tl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),W1=new Tl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l2=new Tl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c2=function(n,e){for(var t=new mo(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];var r=new lv(t[30]);for(i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},u2=c2(q1,2),Z1=u2[1];u2[0][28]=258,Z1[258]=28;for(var d2=c2(W1,0)[1],K1=new mo(32768),Di=0;Di<32768;++Di){var qg=(43690&Di)>>>1|(21845&Di)<<1;qg=(61680&(qg=(52428&qg)>>>2|(13107&qg)<<2))>>>4|(3855&qg)<<4,K1[Di]=((65280&qg)>>>8|(255&qg)<<8)>>>1}var Tb=function(n,e,t){for(var i=n.length,r=0,s=new mo(e);r<i;++r)++s[n[r]-1];var l,u=new mo(e);for(r=0;r<e;++r)u[r]=u[r-1]+s[r-1]<<1;if(t){l=new mo(1<<e);var g=15-e;for(r=0;r<i;++r)if(n[r])for(var v=r<<4|n[r],w=e-n[r],I=u[n[r]-1]++<<w,M=I|(1<<w)-1;I<=M;++I)l[K1[I]>>>g]=v}else for(l=new mo(i),r=0;r<i;++r)l[r]=K1[u[n[r]-1]++]>>>15-n[r];return l},Wg=new Tl(288);for(Di=0;Di<144;++Di)Wg[Di]=8;for(Di=144;Di<256;++Di)Wg[Di]=9;for(Di=256;Di<280;++Di)Wg[Di]=7;for(Di=280;Di<288;++Di)Wg[Di]=8;var wI=new Tl(32);for(Di=0;Di<32;++Di)wI[Di]=5;var Ez=Tb(Wg,9,0),Cz=Tb(wI,5,0),h2=function(n){return(n/8>>0)+(7&n&&1)},f2=function(n,e,t){(null==t||t>n.length)&&(t=n.length);var i=new(n instanceof mo?mo:n instanceof lv?lv:Tl)(t-e);return i.set(n.subarray(e,t)),i},eh=function(n,e,t){var i=e/8>>0;n[i]|=t<<=7&e,n[i+1]|=t>>>8},xb=function(n,e,t){var i=e/8>>0;n[i]|=t<<=7&e,n[i+1]|=t>>>8,n[i+2]|=t>>>16},Y1=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,s=t.slice();if(!r)return[new Tl(0),0];if(1==r){var l=new Tl(t[0].s+1);return l[t[0].s]=1,[l,1]}t.sort(function(st,wt){return st.f-wt.f}),t.push({s:-1,f:25001});var u=t[0],g=t[1],v=0,w=1,I=2;for(t[0]={s:-1,f:u.f+g.f,l:u,r:g};w!=r-1;)u=t[t[v].f<t[I].f?v++:I++],g=t[v!=w&&t[v].f<t[I].f?v++:I++],t[w++]={s:-1,f:u.f+g.f,l:u,r:g};var M=s[0].s;for(i=1;i<r;++i)s[i].s>M&&(M=s[i].s);var O=new mo(M+1),N=Q1(t[w-1],O,0);if(N>e){i=0;var H=0,Y=N-e,he=1<<Y;for(s.sort(function(st,wt){return O[wt.s]-O[st.s]||st.f-wt.f});i<r;++i){var _e=s[i].s;if(!(O[_e]>e))break;H+=he-(1<<N-O[_e]),O[_e]=e}for(H>>>=Y;H>0;){var Oe=s[i].s;O[Oe]<e?H-=1<<e-O[Oe]++-1:++i}for(;i>=0&&H;--i){var Ge=s[i].s;O[Ge]==e&&(--O[Ge],++H)}N=e}return[new Tl(O),N]},Q1=function(n,e,t){return-1==n.s?Math.max(Q1(n.l,e,t+1),Q1(n.r,e,t+1)):e[n.s]=t},p2=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new mo(++e),i=0,r=n[0],s=1,l=function(g){t[i++]=g},u=1;u<=e;++u)if(n[u]==r&&u!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(r),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(r);s=1,r=n[u]}return[t.subarray(0,i),e]},Ab=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},X1=function(n,e,t){var i=t.length,r=h2(e+2);n[r]=255&i,n[r+1]=i>>>8,n[r+2]=255^n[r],n[r+3]=255^n[r+1];for(var s=0;s<i;++s)n[r+s+4]=t[s];return 8*(r+4+i)},g2=function(n,e,t,i,r,s,l,u,g,v,w){eh(e,w++,t),++r[256];for(var I=Y1(r,15),M=I[0],O=I[1],N=Y1(s,15),H=N[0],Y=N[1],he=p2(M),_e=he[0],Oe=he[1],Ge=p2(H),st=Ge[0],wt=Ge[1],Ot=new mo(19),Rt=0;Rt<_e.length;++Rt)Ot[31&_e[Rt]]++;for(Rt=0;Rt<st.length;++Rt)Ot[31&st[Rt]]++;for(var bn=Y1(Ot,7),Mi=bn[0],Ou=bn[1],rs=19;rs>4&&!Mi[l2[rs-1]];--rs);var xs,Ba,Ua,_t,St=v+5<<3,Lt=Ab(r,Wg)+Ab(s,wI)+l,rn=Ab(r,M)+Ab(s,H)+l+14+3*rs+Ab(Ot,Mi)+(2*Ot[16]+3*Ot[17]+7*Ot[18]);if(St<=Lt&&St<=rn)return X1(e,w,n.subarray(g,g+v));if(eh(e,w,1+(rn<Lt)),w+=2,rn<Lt){xs=Tb(M,O,0),Ba=M,Ua=Tb(H,Y,0),_t=H;var di=Tb(Mi,Ou,0);for(eh(e,w,Oe-257),eh(e,w+5,wt-1),eh(e,w+10,rs-4),w+=14,Rt=0;Rt<rs;++Rt)eh(e,w+3*Rt,Mi[l2[Rt]]);w+=3*rs;for(var As=[_e,st],Jn=0;Jn<2;++Jn){var fr=As[Jn];for(Rt=0;Rt<fr.length;++Rt){var wn=31&fr[Rt];eh(e,w,di[wn]),w+=Mi[wn],wn>15&&(eh(e,w,fr[Rt]>>>5&127),w+=fr[Rt]>>>12)}}}else xs=Ez,Ba=Wg,Ua=Cz,_t=wI;for(Rt=0;Rt<u;++Rt)if(i[Rt]>255){xb(e,w,xs[257+(wn=i[Rt]>>>18&31)]),w+=Ba[wn+257],wn>7&&(eh(e,w,i[Rt]>>>23&31),w+=q1[wn]);var hh=31&i[Rt];xb(e,w,Ua[hh]),w+=_t[hh],hh>3&&(xb(e,w,i[Rt]>>>5&8191),w+=W1[hh])}else xb(e,w,xs[i[Rt]]),w+=Ba[i[Rt]];return xb(e,w,xs[256]),w+Ba[256]},Dz=new lv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Iz=function(){for(var n=new lv(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(1&t&&3988292384)^t>>>1;n[e]=t}return n}(),J1=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};function m2(n,e){void 0===e&&(e={});var t=function(){var n=4294967295;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=Iz[255&t^e[i]]^t>>>8;n=t},d:function(){return 4294967295^n}}}(),i=n.length;t.p(n);var r=function(n,e,t,i,r){return function(s,l,u,g,v,w){var I=s.length,M=new Tl(g+I+5*(1+Math.floor(I/7e3))+8),O=M.subarray(g,M.length-8),N=0;if(!l||I<8)for(var H=0;H<=I;H+=65535){var Y=H+65535;Y<I?N=X1(O,N,s.subarray(H,Y)):(O[H]=true,N=X1(O,N,s.subarray(H,I)))}else{for(var he=Dz[l-1],_e=he>>>13,Oe=8191&he,Ge=(1<<u)-1,st=new mo(32768),wt=new mo(Ge+1),Ot=Math.ceil(u/3),Rt=2*Ot,bn=function(KR){return(s[KR]^s[KR+1]<<Ot^s[KR+2]<<Rt)&Ge},Mi=new lv(25e3),Ou=new mo(288),rs=new mo(32),xs=0,Ba=0,Ua=(H=0,0),_t=0,St=0;H<I;++H){var Lt=bn(H),rn=32767&H,di=wt[Lt];if(st[rn]=di,wt[Lt]=rn,_t<=H){var As=I-H;if((xs>7e3||Ua>24576)&&As>423){N=g2(s,O,0,Mi,Ou,rs,Ba,Ua,St,H-St,N),Ua=xs=Ba=0,St=H;for(var Jn=0;Jn<286;++Jn)Ou[Jn]=0;for(Jn=0;Jn<30;++Jn)rs[Jn]=0}var fr=2,wn=0,hh=Oe,Ru=rn-di&32767;if(As>2&&Lt==bn(H-Ru))for(var Ms=Math.min(_e,As)-1,fh=Math.min(32767,H),Fu=Math.min(258,As);Ru<=fh&&--hh&&rn!=di;){if(s[H+fr]==s[H+fr-Ru]){for(var Qs=0;Qs<Fu&&s[H+Qs]==s[H+Qs-Ru];++Qs);if(Qs>fr){if(fr=Qs,wn=Ru,Qs>Ms)break;var Kw=Math.min(Ru,Qs-2),H3=0;for(Jn=0;Jn<Kw;++Jn){var ZR=H-Ru+Jn+32768&32767,$3=ZR-st[ZR]+32768&32767;$3>H3&&(H3=$3,di=ZR)}}}Ru+=(rn=di)-(di=st[rn])+32768&32767}if(wn){Mi[Ua++]=268435456|Z1[fr]<<18|d2[wn];var z3=31&Z1[fr],G3=31&d2[wn];Ba+=q1[z3]+W1[G3],++Ou[257+z3],++rs[G3],_t=H+fr,++xs}else Mi[Ua++]=s[H],++Ou[s[H]]}}N=g2(s,O,true,Mi,Ou,rs,Ba,Ua,St,H-St,N)}return f2(M,0,g+h2(N)+8)}(n,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):12+e.mem,t)}(n,e,function(n){return 10+(n.filename&&n.filename.length+1||0)}(e)),s=r.length;return function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:9==e.level?2:0,n[9]=3,0!=e.mtime&&J1(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var i=0;i<=t.length;++i)n[i+10]=t.charCodeAt(i)}}(r,e),J1(r,s-8,t.d()),J1(r,s-4,i),r}function _2(n,e){var t=n.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(n);for(var i=new Tl(n.length+(n.length>>>1)),r=0,s=function(v){i[r++]=v},l=0;l<t;++l){if(r+5>i.length){var u=new Tl(r+8+(t-l<<1));u.set(i),i=u}var g=n.charCodeAt(l);g<128||e?s(g):g<2048?(s(192|g>>>6),s(128|63&g)):g>55295&&g<57344?(s(240|(g=65536+(1047552&g)|1023&n.charCodeAt(++l))>>>18),s(128|g>>>12&63),s(128|g>>>6&63),s(128|63&g)):(s(224|g>>>12),s(128|g>>>6&63),s(128|63&g))}return f2(i,0,r)}const kz=[vc.MouseMove,vc.MouseInteraction,vc.Scroll,vc.ViewportResize,vc.Input,vc.TouchMove,vc.MediaInteraction,vc.Drag],Pz=["trigger_activated","trigger_pending","trigger_disabled"],v2=n=>({rrwebMethod:n,enqueuedAt:Date.now(),attempt:1}),_o="[SessionRecording]";function Zg(n){return function(e,t){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(m2(_2(JSON.stringify(n))))}function y2(n){return n.type===Hf.Custom&&"sessionIdle"===n.data.tag}class Oz{constructor(e){if(ht(this,"queuedRRWebEvents",[]),ht(this,"isIdle",!1),ht(this,"_linkedFlagSeen",!1),ht(this,"_lastActivityTimestamp",Date.now()),ht(this,"_linkedFlag",null),ht(this,"_removePageViewCaptureHook"),ht(this,"_onSessionIdListener"),ht(this,"_persistDecideOnSessionListener"),ht(this,"_samplingSessionListener"),ht(this,"_urlTriggers",[]),ht(this,"_forceAllowLocalhostNetworkCapture",!1),ht(this,"_onBeforeUnload",()=>{this._flushBuffer()}),ht(this,"_onOffline",()=>{this._tryAddCustomEvent("browser offline",{})}),ht(this,"_onOnline",()=>{this._tryAddCustomEvent("browser online",{})}),ht(this,"_onVisibilityChange",()=>{null!=Ct&&Ct.visibilityState&&this._tryAddCustomEvent("window "+Ct.visibilityState,{})}),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw je.error(_o+" started without valid sessionManager"),new Error(_o+" started without valid sessionManager. This is a bug.");const{sessionId:t,windowId:i}=this.sessionManager.checkAndGetSessionAndWindowId();this.sessionId=t,this.windowId=i,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&je.warn(`[SessionRecording] session_idle_threshold_ms (${this.sessionIdleThresholdMilliseconds}) is greater than the session timeout (${this.sessionManager.sessionTimeoutMs}). Session will never be detected as idle`)}get sessionIdleThresholdMilliseconds(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}get rrwebRecord(){var e,t;return null==pn||null===(e=pn.__PosthogExtensions__)||void 0===e||null===(t=e.rrweb)||void 0===t?void 0:t.record}get started(){return this._captureStarted}get sessionManager(){if(!this.instance.sessionManager)throw new Error(_o+" must be started with a valid sessionManager.");return this.instance.sessionManager}get fullSnapshotIntervalMillis(){var e,t;return"trigger_pending"===this.urlTriggerStatus?6e4:null!==(e=null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.full_snapshot_interval_millis)&&void 0!==e?e:3e5}get isSampled(){const e=this.instance.get_property(yb);return Vf(e)?e:null}get sessionDuration(){var e,t;const i=null===(e=this.buffer)||void 0===e?void 0:e.data[(null===(t=this.buffer)||void 0===t?void 0:t.data.length)-1],{sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get isRecordingEnabled(){const e=!!this.instance.get_property(w1);return ae&&e&&!this.instance.config.disable_session_recording}get isConsoleLogCaptureEnabled(){const e=!!this.instance.get_property(mL),t=this.instance.config.enable_recording_console_log;return null!=t?t:e}get canvasRecording(){var e,t,i,r,s,l;const u=this.instance.config.session_recording.captureCanvas,g=this.instance.get_property(vL),v=null!==(e=null!==(t=null==u?void 0:u.recordCanvas)&&void 0!==t?t:null==g?void 0:g.enabled)&&void 0!==e&&e,w=null!==(i=null!==(r=null==u?void 0:u.canvasFps)&&void 0!==r?r:null==g?void 0:g.fps)&&void 0!==i?i:0,I=null!==(s=null!==(l=null==u?void 0:u.canvasQuality)&&void 0!==l?l:null==g?void 0:g.quality)&&void 0!==s?s:0;return{enabled:v,fps:Jd(w,0,12,"canvas recording fps"),quality:Jd(I,0,1,"canvas recording quality")}}get networkPayloadCapture(){var e,t;const i=this.instance.get_property(_L),r={recordHeaders:null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recordHeaders,recordBody:null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.recordBody},s=(null==r?void 0:r.recordHeaders)||(null==i?void 0:i.recordHeaders),l=(null==r?void 0:r.recordBody)||(null==i?void 0:i.recordBody),u=lr(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,g=!!(Vf(u)?u:null==i?void 0:i.capturePerformance);return s||l||g?{recordHeaders:s,recordBody:l,recordPerformance:g}:void 0}get sampleRate(){const e=this.instance.get_property(yL);return Fa(e)?e:null}get minimumDuration(){const e=this.instance.get_property(bL);return Fa(e)?e:null}get status(){return this.receivedDecide?this.isRecordingEnabled?Ki(this._linkedFlag)||this._linkedFlagSeen?"trigger_pending"===this.urlTriggerStatus?"buffering":Vf(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get urlTriggerStatus(){var e,t;if(this.receivedDecide&&0===this._urlTriggers.length)return"trigger_disabled";const i=null===(e=this.instance)||void 0===e?void 0:e.get_property(rI);var r,s,l,u;return(null===(t=this.instance)||void 0===t?void 0:t.get_property(iI))!==this.sessionId?(null===(r=this.instance)||void 0===r||null===(s=r.persistence)||void 0===s||s.unregister(iI),null===(l=this.instance)||void 0===l||null===(u=l.persistence)||void 0===u||u.unregister(rI),"trigger_pending"):Pz.includes(i)?i:"trigger_pending"}set urlTriggerStatus(e){var t,i;null===(t=this.instance)||void 0===t||null===(i=t.persistence)||void 0===i||i.register({[iI]:this.sessionId,[rI]:e})}startIfEnabledOrStop(e){this.isRecordingEnabled?(this._startCapture(e),null==ae||ae.addEventListener("beforeunload",this._onBeforeUnload),null==ae||ae.addEventListener("offline",this._onOffline),null==ae||ae.addEventListener("online",this._onOnline),null==ae||ae.addEventListener("visibilitychange",this._onVisibilityChange),this._setupSampling(),Ki(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance._addCaptureHook(t=>{try{if("$pageview"===t){const i=ae?this._maskUrl(ae.location.href):"";if(!i)return;this._tryAddCustomEvent("$pageview",{href:i})}}catch(i){je.error("Could not add $pageview to rrweb session",i)}})),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId((t,i,r)=>{var s,l,u,g;r&&(this._tryAddCustomEvent("$session_id_change",{sessionId:t,windowId:i,changeReason:r}),null===(s=this.instance)||void 0===s||null===(l=s.persistence)||void 0===l||l.unregister(iI),null===(u=this.instance)||void 0===u||null===(g=u.persistence)||void 0===g||g.unregister(rI))}))):this.stopRecording()}stopRecording(){var e,t,i;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,null==ae||ae.removeEventListener("beforeunload",this._onBeforeUnload),null==ae||ae.removeEventListener("offline",this._onOffline),null==ae||ae.removeEventListener("online",this._onOnline),null==ae||ae.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),null===(e=this._removePageViewCaptureHook)||void 0===e||e.call(this),this._removePageViewCaptureHook=void 0,null===(t=this._onSessionIdListener)||void 0===t||t.call(this),this._onSessionIdListener=void 0,null===(i=this._samplingSessionListener)||void 0===i||i.call(this),this._samplingSessionListener=void 0,je.info(_o+" stopped"))}makeSamplingDecision(e){var t;const i=this.sessionId!==e,r=this.sampleRate;var s;if(!Fa(r))return void(null===(s=this.instance.persistence)||void 0===s||s.register({[yb]:null}));const l=this.isSampled;let u;const g=i||!Vf(l);u=g?Math.random()<r:l,g&&(u?this._reportStarted("sampling"):je.warn(`[SessionRecording] Sample rate (${r}) has determined that this sessionId (${e}) will not be sent to the server.`),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:r,isSampled:u})),null===(t=this.instance.persistence)||void 0===t||t.register({[yb]:u})}afterDecideResponse(e){var t,i,r,s;if(this._persistDecideResponse(e),this._linkedFlag=(null===(t=e.sessionRecording)||void 0===t?void 0:t.linkedFlag)||null,null!==(i=e.sessionRecording)&&void 0!==i&&i.endpoint&&(this._endpoint=null===(s=e.sessionRecording)||void 0===s?void 0:s.endpoint),this._setupSampling(),!Ki(this._linkedFlag)&&!this._linkedFlagSeen){const l=Gs(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,u=Gs(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((g,v)=>{const w=lr(v)&&l in v,I=u?v[l]===u:w;if(I){const M={linkedFlag:l,linkedVariant:u},O="linked flag matched";je.info(_o+" "+O,M),this._tryAddCustomEvent(O,M),this._reportStarted("linked_flag_match")}this._linkedFlagSeen=I})}null!==(r=e.sessionRecording)&&void 0!==r&&r.urlTriggers&&(this._urlTriggers=e.sessionRecording.urlTriggers),this.receivedDecide=!0,this.startIfEnabledOrStop()}_setupSampling(){Fa(this.sampleRate)&&Ki(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId(e=>{this.makeSamplingDecision(e)}))}_persistDecideResponse(e){if(this.instance.persistence){var t;const i=this.instance.persistence,r=()=>{var s,l,u,g,v,w,I;const M=null===(s=e.sessionRecording)||void 0===s?void 0:s.sampleRate,O=Ki(M)?null:parseFloat(M),N=null===(l=e.sessionRecording)||void 0===l?void 0:l.minimumDurationMilliseconds;i.register({[w1]:!!e.sessionRecording,[mL]:null===(u=e.sessionRecording)||void 0===u?void 0:u.consoleLogRecordingEnabled,[_L]:Dt({capturePerformance:e.capturePerformance},null===(g=e.sessionRecording)||void 0===g?void 0:g.networkPayloadCapture),[vL]:{enabled:null===(v=e.sessionRecording)||void 0===v?void 0:v.recordCanvas,fps:null===(w=e.sessionRecording)||void 0===w?void 0:w.canvasFps,quality:null===(I=e.sessionRecording)||void 0===I?void 0:I.canvasQuality},[yL]:O,[bL]:Pt(N)?null:N})};r(),null===(t=this._persistDecideOnSessionListener)||void 0===t||t.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(r)}}log(e){var t;null===(t=this.instance.sessionRecording)||void 0===t||t.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log",trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){var t,i;Pt(Object.assign)||Pt(Array.from)||this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut()||(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():null===(t=pn.__PosthogExtensions__)||void 0===t||null===(i=t.loadExternalDependency)||void 0===i||i.call(t,this.instance,"recorder",r=>{if(r)return je.error(_o+" could not load recorder",r);this._onScriptLoaded()}),je.info(_o+" starting"),"active"===this.status&&this._reportStarted(e||"recording_initialized"))}isInteractiveEvent(e){var t;return 3===e.type&&-1!==kz.indexOf(null===(t=e.data)||void 0===t?void 0:t.source)}_updateWindowAndSessionIds(e){const t=this.isInteractiveEvent(e);!t&&!this.isIdle&&e.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());let i=!1;if(t&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)),this.isIdle)return;const{windowId:r,sessionId:s}=this.sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),l=this.sessionId!==s,u=this.windowId!==r;this.windowId=r,this.sessionId=s,l||u?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this._scheduleFullSnapshot()}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(t){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):je.warn(_o+" could not emit queued rrweb event.",t,e),!1}}_tryAddCustomEvent(e,t){return this._tryRRWebMethod(v2(()=>this.rrwebRecord.addCustomEvent(e,t)))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(v2(()=>this.rrwebRecord.takeFullSnapshot()))}_onScriptLoaded(){var e;const t={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},i=this.instance.config.session_recording;for(const[s,l]of Object.entries(i||{}))s in t&&("maskInputOptions"===s?t.maskInputOptions=Dt({password:!0},l):t[s]=l);if(this.canvasRecording&&this.canvasRecording.enabled&&(t.recordCanvas=!0,t.sampling={canvas:this.canvasRecording.fps},t.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),!this.rrwebRecord)return void je.error(_o+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.");this.mutationRateLimiter=null!==(e=this.mutationRateLimiter)&&void 0!==e?e:new bz(this.rrwebRecord,{refillRate:this.instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(s,l)=>{const u=`Too many mutations on node '${s}'. Rate limiting. This could be due to SVG animations or something similar`;je.info(u,{node:l}),this.log(_o+" "+u,"warn")}});const r=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(Dt({emit:s=>{this.onRRwebEmit(s)},plugins:r},t)),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:t,activePlugins:r.map(s=>null==s?void 0:s.name)}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),this.isIdle)return;const e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval(()=>{this._tryTakeFullSnapshot()},e))}_gatherRRWebPlugins(){var e,t,i,r;const s=[],l=null===(e=pn.__PosthogExtensions__)||void 0===e||null===(t=e.rrwebPlugins)||void 0===t?void 0:t.getRecordConsolePlugin;l&&this.isConsoleLogCaptureEnabled&&s.push(l());const u=null===(i=pn.__PosthogExtensions__)||void 0===i||null===(r=i.rrwebPlugins)||void 0===r?void 0:r.getRecordNetworkPlugin;return this.networkPayloadCapture&&Il(u)&&(!Y$.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?s.push(u(((n,e)=>{const t={payloadSizeLimitBytes:bI.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...bI.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...bI.payloadHostDenyList]},i=!1!==n.session_recording.recordHeaders&&e.recordHeaders,r=!1!==n.session_recording.recordBody&&e.recordBody,s=!1!==n.capture_performance&&e.recordPerformance,l=(v=>{var w;const I=Math.min(1e6,null!==(w=v.payloadSizeLimitBytes)&&void 0!==w?w:1e6);return M=>(null!=M&&M.requestBody&&(M.requestBody=o2(M.requestBody,M.requestHeaders,I,"Request")),null!=M&&M.responseBody&&(M.responseBody=o2(M.responseBody,M.responseHeaders,I,"Response")),M)})(t),u=v=>l((w=>{const I=wb(w.name);if(!(I&&I.pathname&&vz.some(M=>0===I.pathname.indexOf(M))))return w})((w=>{const I=w.requestHeaders;return Ki(I)||ui(Object.keys(null!=I?I:{}),M=>{mz.includes(M.toLowerCase())&&(I[M]=G1)}),w})(v))),g=Il(n.session_recording.maskNetworkRequestFn);return g&&Il(n.session_recording.maskCapturedNetworkRequestFn)&&je.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),g&&(n.session_recording.maskCapturedNetworkRequestFn=v=>{const w=n.session_recording.maskNetworkRequestFn({url:v.name});return ii(Dt({},v),{name:null==w?void 0:w.url})}),t.maskRequestFn=Il(n.session_recording.maskCapturedNetworkRequestFn)?v=>{var w,I,M;const O=u(v);return O&&null!==(w=null===(I=(M=n.session_recording).maskCapturedNetworkRequestFn)||void 0===I?void 0:I.call(M,O))&&void 0!==w?w:void 0}:v=>function(w){if(!Pt(w))return w.requestBody=a2(w.requestBody,"Request"),w.responseBody=a2(w.responseBody,"Response"),w}(u(v)),ii(Dt(Dt({},bI),t),{recordHeaders:i,recordBody:r,recordPerformance:s,recordInitialRequests:s})})(this.instance.config,this.networkPayloadCapture))):je.info(_o+" NetworkCapture not started because we are on localhost.")),s}onRRwebEmit(e){var t;if(this._processQueuedEvents(),!e||!lr(e))return;if(e.type===Hf.Meta){const u=this._maskUrl(e.data.href);if(this._lastHref=u,!u)return;e.data.href=u}else this._pageViewFallBack();this._checkUrlTrigger(),e.type===Hf.FullSnapshot&&this._scheduleFullSnapshot(),e.type===Hf.FullSnapshot&&"trigger_pending"===this.urlTriggerStatus&&this.clearBuffer();const i=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(!i)return;const r=function(u){const g=u;if(g&&lr(g)&&6===g.type&&lr(g.data)&&"rrweb/console@1"===g.data.plugin){g.data.payload.payload.length>10&&(g.data.payload.payload=g.data.payload.payload.slice(0,10),g.data.payload.payload.push("...[truncated]"));const v=[];for(let w=0;w<g.data.payload.payload.length;w++)v.push(g.data.payload.payload[w]&&g.data.payload.payload[w].length>2e3?g.data.payload.payload[w].slice(0,2e3)+"...[truncated]":g.data.payload.payload[w]);return g.data.payload.payload=v,u}return u}(i);if(this._updateWindowAndSessionIds(r),this.isIdle&&!y2(r))return;if(y2(r)){const u=r.data.payload;u&&(r.timestamp=u.lastActivityTimestamp+u.threshold)}const s=null===(t=this.instance.config.session_recording.compress_events)||void 0===t||t?function(u){if(mI(u)<1024)return u;try{if(u.type===Hf.FullSnapshot)return ii(Dt({},u),{data:Zg(u.data),cv:"2024-10"});if(u.type===Hf.IncrementalSnapshot&&u.data.source===vc.Mutation)return ii(Dt({},u),{cv:"2024-10",data:ii(Dt({},u.data),{texts:Zg(u.data.texts),attributes:Zg(u.data.attributes),removes:Zg(u.data.removes),adds:Zg(u.data.adds)})});if(u.type===Hf.IncrementalSnapshot&&u.data.source===vc.StyleSheetRule)return ii(Dt({},u),{cv:"2024-10",data:ii(Dt({},u.data),{adds:Zg(u.data.adds),removes:Zg(u.data.removes)})})}catch(g){je.error(_o+" could not compress event - will use uncompressed event",g)}return u}(r):r,l={$snapshot_bytes:mI(s),$snapshot_data:s,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(l):this.clearBuffer()}_pageViewFallBack(){if(this.instance.config.capture_pageview||!ae)return;const e=this._maskUrl(ae.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}_processQueuedEvents(){if(this.queuedRRWebEvents.length){const e=[...this.queuedRRWebEvents];this.queuedRRWebEvents=[],e.forEach(t=>{Date.now()-t.enqueuedAt<=2e3&&this._tryRRWebMethod(t)})}}_maskUrl(e){const t=this.instance.config.session_recording;if(t.maskNetworkRequestFn){var i;let r={url:e};return r=t.maskNetworkRequestFn(r),null===(i=r)||void 0===i?void 0:i.url}return e}clearBuffer(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}_flushBuffer(){this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);const e=this.minimumDuration,t=this.sessionDuration,i=Fa(t)&&t>=0,r=Fa(e)&&i&&t<e;return"buffering"===this.status||r?(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3),this.buffer):(this.buffer.data.length>0&&U1(this.buffer).forEach(s=>{this._captureSnapshot({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId})}),this.clearBuffer())}_captureSnapshotBuffered(e){var t;const i=2+((null===(t=this.buffer)||void 0===t?void 0:t.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3))}_captureSnapshot(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_checkUrlTrigger(){if(void 0===ae||!ae.location.href)return;const e=ae.location.href;this._urlTriggers.some(t=>"regex"===t.matching&&new RegExp(t.url).test(e))&&this._activateUrlTrigger()}_activateUrlTrigger(){"trigger_pending"===this.urlTriggerStatus&&(this.urlTriggerStatus="trigger_activated",this._tryAddCustomEvent("url trigger activated",{}),this._flushBuffer(),je.info(_o+" recording triggered by URL pattern match"))}overrideLinkedFlag(){this._linkedFlagSeen=!0,this._reportStarted("linked_flag_override")}overrideSampling(){var e;null===(e=this.instance.persistence)||void 0===e||e.register({[yb]:!0}),this._reportStarted("sampling_override")}_reportStarted(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!0)()&&this.instance.register_for_session({$session_recording_start_reason:e})}}class Rz{constructor(e){this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}call(){const e={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(nv),group_properties:this.instance.get_property(Bf),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:e,compression:this.instance.config.disable_compression?void 0:_c.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:t=>this.parseDecideResponse(t.json)})}parseDecideResponse(e){this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();const t=!e;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(null!=e?e:{},t),t)je.error("Failed to fetch feature flags from PostHog.");else{if(!Ct||!Ct.body)return je.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.parseDecideResponse(e)},500);if(this.instance._afterDecideResponse(e),e.siteApps)if(this.instance.config.opt_in_site_apps)for(const{id:l,url:u}of e.siteApps){var i,r,s;pn[`__$$ph_site_app_${l}`]=this.instance,null===(i=pn.__PosthogExtensions__)||void 0===i||null===(r=(s=i).loadSiteApp)||void 0===r||r.call(s,this.instance,u,g=>{if(g)return je.error(`Error while initializing PostHog app with config id ${l}`,g)})}else e.siteApps.length>0&&je.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}}const Fz=null!=ae&&ae.location?fI(ae.location.hash,"__posthog")||fI(location.hash,"state"):null,b2="_postHogToolbarParams";var th;!function(n){n[n.UNINITIALIZED=0]="UNINITIALIZED",n[n.LOADING=1]="LOADING",n[n.LOADED=2]="LOADED"}(th||(th={}));class Nz{constructor(e){this.instance=e}setToolbarState(e){pn.ph_toolbar_state=e}getToolbarState(){var e;return null!==(e=pn.ph_toolbar_state)&&void 0!==e?e:th.UNINITIALIZED}maybeLoadToolbar(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!ae||!Ct)return!1;i=null!==(e=i)&&void 0!==e?e:ae.location,s=null!==(t=s)&&void 0!==t?t:ae.history;try{if(!r){try{ae.localStorage.setItem("test","test"),ae.localStorage.removeItem("test")}catch(v){return!1}r=null==ae?void 0:ae.localStorage}const l=Fz||fI(i.hash,"__posthog")||fI(i.hash,"state");let u;const g=l?aL(()=>JSON.parse(atob(decodeURIComponent(l))))||aL(()=>JSON.parse(decodeURIComponent(l))):null;return g&&"ph_authorize"===g.action?(u=g,u.source="url",u&&Object.keys(u).length>0&&(g.desiredHash?i.hash=g.desiredHash:s?s.replaceState(s.state,"",i.pathname+i.search):i.hash="")):(u=JSON.parse(r.getItem(b2)||"{}"),u.source="localstorage",delete u.userIntent),!(!u.token||this.instance.config.token!==u.token||(this.loadToolbar(u),0))}catch(l){return!1}}_callLoadToolbar(e){(pn.ph_load_toolbar||pn.ph_load_editor)(e,this.instance)}loadToolbar(e){const t=!(null==Ct||!Ct.getElementById(x1));if(!ae||t)return!1;const i="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,r=Dt(ii(Dt({token:this.instance.config.token},e),{apiURL:this.instance.requestRouter.endpointFor("ui")}),i?{instrument:!1}:{});if(ae.localStorage.setItem(b2,JSON.stringify(ii(Dt({},r),{source:void 0}))),this.getToolbarState()===th.LOADED)this._callLoadToolbar(r);else if(this.getToolbarState()===th.UNINITIALIZED){var s,l;this.setToolbarState(th.LOADING),null===(s=pn.__PosthogExtensions__)||void 0===s||null===(l=s.loadExternalDependency)||void 0===l||l.call(s,this.instance,"toolbar",u=>{if(u)return je.error("Failed to load toolbar",u),void this.setToolbarState(th.UNINITIALIZED);this.setToolbarState(th.LOADED),this._callLoadToolbar(r)}),Yd(ae,"turbolinks:load",()=>{this.setToolbarState(th.UNINITIALIZED),this.loadToolbar(r)})}return!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(){return this.maybeLoadToolbar(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0)}}class Lz{constructor(e){ht(this,"isPaused",!0),ht(this,"queue",[]),ht(this,"flushTimeoutMs",3e3),this.sendRequest=e}enqueue(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}unload(){this.clearFlushTimeout();const e=this.queue.length>0?this.formatQueue():{},t=Object.values(e);[...t.filter(r=>0===r.url.indexOf("/e")),...t.filter(r=>0!==r.url.indexOf("/e"))].map(r=>{this.sendRequest(ii(Dt({},r),{transport:"sendBeacon"}))})}enable(){this.isPaused=!1,this.setFlushTimeout()}setFlushTimeout(){this.isPaused||(this.flushTimeout=setTimeout(()=>{if(this.clearFlushTimeout(),this.queue.length>0){const e=this.formatQueue();for(const t in e){const i=e[t],r=(new Date).getTime();i.data&&Rr(i.data)&&ui(i.data,s=>{s.offset=Math.abs(s.timestamp-r),delete s.timestamp}),this.sendRequest(i)}}},this.flushTimeoutMs))}clearFlushTimeout(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}formatQueue(){const e={};return ui(this.queue,t=>{var i;const r=t,s=(r?r.batchKey:null)||r.url;Pt(e[s])&&(e[s]=ii(Dt({},r),{data:[]})),null===(i=e[s].data)||void 0===i||i.push(r.data)}),this.queue=[],e}}const Vz=!!v1||!!_1,w2="text/plain",EI=(n,e)=>{const[t,i]=n.split("?"),r=Dt({},e);null==i||i.split("&").forEach(l=>{const[u]=l.split("=");delete r[u]});let s=function(n){let e,t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&";const r=[];return ui(n,function(s,l){Pt(s)||Pt(l)||"undefined"===l||(e=encodeURIComponent(s instanceof File?s.name:s.toString()),t=encodeURIComponent(l),r[r.length]=t+"="+e)}),r.join(i)}(r);return s=s?(i?i+"&":"")+s:i,`${t}?${s}`},ek=n=>{let{data:e,compression:t}=n;if(!e)return;if(t===_c.GZipJS){const r=m2(_2(JSON.stringify(e)),{mtime:0}),s=new Blob([r],{type:w2});return{contentType:w2,body:s,estimatedSize:s.size}}if(t===_c.Base64){const r=function(l){const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let g,v,w,I,M,O,N,H,Y=0,he=0,_e="";const Oe=[];if(!l)return l;l=function(n){let e,t,i,r="",s=0;for(e=t=0,s=(n=(n+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<s;i++){const l=n.charCodeAt(i);let u=null;l<128?t++:u=l>127&&l<2048?String.fromCharCode(l>>6|192,63&l|128):String.fromCharCode(l>>12|224,l>>6&63|128,63&l|128),Lf(u)||(t>e&&(r+=n.substring(e,t)),r+=u,e=t=i+1)}return t>e&&(r+=n.substring(e,n.length)),r}(l);do{g=l.charCodeAt(Y++),v=l.charCodeAt(Y++),w=l.charCodeAt(Y++),H=g<<16|v<<8|w,I=H>>18&63,M=H>>12&63,O=H>>6&63,N=63&H,Oe[he++]=u.charAt(I)+u.charAt(M)+u.charAt(O)+u.charAt(N)}while(Y<l.length);switch(_e=Oe.join(""),l.length%3){case 1:_e=_e.slice(0,-2)+"==";break;case 2:_e=_e.slice(0,-1)+"="}return _e}(JSON.stringify(e)),s=(l=r,"data="+encodeURIComponent("string"==typeof l?l:JSON.stringify(l)));return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var l;const i=JSON.stringify(e);return{contentType:"application/json",body:i,estimatedSize:new Blob([i]).size}},Mb=[];v1&&Mb.push({transport:"XHR",method:n=>{var e;const t=new v1;t.open(n.method||"GET",n.url,!0);const{contentType:i,body:r}=null!==(e=ek(n))&&void 0!==e?e:{};ui(n.headers,function(s,l){t.setRequestHeader(l,s)}),i&&t.setRequestHeader("Content-Type",i),n.timeout&&(t.timeout=n.timeout),t.withCredentials=!0,t.onreadystatechange=()=>{if(4===t.readyState){var s;const l={statusCode:t.status,text:t.responseText};if(200===t.status)try{l.json=JSON.parse(t.responseText)}catch(u){}null===(s=n.callback)||void 0===s||s.call(n,l)}},t.send(r)}}),_1&&Mb.push({transport:"fetch",method:n=>{var e,t;const{contentType:i,body:r,estimatedSize:s}=null!==(e=ek(n))&&void 0!==e?e:{},l=new Headers;ui(n.headers,function(v,w){l.append(w,v)}),i&&l.append("Content-Type",i);const u=n.url;let g=null;if(tL){const v=new tL;g={signal:v.signal,timeout:setTimeout(()=>v.abort(),n.timeout)}}_1(u,{method:(null==n?void 0:n.method)||"GET",headers:l,keepalive:"POST"===n.method&&(s||0)<52428.8,body:r,signal:null===(t=g)||void 0===t?void 0:t.signal}).then(v=>v.text().then(w=>{var I;const M={statusCode:v.status,text:w};if(200===v.status)try{M.json=JSON.parse(w)}catch(O){je.error(O)}null===(I=n.callback)||void 0===I||I.call(n,M)})).catch(v=>{var w;je.error(v),null===(w=n.callback)||void 0===w||w.call(n,{statusCode:0,text:v})}).finally(()=>g?clearTimeout(g.timeout):null)}}),null!=Ra&&Ra.sendBeacon&&Mb.push({transport:"sendBeacon",method:n=>{const e=EI(n.url,{beacon:"1"});try{var t;const{contentType:i,body:r}=null!==(t=ek(n))&&void 0!==t?t:{},s="string"==typeof r?new Blob([r],{type:i}):r;Ra.sendBeacon(e,s)}catch(i){}}});class Hz{constructor(e){ht(this,"isPolling",!1),ht(this,"pollIntervalMs",3e3),ht(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!Pt(ae)&&"onLine"in ae.navigator&&(this.areWeOnline=ae.navigator.onLine,ae.addEventListener("online",()=>{this.areWeOnline=!0,this.flush()}),ae.addEventListener("offline",()=>{this.areWeOnline=!1}))}retriableRequest(e){let r=e,{retriesPerformedSoFar:t}=r,i=Z3(r,["retriesPerformedSoFar"]);Fa(t)&&t>0&&(i.url=EI(i.url,{retry_count:t})),this.instance._send_request(ii(Dt({},i),{callback:s=>{var l;200!==s.statusCode&&(s.statusCode<400||s.statusCode>=500)&&(null!=t?t:0)<10?this.enqueue(Dt({retriesPerformedSoFar:t},i)):null===(l=i.callback)||void 0===l||l.call(i,s)}}))}enqueue(e){const t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;const i=function(l){const u=3e3*2**l,g=u/2,v=Math.min(18e5,u),w=(Math.random()-.5)*(v-g);return Math.ceil(v+w)}(t),r=Date.now()+i;this.queue.push({retryAt:r,requestOptions:e});let s=`Enqueued failed request for retry in ${i}`;navigator.onLine||(s+=" (Browser is offline)"),je.warn(s),this.isPolling||(this.isPolling=!0,this.poll())}poll(){this.poller&&clearTimeout(this.poller),this.poller=setTimeout(()=>{this.areWeOnline&&this.queue.length>0&&this.flush(),this.poll()},this.pollIntervalMs)}flush(){const e=Date.now(),t=[],i=this.queue.filter(r=>r.retryAt<e||(t.push(r),!1));if(this.queue=t,i.length>0)for(const{requestOptions:r}of i)this.retriableRequest(r)}unload(){this.poller&&(clearTimeout(this.poller),this.poller=void 0);for(const{requestOptions:e}of this.queue)try{this.instance._send_request(ii(Dt({},e),{transport:"sendBeacon"}))}catch(t){je.error(t)}this.queue=[]}}class $z{constructor(e,t,i,r){var s;ht(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=t,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=i||Uf,this._windowIdGenerator=r||Uf;const l=e.persistence_name||e.token;if(this._sessionTimeoutMs=1e3*Jd(e.session_idle_timeout_seconds||1800,60,1800,"session_idle_timeout_seconds"),this._window_id_storage_key="ph_"+l+"_window_id",this._primary_window_exists_storage_key="ph_"+l+"_primary_window_exists",this._canUseSessionStorage()){const g=bs.parse(this._window_id_storage_key),v=bs.parse(this._primary_window_exists_storage_key);g&&!v?this._windowId=g:bs.remove(this._window_id_storage_key),bs.set(this._primary_window_exists_storage_key,!0)}if(null!==(s=this.config.bootstrap)&&void 0!==s&&s.sessionID)try{const g=(v=>{const w=this.config.bootstrap.sessionID.replace(/-/g,"");if(32!==w.length)throw new Error("Not a valid UUID");if("7"!==w[12])throw new Error("Not a UUIDv7");return parseInt(w.substring(0,12),16)})();this._setSessionId(this.config.bootstrap.sessionID,(new Date).getTime(),g)}catch(g){je.error("Invalid sessionID in bootstrap",g)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Pt(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter(t=>t!==e)}}_canUseSessionStorage(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&bs.is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&bs.set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?bs.parse(this._window_id_storage_key):null}_setSessionId(e,t,i){e===this._sessionId&&t===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=t,this._sessionId=e,this.persistence.register({[nI]:[t,e,i]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];const e=this.persistence.props[nI];return Rr(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){null==ae||ae.addEventListener("beforeunload",()=>{this._canUseSessionStorage()&&bs.remove(this._primary_window_exists_storage_key)})}checkAndGetSessionAndWindowId(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(new Date).getTime();let[i,r,s]=this._getSessionId(),l=this._getWindowId();const u=Fa(s)&&s>0&&Math.abs(t-s)>864e5;let g=!1;const v=!r,w=!e&&Math.abs(t-i)>this.sessionTimeoutMs;v||w||u?(r=this._sessionIdGenerator(),l=this._windowIdGenerator(),je.info("[SessionId] new session ID generated",{sessionId:r,windowId:l,changeReason:{noSessionId:v,activityTimeout:w,sessionPastMaximumLength:u}}),s=t,g=!0):l||(l=this._windowIdGenerator(),g=!0);const I=0===i||!e||u?t:i,M=0===s?(new Date).getTime():s;return this._setWindowId(l),this._setSessionId(r,I,M),g&&this._sessionIdChangedHandlers.forEach(O=>O(r,l,g?{noSessionId:v,activityTimeout:w,sessionPastMaximumLength:u}:void 0)),{sessionId:r,windowId:l,sessionStartTimestamp:M,changeReason:g?{noSessionId:v,activityTimeout:w,sessionPastMaximumLength:u}:void 0,lastActivityTimestamp:i}}}let Kg;!function(n){n.US="us",n.EU="eu",n.CUSTOM="custom"}(Kg||(Kg={}));const E2="i.posthog.com";class zz{constructor(e){ht(this,"_regionCache",{}),this.instance=e}get apiHost(){const e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get uiHost(){var e;let t=null===(e=this.instance.config.ui_host)||void 0===e?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace(`.${E2}`,".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this._regionCache[this.apiHost]||(this._regionCache[this.apiHost]=/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?Kg.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?Kg.EU:Kg.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t&&(t="/"===t[0]?t:`/${t}`),"ui"===e)return this.uiHost+t;if(this.region===Kg.CUSTOM)return this.apiHost+t;const i=E2+t;switch(e){case"assets":return`https://${this.region}-assets.${i}`;case"api":return`https://${this.region}.${i}`}}}const C2="posthog-js";function D2(n){let{organization:e,projectId:t,prefix:i,severityAllowList:r=["error"]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s=>{var l,u,g,v,w;if("*"!==r&&!r.includes(s.level)||!n.__loaded)return s;s.tags||(s.tags={});const I=n.requestRouter.endpointFor("ui",`/project/${n.config.token}/person/${n.get_distinct_id()}`);s.tags["PostHog Person URL"]=I,n.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=n.get_session_replay_url({withTimestamp:!0}));const M=(null===(l=s.exception)||void 0===l?void 0:l.values)||[],O={$exception_message:(null===(u=M[0])||void 0===u?void 0:u.value)||s.message,$exception_type:null===(g=M[0])||void 0===g?void 0:g.type,$exception_personURL:I,$exception_level:s.level,$exception_list:M,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:(null===(v=M[0])||void 0===v?void 0:v.value)||s.message,$sentry_exception_type:null===(w=M[0])||void 0===w?void 0:w.type,$sentry_tags:s.tags,$level:s.level};return e&&t&&(O.$sentry_url=(i||"https://sentry.io/organizations/")+e+"/issues/?project="+t+"&query="+s.event_id),n.exceptions.sendExceptionEvent(O),s}}class Gz{constructor(e,t,i,r,s){this.name=C2,this.setupOnce=function(l){l(D2(e,{organization:t,projectId:i,prefix:r,severityAllowList:s}))}}}class Wz{constructor(e){this._instance=e}doPageView(e){var t;const i=this._previousPageViewProperties(e);return this._currentPath=null!==(t=null==ae?void 0:ae.location.pathname)&&void 0!==t?t:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=e,i}doPageLeave(e){return this._previousPageViewProperties(e)}_previousPageViewProperties(e){const t=this._currentPath,i=this._prevPageviewTimestamp,r=this._instance.scrollManager.getContext();if(!i)return{};let s={};if(r){let{maxScrollHeight:l,lastScrollY:u,maxScrollY:g,maxContentHeight:v,lastContentY:w,maxContentY:I}=r;Pt(l)||Pt(u)||Pt(g)||Pt(v)||Pt(w)||Pt(I)||(l=Math.ceil(l),u=Math.ceil(u),g=Math.ceil(g),v=Math.ceil(v),w=Math.ceil(w),I=Math.ceil(I),s={$prev_pageview_last_scroll:u,$prev_pageview_last_scroll_percentage:l<=1?1:Jd(u/l,0,1),$prev_pageview_max_scroll:g,$prev_pageview_max_scroll_percentage:l<=1?1:Jd(g/l,0,1),$prev_pageview_last_content:w,$prev_pageview_last_content_percentage:v<=1?1:Jd(w/v,0,1),$prev_pageview_max_content:I,$prev_pageview_max_content_percentage:v<=1?1:Jd(I/v,0,1)})}return t&&(s.$prev_pageview_pathname=t),i&&(s.$prev_pageview_duration=(e.getTime()-i.getTime())/1e3),s}}let I2,CI,yc;(function(n){n.Popover="popover",n.API="api",n.Widget="widget"})(I2||(I2={})),function(n){n.Open="open",n.MultipleChoice="multiple_choice",n.SingleChoice="single_choice",n.Rating="rating",n.Link="link"}(CI||(CI={})),function(n){n.NextQuestion="next_question",n.End="end",n.ResponseBased="response_based",n.SpecificQuestion="specific_question"}(yc||(yc={}));class S2{constructor(){ht(this,"events",{}),this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.events[e]=this.events[e].filter(i=>i!==t)}}emit(e,t){for(const i of this.events[e]||[])i(t);for(const i of this.events["*"]||[])i(e,t)}}class Yg{constructor(e){ht(this,"_debugEventEmitter",new S2),ht(this,"checkStep",(e,t)=>this.checkStepEvent(e,t)&&this.checkStepUrl(e,t)&&this.checkStepElement(e,t)),ht(this,"checkStepEvent",(e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event)),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}init(){var e;if(!Pt(null===(e=this.instance)||void 0===e?void 0:e._addCaptureHook)){var t;const i=(r,s)=>{this.on(r,s)};null===(t=this.instance)||void 0===t||t._addCaptureHook(i)}}register(e){var t,i;if(!Pt(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)&&(e.forEach(s=>{var l,u;null===(l=this.actionRegistry)||void 0===l||l.add(s),null===(u=s.steps)||void 0===u||u.forEach(g=>{var v;null===(v=this.actionEvents)||void 0===v||v.add((null==g?void 0:g.event)||"")})}),null!==(i=this.instance)&&void 0!==i&&i.autocapture)){var r;const s=new Set;e.forEach(l=>{var u;null===(u=l.steps)||void 0===u||u.forEach(g=>{null!=g&&g.selector&&s.add(null==g?void 0:g.selector)})}),null===(r=this.instance)||void 0===r||r.autocapture.setElementSelectors(s)}}on(e,t){var i;null!=t&&0!=e.length&&(this.actionEvents.has(e)||this.actionEvents.has(null==t?void 0:t.event))&&this.actionRegistry&&(null===(i=this.actionRegistry)||void 0===i?void 0:i.size)>0&&this.actionRegistry.forEach(r=>{this.checkAction(t,r)&&this._debugEventEmitter.emit("actionCaptured",r.name)})}_addActionHook(e){this.onAction("actionCaptured",t=>e(t))}checkAction(e,t){if(null==(null==t?void 0:t.steps))return!1;for(const i of t.steps)if(this.checkStep(e,i))return!0;return!1}onAction(e,t){return this._debugEventEmitter.on(e,t)}checkStepUrl(e,t){if(null!=t&&t.url){var i;const r=null==e||null===(i=e.properties)||void 0===i?void 0:i.$current_url;if(!r||"string"!=typeof r||!Yg.matchString(r,null==t?void 0:t.url,(null==t?void 0:t.url_matching)||"contains"))return!1}return!0}static matchString(e,t,i){switch(i){case"regex":return!!ae&&iv(e,t);case"exact":return t===e;case"contains":const r=Yg.escapeStringRegexp(t).replace(/_/g,".").replace(/%/g,".*");return iv(e,r);default:return!1}}static escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}checkStepElement(e,t){if((null!=t&&t.href||null!=t&&t.tag_name||null!=t&&t.text)&&!this.getElementsList(e).some(r=>!(null!=t&&t.href&&!Yg.matchString(r.href||"",null==t?void 0:t.href,(null==t?void 0:t.href_matching)||"exact")||null!=t&&t.tag_name&&r.tag_name!==(null==t?void 0:t.tag_name)||null!=t&&t.text&&!Yg.matchString(r.text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact")&&!Yg.matchString(r.$el_text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact"))))return!1;if(null!=t&&t.selector){var i;const r=null==e||null===(i=e.properties)||void 0===i?void 0:i.$element_selectors;if(!r||!r.includes(null==t?void 0:t.selector))return!1}return!0}getElementsList(e){return null==(null==e?void 0:e.properties.$elements)?[]:null==e?void 0:e.properties.$elements}}const WR=class{constructor(e){this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}register(e){var t;Pt(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}setupActionBasedSurveys(e){const t=e.filter(i=>{var r,s,l,u;return(null===(r=i.conditions)||void 0===r?void 0:r.actions)&&(null===(s=i.conditions)||void 0===s||null===(l=s.actions)||void 0===l||null===(u=l.values)||void 0===u?void 0:u.length)>0});0!==t.length&&(null==this.actionMatcher&&(this.actionMatcher=new Yg(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook(r=>{this.onAction(r)})),t.forEach(i=>{var r,s,l,u,g,v,w,I,M,O;i.conditions&&null!==(r=i.conditions)&&void 0!==r&&r.actions&&null!==(s=i.conditions)&&void 0!==s&&null!==(l=s.actions)&&void 0!==l&&l.values&&(null===(u=i.conditions)||void 0===u||null===(g=u.actions)||void 0===g||null===(v=g.values)||void 0===v?void 0:v.length)>0&&(null===(w=this.actionMatcher)||void 0===w||w.register(i.conditions.actions.values),null===(I=i.conditions)||void 0===I||null===(M=I.actions)||void 0===M||null===(O=M.values)||void 0===O||O.forEach(N=>{if(N&&N.name){const H=this.actionToSurveys.get(N.name);H&&H.push(i.id),this.actionToSurveys.set(N.name,H||[i.id])}}))}))}setupEventBasedSurveys(e){var t;0!==e.filter(i=>{var r,s,l,u;return(null===(r=i.conditions)||void 0===r?void 0:r.events)&&(null===(s=i.conditions)||void 0===s||null===(l=s.events)||void 0===l||null===(u=l.values)||void 0===u?void 0:u.length)>0}).length&&(null===(t=this.instance)||void 0===t||t._addCaptureHook((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r,s,l;null===(r=i.conditions)||void 0===r||null===(s=r.events)||void 0===s||null===(l=s.values)||void 0===l||l.forEach(u=>{if(u&&u.name){const g=this.eventToSurveys.get(u.name);g&&g.push(i.id),this.eventToSurveys.set(u.name,g||[i.id])}})}))}onEvent(e,t){var i,r;const s=(null===(i=this.instance)||void 0===i||null===(r=i.persistence)||void 0===r?void 0:r.props[sI])||[];if(WR.SURVEY_SHOWN_EVENT_NAME==e&&t&&s.length>0){var l;const u=null==t||null===(l=t.properties)||void 0===l?void 0:l.$survey_id;if(u){const g=s.indexOf(u);g>=0&&(s.splice(g,1),this._updateActivatedSurveys(s))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(s.concat(this.eventToSurveys.get(e)||[]))}onAction(e){var t,i;const r=(null===(t=this.instance)||void 0===t||null===(i=t.persistence)||void 0===i?void 0:i.props[sI])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(r.concat(this.actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var t,i;null===(t=this.instance)||void 0===t||null===(i=t.persistence)||void 0===i||i.register({[sI]:[...new Set(e)]})}getSurveys(){var e,t;return(null===(e=this.instance)||void 0===e||null===(t=e.persistence)||void 0===t?void 0:t.props[sI])||[]}getEventToSurveys(){return this.eventToSurveys}_getActionMatcher(){return this.actionMatcher}};let DI=WR;ht(DI,"SURVEY_SHOWN_EVENT_NAME","survey shown");var T2,Yi,x2,Qg,A2,M2,tk,k2,e,t,nk={},P2=[],Zz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ik=Array.isArray;function zf(n,e){for(var t in e)n[t]=e[t];return n}function O2(n){var e=n.parentNode;e&&e.removeChild(n)}function rk(n,e,t,i,r){var s={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++x2:r,__i:-1,__u:0};return null==r&&null!=Yi.vnode&&Yi.vnode(s),s}function sk(n){return n.children}function II(n,e){this.props=n,this.context=e}function cv(n,e){if(null==e)return n.__?cv(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e)return t.__e;return"function"==typeof n.type?cv(n):null}function R2(n){var e,t;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if(null!=(t=n.__k[e])&&null!=t.__e){n.__e=n.__c.base=t.__e;break}return R2(n)}}function ok(n){(!n.__d&&(n.__d=!0)&&Qg.push(n)&&!SI.__r++||A2!==Yi.debounceRendering)&&((A2=Yi.debounceRendering)||M2)(SI)}function SI(){var n,e,t,i,r,s,l,u,g;for(Qg.sort(tk);n=Qg.shift();)n.__d&&(e=Qg.length,i=void 0,s=(r=(t=n).__v).__e,u=[],g=[],(l=t.__P)&&((i=zf({},r)).__v=r.__v+1,Yi.vnode&&Yi.vnode(i),U2(l,i,r,t.__n,void 0!==l.ownerSVGElement,32&r.__u?[s]:null,u,null==s?cv(r):s,!!(32&r.__u),g),i.__.__k[i.__i]=i,Qz(u,i,g),i.__e!=s&&R2(i)),Qg.length>e&&Qg.sort(tk));SI.__r=0}function F2(n,e,t,i,r,s,l,u,g,v,w){var I,M,O,N,H,Y=i&&i.__k||P2,he=e.length;for(t.__d=g,function Kz(n,e,t){var i,r,s,l,u,g=e.length,v=t.length,w=v,I=0;for(n.__k=[],i=0;i<g;i++)null!=(r=n.__k[i]=null==(r=e[i])||"boolean"==typeof r||"function"==typeof r?null:"string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?rk(null,r,null,null,r):ik(r)?rk(sk,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?rk(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)?(r.__=n,r.__b=n.__b+1,u=Yz(r,t,l=i+I,w),r.__i=u,s=null,-1!==u&&(w--,(s=t[u])&&(s.__u|=131072)),null==s||null===s.__v?(-1==u&&I--,"function"!=typeof r.type&&(r.__u|=65536)):u!==l&&(u===l+1?I++:u>l?w>g-l?I+=u-l:I--:I=u<l&&u==l-1?u-l:0,u!==i+I&&(r.__u|=65536))):(s=t[i])&&null==s.key&&s.__e&&(s.__e==n.__d&&(n.__d=cv(s)),lk(s,s,!1),t[i]=null,w--);if(w)for(i=0;i<v;i++)null!=(s=t[i])&&0==(131072&s.__u)&&(s.__e==n.__d&&(n.__d=cv(s)),lk(s,s))}(t,e,Y),g=t.__d,I=0;I<he;I++)null!=(O=t.__k[I])&&"boolean"!=typeof O&&"function"!=typeof O&&(M=-1===O.__i?nk:Y[O.__i]||nk,O.__i=I,U2(n,O,M,r,s,l,u,g,v,w),N=O.__e,O.ref&&M.ref!=O.ref&&(M.ref&&ak(M.ref,null,O),w.push(O.ref,O.__c||N,O)),null==H&&null!=N&&(H=N),65536&O.__u||M.__k===O.__k?g=N2(O,g,n):"function"==typeof O.type&&void 0!==O.__d?g=O.__d:N&&(g=N.nextSibling),O.__d=void 0,O.__u&=-196609);t.__d=g,t.__e=H}function N2(n,e,t){var i,r;if("function"==typeof n.type){for(i=n.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=n,e=N2(i[r],e,t));return e}return n.__e!=e&&(t.insertBefore(n.__e,e||null),e=n.__e),e&&e.nextSibling}function Yz(n,e,t,i){var r=n.key,s=n.type,l=t-1,u=t+1,g=e[t];if(null===g||g&&r==g.key&&s===g.type)return t;if(i>(null!=g&&0==(131072&g.__u)?1:0))for(;l>=0||u<e.length;){if(l>=0){if((g=e[l])&&0==(131072&g.__u)&&r==g.key&&s===g.type)return l;l--}if(u<e.length){if((g=e[u])&&0==(131072&g.__u)&&r==g.key&&s===g.type)return u;u++}}return-1}function L2(n,e,t){"-"===e[0]?n.setProperty(e,null==t?"":t):n[e]=null==t?"":"number"!=typeof t||Zz.test(e)?t:t+"px"}function TI(n,e,t,i,r){var s;e:if("style"===e)if("string"==typeof t)n.style.cssText=t;else{if("string"==typeof i&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||L2(n.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||L2(n.style,e,t[e])}else if("o"===e[0]&&"n"===e[1])s=e!==(e=e.replace(/(PointerCapture)$|Capture$/,"$1")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?i?t.u=i.u:(t.u=Date.now(),n.addEventListener(e,s?B2:V2,s)):n.removeEventListener(e,s?B2:V2,s);else{if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==e&&"height"!==e&&"href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&"rowSpan"!==e&&"colSpan"!==e&&"role"!==e&&e in n)try{n[e]=null==t?"":t;break e}catch(l){}"function"==typeof t||(null==t||!1===t&&"-"!==e[4]?n.removeAttribute(e):n.setAttribute(e,t))}}function V2(n){var e=this.l[n.type+!1];if(n.t){if(n.t<=e.u)return}else n.t=Date.now();return e(Yi.event?Yi.event(n):n)}function B2(n){return this.l[n.type+!0](Yi.event?Yi.event(n):n)}function U2(n,e,t,i,r,s,l,u,g,v){var w,I,M,O,N,H,Y,he,_e,Oe,Ge,st,wt,Ot,Rt,bn=e.type;if(void 0!==e.constructor)return null;128&t.__u&&(g=!!(32&t.__u),s=[u=e.__e=t.__e]),(w=Yi.__b)&&w(e);e:if("function"==typeof bn)try{if(he=e.props,_e=(w=bn.contextType)&&i[w.__c],Oe=w?_e?_e.props.value:w.__:i,t.__c?Y=(I=e.__c=t.__c).__=I.__E:("prototype"in bn&&bn.prototype.render?e.__c=I=new bn(he,Oe):(e.__c=I=new II(he,Oe),I.constructor=bn,I.render=Jz),_e&&_e.sub(I),I.props=he,I.state||(I.state={}),I.context=Oe,I.__n=i,M=I.__d=!0,I.__h=[],I._sb=[]),null==I.__s&&(I.__s=I.state),null!=bn.getDerivedStateFromProps&&(I.__s==I.state&&(I.__s=zf({},I.__s)),zf(I.__s,bn.getDerivedStateFromProps(he,I.__s))),O=I.props,N=I.state,I.__v=e,M)null==bn.getDerivedStateFromProps&&null!=I.componentWillMount&&I.componentWillMount(),null!=I.componentDidMount&&I.__h.push(I.componentDidMount);else{if(null==bn.getDerivedStateFromProps&&he!==O&&null!=I.componentWillReceiveProps&&I.componentWillReceiveProps(he,Oe),!I.__e&&(null!=I.shouldComponentUpdate&&!1===I.shouldComponentUpdate(he,I.__s,Oe)||e.__v===t.__v)){for(e.__v!==t.__v&&(I.props=he,I.state=I.__s,I.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(Mi){Mi&&(Mi.__=e)}),Ge=0;Ge<I._sb.length;Ge++)I.__h.push(I._sb[Ge]);I._sb=[],I.__h.length&&l.push(I);break e}null!=I.componentWillUpdate&&I.componentWillUpdate(he,I.__s,Oe),null!=I.componentDidUpdate&&I.__h.push(function(){I.componentDidUpdate(O,N,H)})}if(I.context=Oe,I.props=he,I.__P=n,I.__e=!1,st=Yi.__r,wt=0,"prototype"in bn&&bn.prototype.render){for(I.state=I.__s,I.__d=!1,st&&st(e),w=I.render(I.props,I.state,I.context),Ot=0;Ot<I._sb.length;Ot++)I.__h.push(I._sb[Ot]);I._sb=[]}else do{I.__d=!1,st&&st(e),w=I.render(I.props,I.state,I.context),I.state=I.__s}while(I.__d&&++wt<25);I.state=I.__s,null!=I.getChildContext&&(i=zf(zf({},i),I.getChildContext())),M||null==I.getSnapshotBeforeUpdate||(H=I.getSnapshotBeforeUpdate(O,N)),F2(n,ik(Rt=null!=w&&w.type===sk&&null==w.key?w.props.children:w)?Rt:[Rt],e,t,i,r,s,l,u,g,v),I.base=e.__e,e.__u&=-161,I.__h.length&&l.push(I),Y&&(I.__E=I.__=null)}catch(Mi){e.__v=null,g||null!=s?(e.__e=u,e.__u|=g?160:32,s[s.indexOf(u)]=null):(e.__e=t.__e,e.__k=t.__k),Yi.__e(Mi,e,t)}else null==s&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=function Xz(n,e,t,i,r,s,l,u,g){var v,w,I,M,O,N,H,Y=t.props,he=e.props,_e=e.type;if("svg"===_e&&(r=!0),null!=s)for(v=0;v<s.length;v++)if((O=s[v])&&"setAttribute"in O==!!_e&&(_e?O.localName===_e:3===O.nodeType)){n=O,s[v]=null;break}if(null==n){if(null===_e)return document.createTextNode(he);n=r?document.createElementNS("http://www.w3.org/2000/svg",_e):document.createElement(_e,he.is&&he),s=null,u=!1}if(null===_e)Y===he||u&&n.data===he||(n.data=he);else{if(s=s&&T2.call(n.childNodes),Y=t.props||nk,!u&&null!=s)for(Y={},v=0;v<n.attributes.length;v++)Y[(O=n.attributes[v]).name]=O.value;for(v in Y)O=Y[v],"children"==v||("dangerouslySetInnerHTML"==v?I=O:"key"===v||v in he||TI(n,v,null,O,r));for(v in he)O=he[v],"children"==v?M=O:"dangerouslySetInnerHTML"==v?w=O:"value"==v?N=O:"checked"==v?H=O:"key"===v||u&&"function"!=typeof O||Y[v]===O||TI(n,v,O,Y[v],r);if(w)u||I&&(w.__html===I.__html||w.__html===n.innerHTML)||(n.innerHTML=w.__html),e.__k=[];else if(I&&(n.innerHTML=""),F2(n,ik(M)?M:[M],e,t,i,r&&"foreignObject"!==_e,s,l,s?s[0]:t.__k&&cv(t,0),u,g),null!=s)for(v=s.length;v--;)null!=s[v]&&O2(s[v]);u||(v="value",void 0!==N&&(N!==n[v]||"progress"===_e&&!N||"option"===_e&&N!==Y[v])&&TI(n,v,N,Y[v],!1),v="checked",void 0!==H&&H!==n[v]&&TI(n,v,H,Y[v],!1))}return n}(t.__e,e,t,i,r,s,l,g,v);(w=Yi.diffed)&&w(e)}function Qz(n,e,t){e.__d=void 0;for(var i=0;i<t.length;i++)ak(t[i],t[++i],t[++i]);Yi.__c&&Yi.__c(e,n),n.some(function(r){try{n=r.__h,r.__h=[],n.some(function(s){s.call(r)})}catch(s){Yi.__e(s,r.__v)}})}function ak(n,e,t){try{"function"==typeof n?n(e):n.current=e}catch(i){Yi.__e(i,t)}}function lk(n,e,t){var i,r;if(Yi.unmount&&Yi.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||ak(i,null,e)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){Yi.__e(s,e)}i.base=i.__P=null,n.__c=void 0}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&lk(i[r],e,t||"function"!=typeof n.type);t||null==n.__e||O2(n.__e),n.__=n.__e=n.__d=void 0}function Jz(n,e,t){return this.constructor(n,t)}T2=P2.slice,Yi={__e:function(n,e,t,i){for(var r,s,l;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&null!=s.getDerivedStateFromError&&(r.setState(s.getDerivedStateFromError(n)),l=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(n,i||{}),l=r.__d),l)return r.__E=r}catch(u){n=u}throw n}},x2=0,II.prototype.setState=function(n,e){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=zf({},this.state),"function"==typeof n&&(n=n(zf({},t),this.props)),n&&zf(t,n),null!=n&&this.__v&&(e&&this._sb.push(e),ok(this))},II.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),ok(this))},II.prototype.render=sk,Qg=[],M2="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tk=function(n,e){return n.__v.__b-e.__v.__b},SI.__r=0,k2=0,(t={__c:e="__cC"+k2++,__:{isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0},Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,s;return this.getChildContext||(r=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&r.some(function(u){u.__e=!0,ok(u)})},this.sub=function(l){r.push(l);var u=l.componentWillUnmount;l.componentWillUnmount=function(){r.splice(r.indexOf(l),1),u&&u.call(l)}}),i.children}}).Provider.__=t.Consumer.contextType=t;const kb="[Surveys]",e4={icontains:n=>!!ae&&ae.location.href.toLowerCase().indexOf(n.toLowerCase())>-1,not_icontains:n=>!!ae&&-1===ae.location.href.toLowerCase().indexOf(n.toLowerCase()),regex:n=>!!ae&&iv(ae.location.href,n),not_regex:n=>!!ae&&!iv(ae.location.href,n),exact:n=>(null==ae?void 0:ae.location.href)===n,is_not:n=>(null==ae?void 0:ae.location.href)!==n};class t4{constructor(e){this.instance=e,this._surveyEventReceiver=null}afterDecideResponse(e){this._decideServerResponse=!!e.surveys,this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate"),(()=>{const t=[];for(let i=0;i<localStorage.length;i++){const r=localStorage.key(i);null!=r&&r.startsWith("seenSurvey_")&&t.push(r)}return t})().forEach(t=>localStorage.removeItem(t))}loadIfEnabled(){var e;const t=null==pn||null===(e=pn.__PosthogExtensions__)||void 0===e?void 0:e.generateSurveys;var i,r;this.instance.config.disable_surveys||!this._decideServerResponse||t||(null==this._surveyEventReceiver&&(this._surveyEventReceiver=new DI(this.instance)),null===(i=pn.__PosthogExtensions__)||void 0===i||null===(r=i.loadExternalDependency)||void 0===r||r.call(i,this.instance,"surveys",s=>{var l,u;if(s)return je.error(kb,"Could not load surveys script",s);this._surveyManager=null===(l=pn.__PosthogExtensions__)||void 0===l||null===(u=l.generateSurveys)||void 0===u?void 0:u.call(l,this.instance)}))}getSurveys(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.config.disable_surveys)return e([]);null==this._surveyEventReceiver&&(this._surveyEventReceiver=new DI(this.instance));const i=this.instance.get_property(C1);if(i&&!t)return e(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api",`/api/surveys/?token=${this.instance.config.token}`),method:"GET",transport:"XHR",callback:r=>{var s;if(200!==r.statusCode||!r.json)return e([]);const l=r.json.surveys||[],u=l.filter(v=>{var w,I,M,O,N,H,Y,he,_e,Oe,Ge,st;return(null===(w=v.conditions)||void 0===w?void 0:w.events)&&(null===(I=v.conditions)||void 0===I||null===(M=I.events)||void 0===M?void 0:M.values)&&(null===(O=v.conditions)||void 0===O||null===(N=O.events)||void 0===N||null===(H=N.values)||void 0===H?void 0:H.length)>0||(null===(Y=v.conditions)||void 0===Y?void 0:Y.actions)&&(null===(he=v.conditions)||void 0===he||null===(_e=he.actions)||void 0===_e?void 0:_e.values)&&(null===(Oe=v.conditions)||void 0===Oe||null===(Ge=Oe.actions)||void 0===Ge||null===(st=Ge.values)||void 0===st?void 0:st.length)>0});var g;return u.length>0&&(null===(g=this._surveyEventReceiver)||void 0===g||g.register(u)),null===(s=this.instance.persistence)||void 0===s||s.register({[C1]:l}),e(l)}})}getActiveMatchingSurveys(e){this.getSurveys(i=>{var r;const s=i.filter(g=>!(!g.start_date||g.end_date)).filter(g=>{var v,w,I,M;if(!g.conditions)return!0;const O=null===(v=g.conditions)||void 0===v||!v.url||e4[null!==(w=null===(I=g.conditions)||void 0===I?void 0:I.urlMatchType)&&void 0!==w?w:"icontains"](g.conditions.url),N=null===(M=g.conditions)||void 0===M||!M.selector||(null==Ct?void 0:Ct.querySelector(g.conditions.selector));return O&&N}),l=null===(r=this._surveyEventReceiver)||void 0===r?void 0:r.getSurveys(),u=s.filter(g=>{var v,w,I,M,O,N,H,Y,he,_e;if(!g.linked_flag_key&&!g.targeting_flag_key&&!g.internal_targeting_flag_key)return!0;const Oe=!g.linked_flag_key||this.instance.featureFlags.isFeatureEnabled(g.linked_flag_key),Ge=!g.targeting_flag_key||this.instance.featureFlags.isFeatureEnabled(g.targeting_flag_key),st=(null===(v=g.conditions)||void 0===v?void 0:v.events)&&(null===(w=g.conditions)||void 0===w||null===(I=w.events)||void 0===I?void 0:I.values)&&(null===(M=g.conditions)||void 0===M||null===(O=M.events)||void 0===O?void 0:O.values.length)>0,wt=(null===(N=g.conditions)||void 0===N?void 0:N.actions)&&(null===(H=g.conditions)||void 0===H||null===(Y=H.actions)||void 0===Y?void 0:Y.values)&&(null===(he=g.conditions)||void 0===he||null===(_e=he.actions)||void 0===_e?void 0:_e.values.length)>0,Ot=!st&&!wt||(null==l?void 0:l.includes(g.id)),Rt=this._canActivateRepeatedly(g),bn=!(g.internal_targeting_flag_key&&!Rt)||this.instance.featureFlags.isFeatureEnabled(g.internal_targeting_flag_key);return Oe&&Ge&&bn&&Ot});return e(u)},arguments.length>1&&void 0!==arguments[1]&&arguments[1])}getNextSurveyStep(e,t,i){var r;const s=e.questions[t],l=t+1;if(null===(r=s.branching)||void 0===r||!r.type)return t===e.questions.length-1?yc.End:l;if(s.branching.type===yc.End)return yc.End;if(s.branching.type===yc.SpecificQuestion){if(Number.isInteger(s.branching.index))return s.branching.index}else if(s.branching.type===yc.ResponseBased){if(s.type===CI.SingleChoice){var u,g;const I=s.choices.indexOf(`${i}`);if(null!==(u=s.branching)&&void 0!==u&&null!==(g=u.responseValues)&&void 0!==g&&g.hasOwnProperty(I)){const M=s.branching.responseValues[I];return Number.isInteger(M)?M:M===yc.End?yc.End:l}}else if(s.type===CI.Rating){var v,w;if("number"!=typeof i||!Number.isInteger(i))throw new Error("The response type must be an integer");const I=function(M,O){if(3===O){if(M<1||M>3)throw new Error("The response must be in range 1-3");return 1===M?"negative":2===M?"neutral":"positive"}if(5===O){if(M<1||M>5)throw new Error("The response must be in range 1-5");return M<=2?"negative":3===M?"neutral":"positive"}if(7===O){if(M<1||M>7)throw new Error("The response must be in range 1-7");return M<=3?"negative":4===M?"neutral":"positive"}if(10===O){if(M<0||M>10)throw new Error("The response must be in range 0-10");return M<=6?"detractors":M<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(i,s.scale);if(null!==(v=s.branching)&&void 0!==v&&null!==(w=v.responseValues)&&void 0!==w&&w.hasOwnProperty(I)){const M=s.branching.responseValues[I];return Number.isInteger(M)?M:M===yc.End?yc.End:l}}return l}return je.warn(kb,"Falling back to next question index due to unexpected branching type"),l}_canActivateRepeatedly(e){var t;return Ki(null===(t=pn.__PosthogExtensions__)||void 0===t?void 0:t.canActivateRepeatedly)?(je.warn(kb,"canActivateRepeatedly is not defined, must init before calling"),!1):pn.__PosthogExtensions__.canActivateRepeatedly(e)}canRenderSurvey(e){Ki(this._surveyManager)?je.warn(kb,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(t=>{const i=t.filter(r=>r.id===e)[0];this._surveyManager.canRenderSurvey(i)})}renderSurvey(e,t){Ki(this._surveyManager)?je.warn(kb,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys(i=>{const r=i.filter(s=>s.id===e)[0];this._surveyManager.renderSurvey(r,null==Ct?void 0:Ct.querySelector(t))})}}class n4{constructor(e){var t,i;ht(this,"serverLimits",{}),ht(this,"lastEventRateLimited",!1),ht(this,"checkForLimiting",e=>{const t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach(r=>{je.info(`[RateLimiter] ${r||"events"} is quota limited.`),this.serverLimits[r]=(new Date).getTime()+6e4})}catch(i){return void je.warn(`[RateLimiter] could not rate limit - continuing. Error: "${null==i?void 0:i.message}"`,{text:t})}}),this.instance=e,this.captureEventsPerSecond=(null===(t=e.config.rate_limiting)||void 0===t?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null===(i=e.config.rate_limiting)||void 0===i?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(){var e,t,i;let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const s=(new Date).getTime(),l=null!==(e=null===(t=this.instance.persistence)||void 0===t?void 0:t.get_property(I1))&&void 0!==e?e:{tokens:this.captureEventsBurstLimit,last:s};l.tokens+=(s-l.last)/1e3*this.captureEventsPerSecond,l.last=s,l.tokens>this.captureEventsBurstLimit&&(l.tokens=this.captureEventsBurstLimit);const u=l.tokens<1;return u||r||(l.tokens=Math.max(0,l.tokens-1)),!u||this.lastEventRateLimited||r||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:`posthog-js client rate limited. Config is set to ${this.captureEventsPerSecond} events per second and ${this.captureEventsBurstLimit} events burst limit.`},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=u,null===(i=this.instance.persistence)||void 0===i||i.set_property(I1,l),{isRateLimited:u,remainingTokens:l.tokens}}isServerRateLimited(e){const t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}const r4=()=>Dt({initialPathName:(null==Ko?void 0:Ko.pathname)||"",referringDomain:cr.referringDomain()},cr.campaignParams());class s4{constructor(e,t,i){ht(this,"_onSessionIdCallback",e=>{const t=this._getStoredProps();if(t&&t.sessionId===e)return;const i={sessionId:e,props:this._sessionSourceParamGenerator()};this._persistence.register({[D1]:i})}),this._sessionIdManager=e,this._persistence=t,this._sessionSourceParamGenerator=i||r4,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStoredProps(){return this._persistence.props[D1]}getSessionProps(){var e;const t=null===(e=this._getStoredProps())||void 0===e?void 0:e.props;return t?{$client_session_initial_referring_host:t.referringDomain,$client_session_initial_pathname:t.initialPathName,$client_session_initial_utm_source:t.utm_source,$client_session_initial_utm_campaign:t.utm_campaign,$client_session_initial_utm_medium:t.utm_medium,$client_session_initial_utm_content:t.utm_content,$client_session_initial_utm_term:t.utm_term}:{}}}const o4=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],j2=function(n,e){if(!n)return!1;const t=n.toLowerCase();return o4.concat(e||[]).some(i=>{const r=i.toLowerCase();return-1!==t.indexOf(r)})},H2=function(n,e){if(!n)return!1;const t=n.userAgent;if(t&&j2(t,e))return!0;try{const i=null==n?void 0:n.userAgentData;if(null!=i&&i.brands&&i.brands.some(r=>j2(null==r?void 0:r.brand,e)))return!0}catch(i){}return!!n.webdriver};class $2{constructor(){this.clicks=[]}isRageClick(e,t,i){const r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:i}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:i}];return!1}}class a4{constructor(e){var t;ht(this,"rageclicks",new $2),ht(this,"_enabledServerSide",!1),ht(this,"_initialized",!1),ht(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!(null===(t=this.instance.persistence)||void 0===t||!t.props[b1]),null==ae||ae.addEventListener("beforeunload",()=>{this.flush()})}get flushIntervalMilliseconds(){let e=5e3;return lr(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Pt(this.instance.config.capture_heatmaps)?Pt(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled){if(this._initialized)return;je.info("[heatmaps] starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e;clearInterval(null!==(e=this._flushInterval)&&void 0!==e?e:void 0),this.getAndClearBuffer()}}afterDecideResponse(e){const t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[b1]:t}),this._enabledServerSide=t,this.startIfEnabled()}getAndClearBuffer(){const e=this.buffer;return this.buffer=void 0,e}_setupListeners(){ae&&Ct&&(Yd(Ct,"click",e=>this._onClick(e||(null==ae?void 0:ae.event)),!1,!0),Yd(Ct,"mousemove",e=>this._onMouseMove(e||(null==ae?void 0:ae.event)),!1,!0),this._initialized=!0)}_getProperties(e,t){const i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),l=function(u,g,v){let w=u;for(;w&&_I(w)&&!$f(w,"body");){if(w===v)return!1;if(Sn(g,null==ae?void 0:ae.getComputedStyle(w).position))return!0;w=XL(w)}return!1}(QL(e),["fixed","sticky"],s);return{x:e.clientX+(l?0:r),y:e.clientY+(l?0:i),target_fixed:l,type:t}}_onClick(e){var t;if(qL(e.target))return;const i=this._getProperties(e,"click");null!==(t=this.rageclicks)&&void 0!==t&&t.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._capture(ii(Dt({},i),{type:"rageclick"})),this._capture(i)}_onMouseMove(e){qL(e.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout(()=>{this._capture(this._getProperties(e,"mousemove"))},500))}_capture(e){if(!ae)return;const t=ae.location.href;this.buffer=this.buffer||{},this.buffer[t]||(this.buffer[t]=[]),this.buffer[t].push(e)}flush(){this.buffer&&!mb(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class l4{constructor(e){ht(this,"_updateScrollData",()=>{var e,t,i,r;this.context||(this.context={});const s=this.scrollElement(),l=this.scrollY(),u=s?Math.max(0,s.scrollHeight-s.clientHeight):0,g=l+((null==s?void 0:s.clientHeight)||0),v=(null==s?void 0:s.scrollHeight)||0;this.context.lastScrollY=Math.ceil(l),this.context.maxScrollY=Math.max(l,null!==(e=this.context.maxScrollY)&&void 0!==e?e:0),this.context.maxScrollHeight=Math.max(u,null!==(t=this.context.maxScrollHeight)&&void 0!==t?t:0),this.context.lastContentY=g,this.context.maxContentY=Math.max(g,null!==(i=this.context.maxContentY)&&void 0!==i?i:0),this.context.maxContentHeight=Math.max(v,null!==(r=this.context.maxContentHeight)&&void 0!==r?r:0)}),this.instance=e}getContext(){return this.context}resetContext(){const e=this.context;return setTimeout(this._updateScrollData,0),e}startMeasuringScrollPosition(){null==ae||ae.addEventListener("scroll",this._updateScrollData,!0),null==ae||ae.addEventListener("scrollend",this._updateScrollData,!0),null==ae||ae.addEventListener("resize",this._updateScrollData)}scrollElement(){if(!this.instance.config.scroll_root_selector)return null==ae?void 0:ae.document.documentElement;{const e=Rr(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector];for(const t of e){const i=null==ae?void 0:ae.document.querySelector(t);if(i)return i}}}scrollY(){if(this.instance.config.scroll_root_selector){const e=this.scrollElement();return e&&e.scrollTop||0}return ae&&(ae.scrollY||ae.pageYOffset||ae.document.documentElement.scrollTop)||0}scrollX(){if(this.instance.config.scroll_root_selector){const e=this.scrollElement();return e&&e.scrollLeft||0}return ae&&(ae.scrollX||ae.pageXOffset||ae.document.documentElement.scrollLeft)||0}}const ck="$copy_autocapture";function uk(n,e){return e.length>n?e.slice(0,n)+"...":e}function c4(n){if(n.previousElementSibling)return n.previousElementSibling;let e=n;do{e=e.previousSibling}while(e&&!_I(e));return e}class h4{constructor(e){ht(this,"_initialized",!1),ht(this,"_isDisabledServerSide",null),ht(this,"rageclicks",new $2),ht(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}get config(){var e,t;const i=lr(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=null===(e=i.url_allowlist)||void 0===e?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=null===(t=i.url_ignorelist)||void 0===t?void 0:t.map(r=>new RegExp(r)),i}_addDomEventHandlers(){if(!this.isBrowserSupported())return void je.info("Disabling Automatic Event Collection because this browser is not supported");if(!ae||!Ct)return;const e=i=>{i=i||(null==ae?void 0:ae.event);try{this._captureEvent(i)}catch(r){je.error("Failed to capture event",r)}},t=i=>{this._captureEvent(i=i||(null==ae?void 0:ae.event),ck)};Yd(Ct,"submit",e,!1,!0),Yd(Ct,"change",e,!1,!0),Yd(Ct,"click",e,!1,!0),this.config.capture_copied_text&&(Yd(Ct,"copy",t,!1,!0),Yd(Ct,"cut",t,!1,!0))}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}afterDecideResponse(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[uL]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var t;const i=[];return null===(t=this._elementSelectors)||void 0===t||t.forEach(r=>{const s=null==Ct?void 0:Ct.querySelectorAll(r);null==s||s.forEach(l=>{e===l&&i.push(r)})}),i}get isEnabled(){var e,t;const i=null===(e=this.instance.persistence)||void 0===e?void 0:e.props[uL];if(Lf(this._isDisabledServerSide)&&!Vf(i)&&!this.instance.config.advanced_disable_decide)return!1;const s=null!==(t=this._isDisabledServerSide)&&void 0!==t?t:!!i;return!!this.instance.config.autocapture&&!s}_captureEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$autocapture";if(!this.isEnabled)return;let i=QL(e);var r;WL(i)&&(i=i.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!==(r=this.rageclicks)&&void 0!==r&&r.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._captureEvent(e,"$rageclick");const s=t===ck;if(i&&function cz(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(!ae||!n||$f(n,"html")||!_I(n)||null!=t&&t.url_allowlist&&!KL(t.url_allowlist)||null!=t&&t.url_ignorelist&&KL(t.url_ignorelist))return!1;if(null!=t&&t.dom_event_allowlist){const I=t.dom_event_allowlist;if(I&&!I.some(M=>e.type===M))return!1}let s=!1;const l=[n];let u=!0,g=n;for(;g.parentNode&&!$f(g,"body");)if(ZL(g.parentNode))l.push(g.parentNode.host),g=g.parentNode.host;else{if(u=XL(g),!u)break;if(i||H1.indexOf(u.tagName.toLowerCase())>-1)s=!0;else{const I=ae.getComputedStyle(u);I&&"pointer"===I.getPropertyValue("cursor")&&(s=!0)}l.push(u),g=u}if(!function(I,M){const O=null==M?void 0:M.element_allowlist;if(Pt(O))return!0;for(const N of I)if(O.some(H=>N.tagName.toLowerCase()===H))return!0;return!1}(l,t)||!function(I,M){const O=null==M?void 0:M.css_selector_allowlist;if(Pt(O))return!0;for(const N of I)if(O.some(H=>N.matches(H)))return!0;return!1}(l,t))return!1;const v=ae.getComputedStyle(n);if(v&&"pointer"===v.getPropertyValue("cursor")&&"click"===e.type)return!0;const w=n.tagName.toLowerCase();switch(w){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return s?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(H1.indexOf(w)>-1||"true"===n.getAttribute("contenteditable"))}}(i,e,this.config,s,s?["copy","cut"]:void 0)){const{props:u,explicitNoCapture:g}=function d4(n,e){var t,i;let{e:r,maskAllElementAttributes:s,maskAllText:l,elementAttributeIgnoreList:u,elementsChainAsString:g}=e;const v=[n];let w=n;for(;w.parentNode&&!$f(w,"body");)ZL(w.parentNode)?(v.push(w.parentNode.host),w=w.parentNode.host):(v.push(w.parentNode),w=w.parentNode);const I=[],M={};let O,N=!1,H=!1;if(ui(v,_e=>{const Oe=$1(_e);"a"===_e.tagName.toLowerCase()&&(N=_e.getAttribute("href"),N=Oe&&N&&av(N)&&N),Sn(vI(_e),"ph-no-capture")&&(H=!0),I.push(function u4(n,e,t,i){const r=n.tagName.toLowerCase(),s={tag_name:r};H1.indexOf(r)>-1&&!t&&(s.$el_text="a"===r.toLowerCase()||"button"===r.toLowerCase()?uk(1024,n2(n)):uk(1024,yI(n)));const l=vI(n);l.length>0&&(s.classes=l.filter(function(w){return""!==w})),ui(n.attributes,function(w){var I;if((!JL(n)||-1!==["name","id","class","aria-label"].indexOf(w.name))&&(null==i||!i.includes(w.name))&&!e&&av(w.value)&&(!Gs(I=w.name)||"_ngcontent"!==I.substring(0,10)&&"_nghost"!==I.substring(0,7))){let M=w.value;"class"===w.name&&(M=j1(M).join(" ")),s["attr__"+w.name]=uk(1024,M)}});let u=1,g=1,v=n;for(;v=c4(v);)u++,v.tagName===n.tagName&&g++;return s.nth_child=u,s.nth_of_type=g,s}(_e,s,l,u));const Ge=function(st){if(!$1(st))return{};const wt={};return ui(st.attributes,function(Ot){if(Ot.name&&0===Ot.name.indexOf("data-ph-capture-attribute")){const Rt=Ot.name.replace("data-ph-capture-attribute-",""),bn=Ot.value;Rt&&bn&&av(bn)&&(wt[Rt]=bn)}}),wt}(_e);po(M,Ge)}),H)return{props:{},explicitNoCapture:H};if(l||(I[0].$el_text="a"===n.tagName.toLowerCase()||"button"===n.tagName.toLowerCase()?n2(n):yI(n)),N){var Y,he;I[0].attr__href=N;const _e=null===(Y=wb(N))||void 0===Y?void 0:Y.host,Oe=null==ae||null===(he=ae.location)||void 0===he?void 0:he.host;_e&&Oe&&_e!==Oe&&(O=N)}return{props:po({$event_type:r.type,$ce_version:1},g?{$elements_chain:pz(I)}:{$elements:I},null!==(t=I[0])&&void 0!==t&&t.$el_text?{$el_text:null===(i=I[0])||void 0===i?void 0:i.$el_text}:{},O&&"click"===r.type?{$external_click_url:O}:{},M)}}(i,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(g)return!1;const v=this.getElementSelectors(i);if(v&&v.length>0&&(u.$element_selectors=v),t===ck){var l;const w=YL(null==ae||null===(l=ae.getSelection())||void 0===l?void 0:l.toString()),I=e.type||"clipboard";if(!w)return!1;u.$selected_content=w,u.$copy_type=I}return this.instance.capture(t,u),!0}}isBrowserSupported(){return Il(null==Ct?void 0:Ct.querySelectorAll)}}class f4{constructor(e){ht(this,"_restoreXHRPatch"),ht(this,"_restoreFetchPatch"),ht(this,"_startCapturing",()=>{var e,t,i,r;Pt(this._restoreXHRPatch)&&(null===(e=pn.__PosthogExtensions__)||void 0===e||null===(t=e.tracingHeadersPatchFns)||void 0===t||t._patchXHR(this.instance.sessionManager)),Pt(this._restoreFetchPatch)&&(null===(i=pn.__PosthogExtensions__)||void 0===i||null===(r=i.tracingHeadersPatchFns)||void 0===r||r._patchFetch(this.instance.sessionManager))}),this.instance=e}_loadScript(e){var t,i,r;null!==(t=pn.__PosthogExtensions__)&&void 0!==t&&t.tracingHeadersPatchFns&&e(),null===(i=pn.__PosthogExtensions__)||void 0===i||null===(r=i.loadExternalDependency)||void 0===r||r.call(i,this.instance,"tracing-headers",s=>{if(s)return je.error("[TRACING-HEADERS] failed to load script",s);e()})}startIfEnabledOrStop(){var e,t;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):(null===(e=this._restoreXHRPatch)||void 0===e||e.call(this),null===(t=this._restoreFetchPatch)||void 0===t||t.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}let Gf;!function(n){n[n.PENDING=-1]="PENDING",n[n.DENIED=0]="DENIED",n[n.GRANTED=1]="GRANTED"}(Gf||(Gf={}));class p4{constructor(e){this.instance=e}get config(){return this.instance.config}get consent(){return this.getDnt()?Gf.DENIED:this.storedConsent}isOptedOut(){return this.consent===Gf.DENIED||this.consent===Gf.PENDING&&this.config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}reset(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}get storageKey(){const{token:e,opt_out_capturing_cookie_prefix:t}=this.instance.config;return(t||"__ph_opt_in_out_")+e}get storedConsent(){const e=this.storage.get(this.storageKey);return"1"===e?Gf.GRANTED:"0"===e?Gf.DENIED:Gf.PENDING}get storage(){if(!this._storage){const e=this.config.opt_out_capturing_persistence_type;this._storage="localStorage"===e?Fr:Xd;const t="localStorage"===e?Xd:Fr;t.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut("1"===t.get(this.storageKey)),t.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}getDnt(){return!!this.config.respect_dnt&&!!lL([null==Ra?void 0:Ra.doNotTrack,null==Ra?void 0:Ra.msDoNotTrack,pn.doNotTrack],e=>Sn([!0,1,"1","yes"],e))}}const xI="[Exception Autocapture]";class g4{constructor(e){var t;ht(this,"originalOnUnhandledRejectionHandler"),ht(this,"startCapturing",()=>{var e,t,i,r;if(!ae||!this.isEnabled||this.hasHandlers||this.isCapturing)return;const s=null===(e=pn.__PosthogExtensions__)||void 0===e||null===(t=e.errorWrappingFunctions)||void 0===t?void 0:t.wrapOnError,l=null===(i=pn.__PosthogExtensions__)||void 0===i||null===(r=i.errorWrappingFunctions)||void 0===r?void 0:r.wrapUnhandledRejection;if(s&&l)try{this.unwrapOnError=s(this.captureException.bind(this)),this.unwrapUnhandledRejection=l(this.captureException.bind(this))}catch(u){je.error(xI+" failed to start",u),this.stopCapturing()}else je.error(xI+" failed to load error wrapping functions - cannot start")}),this.instance=e,this.remoteEnabled=!(null===(t=this.instance.persistence)||void 0===t||!t.props[dL]),this.startIfEnabled()}get isEnabled(){var e;return null!==(e=this.remoteEnabled)&&void 0!==e&&e}get isCapturing(){var e;return!(null==ae||null===(e=ae.onerror)||void 0===e||!e.__POSTHOG_INSTRUMENTED__)}get hasHandlers(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}startIfEnabled(){this.isEnabled&&!this.isCapturing&&(je.info(xI+" enabled, starting..."),this.loadScript(this.startCapturing))}loadScript(e){var t,i;this.hasHandlers&&e(),null===(t=pn.__PosthogExtensions__)||void 0===t||null===(i=t.loadExternalDependency)||void 0===i||i.call(t,this.instance,"exception-autocapture",r=>{if(r)return je.error(xI+" failed to load script",r);e()})}stopCapturing(){var e,t;null===(e=this.unwrapOnError)||void 0===e||e.call(this),null===(t=this.unwrapUnhandledRejection)||void 0===t||t.call(this)}afterDecideResponse(e){this.remoteEnabled=!!e.autocaptureExceptions||!1,this.instance.persistence&&this.instance.persistence.register({[dL]:this.remoteEnabled}),this.startIfEnabled()}captureException(e){const t=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL=`${t}/project/${this.instance.config.token}/person/${this.instance.get_distinct_id()}`,this.instance.exceptions.sendExceptionEvent(e)}}const Xg="[Web Vitals]";class m4{constructor(e){var t;ht(this,"_enabledServerSide",!1),ht(this,"_initialized",!1),ht(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),ht(this,"_flushToCapture",()=>{clearTimeout(this._delayedFlushTimer),0!==this.buffer.metrics.length&&(this.instance.capture("$web_vitals",this.buffer.metrics.reduce((e,t)=>ii(Dt({},e),{[`$web_vitals_${t.name}_event`]:Dt({},t),[`$web_vitals_${t.name}_value`]:t.value}),{})),this.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})}),ht(this,"_addToBuffer",e=>{var t;const i=null===(t=this.instance.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0);if(Pt(i))return void je.error(Xg+"Could not read session ID. Dropping metrics!");this.buffer=this.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};const r=this._currentURL();if(!Pt(r)){if(Ki(null==e?void 0:e.name)||Ki(null==e?void 0:e.value))return void je.error(Xg+"Invalid metric received",e);if(this._maxAllowedValue&&e.value>=this._maxAllowedValue)return void je.error(Xg+"Ignoring metric with value >= "+this._maxAllowedValue,e);this.buffer.url!==r&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),Pt(this.buffer.url)&&(this.buffer.url=r),this.buffer.firstMetricTimestamp=Pt(this.buffer.firstMetricTimestamp)?Date.now():this.buffer.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this.buffer.metrics.push(ii(Dt({},e),{$current_url:r,$session_id:i.sessionId,$window_id:i.windowId,timestamp:Date.now()})),this.buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()}}),ht(this,"_startCapturing",()=>{let e,t,i,r;const s=pn.__PosthogExtensions__;Pt(s)||Pt(s.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:i,onINP:r}=s.postHogWebVitalsCallbacks),e&&t&&i&&r?(this.allowedMetrics.indexOf("LCP")>-1&&e(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&i(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&r(this._addToBuffer.bind(this)),this._initialized=!0):je.error(Xg+"web vitals callbacks not loaded - not starting")}),this.instance=e,this._enabledServerSide=!(null===(t=this.instance.persistence)||void 0===t||!t.props[fL]),this.startIfEnabled()}get allowedMetrics(){var e,t;const i=lr(this.instance.config.capture_performance)?null===(e=this.instance.config.capture_performance)||void 0===e?void 0:e.web_vitals_allowed_metrics:void 0;return Pt(i)?(null===(t=this.instance.persistence)||void 0===t?void 0:t.props[gL])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(lr(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){const e=lr(this.instance.config.capture_performance)&&Fa(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:9e5;return 0<e&&e<=6e4?9e5:e}get isEnabled(){const e=lr(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return Vf(e)?e:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(je.info(Xg+" enabled, starting..."),this.loadScript(this._startCapturing))}afterDecideResponse(e){const t=lr(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=lr(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register({[fL]:t}),this.instance.persistence.register({[gL]:i})),this._enabledServerSide=t,this.startIfEnabled()}loadScript(e){var t,i,r;null!==(t=pn.__PosthogExtensions__)&&void 0!==t&&t.postHogWebVitalsCallbacks&&e(),null===(i=pn.__PosthogExtensions__)||void 0===i||null===(r=i.loadExternalDependency)||void 0===r||r.call(i,this.instance,"web-vitals",s=>{s?je.error(Xg+" failed to load script",s):e()})}_currentURL(){const e=ae?ae.location.href:void 0;return e||je.error(Xg+"Could not determine current URL"),e}}const _4={icontains:(n,e)=>!!ae&&e.href.toLowerCase().indexOf(n.toLowerCase())>-1,not_icontains:(n,e)=>!!ae&&-1===e.href.toLowerCase().indexOf(n.toLowerCase()),regex:(n,e)=>!!ae&&iv(e.href,n),not_regex:(n,e)=>!!ae&&!iv(e.href,n),exact:(n,e)=>e.href===n,is_not:(n,e)=>e.href!==n};class Xr{constructor(e){ht(this,"getWebExperimentsAndEvaluateDisplayLogic",(()=>{var e=this;return function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.getWebExperiments(i=>{Xr.logInfo("retrieved web experiments from the server"),e._flagToExperiments=new Map,i.forEach(r=>{if(r.feature_flag_key&&e._featureFlags&&e._featureFlags[r.feature_flag_key]){var s;e._flagToExperiments&&(Xr.logInfo("setting flag key ",r.feature_flag_key," to web experiment ",r),null===(s=e._flagToExperiments)||void 0===s||s.set(r.feature_flag_key,r));const l=e._featureFlags[r.feature_flag_key];l&&r.variants[l]&&e.applyTransforms(r.name,l,r.variants[l].transforms)}else if(r.variants)for(const l in r.variants){const u=r.variants[l];Xr.matchesTestVariant(u)&&e.applyTransforms(r.name,l,u.transforms)}})},t)}})()),this.instance=e,this.instance.onFeatureFlags&&this.instance.onFeatureFlags(i=>{this.applyFeatureFlagChanges(i)}),this._flagToExperiments=new Map}applyFeatureFlagChanges(e){Ki(this._flagToExperiments)||this.instance.config.disable_web_experiments||(Xr.logInfo("applying feature flags",e),e.forEach(t=>{var i;if(this._flagToExperiments&&null!==(i=this._flagToExperiments)&&void 0!==i&&i.has(t)){var r;const s=this.instance.getFeatureFlag(t),l=null===(r=this._flagToExperiments)||void 0===r?void 0:r.get(t);s&&null!=l&&l.variants[s]&&this.applyTransforms(l.name,s,l.variants[s].transforms)}}))}afterDecideResponse(e){this._is_bot()?Xr.logInfo("Refusing to render web experiment since the viewer is a likely bot"):(this._featureFlags=e.featureFlags,this.loadIfEnabled(),this.previewWebExperiment())}previewWebExperiment(){const e=Xr.getWindowLocation();if(null!=e&&e.search){const t=hI(null==e?void 0:e.search,"__experiment_id"),i=hI(null==e?void 0:e.search,"__experiment_variant");t&&i&&(Xr.logInfo(`previewing web experiments ${t} && ${i}`),this.getWebExperiments(r=>{this.showPreviewWebExperiment(parseInt(t),i,r)},!1,!0))}}loadIfEnabled(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,i){if(this.instance.config.disable_web_experiments&&!i)return e([]);const r=this.instance.get_property("$web_experiments");if(r&&!t)return e(r);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api",`/api/web_experiments/?token=${this.instance.config.token}`),method:"GET",transport:"XHR",callback:s=>e(200===s.statusCode&&s.json&&s.json.experiments||[])})}showPreviewWebExperiment(e,t,i){const r=i.filter(s=>s.id===e);r&&r.length>0&&(Xr.logInfo(`Previewing web experiment [${r[0].name}] with variant [${t}]`),this.applyTransforms(r[0].name,t,r[0].variants[t].transforms,!0))}static matchesTestVariant(e){return!Ki(e.conditions)&&Xr.matchUrlConditions(e)&&Xr.matchUTMConditions(e)}static matchUrlConditions(e){var t;if(Ki(e.conditions)||Ki(null===(t=e.conditions)||void 0===t?void 0:t.url))return!0;const i=Xr.getWindowLocation();var r,s,l;return!!i&&(null===(r=e.conditions)||void 0===r||!r.url||_4[null!==(s=null===(l=e.conditions)||void 0===l?void 0:l.urlMatchType)&&void 0!==s?s:"icontains"](e.conditions.url,i))}static getWindowLocation(){return null==ae?void 0:ae.location}static matchUTMConditions(e){var t;if(Ki(e.conditions)||Ki(null===(t=e.conditions)||void 0===t?void 0:t.utm))return!0;const i=cr.campaignParams();if(i.utm_source){var r,s,l,u,g,v,w,I,M,O,N,H,Y,he,_e,Oe;const Ge=null===(r=e.conditions)||void 0===r||null===(s=r.utm)||void 0===s||!s.utm_campaign||(null===(l=e.conditions)||void 0===l||null===(u=l.utm)||void 0===u?void 0:u.utm_campaign)==i.utm_campaign,st=null===(g=e.conditions)||void 0===g||null===(v=g.utm)||void 0===v||!v.utm_source||(null===(w=e.conditions)||void 0===w||null===(I=w.utm)||void 0===I?void 0:I.utm_source)==i.utm_source,wt=null===(M=e.conditions)||void 0===M||null===(O=M.utm)||void 0===O||!O.utm_medium||(null===(N=e.conditions)||void 0===N||null===(H=N.utm)||void 0===H?void 0:H.utm_medium)==i.utm_medium,Ot=null===(Y=e.conditions)||void 0===Y||null===(he=Y.utm)||void 0===he||!he.utm_term||(null===(_e=e.conditions)||void 0===_e||null===(Oe=_e.utm)||void 0===Oe?void 0:Oe.utm_term)==i.utm_term;return Ge&&wt&&Ot&&st}return!1}static logInfo(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];je.info(`[WebExperiments] ${e}`,i)}applyTransforms(e,t,i,r){var s;this._is_bot()?Xr.logInfo("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?i.forEach(l=>{if(l.selector){var u;Xr.logInfo(`applying transform of variant ${t} for experiment ${e} `,l);let v=0;const w=null===(u=document)||void 0===u?void 0:u.querySelectorAll(l.selector);var g;null==w||w.forEach(I=>{const M=I;v+=1,l.attributes&&l.attributes.forEach(O=>{switch(O.name){case"text":M.innerText=O.value;break;case"html":M.innerHTML=O.value;break;case"cssClass":M.className=O.value;break;default:M.setAttribute(O.name,O.value)}}),l.text&&(M.innerText=l.text),l.html&&(M.parentElement?M.parentElement.innerHTML=l.html:M.innerHTML=l.html),l.css&&M.setAttribute("style",l.css)}),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_variant:t,$web_experiment_preview:r,$web_experiment_document_url:null===(g=Xr.getWindowLocation())||void 0===g?void 0:g.href,$web_experiment_elements_modified:v})}}):(Xr.logInfo("Control variants leave the page unmodified."),this.instance&&this.instance.capture&&this.instance.capture("$web_experiment_applied",{$web_experiment_name:e,$web_experiment_preview:r,$web_experiment_variant:t,$web_experiment_document_url:null===(s=Xr.getWindowLocation())||void 0===s?void 0:s.href,$web_experiment_elements_modified:0}))}_is_bot(){return Ra&&this.instance?H2(Ra,this.instance.config.custom_blocked_useragents):void 0}}class v4{constructor(e){var t;this.instance=e,this._endpointSuffix=(null===(t=this.instance.persistence)||void 0===t?void 0:t.props[hL])||"/e/"}get endpoint(){return this.instance.requestRouter.endpointFor("api",this._endpointSuffix)}afterDecideResponse(e){const t=e.autocaptureExceptions;this._endpointSuffix=lr(t)&&t.endpoint||"/e/",this.instance.persistence&&this.instance.persistence.register({[hL]:this._endpointSuffix})}sendExceptionEvent(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent",_url:this.endpoint})}}const AI="[Dead Clicks]";class y4{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e){this.instance=e,this.startIfEnabled()}get isRemoteEnabled(){var e;return!(null===(e=this.instance.persistence)||void 0===e||!e.get_property(pL))}get isEnabled(){const e=this.instance.config.capture_dead_clicks;return Vf(e)?e:this.isRemoteEnabled}afterDecideResponse(e){this.instance.persistence&&this.instance.persistence.register({[pL]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled&&this.loadScript(this.start.bind(this))}loadScript(e){var t,i,r;null!==(t=pn.__PosthogExtensions__)&&void 0!==t&&t.initDeadClicksAutocapture&&e(),null===(i=pn.__PosthogExtensions__)||void 0===i||null===(r=i.loadExternalDependency)||void 0===r||r.call(i,this.instance,"dead-clicks-autocapture",s=>{s?je.error(AI+" failed to load script",s):e()})}start(){var e;Ct?!this._lazyLoadedDeadClicksAutocapture&&null!==(e=pn.__PosthogExtensions__)&&void 0!==e&&e.initDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture=pn.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,lr(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:void 0),this._lazyLoadedDeadClicksAutocapture.start(Ct),je.info(`${AI} starting...`)):je.error(AI+" `document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,je.info(`${AI} stopping...`))}}const Pb={},q2=()=>{},uv="posthog";let W2=!Vz&&-1===(null==Qr?void 0:Qr.indexOf("MSIE"))&&-1===(null==Qr?void 0:Qr.indexOf("Mozilla"));const Z2=()=>{var n;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:B$(null==Ct?void 0:Ct.location),persistence:"localStorage+cookie",persistence_name:"",loaded:q2,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:Ko&&Gs(null==Ko?void 0:Ko.search)&&-1!==Ko.search.indexOf("__posthog_debug=true")||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==ae||null===(n=ae.location)||void 0===n?void 0:n.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:e=>{je.error("Bad HTTP status: "+e.statusCode+" "+e.text)},get_device_id:e=>e,_onCapture:q2,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",__add_tracing_headers:!1}},K2=n=>{const e={};Pt(n.process_person)||(e.person_profiles=n.process_person),Pt(n.xhr_headers)||(e.request_headers=n.xhr_headers),Pt(n.cookie_name)||(e.persistence_name=n.cookie_name),Pt(n.disable_cookie)||(e.disable_persistence=n.disable_cookie);const t=po({},e,n);return Rr(n.property_blacklist)&&(Pt(n.property_denylist)?t.property_denylist=n.property_blacklist:Rr(n.property_denylist)?t.property_denylist=[...n.property_blacklist,...n.property_denylist]:je.error("Invalid value for property_denylist config: "+n.property_denylist)),t};class b4{constructor(){ht(this,"__forceAllowLocalhost",!1)}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){je.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class MI{constructor(){ht(this,"webPerformance",new b4),ht(this,"version",Nf.LIB_VERSION),ht(this,"_internalEventEmitter",new S2),this.config=Z2(),this.decideEndpointWasHit=!1,this.SentryIntegration=Gz,this.sentryIntegration=e=>function(t,i){const r=D2(t,i);return{name:C2,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._initialPersonProfilesConfig=null,this.featureFlags=new j$(this),this.toolbar=new Nz(this),this.scrollManager=new l4(this),this.pageViewManager=new Wz(this),this.surveys=new t4(this),this.experiments=new Xr(this),this.exceptions=new v4(this),this.rateLimiter=new n4(this),this.requestRouter=new zz(this),this.consent=new p4(this),this.people={set:(e,t,i)=>{const r=Gs(e)?{[e]:t}:e;this.setPersonProperties(r),null==i||i({})},set_once:(e,t,i)=>{const r=Gs(e)?{[e]:t}:e;this.setPersonProperties(void 0,r),null==i||i({})}},this.on("eventCaptured",e=>je.info(`send "${null==e?void 0:e.event}"`,e))}init(e,t,i){if(i&&i!==uv){var r;const s=null!==(r=Pb[i])&&void 0!==r?r:new MI;return s._init(e,t,i),Pb[i]=s,Pb[uv][i]=s,s}return this._init(e,t,i)}_init(e){var t,i;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(Pt(e)||rL(e))return je.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return je.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],r.person_profiles&&(this._initialPersonProfilesConfig=r.person_profiles),this.set_config(po({},Z2(),K2(r),{name:s,token:e})),this.config.on_xhr_error&&je.error("[posthog] on_xhr_error is deprecated. Use on_request_error instead"),this.compression=r.disable_compression?void 0:_c.GZipJS,this.persistence=new B1(this.config),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new B1(ii(Dt({},this.config),{persistence:"sessionStorage"}));const l=Dt({},this.persistence.props),u=Dt({},this.sessionPersistence.props);if(this._requestQueue=new Lz(M=>this._send_retriable_request(M)),this._retryQueue=new Hz(this),this.__request_queue=[],this.sessionManager=new $z(this.config,this.persistence),this.sessionPropsManager=new s4(this.sessionManager,this.persistence),new f4(this).startIfEnabledOrStop(),this.sessionRecording=new Oz(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new h4(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new a4(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new m4(this),this.exceptionObserver=new g4(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new y4(this),this.deadClicksAutocapture.startIfEnabled(),Nf.DEBUG=Nf.DEBUG||this.config.debug,Nf.DEBUG&&je.info("Starting in debug mode",{this:this,config:r,thisC:Dt({},this.config),p:l,s:u}),this._sync_opt_out_with_persistence(),void 0!==(null===(t=r.bootstrap)||void 0===t?void 0:t.distinctID)){var g,v;const M=this.config.get_device_id(Uf()),O=null!==(g=r.bootstrap)&&void 0!==g&&g.isIdentifiedID?M:r.bootstrap.distinctID;this.persistence.set_property(Qd,null!==(v=r.bootstrap)&&void 0!==v&&v.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:r.bootstrap.distinctID,$device_id:O})}if(this._hasBootstrappedFeatureFlags()){var w,I;const M=Object.keys((null===(w=r.bootstrap)||void 0===w?void 0:w.featureFlags)||{}).filter(N=>{var H,Y;return!(null===(H=r.bootstrap)||void 0===H||null===(Y=H.featureFlags)||void 0===Y||!Y[N])}).reduce((N,H)=>{var Y,he;return N[H]=(null===(Y=r.bootstrap)||void 0===Y||null===(he=Y.featureFlags)||void 0===he?void 0:he[H])||!1,N},{}),O=Object.keys((null===(I=r.bootstrap)||void 0===I?void 0:I.featureFlagPayloads)||{}).filter(N=>M[N]).reduce((N,H)=>{var Y,he,_e,Oe;return null!==(Y=r.bootstrap)&&void 0!==Y&&null!==(he=Y.featureFlagPayloads)&&void 0!==he&&he[H]&&(N[H]=null===(_e=r.bootstrap)||void 0===_e||null===(Oe=_e.featureFlagPayloads)||void 0===Oe?void 0:Oe[H]),N},{});this.featureFlags.receivedFeatureFlags({featureFlags:M,featureFlagPayloads:O})}if(!this.get_distinct_id()){const M=this.config.get_device_id(Uf());this.register_once({distinct_id:M,$device_id:M},""),this.persistence.set_property(Qd,"anonymous")}return null==ae||null===(i=ae.addEventListener)||void 0===i||i.call(ae,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),r.segment?function qz(n,e){const t=n.config.segment;if(!t)return e();!function(i,r){const s=i.config.segment;if(!s)return r();const l=g=>{const v=()=>g.anonymousId()||Uf();i.config.get_device_id=v,g.id()&&(i.register({distinct_id:g.id(),$device_id:v()}),i.persistence.set_property(Qd,"identified")),r()},u=s.user();"then"in u&&Il(u.then)?u.then(g=>l(g)):l(u)}(n,()=>{t.register((i=>{Promise&&Promise.resolve||je.warn("This browser does not have Promise support, and can not use the segment integration");const r=(s,l)=>{var u;if(!l)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(je.info("Segment integration does not have a userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(je.info("Segment integration has a userId set, identifying with PostHog"),i.identify(s.event.userId));const g=i._calculate_event_properties(l,null!==(u=s.event.properties)&&void 0!==u?u:{},new Date);return s.event.properties=Object.assign({},g,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(n)).then(()=>{e()})})}(this,()=>this._loaded()):this._loaded(),Il(this.config._onCapture)&&this.on("eventCaptured",M=>this.config._onCapture(M.event,M)),this}_afterDecideResponse(e){var t,i,r,s,l,u,g,v,w,I;this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=Sn(e.supportedCompression,_c.GZipJS)?_c.GZipJS:Sn(e.supportedCompression,_c.Base64)?_c.Base64:void 0),null!==(t=e.analytics)&&void 0!==t&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:e.defaultIdentifiedOnly?"identified_only":"always"}),null===(i=this.sessionRecording)||void 0===i||i.afterDecideResponse(e),null===(r=this.autocapture)||void 0===r||r.afterDecideResponse(e),null===(s=this.heatmaps)||void 0===s||s.afterDecideResponse(e),null===(l=this.experiments)||void 0===l||l.afterDecideResponse(e),null===(u=this.surveys)||void 0===u||u.afterDecideResponse(e),null===(g=this.webVitalsAutocapture)||void 0===g||g.afterDecideResponse(e),null===(v=this.exceptions)||void 0===v||v.afterDecideResponse(e),null===(w=this.exceptionObserver)||void 0===w||w.afterDecideResponse(e),null===(I=this.deadClicksAutocapture)||void 0===I||I.afterDecideResponse(e)}_loaded(){const e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(t){je.critical("`loaded` function failed",t)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this._captureInitialPageview()},1),e||(new Rz(this).call(),this.featureFlags.resetRequestQueue())}_start_queue_if_opted_in(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null===(e=this._requestQueue)||void 0===e||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||ev(this.__request_queue,e=>this._send_retriable_request(e)),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,t;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),null===(e=this._requestQueue)||void 0===e||e.unload(),null===(t=this._retryQueue)||void 0===t||t.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(W2?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=EI(e.url,{ip:this.config.ip?1:0}),e.headers=Dt({},this.config.request_headers),e.compression="best-available"===e.compression?this.compression:e.compression,(t=>{var i,r,s;const l=Dt({},t);l.timeout=l.timeout||6e4,l.url=EI(l.url,{_:(new Date).getTime().toString(),ver:Nf.LIB_VERSION,compression:l.compression});const u=null!==(i=l.transport)&&void 0!==i?i:"XHR",g=null!==(r=null===(s=lL(Mb,v=>v.transport===u))||void 0===s?void 0:s.method)&&void 0!==r?r:Mb[0].method;if(!g)throw new Error("No available transport method");g(l)})(ii(Dt({},e),{callback:t=>{var i,r,s;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null===(r=(s=this.config).on_request_error)||void 0===r||r.call(s,t)),null===(i=e.callback)||void 0===i||i.call(e,t)}}))))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){let t;const i=[],r=[],s=[];ev(e,u=>{u&&(t=u[0],Rr(t)?s.push(u):Il(u)?u.call(this):Rr(u)&&"alias"===t?i.push(u):Rr(u)&&-1!==t.indexOf("capture")&&Il(this[t])?s.push(u):r.push(u))});const l=function(u,g){ev(u,function(v){if(Rr(v[0])){let w=g;ui(v,function(I){w=w[I[0]].apply(w,I.slice(1))})}else this[v[0]].apply(this,v.slice(1))},g)};l(i,this),l(r,this),l(s,this)}_hasBootstrappedFeatureFlags(){var e,t;return(null===(e=this.config.bootstrap)||void 0===e?void 0:e.featureFlags)&&Object.keys(null===(t=this.config.bootstrap)||void 0===t?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,i){var r;if(!(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue))return void je.uninitializedWarning("posthog.capture");if(this.consent.isOptedOut())return;if(Pt(e)||!Gs(e))return void je.error("No event name provided to posthog.capture");if(!this.config.opt_out_useragent_filter&&this._is_bot())return;const s=null!=i&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null!=s&&s.isRateLimited)return void je.critical("This capture call is ignored due to client rate limiting.");this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();const l=new Date,u=(null==i?void 0:i.timestamp)||l;let g={uuid:Uf(),event:e,properties:this._calculate_event_properties(e,t||{},u)};s&&(g.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),(null==i?void 0:i.$set)&&(g.$set=null==i?void 0:i.$set);const v=this._calculate_set_once_properties(null==i?void 0:i.$set_once);v&&(g.$set_once=v),g=function L$(n,e){return function(t,i){const r=new Set;return function s(l,u){if(l!==Object(l))return i?i(l):l;if(r.has(l))return;let g;return r.add(l),Rr(l)?(g=[],ev(l,v=>{g.push(s(v))})):(g={},ui(l,(v,w)=>{r.has(v)||(g[w]=s(v))})),g}(t)}(n,t=>Gs(t)&&!Lf(e)?t.slice(0,e):t)}(g,null!=i&&i._noTruncate?null:this.config.properties_string_max_length),g.timestamp=u,Pt(null==i?void 0:i.timestamp)||(g.properties.$event_time_override_provided=!0,g.properties.$event_time_override_system_time=l);const w=Dt(Dt({},g.properties.$set),g.$set);mb(w)||this.setPersonPropertiesForFlags(w),this._internalEventEmitter.emit("eventCaptured",g);const I={method:"POST",url:null!==(r=null==i?void 0:i._url)&&void 0!==r?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:g,compression:"best-available",batchKey:null==i?void 0:i._batchKey};return!this.config.request_batching||i&&(null==i||!i._batchKey)||null!=i&&i.send_instantly?this._send_retriable_request(I):this._requestQueue.enqueue(I),g}_addCaptureHook(e){return this.on("eventCaptured",t=>e(t.event,t))}_calculate_event_properties(e,t,i){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return t;const r=this.persistence.remove_event_timer(e);let s=Dt({},t);if(s.token=this.config.token,"$snapshot"===e){const v=Dt(Dt({},this.persistence.properties()),this.sessionPersistence.properties());return s.distinct_id=v.distinct_id,(!Gs(s.distinct_id)&&!Fa(s.distinct_id)||rL(s.distinct_id))&&je.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}const l=cr.properties();if(this.sessionManager){const{sessionId:v,windowId:w}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=v,s.$window_id=w}if(this.requestRouter.region===Kg.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&("$pageview"===e||"$pageleave"===e||"$autocapture"===e)){const v=this.sessionPropsManager.getSessionProps();s=po(s,v)}if(!this.config.disable_scroll_properties){let v={};"$pageview"===e?v=this.pageViewManager.doPageView(i):"$pageleave"===e&&(v=this.pageViewManager.doPageLeave(i)),s=po(s,v)}if("$pageview"===e&&Ct&&(s.title=Ct.title),!Pt(r)){const v=i.getTime()-r;s.$duration=parseFloat((v/1e3).toFixed(3))}Qr&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),s=po({},l,this.persistence.properties(),this.sessionPersistence.properties(),s),s.$is_identified=this._isIdentified(),Rr(this.config.property_denylist)?ui(this.config.property_denylist,function(v){delete s[v]}):je.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);const u=this.config.sanitize_properties;u&&(s=u(s,e));const g=this._hasPersonProcessing();return s.$process_person_profile=g,g&&this._requirePersonProcessing("_calculate_event_properties"),s}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing())return e;let t=po({},this.persistence.get_initial_props(),e||{});const i=this.config.sanitize_properties;return i&&(t=i(t,"$set_once")),mb(t)?void 0:t}register(e,t){var i;null===(i=this.persistence)||void 0===i||i.register(e,t)}register_once(e,t,i){var r;null===(r=this.persistence)||void 0===r||r.register_once(e,t,i)}register_for_session(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.register(e)}unregister(e){var t;null===(t=this.persistence)||void 0===t||t.unregister(e)}unregister_for_session(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.unregister(e)}_register_single(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){const t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(i){return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}getEarlyAccessFeatures(e){return this.featureFlags.getEarlyAccessFeatures(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}on(e,t){return this._internalEventEmitter.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSessionId(e){var t,i;return null!==(t=null===(i=this.sessionManager)||void 0===i?void 0:i.onSessionId(e))&&void 0!==t?t:()=>{}}getSurveys(e){this.surveys.getSurveys(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}getActiveMatchingSurveys(e){this.surveys.getActiveMatchingSurveys(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}canRenderSurvey(e){this.surveys.canRenderSurvey(e)}getNextSurveyStep(e,t,i){return this.surveys.getNextSurveyStep(e,t,i)}identify(e,t,i){if(!this.__loaded||!this.persistence)return je.uninitializedWarning("posthog.identify");if(Fa(e)&&(e=e.toString(),je.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),!e)return void je.error("Unique user id has not been set in posthog.identify");if(["distinct_id","distinctid"].includes(e.toLowerCase()))return void je.critical(`The string "${e}" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.`);if(!this._requirePersonProcessing("posthog.identify"))return;const r=this.get_distinct_id();this.register({$user_id:e}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:r},""),e!==r&&e!==this.get_property(_b)&&(this.unregister(_b),this.register({distinct_id:e}));const s="anonymous"===(this.persistence.get_property(Qd)||"anonymous");e!==r&&s?(this.persistence.set_property(Qd,"identified"),this.setPersonPropertiesForFlags(t||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:i||{}}),this.featureFlags.setAnonymousDistinctId(r)):(t||i)&&this.setPersonProperties(t,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(oI))}setPersonProperties(e,t){(e||t)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:t||{}}))}group(e,t,i){if(!e||!t)return void je.error("posthog.group requires a group type and group key");if(!this._requirePersonProcessing("posthog.group"))return;const r=this.getGroups();r[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:ii(Dt({},r),{[e]:t})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===t||i||this.reloadFeatureFlags()}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,i,r,s,l;if(je.info("reset"),!this.__loaded)return je.uninitializedWarning("posthog.reset");const u=this.get_property("$device_id");this.consent.reset(),null===(t=this.persistence)||void 0===t||t.clear(),null===(i=this.sessionPersistence)||void 0===i||i.clear(),null===(r=this.surveys)||void 0===r||r.reset(),null===(s=this.persistence)||void 0===s||s.set_property(Qd,"anonymous"),null===(l=this.sessionManager)||void 0===l||l.resetSessionId();const g=this.config.get_device_id(Uf());this.register_once({distinct_id:g,$device_id:e?g:u},"")}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!==(e=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";const{sessionId:t,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0);let r=this.requestRouter.endpointFor("ui",`/project/${this.config.token}/replay/${t}`);if(null!=e&&e.withTimestamp&&i){var s;const l=null!==(s=e.timestampLookBack)&&void 0!==s?s:10;if(!i)return r;r+=`?t=${Math.max(Math.floor(((new Date).getTime()-i)/1e3)-l,0)}`}return r}alias(e,t){return e===this.get_property(cL)?(je.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(Pt(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(_b,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(je.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){const t=Dt({},this.config);var i,r,s,l;lr(e)&&(po(this.config,K2(e)),null===(i=this.persistence)||void 0===i||i.update_config(this.config,t),this.sessionPersistence="sessionStorage"===this.config.persistence?this.persistence:new B1(ii(Dt({},this.config),{persistence:"sessionStorage"})),Fr.is_supported()&&"true"===Fr.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(Nf.DEBUG=!0,je.info("set_config",{config:e,oldConfig:t,newConfig:Dt({},this.config)})),null===(r=this.sessionRecording)||void 0===r||r.startIfEnabledOrStop(),null===(s=this.autocapture)||void 0===s||s.startIfEnabled(),null===(l=this.heatmaps)||void 0===l||l.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}startSessionRecording(e){const t=Vf(e)&&e;if(t||null!=e&&e.sampling||null!=e&&e.linked_flag){var i;const l=null===(i=this.sessionManager)||void 0===i?void 0:i.checkAndGetSessionAndWindowId();var r,s;(t||null!=e&&e.sampling)&&(null===(r=this.sessionRecording)||void 0===r||r.overrideSampling(),je.info("Session recording started with sampling override for session: ",null==l?void 0:l.sessionId)),(t||null!=e&&e.linked_flag)&&(null===(s=this.sessionRecording)||void 0===s||s.overrideLinkedFlag(),je.info("Session recording started with linked_flags override"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null===(e=this.sessionRecording)||void 0===e||!e.started)}captureException(e,t){var i;const r=new Error("PostHog syntheticException"),s=Il(null===(i=pn.__PosthogExtensions__)||void 0===i?void 0:i.parseErrorAsProperties)?pn.__PosthogExtensions__.parseErrorAsProperties([e.message,void 0,void 0,void 0,e],{syntheticException:r}):Dt({$exception_level:"error",$exception_list:[{type:e.name,value:e.message,mechanism:{handled:!0,synthetic:!1}}]},t);this.exceptions.sendExceptionEvent(s)}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null===(t=this.persistence)||void 0===t?void 0:t.props[e]}getSessionProperty(e){var t;return null===(t=this.sessionPersistence)||void 0===t?void 0:t.props[e]}toString(){var e;let t=null!==(e=this.config.name)&&void 0!==e?e:uv;return t!==uv&&(t=uv+"."+t),t}_isIdentified(){var e,t;return"identified"===(null===(e=this.persistence)||void 0===e?void 0:e.get_property(Qd))||"identified"===(null===(t=this.sessionPersistence)||void 0===t?void 0:t.get_property(Qd))}_hasPersonProcessing(){var e,t,i,r;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&mb(this.getGroups())&&(null===(e=this.persistence)||void 0===e||null===(t=e.props)||void 0===t||!t[_b])&&(null===(i=this.persistence)||void 0===i||null===(r=i.props)||void 0===r||!r[aI]))}_shouldCapturePageleave(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&this.config.capture_pageview}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return"never"===this.config.person_profiles?(je.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(aI,!0),!0)}_sync_opt_out_with_persistence(){var e,t;const i=this.consent.isOptedOut(),s=this.config.disable_persistence||i&&!!this.config.opt_out_persistence_by_default;var l,u;(null===(e=this.persistence)||void 0===e?void 0:e.disabled)!==s&&(null===(l=this.persistence)||void 0===l||l.set_disabled(s)),(null===(t=this.sessionPersistence)||void 0===t?void 0:t.disabled)!==s&&(null===(u=this.sessionPersistence)||void 0===u||u.set_disabled(s))}opt_in_capturing(e){var t;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(Pt(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!==(t=null==e?void 0:e.captureEventName)&&void 0!==t?t:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}opt_out_capturing(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return Ra?H2(Ra,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){Ct&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:Ct.title},{send_instantly:!0}))}debug(e){!1===e?(null==ae||ae.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==ae||ae.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}!function(n,e){for(let t=0;t<e.length;t++)n.prototype[e[t]]=N$(n.prototype[e[t]])}(MI,["identify"]);const kI=function(){const n=Pb[uv]=new MI;return function(){function e(){e.done||(e.done=!0,W2=!1,ui(Pb,function(t){t._dom_loaded()}))}null!=Ct&&Ct.addEventListener&&("complete"===Ct.readyState?e():Ct.addEventListener("DOMContentLoaded",e,!1)),ae&&Yd(ae,"load",e,!0)}(),n}();let PI=(()=>{class n{trackEvent(t,i={}){kI.capture(t,i)}identifyUser(t,i={}){kI.identify(t,i)}setUserProperties(t){kI.people.set(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Y2=function(){return["/email-opt-in"]};let Q2=(()=>{class n{constructor(t){this.posthog=t}ngOnInit(){this.posthog.trackEvent("$pageview");const t=document.querySelector(".prev"),i=document.querySelector(".next"),r=document.querySelector(".destination-cards");null!=t&&null!=i&&null!=r&&(t.addEventListener("click",()=>{r.scrollBy({left:-300,behavior:"smooth"})}),i.addEventListener("click",()=>{r.scrollBy({left:300,behavior:"smooth"})}))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(PI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-landing-page"]],decls:157,vars:4,consts:[[1,"landing-page"],[1,"text-banner"],[1,"subtext-banner"],[1,"button-discover",3,"routerLink"],[1,"button-discover-text"],[1,"button-plan-trip",3,"routerLink"],[1,"button-plan-trip-text"],[1,"top-destinations"],[1,"search-section"],["type","text","placeholder","Search for your country here"],[1,"destination-header"],[1,"heading-title"],[1,"destination-carousel"],[1,"carousel-control","prev"],[1,"destination-cards"],[1,"destination-card"],["src","assets/sayulita_mexico.png","alt","Sayulita, Mexico"],["src","assets/bali_indonesia.png","alt","Bali, Indonesia"],["src","assets/athense_greece.png","alt","Athens, Greece"],[1,"carousel-control","next"],[1,"destination-highlight"],[1,"highlight-header"],[1,"highlight-features"],[1,"feature-card"],[1,"athens-overview"],[1,"main-content"],["src","assets/poeple.png","alt","Group of people in Athens",1,"featured-image"],[1,"description"],[1,"sidebar"],[1,"recommendations"],[1,"recommendation-item"],["src","assets/bali2.png","alt","Bali, Indonesia"],["src","assets/sayulita.png","alt","Sayulita, Mexico"],["src","assets/viena.png","alt","Vienna, Austria"],[1,"reviews"],[1,"review-item"],["src","assets/octav_popescu.png","alt","Octav Popescu"],[1,"review-text"],["src","assets/anca_georgiana.png","alt","Anca Georgiana"],["src","assets/mark.png","alt","Mark Beckam"],["src","assets/athene.png","alt","Group of people in Athens",1,"featured-image"],[1,"tags-share"],[1,"tags"],["href","#"],[1,"share"],["href","#","aria-label","Share on Facebook"],[1,"fab","fa-facebook-f"],["href","#","aria-label","Share on Twitter"],[1,"fab","fa-twitter"],["href","#","aria-label","Share on LinkedIn"],[1,"fab","fa-linkedin-in"]],template:function(t,i){1&t&&(h.TgZ(0,"div")(1,"div",0)(2,"div")(3,"div",1),h._uU(4,"Create the journey of your life."),h.qZA(),h.TgZ(5,"div",2),h._uU(6," Explore the world\u2019s best places and travel safe. "),h.qZA(),h.TgZ(7,"button",3)(8,"span",4),h._uU(9,"Discover places"),h.qZA()(),h.TgZ(10,"button",5)(11,"span",6),h._uU(12,"Plan your next trip"),h.qZA()()()(),h.TgZ(13,"section",7)(14,"div",8)(15,"p"),h._uU(16,"Have a specific country in mind?"),h.qZA(),h.TgZ(17,"div"),h._UZ(18,"input",9),h.TgZ(19,"button"),h._uU(20,"Find"),h.qZA()()(),h.TgZ(21,"div",10)(22,"h1",11),h._uU(23,"November"),h.qZA(),h.TgZ(24,"h1",11),h._uU(25,"Top destinations"),h.qZA(),h.TgZ(26,"p"),h._uU(27,"Explore the world best destinations for the current month."),h.qZA()(),h.TgZ(28,"div",12)(29,"button",13),h._uU(30,"<"),h.qZA(),h.TgZ(31,"div",14)(32,"div",15),h._UZ(33,"img",16),h.TgZ(34,"h4"),h._uU(35,"Sayulita, Mexico."),h.qZA(),h.TgZ(36,"p"),h._uU(37," Join the hippies in this Pacific coast surf town, where brightly painted design boutiques. "),h.qZA()(),h.TgZ(38,"div",15),h._UZ(39,"img",17),h.TgZ(40,"h4"),h._uU(41,"Bali, Indonesia."),h.qZA(),h.TgZ(42,"p"),h._uU(43," Bali is a beautiful tourist spot and is visited by many travelers. "),h.qZA()(),h.TgZ(44,"div",15),h._UZ(45,"img",18),h.TgZ(46,"h4"),h._uU(47,"Athens, Greece."),h.qZA(),h.TgZ(48,"p"),h._uU(49," Athens makes a brilliant and warm weekend city break, where the new youth culture is breathing life into this historical city. "),h.qZA()()(),h.TgZ(50,"button",19),h._uU(51,">"),h.qZA()()(),h.TgZ(52,"section",20)(53,"div",21)(54,"h1"),h._uU(55,"Athens, Greece"),h.qZA(),h.TgZ(56,"p"),h._uU(57,"Why is the best to travel in November?"),h.qZA()(),h.TgZ(58,"div",22)(59,"div",23)(60,"h3"),h._uU(61,"Milder Weather and Fewer Crowds"),h.qZA(),h.TgZ(62,"p"),h._uU(63," November in Athens brings mild temperatures, typically ranging between 12\xb0C to 18\xb0C (54\xb0F to 64\xb0F). "),h.qZA(),h.TgZ(64,"p"),h._uU(65," Popular sites like the Acropolis, Parthenon, and Ancient Agora are much less crowded. "),h.qZA()(),h.TgZ(66,"div",23)(67,"h3"),h._uU(68,"Lower Prices"),h.qZA(),h.TgZ(69,"p"),h._uU(70," Traveling in November falls into the off-season, meaning you'll find cheaper flights, accommodation, and even tours. "),h.qZA()(),h.TgZ(71,"div",23)(72,"h3"),h._uU(73,"Cultural Events and Festivals"),h.qZA(),h.TgZ(74,"p"),h._uU(75," Athens doesn't slow down in the fall. You might catch events like the Athens Marathon (usually held in early November) which traces the legendary route from Marathon to the city center. "),h.qZA()()()(),h.TgZ(76,"section",24)(77,"div",25),h._UZ(78,"img",26),h.TgZ(79,"div",27)(80,"p"),h._uU(81," November in Athens feels like a breath of fresh air. With temperatures hovering between 12\xb0C to 18\xb0C (54\xb0F to 64\xb0F), it\u2019s the ideal climate for exploring without breaking a sweat. The bustling streets of Plaka and Monastiraki are more peaceful, allowing you to wander through quaint alleys, browse antique shops, and enjoy a leisurely Greek coffee at an outdoor caf\xe9. You can climb the winding path to the Acropolis or explore the ruins of the Ancient Agora without jostling through throngs of tourists. "),h.qZA(),h.TgZ(82,"h2"),h._uU(83,"Exploring the Historic Sites at Your Own Pace"),h.qZA(),h.TgZ(84,"p"),h._uU(85," The iconic landmarks of Athens, like the Parthenon, Temple of Hephaestus, and the Odeon of Herodes Atticus, take on a different glow under the soft, autumnal light. In November, you can take your time marveling at these ancient wonders, often with only a handful of fellow travelers around. Imagine standing on the Acropolis, with a panoramic view of the city, soaking in the history and serenity. It\u2019s a chance to connect with the spirit of ancient Athens without the distraction of summer crowds. "),h.qZA()()(),h.TgZ(86,"div",28)(87,"div",29)(88,"h3"),h._uU(89,"Other November recommendations"),h.qZA(),h.TgZ(90,"div",30),h._UZ(91,"img",31),h.TgZ(92,"p"),h._uU(93,"Bali, Indonesia."),h.qZA()(),h.TgZ(94,"div",30),h._UZ(95,"img",32),h.TgZ(96,"p"),h._uU(97,"Sayulita, Mexico."),h.qZA()(),h.TgZ(98,"div",30),h._UZ(99,"img",33),h.TgZ(100,"p"),h._uU(101,"Vienna, Austria."),h.qZA()()(),h.TgZ(102,"div",34)(103,"h3"),h._uU(104,"Been here? Rate it!"),h.qZA(),h.TgZ(105,"div",35),h._UZ(106,"img",36),h.TgZ(107,"div",37)(108,"h4"),h._uU(109,"Octav Popescu "),h.TgZ(110,"span"),h._uU(111,"\u2605\u2605\u2605\u2605\u2605"),h.qZA()(),h.TgZ(112,"p"),h._uU(113," I\u2019ve used this website for a few trips now and it\u2019s become my go-to resource. The safe travel alerts are incredibly useful and the hidden gems section is always a delight. "),h.qZA()()(),h.TgZ(114,"div",35),h._UZ(115,"img",38),h.TgZ(116,"div",37)(117,"h4"),h._uU(118,"Anca Georgiana "),h.TgZ(119,"span"),h._uU(120,"\u2605\u2605\u2605\u2605\u2605"),h.qZA()(),h.TgZ(121,"p"),h._uU(122," This website is great for planning safe and fun journeys. The search function can be a bit clunky, but the staff is super helpful. "),h.qZA()()(),h.TgZ(123,"div",35),h._UZ(124,"img",39),h.TgZ(125,"div",37)(126,"h4"),h._uU(127,"Mark Beckam "),h.TgZ(128,"span"),h._uU(129,"\u2605\u2605\u2605\u2605\u2605"),h.qZA()(),h.TgZ(130,"p"),h._uU(131," Love this website! It helped me plan an amazing trip to Japan. The hidden gems section was so cool and the travel guides were spot-on. I felt so confident and prepared for my trip. Highly recommend! "),h.qZA()()()()()(),h.TgZ(132,"section",24)(133,"div",25),h._UZ(134,"img",40),h.TgZ(135,"div",27)(136,"p"),h._uU(137," The iconic landmarks of Athens, like the Parthenon, Temple of Hephaestus, and the Odeon of Herodes Atticus, take on a different glow under the soft, autumnal light. In November, you can take your time marveling at these ancient wonders, often with only a handful of fellow travelers around. Imagine standing on the Acropolis, with a panoramic view of the city, soaking in the history and serenity. It\u2019s a chance to connect with the spirit of ancient Athens without the distraction of summer crowds. "),h.qZA()()(),h._UZ(138,"div",28),h.qZA(),h.TgZ(139,"section",41)(140,"div",42)(141,"span"),h._uU(142,"Tags:"),h.qZA(),h.TgZ(143,"a",43),h._uU(144,"Destination"),h.qZA(),h._uU(145,", "),h.TgZ(146,"a",43),h._uU(147,"Travel"),h.qZA()(),h.TgZ(148,"div",44)(149,"span"),h._uU(150,"Share This:"),h.qZA(),h.TgZ(151,"a",45),h._UZ(152,"i",46),h.qZA(),h.TgZ(153,"a",47),h._UZ(154,"i",48),h.qZA(),h.TgZ(155,"a",49),h._UZ(156,"i",50),h.qZA()()()()),2&t&&(h.xp6(7),h.Q6J("routerLink",h.DdM(2,Y2)),h.xp6(3),h.Q6J("routerLink",h.DdM(3,Y2)))},directives:[Yr],styles:[".landing-page[_ngcontent-%COMP%]{background:url(landing_page_background.26b4c7484c3e0d05.jpg) no-repeat center center fixed;background-size:cover;height:100vh;width:100%;display:flex;justify-content:center;align-items:center;color:#fff;text-align:center}@media (max-width: 768px){.landing-page[_ngcontent-%COMP%]{background-position:center;padding:20px}.landing-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.landing-page[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.landing-page[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.9rem}}.text-banner[_ngcontent-%COMP%]{position:absolute;top:298px;left:100px;width:996px;height:213px;font-family:Poppins,sans-serif;font-weight:700;font-size:90px;line-height:110px;color:#fff;text-shadow:0px 4px 4px rgba(0,0,0,.25)}@media (max-width: 1024px){.text-banner[_ngcontent-%COMP%]{font-size:60px;line-height:75px;top:200px;left:50px;width:auto;height:auto}}@media (max-width: 768px){.text-banner[_ngcontent-%COMP%]{font-size:40px;line-height:50px;text-align:center;top:150px;left:20px;right:20px}}.subtext-banner[_ngcontent-%COMP%]{position:absolute;top:548px;left:100px;width:560px;height:93px;font-family:Poppins,sans-serif;font-weight:500;font-size:35px;line-height:36px;color:#fff;text-shadow:0px 2px 4px rgba(0,0,0,.5)}@media (max-width: 1024px){.subtext-banner[_ngcontent-%COMP%]{font-size:28px;line-height:32px;top:500px;left:50px;width:auto;height:auto;color:#fff;text-shadow:0px 2px 4px rgba(0,0,0,.5)}}@media (max-width: 768px){.subtext-banner[_ngcontent-%COMP%]{top:350px;font-size:18px;line-height:24px;left:20px;right:20px;text-align:center;color:#fff;text-shadow:0px 2px 4px rgba(0,0,0,.5)}}.button-discover[_ngcontent-%COMP%]{position:absolute;top:663px;left:100px;width:252.76px;height:71px;background-color:#000;border:none;border-radius:30px;display:flex;justify-content:center;align-items:center;cursor:pointer;outline:none}.button-discover[_ngcontent-%COMP%]:hover{background-color:#333}.button-discover-text[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;font-size:22px;line-height:33px;color:#fff;text-align:center}.button-plan-trip[_ngcontent-%COMP%]{position:absolute;top:663px;left:407px;width:252.76px;height:71px;background-color:#000;border:none;border-radius:30px;display:flex;justify-content:center;align-items:center;cursor:pointer;outline:none}.button-plan-trip[_ngcontent-%COMP%]:hover{background-color:#333}.button-plan-trip-text[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;font-size:22px;line-height:33px;color:#fff;text-align:center}@media (max-width: 768px){.button-discover[_ngcontent-%COMP%]{top:500px;left:50%;transform:translate(-50%);width:200px;height:60px}.button-plan-trip[_ngcontent-%COMP%]{top:580px;left:50%;transform:translate(-50%);width:200px;height:60px}.button-discover-text[_ngcontent-%COMP%], .button-plan-trip-text[_ngcontent-%COMP%]{font-size:16px;line-height:20px}}.top-destinations[_ngcontent-%COMP%]{padding:50px 20px;background-color:#fff;text-align:center}.search-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:15px;margin-bottom:30px}.search-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:18px;font-weight:500;line-height:36px;color:#878787;text-align:center;margin:0}.search-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 20px;font-family:Poppins,sans-serif;font-size:16px;border:1px solid #CCCCCC;border-radius:25px;width:300px;outline:none;box-shadow:0 4px 4px #0000001a}.search-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#878787;font-family:Poppins,sans-serif}.search-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:10px 20px;font-family:Poppins,sans-serif;font-size:16px;font-weight:500;border:none;border-radius:25px;cursor:pointer;box-shadow:0 4px 4px #00000040;transition:background-color .3s;z-index:1}.search-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#333}.search-button[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:10px 20px;border:none;border-radius:25px;font-family:Poppins,sans-serif;font-size:16px;cursor:pointer;transition:background-color .3s}.search-button[_ngcontent-%COMP%]:hover{background-color:#333}.destination-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:36px;font-weight:700;margin-bottom:10px}.destination-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:24px;font-weight:600;margin-bottom:10px}.destination-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:16px;color:#6c6c6c;margin-bottom:40px;margin-top:20px}.destination-carousel[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;padding:20px 0;overflow:hidden;position:relative;background-color:#fff}.carousel-control[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;font-weight:700;color:#000;cursor:pointer;transition:color .3s;z-index:1}.carousel-control[_ngcontent-%COMP%]:hover{color:#333}.destination-cards[_ngcontent-%COMP%]{display:flex;justify-content:left;gap:20px;overflow-x:auto;scroll-behavior:smooth;padding:20px 0;background-color:#fff}.destination-card[_ngcontent-%COMP%]{background:#FFF;border-radius:15px;box-shadow:0 4px 8px #0000001a;width:300px;text-align:left;font-family:Poppins,sans-serif;overflow:hidden;flex-shrink:0}.destination-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px 10px 0 0}.destination-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:15px 0 10px;padding:0 15px}.destination-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6c6c6c;margin:0;padding:0 15px 15px}@media (max-width: 768px){.search-section[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.search-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px}.destination-card[_ngcontent-%COMP%]{width:150px}}.heading-title[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;font-size:50px;line-height:70px;color:#020202;text-align:center;margin:0;padding:0}.destination-highlight[_ngcontent-%COMP%]{padding:50px 20px;text-align:center;background:url(greece.7120083badb5e01d.png) no-repeat center center fixed;height:600px}.highlight-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:700;font-size:48px;color:#fff;margin-bottom:10px}.highlight-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:18px;font-weight:500;color:#fff;margin-bottom:40px}.highlight-features[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:60px;flex-wrap:wrap}.feature-card[_ngcontent-%COMP%]{background:#FFFFFF;border-radius:15px;box-shadow:0 4px 8px #0000001a;padding:20px;width:300px;text-align:left;box-shadow:0 8px 60px #000;z-index:2}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;font-size:20px;color:#000;margin-bottom:10px;margin-top:20px}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:14px;font-weight:400;color:#6c6c6c;margin-bottom:10px}@media (max-width: 768px){.highlight-features[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:20px}.feature-card[_ngcontent-%COMP%]{width:100%;max-width:350px}.highlight-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px}.highlight-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}}.athens-overview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;padding:100px 300px;background-color:#f9f9f9}.main-content[_ngcontent-%COMP%]{flex:3;display:flex;flex-direction:column;gap:20px}.featured-image[_ngcontent-%COMP%]{width:100%;border-radius:10px;box-shadow:0 4px 10px #0000001a}.description[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;color:#333;line-height:1.6}.description[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:24px;margin:20px 0 10px}.sidebar[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:20px}.recommendations[_ngcontent-%COMP%]{background:#FFFFFF;padding:20px;border-radius:10px;box-shadow:0 4px 10px #0000001a}.recommendations[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;font-size:20px;margin-bottom:15px}.recommendation-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:15px}.recommendation-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:5px;object-fit:cover}.recommendation-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:16px;margin:0}.reviews[_ngcontent-%COMP%]{background:#FFFFFF;padding:20px;border-radius:10px;box-shadow:0 4px 10px #0000001a}.reviews[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;font-size:20px;margin-bottom:15px}.review-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;margin-bottom:20px}.review-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover}.review-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;font-size:16px;margin:0}.review-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:14px;color:#6c6c6c;margin:5px 0 0}@media (max-width: 768px){.athens-overview[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:20px;padding:20px}.main-content[_ngcontent-%COMP%]{width:100%;text-align:left}.featured-image[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto}.description[_ngcontent-%COMP%]{padding:20px}.sidebar[_ngcontent-%COMP%]{width:100%;text-align:left}.recommendations[_ngcontent-%COMP%], .reviews[_ngcontent-%COMP%]{margin-bottom:20px}}.tags-share[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:20px 0;font-family:Poppins,sans-serif;font-size:14px;color:#6c6c6c;background-color:#fff}.tags[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#333}.tags[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;transition:color .3s}.tags[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}.share[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.share[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#333}.share[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:30px;height:30px;border-radius:50%;background-color:#000;color:#fff;text-decoration:none;transition:background-color .3s}.share[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#333}.share[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}@media (max-width: 768px){.tags-share[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center;gap:10px}.tags[_ngcontent-%COMP%], .share[_ngcontent-%COMP%]{justify-content:center;width:auto}.share[_ngcontent-%COMP%]{margin-top:10px}.share[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:10px}}"]}),n})();var xe=L(5861),ws=L(4976);function dk(){return(0,Hn.e)((n,e)=>{let t,i=!1;n.subscribe((0,$n.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}var at,bc=L(2011),w4=(L(2644),L(3942)),Jg=L(6881),OI=L(4859),qf=L(1877),Fn=L(2090),E4="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wc={},hk=hk||{},nn=E4||self;function RI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ob(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fk="closure_uid_"+(1e9*Math.random()>>>0),D4=0;function I4(n,e,t){return n.call.apply(n.bind,arguments)}function S4(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function qs(n,e,t){return(qs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?I4:S4).apply(null,arguments)}function FI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Jr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var l=Array(arguments.length-2),u=2;u<arguments.length;u++)l[u-2]=arguments[u];return e.prototype[r].apply(i,l)}}function Wf(){this.s=this.s,this.o=this.o}Wf.prototype.s=!1,Wf.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function C4(n){Object.prototype.hasOwnProperty.call(n,fk)&&n[fk]||(n[fk]=++D4)}(this)},Wf.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const X2=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function pk(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function J2(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(RI(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let l=0;l<s;l++)n[r+l]=i[l]}else n.push(i)}}function Ws(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ws.prototype.h=function(){this.defaultPrevented=!0};var x4=function(){if(!nn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{nn.addEventListener("test",()=>{},e),nn.removeEventListener("test",()=>{},e)}catch(t){}return n}();function Rb(n){return/^[\s\xa0]*$/.test(n)}function NI(){var n=nn.navigator;return n&&(n=n.userAgent)?n:""}function Du(n){return-1!=NI().indexOf(n)}function gk(n){return gk[" "](n),n}gk[" "]=function(){};var _k,M4=Du("Opera"),dv=Du("Trident")||Du("MSIE"),eV=Du("Edge"),mk=eV||dv,tV=Du("Gecko")&&!(-1!=NI().toLowerCase().indexOf("webkit")&&!Du("Edge"))&&!(Du("Trident")||Du("MSIE"))&&!Du("Edge"),k4=-1!=NI().toLowerCase().indexOf("webkit")&&!Du("Edge");function nV(){var n=nn.document;return n?n.documentMode:void 0}e:{var vk="",yk=function(){var n=NI();return tV?/rv:([^\);]+)(\)|;)/.exec(n):eV?/Edge\/([\d\.]+)/.exec(n):dv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):k4?/WebKit\/(\S+)/.exec(n):M4?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(yk&&(vk=yk?yk[1]:""),dv){var bk=nV();if(null!=bk&&bk>parseFloat(vk)){_k=String(bk);break e}}_k=vk}var P4=nn.document&&dv&&(nV()||parseInt(_k,10))||void 0;function Fb(n,e){if(Ws.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(tV){e:{try{gk(e.nodeName);var r=!0;break e}catch(s){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:O4[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Fb.$.h.call(this)}}Jr(Fb,Ws);var O4={2:"touch",3:"pen",4:"mouse"};Fb.prototype.h=function(){Fb.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Nb="closure_listenable_"+(1e6*Math.random()|0),R4=0;function F4(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++R4,this.fa=this.ia=!1}function LI(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Ek(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function rV(n){const e={};for(const t in n)e[t]=n[t];return e}const sV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oV(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<sV.length;s++)t=sV[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function VI(n){this.src=n,this.g={},this.h=0}function Ck(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=X2(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(LI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Dk(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}VI.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=Dk(n,e,i,r);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new F4(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var Ik="closure_lm_"+(1e6*Math.random()|0),Sk={};function aV(n,e,t,i,r){if(i&&i.once)return cV(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)aV(n,e[s],t,i,r);return null}return t=Mk(t),n&&n[Nb]?n.O(e,t,Ob(i)?!!i.capture:!!i,r):lV(n,e,t,!1,i,r)}function lV(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var l=Ob(r)?!!r.capture:!!r,u=xk(n);if(u||(n[Ik]=u=new VI(n)),(t=u.add(e,t,i,l,s)).proxy)return t;if(i=function L4(){const e=V4;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)x4||(r=l),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(dV(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function cV(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)cV(n,e[s],t,i,r);return null}return t=Mk(t),n&&n[Nb]?n.P(e,t,Ob(i)?!!i.capture:!!i,r):lV(n,e,t,!0,i,r)}function uV(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)uV(n,e[s],t,i,r);else i=Ob(i)?!!i.capture:!!i,t=Mk(t),n&&n[Nb]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Dk(s=n.g[e],t,i,r))&&(LI(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=xk(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Dk(e,t,i,r)),(t=-1<n?e[n]:null)&&Tk(t))}function Tk(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Nb])Ck(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(dV(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=xk(e))?(Ck(t,n),0==t.h&&(t.src=null,e[Ik]=null)):LI(n)}}}function dV(n){return n in Sk?Sk[n]:Sk[n]="on"+n}function V4(n,e){if(n.fa)n=!0;else{e=new Fb(e,this);var t=n.listener,i=n.la||n.src;n.ia&&Tk(n),n=t.call(i,e)}return n}function xk(n){return(n=n[Ik])instanceof VI?n:null}var Ak="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mk(n){return"function"==typeof n?n:(n[Ak]||(n[Ak]=function(e){return n.handleEvent(e)}),n[Ak])}function es(){Wf.call(this),this.i=new VI(this),this.S=this,this.J=null}function Es(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new Ws(e,n);else if(e instanceof Ws)e.target=e.target||n;else{var r=e;oV(e=new Ws(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];r=BI(l,i,!0,e)&&r}if(r=BI(l=e.g=n,i,!0,e)&&r,r=BI(l,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=BI(l=e.g=t[s],i,!1,e)&&r}function BI(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.fa&&l.capture==t){var u=l.listener,g=l.la||l.src;l.ia&&Ck(n.i,l),r=!1!==u.call(g,i)&&r}}return r&&!i.defaultPrevented}Jr(es,Wf),es.prototype[Nb]=!0,es.prototype.removeEventListener=function(n,e,t,i){uV(this,n,e,t,i)},es.prototype.N=function(){if(es.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)LI(t[i]);delete n.g[e],n.h--}}this.J=null},es.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},es.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var kk=nn.JSON.stringify;function U4(){var n=Pk;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hV=new class B4{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new H4,n=>n.reset());class H4{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $4(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function z4(n){nn.setTimeout(()=>{throw n},0)}let Lb,Vb=!1,Pk=new class j4{constructor(){this.h=this.g=null}add(e,t){const i=hV.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},fV=()=>{const n=nn.Promise.resolve(void 0);Lb=()=>{n.then(G4)}};var G4=()=>{for(var n;n=U4();){try{n.h.call(n.g)}catch(t){z4(t)}var e=hV;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Vb=!1};function UI(n,e){es.call(this),this.h=n||1,this.g=e||nn,this.j=qs(this.qb,this),this.l=Date.now()}function Ok(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Rk(n,e,t){if("function"==typeof n)t&&(n=qs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=qs(n.handleEvent,n)}return 2147483647<Number(e)?-1:nn.setTimeout(n,e||0)}function pV(n){n.g=Rk(()=>{n.g=null,n.i&&(n.i=!1,pV(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Jr(UI,es),(at=UI.prototype).ga=!1,at.T=null,at.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Es(this,"tick"),this.ga&&(Ok(this),this.start()))}},at.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.N=function(){UI.$.N.call(this),Ok(this),delete this.g};class q4 extends Wf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pV(this)}N(){super.N(),this.g&&(nn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bb(n){Wf.call(this),this.h=n,this.g={}}Jr(Bb,Wf);var gV=[];function mV(n,e,t,i){Array.isArray(t)||(t&&(gV[0]=t.toString()),t=gV);for(var r=0;r<t.length;r++){var s=aV(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function _V(n){Ek(n.g,function(e,t){this.g.hasOwnProperty(t)&&Tk(e)},n),n.g={}}function jI(){this.g=!0}function hv(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Y4(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<r.length;l++)r[l]=""}}}return kk(t)}catch(u){return e}}(n,t)+(i?" "+i:"")})}Bb.prototype.N=function(){Bb.$.N.call(this),_V(this)},Bb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jI.prototype.Ea=function(){this.g=!1},jI.prototype.info=function(){};var em={},vV=null;function HI(){return vV=vV||new es}function yV(n){Ws.call(this,em.Ta,n)}function Ub(n){const e=HI();Es(e,new yV(e))}function bV(n,e){Ws.call(this,em.STAT_EVENT,n),this.stat=e}function vo(n){const e=HI();Es(e,new bV(e,n))}function wV(n,e){Ws.call(this,em.Ua,n),this.size=e}function jb(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return nn.setTimeout(function(){n()},e)}em.Ta="serverreachability",Jr(yV,Ws),em.STAT_EVENT="statevent",Jr(bV,Ws),em.Ua="timingevent",Jr(wV,Ws);var $I={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},EV={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Fk(){}function DV(){}Fk.prototype.h=null;var Vk,Hb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nk(){Ws.call(this,"d")}function Lk(){Ws.call(this,"c")}function zI(){}function $b(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Bb(this),this.P=Q4,this.V=new UI(n=mk?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new IV}function IV(){this.i=null,this.g="",this.h=!1}Jr(Nk,Ws),Jr(Lk,Ws),Jr(zI,Fk),zI.prototype.g=function(){return new XMLHttpRequest},zI.prototype.i=function(){return{}},Vk=new zI;var Q4=45e3,Bk={},GI={};function Uk(n,e,t){n.L=1,n.v=KI(nh(e)),n.s=t,n.S=!0,SV(n,null)}function SV(n,e){n.G=Date.now(),zb(n),n.A=nh(n.v);var t=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),NV(t.i,"t",i),n.C=0,t=n.l.J,n.h=new IV,n.g=oB(n.l,t?e:null,!n.s),0<n.O&&(n.M=new q4(qs(n.Pa,n,n.g),n.O)),mV(n.U,n.g,"readystatechange",n.nb),e=n.I?rV(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ub(),function W4(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var l="",u=s.split("&"),g=0;g<u.length;g++){var v=u[g].split("=");if(1<v.length){var w=v[0];v=v[1];var I=w.split("_");l=2<=I.length&&"type"==I[1]?l+(w+"=")+v+"&":l+(w+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function TV(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function xV(n,e,t){let r,i=!0;for(;!n.J&&n.C<t.length;){if(r=X4(n,t),r==GI){4==e&&(n.o=4,vo(14),i=!1),hv(n.j,n.m,null,"[Incomplete Response]");break}if(r==Bk){n.o=4,vo(15),hv(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}hv(n.j,n.m,r,null),jk(n,r)}TV(n)&&r!=GI&&r!=Bk&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,vo(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zk(e),e.M=!0,vo(11))):(hv(n.j,n.m,t,"[Invalid Chunked Response]"),tm(n),Gb(n))}function X4(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?GI:(t=Number(e.substring(t,i)),isNaN(t)?Bk:(i+=1)+t>e.length?GI:(e=e.slice(i,i+t),n.C=i+t,e))}function zb(n){n.Y=Date.now()+n.P,AV(n,n.P)}function AV(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=jb(qs(n.lb,n),e)}function qI(n){n.B&&(nn.clearTimeout(n.B),n.B=null)}function Gb(n){0==n.l.H||n.J||nB(n.l,n)}function tm(n){qI(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Ok(n.V),_V(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function jk(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Hk(t.i,n)))if(!n.K&&Hk(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch(v){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=jb(qs(t.ib,t),6e3));else{if(t.g){if(!(t.g.G+3e3<n.G))break e;tS(t),JI(t)}Wk(t),vo(18)}if(1>=BV(t.i)&&t.oa){try{t.oa()}catch(v){}t.oa=void 0}}else im(t,11)}else if((n.K||t.g==n)&&tS(t),!Rb(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let v=r[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const w=v[3];null!=w&&(t.ra=w,t.l.info("VER="+t.ra));const I=v[4];null!=I&&(t.Ga=I,t.l.info("SVER="+t.Ga));const M=v[5];null!=M&&"number"==typeof M&&0<M&&(t.L=i=1.5*M,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const O=n.g;if(O){const N=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(N){var s=i.i;s.g||-1==N.indexOf("spdy")&&-1==N.indexOf("quic")&&-1==N.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&($k(s,s.h),s.h=null))}if(i.F){const H=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;H&&(i.Da=H,Ii(i.I,i.F,H))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((i=t).wa=sB(i,i.J?i.pa:null,i.Y),l.K){UV(i.i,l);var u=l,g=i.L;g&&u.setTimeout(g),u.B&&(qI(u),zb(u)),i.g=l}else eB(i);0<t.j.length&&eS(t)}else"stop"!=v[0]&&"close"!=v[0]||im(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?im(t,7):qk(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}Ub()}catch(v){}}function MV(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(RI(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function eG(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(RI(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function J4(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(RI(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(at=$b.prototype).setTimeout=function(n){this.P=n},at.nb=function(n){n=n.target;const e=this.M;e&&3==Iu(n)?e.l():this.Pa(n)},at.Pa=function(n){try{if(n==this.g)e:{const w=Iu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>w)&&(3!=w||mk||this.g&&(this.h.h||this.g.ja()||ZV(this.g)))){this.J||4!=w||7==e||Ub(),qI(this);var t=this.g.da();this.ca=t;t:if(TV(this)){var i=ZV(this.g);n="";var r=i.length,s=4==Iu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tm(this),Gb(this);var l="";break t}this.h.i=new nn.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Z4(n,e,t,i,r,s,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.W,w,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,g=this.g;if((u=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rb(u)){var v=u;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,vo(12),tm(this),Gb(this);break e}hv(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jk(this,t)}this.S?(xV(this,w,l),mk&&this.i&&3==w&&(mV(this.U,this.V,"tick",this.mb),this.V.start())):(hv(this.j,this.m,l,null),jk(this,l)),4==w&&tm(this),this.i&&!this.J&&(4==w?nB(this.l,this):(this.i=!1,zb(this)))}else(function vG(n){const e={};n=(n.g&&2<=Iu(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(Rb(n[i]))continue;var t=$4(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}!function N4(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,vo(12)):(this.o=0,vo(13)),tm(this),Gb(this)}}}catch(w){}},at.mb=function(){if(this.g){var n=Iu(this.g),e=this.g.ja();this.C<e.length&&(qI(this),xV(this,n,e),this.i&&4!=n&&zb(this))}},at.cancel=function(){this.J=!0,tm(this)},at.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function K4(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ub(),vo(17)),tm(this),this.o=2,Gb(this)):AV(this,this.Y-n)};var kV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nm(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof nm){this.h=n.h,WI(this,n.j),this.s=n.s,this.g=n.g,ZI(this,n.m),this.l=n.l;var e=n.i,t=new Zb;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),PV(this,t),this.o=n.o}else n&&(e=String(n).match(kV))?(this.h=!1,WI(this,e[1]||"",!0),this.s=qb(e[2]||""),this.g=qb(e[3]||"",!0),ZI(this,e[4]),this.l=qb(e[5]||"",!0),PV(this,e[6]||"",!0),this.o=qb(e[7]||"")):(this.h=!1,this.i=new Zb(null,this.h))}function nh(n){return new nm(n)}function WI(n,e,t){n.j=t?qb(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ZI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function PV(n,e,t){e instanceof Zb?(n.i=e,function aG(n,e){e&&!n.j&&(Zf(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(RV(this,i),NV(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Wb(e,sG)),n.i=new Zb(e,n.h))}function Ii(n,e,t){n.i.set(e,t)}function KI(n){return Ii(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qb(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Wb(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,nG),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function nG(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}nm.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Wb(e,OV,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Wb(e,OV,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Wb(t,"/"==t.charAt(0)?rG:iG,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Wb(t,oG)),n.join("")};var OV=/[#\/\?@]/g,iG=/[#\?:]/g,rG=/[#\?]/g,sG=/[#\?@]/g,oG=/#/g;function Zb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Zf(n){n.g||(n.g=new Map,n.h=0,n.i&&function tG(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function RV(n,e){Zf(n),e=fv(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function FV(n,e){return Zf(n),e=fv(n,e),n.g.has(e)}function NV(n,e,t){RV(n,e),0<t.length&&(n.i=null,n.g.set(fv(n,e),pk(t)),n.h+=t.length)}function fv(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function LV(n){this.l=n||cG,n=nn.PerformanceNavigationTiming?0<(n=nn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(nn.g&&nn.g.Ka&&nn.g.Ka()&&nn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=Zb.prototype).add=function(n,e){Zf(this),this.i=null,n=fv(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){Zf(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},at.ta=function(){Zf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},at.Z=function(n){Zf(this);let e=[];if("string"==typeof n)FV(this,n)&&(e=e.concat(this.g.get(fv(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},at.set=function(n,e){return Zf(this),this.i=null,FV(this,n=fv(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),l=this.Z(i);for(i=0;i<l.length;i++){var r=s;""!==l[i]&&(r+="="+encodeURIComponent(String(l[i]))),n.push(r)}}return this.i=n.join("&")};var cG=10;function VV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function BV(n){return n.h?1:n.g?n.g.size:0}function Hk(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function $k(n,e){n.g?n.g.add(e):n.h=e}function UV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function jV(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return pk(n.i)}function dG(){this.g=new class{stringify(n){return nn.JSON.stringify(n,void 0)}parse(n){return nn.JSON.parse(n,void 0)}}}function hG(n,e,t){const i=t||"";try{MV(n,function(r,s){let l=r;Ob(r)&&(l=kk(r)),e.push(i+s+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function YI(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function Kb(n){this.l=n.fc||null,this.j=n.ob||!1}function QI(n,e){es.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=zk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}LV.prototype.cancel=function(){if(this.i=jV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Jr(Kb,Fk),Kb.prototype.g=function(){return new QI(this.l,this.j)},Kb.prototype.i=function(n){return function(){return n}}({}),Jr(QI,es);var zk=0;function HV(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Yb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Qb(n)}function Qb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=QI.prototype).open=function(n,e){if(this.readyState!=zk)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Qb(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||nn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yb(this)),this.readyState=zk},at.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Qb(this)),this.g&&(this.readyState=3,Qb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==nn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;HV(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},at.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Yb(this):Qb(this),3==this.readyState&&HV(this)}},at.Za=function(n){this.g&&(this.response=this.responseText=n,Yb(this))},at.Ya=function(n){this.g&&(this.response=n,Yb(this))},at.ka=function(){this.g&&Yb(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(QI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var pG=nn.JSON.parse;function Qi(n){es.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=$V,this.L=this.M=!1}Jr(Qi,es);var $V="",gG=/^https?$/i,mG=["POST","PUT"];function zV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,GV(n),XI(n)}function GV(n){n.F||(n.F=!0,Es(n,"complete"),Es(n,"error"))}function qV(n){if(n.h&&void 0!==hk&&(!n.C[1]||4!=Iu(n)||2!=n.da()))if(n.v&&4==Iu(n))Rk(n.La,0,n);else if(Es(n,"readystatechange"),4==Iu(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===l){var r=String(n.I).match(kV)[1]||null;!r&&nn.self&&nn.self.location&&(r=nn.self.location.protocol.slice(0,-1)),i=!gG.test(r?r.toLowerCase():"")}t=i}if(t)Es(n,"complete"),Es(n,"success");else{n.m=6;try{var s=2<Iu(n)?n.g.statusText:""}catch(u){s=""}n.j=s+" ["+n.da()+"]",GV(n)}}finally{XI(n)}}}function XI(n,e){if(n.g){WV(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Es(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function WV(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(nn.clearTimeout(n.A),n.A=null)}function Iu(n){return n.g?n.g.readyState:0}function ZV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case $V:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function KV(n){let e="";return Ek(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Gk(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=KV(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ii(n,e,t))}function Xb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function YV(n){this.Ga=0,this.j=[],this.l=new jI,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Xb("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Xb("baseRetryDelayMs",5e3,n),this.hb=Xb("retryDelaySeedMs",1e4,n),this.eb=Xb("forwardChannelMaxRetries",2,n),this.xa=Xb("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new LV(n&&n.concurrentRequestLimit),this.Ja=new dG,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function qk(n){if(QV(n),3==n.H){var e=n.W++,t=nh(n.I);if(Ii(t,"SID",n.K),Ii(t,"RID",e),Ii(t,"TYPE","terminate"),Jb(n,t),(e=new $b(n,n.l,e)).L=2,e.v=KI(nh(t)),t=!1,nn.navigator&&nn.navigator.sendBeacon)try{t=nn.navigator.sendBeacon(e.v.toString(),"")}catch(i){}!t&&nn.Image&&((new Image).src=e.v,t=!0),t||(e.g=oB(e.l,null),e.g.ha(e.v)),e.G=Date.now(),zb(e)}rB(n)}function JI(n){n.g&&(Zk(n),n.g.cancel(),n.g=null)}function QV(n){JI(n),n.u&&(nn.clearTimeout(n.u),n.u=null),tS(n),n.i.cancel(),n.m&&("number"==typeof n.m&&nn.clearTimeout(n.m),n.m=null)}function eS(n){if(!VV(n.i)&&!n.m){n.m=!0;var e=n.Na;Lb||fV(),Vb||(Lb(),Vb=!0),Pk.add(e,n),n.C=0}}function XV(n,e){var t;t=e?e.m:n.W++;const i=nh(n.I);Ii(i,"SID",n.K),Ii(i,"RID",t),Ii(i,"AID",n.V),Jb(n,i),n.o&&n.s&&Gk(i,n.o,n.s),t=new $b(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=JV(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),$k(n.i,t),Uk(t,i,e)}function Jb(n,e){n.na&&Ek(n.na,function(t,i){Ii(e,i,t)}),n.h&&MV({},function(t,i){Ii(e,i,t)})}function JV(n,e,t){t=Math.min(n.j.length,t);var i=n.h?qs(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=r[0].g,l.push("ofs="+s)):s=0:l.push("ofs="+s);let u=!0;for(let g=0;g<t;g++){let v=r[g].g;const w=r[g].map;if(v-=s,0>v)s=Math.max(0,r[g].g-100),u=!1;else try{hG(w,l,"req"+v+"_")}catch(I){i&&i(w)}}if(u){i=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function eB(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Lb||fV(),Vb||(Lb(),Vb=!0),Pk.add(e,n),n.A=0}}function Wk(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=jb(qs(n.Ma,n),iB(n,n.A)),n.A++,0))}function Zk(n){null!=n.B&&(nn.clearTimeout(n.B),n.B=null)}function tB(n){n.g=new $b(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=nh(n.wa);Ii(e,"RID","rpc"),Ii(e,"SID",n.K),Ii(e,"AID",n.V),Ii(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Ii(e,"TO",n.qa),Ii(e,"TYPE","xmlhttp"),Jb(n,e),n.o&&n.s&&Gk(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=KI(nh(e)),t.s=null,t.S=!0,SV(t,n)}function tS(n){null!=n.v&&(nn.clearTimeout(n.v),n.v=null)}function nB(n,e){var t=null;if(n.g==e){tS(n),Zk(n),n.g=null;var i=2}else{if(!Hk(n.i,e))return;t=e.F,UV(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.G;var r=n.C;Es(i=HI(),new wV(i,t)),eS(n)}else eB(n);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==i&&function yG(n,e){return!(BV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=jb(qs(n.Na,n,e),iB(n,n.C)),n.C++,0)))}(n,e)||2==i&&Wk(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:im(n,5);break;case 4:im(n,10);break;case 3:im(n,6);break;default:im(n,2)}}function iB(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function im(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=qs(n.pb,n);t||(t=new nm("//www.google.com/images/cleardot.gif"),nn.location&&"http"==nn.location.protocol||WI(t,"https"),KI(t)),function fG(n,e){const t=new jI;if(nn.Image){const i=new Image;i.onload=FI(YI,t,i,"TestLoadImage: loaded",!0,e),i.onerror=FI(YI,t,i,"TestLoadImage: error",!1,e),i.onabort=FI(YI,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=FI(YI,t,i,"TestLoadImage: timeout",!1,e),nn.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else vo(2);n.H=0,n.h&&n.h.za(e),rB(n),QV(n)}function rB(n){if(n.H=0,n.ma=[],n.h){const e=jV(n.i);(0!=e.length||0!=n.j.length)&&(J2(n.ma,e),J2(n.ma,n.j),n.i.i.length=0,pk(n.j),n.j.length=0),n.h.ya()}}function sB(n,e,t){var i=t instanceof nm?nh(t):new nm(t);if(""!=i.g)e&&(i.g=e+"."+i.g),ZI(i,i.m);else{var r=nn.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new nm(null);i&&WI(s,i),e&&(s.g=e),r&&ZI(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&Ii(i,t,e),Ii(i,"VER",n.ra),Jb(n,i),i}function oB(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qi(t&&n.Ha&&!n.va?new Kb({ob:!0}):n.va)).Oa(n.J),e}function aB(){}function nS(){if(dv&&!(10<=Number(P4)))throw Error("Environmental error: no available transport.")}function Na(n,e){es.call(this),this.g=new YV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Rb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Rb(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new pv(this)}function lB(n){Nk.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function cB(){Lk.call(this),this.status=1}function pv(n){this.g=n}function Ec(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Kk(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],l=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;l=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(l<<7&4294967295|l>>>25))+((l=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((s=(e=t+((l=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((r=s+((l=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function Qn(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}(at=Qi.prototype).Oa=function(n){this.M=n},at.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Vk.g(),this.C=function CV(n){return n.h||(n.h=n.i())}(this.u?this.u:Vk),this.g.onreadystatechange=qs(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void zV(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=nn.FormData&&n instanceof nn.FormData,!(0<=X2(mG,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{WV(this),0<this.B&&((this.L=function _G(n){return dv&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qs(this.ua,this)):this.A=Rk(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){zV(this,s)}},at.ua=function(){void 0!==hk&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Es(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Es(this,"complete"),Es(this,"abort"),XI(this))},at.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),XI(this,!0)),Qi.$.N.call(this)},at.La=function(){this.s||(this.G||this.v||this.l?qV(this):this.kb())},at.kb=function(){qV(this)},at.isActive=function(){return!!this.g},at.da=function(){try{return 2<Iu(this)?this.g.status:-1}catch(n){return-1}},at.ja=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},at.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),pG(e)}},at.Ia=function(){return this.m},at.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=YV.prototype).ra=8,at.H=1,at.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new $b(this,this.l,n);let s=this.s;if(this.U&&(s?(s=rV(s),oV(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=JV(this,r,e),Ii(t=nh(this.I),"RID",n),Ii(t,"CVER",22),this.F&&Ii(t,"X-HTTP-Session-Id",this.F),Jb(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(KV(s)))+"&"+e:this.o&&Gk(t,this.o,s)),$k(this.i,r),this.bb&&Ii(t,"TYPE","init"),this.P?(Ii(t,"$req",e),Ii(t,"SID","null"),r.aa=!0,Uk(r,t,null)):Uk(r,t,e),this.H=2}}else 3==this.H&&(n?XV(this,n):0==this.j.length||VV(this.i)||XV(this))},at.Ma=function(){if(this.u=null,tB(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=jb(qs(this.jb,this),n)}},at.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,vo(10),JI(this),tB(this))},at.ib=function(){null!=this.v&&(this.v=null,JI(this),Wk(this),vo(19))},at.pb=function(n){n?(this.l.info("Successfully pinged google.com"),vo(2)):(this.l.info("Failed to ping google.com"),vo(1))},at.isActive=function(){return!!this.h&&this.h.isActive(this)},(at=aB.prototype).Ba=function(){},at.Aa=function(){},at.za=function(){},at.ya=function(){},at.isActive=function(){return!0},at.Va=function(){},nS.prototype.g=function(n,e){return new Na(n,e)},Jr(Na,es),Na.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;vo(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=sB(n,null,n.Y),eS(n)},Na.prototype.close=function(){qk(this.g)},Na.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=kk(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&eS(e)},Na.prototype.N=function(){this.g.h=null,delete this.j,qk(this.g),delete this.g,Na.$.N.call(this)},Jr(lB,Nk),Jr(cB,Lk),Jr(pv,aB),pv.prototype.Ba=function(){Es(this.g,"a")},pv.prototype.Aa=function(n){Es(this.g,new lB(n))},pv.prototype.za=function(n){Es(this.g,new cB)},pv.prototype.ya=function(){Es(this.g,"b")},Jr(Ec,function bG(){this.blockSize=-1}),Ec.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ec.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)Kk(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){Kk(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){Kk(this,i),r=0;break}}this.h=r,this.i+=e},Ec.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var wG={};function Yk(n){return-128<=n&&128>n?function A4(n,e){var t=wG;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Qn([0|e],0>e?-1:0)}):new Qn([0|n],0>n?-1:0)}function Su(n){if(isNaN(n)||!isFinite(n))return gv;if(0>n)return Cs(Su(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=Qk;return new Qn(e,0)}var Qk=4294967296,gv=Yk(0),Xk=Yk(1),dB=Yk(16777216);function ih(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function xl(n){return-1==n.h}function Cs(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Qn(t,~n.h).add(Xk)}function iS(n,e){return n.add(Cs(e))}function rS(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ew(n,e){this.g=n,this.h=e}function sS(n,e){if(ih(e))throw Error("division by zero");if(ih(n))return new ew(gv,gv);if(xl(n))return e=sS(Cs(n),e),new ew(Cs(e.g),Cs(e.h));if(xl(e))return e=sS(n,Cs(e)),new ew(Cs(e.g),e.h);if(30<n.g.length){if(xl(n)||xl(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Xk,i=e;0>=i.X(n);)t=hB(t),i=hB(i);var r=mv(t,1),s=mv(i,1);for(i=mv(i,2),t=mv(t,2);!ih(i);){var l=s.add(i);0>=l.X(n)&&(r=r.add(t),s=l),i=mv(i,1),t=mv(t,1)}return e=iS(n,r.R(e)),new ew(r,e)}for(r=gv;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),l=(s=Su(t)).R(e);xl(l)||0<l.X(n);)l=(s=Su(t-=i)).R(e);ih(s)&&(s=Xk),r=r.add(s),n=iS(n,l)}return new ew(r,n)}function hB(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Qn(t,n.h)}function mv(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Qn(r,n.h)}(at=Qn.prototype).ea=function(){if(xl(this))return-Cs(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:Qk+i)*e,e*=Qk}return n},at.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ih(this))return"0";if(xl(this))return"-"+Cs(this).toString(n);for(var e=Su(Math.pow(n,6)),t=this,i="";;){var r=sS(t,e).g,s=((0<(t=iS(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ih(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},at.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},at.X=function(n){return xl(n=iS(this,n))?-1:ih(n)?0:1},at.abs=function(){return xl(this)?Cs(this):this},at.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),l=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=l>>>16,t[r]=(l&=65535)<<16|(s&=65535)}return new Qn(t,-2147483648&t[t.length-1]?-1:0)},at.R=function(n){if(ih(this)||ih(n))return gv;if(xl(this))return xl(n)?Cs(this).R(Cs(n)):Cs(Cs(this).R(n));if(xl(n))return Cs(this.R(Cs(n)));if(0>this.X(dB)&&0>n.X(dB))return Su(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,l=65535&this.D(i),u=n.D(r)>>>16,g=65535&n.D(r);t[2*i+2*r]+=l*g,rS(t,2*i+2*r),t[2*i+2*r+1]+=s*g,rS(t,2*i+2*r+1),t[2*i+2*r+1]+=l*u,rS(t,2*i+2*r+1),t[2*i+2*r+2]+=s*u,rS(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Qn(t,0)},at.gb=function(n){return sS(this,n).h},at.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Qn(t,this.h&n.h)},at.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Qn(t,this.h|n.h)},at.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Qn(t,this.h^n.h)},nS.prototype.createWebChannel=nS.prototype.g,Na.prototype.send=Na.prototype.u,Na.prototype.open=Na.prototype.m,Na.prototype.close=Na.prototype.close,$I.NO_ERROR=0,$I.TIMEOUT=8,$I.HTTP_ERROR=6,EV.COMPLETE="complete",DV.EventType=Hb,Hb.OPEN="a",Hb.CLOSE="b",Hb.ERROR="c",Hb.MESSAGE="d",es.prototype.listen=es.prototype.O,Qi.prototype.listenOnce=Qi.prototype.P,Qi.prototype.getLastError=Qi.prototype.Sa,Qi.prototype.getLastErrorCode=Qi.prototype.Ia,Qi.prototype.getStatus=Qi.prototype.da,Qi.prototype.getResponseJson=Qi.prototype.Wa,Qi.prototype.getResponseText=Qi.prototype.ja,Qi.prototype.send=Qi.prototype.ha,Qi.prototype.setWithCredentials=Qi.prototype.Oa,Ec.prototype.digest=Ec.prototype.l,Ec.prototype.reset=Ec.prototype.reset,Ec.prototype.update=Ec.prototype.j,Qn.prototype.add=Qn.prototype.add,Qn.prototype.multiply=Qn.prototype.R,Qn.prototype.modulo=Qn.prototype.gb,Qn.prototype.compare=Qn.prototype.X,Qn.prototype.toNumber=Qn.prototype.ea,Qn.prototype.toString=Qn.prototype.toString,Qn.prototype.getBits=Qn.prototype.D,Qn.fromNumber=Su,Qn.fromString=function uB(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Cs(uB(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Su(Math.pow(e,8)),i=gv,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),l=parseInt(n.substring(r,r+s),e);8>s?(s=Su(Math.pow(e,s)),i=i.R(s).add(Su(l))):i=(i=i.R(t)).add(Su(l))}return i};var EG=wc.createWebChannelTransport=function(){return new nS},CG=wc.getStatEventTarget=function(){return HI()},Jk=wc.ErrorCode=$I,DG=wc.EventType=EV,IG=wc.Event=em,fB=wc.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},SG=wc.FetchXmlHttpFactory=Kb,oS=wc.WebChannel=DV,TG=wc.XhrIo=Qi,xG=wc.Md5=Ec,_v=wc.Integer=Qn;const pB="@firebase/firestore";class ts{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");let vv="9.23.0";const Kf=new qf.Yd("@firebase/firestore");function eP(){return Kf.logLevel}function $e(n,...e){if(Kf.logLevel<=qf.in.DEBUG){const t=e.map(tP);Kf.debug(`Firestore (${vv}): ${n}`,...t)}}function ur(n,...e){if(Kf.logLevel<=qf.in.ERROR){const t=e.map(tP);Kf.error(`Firestore (${vv}): ${n}`,...t)}}function Al(n,...e){if(Kf.logLevel<=qf.in.WARN){const t=e.map(tP);Kf.warn(`Firestore (${vv}): ${n}`,...t)}}function tP(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function mt(n="Unexpected state"){const e=`FIRESTORE (${vv}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function At(n,e){n||mt()}function rt(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends Fn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gB{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ts.UNAUTHENTICATED))}shutdown(){}}class PG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class OG{constructor(e){this.t=e,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=v=>this.i!==r?(r=this.i,t(v)):Promise.resolve();let l=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Nr,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const v=l;e.enqueueRetryable((0,xe.Z)(function*(){yield v.promise,yield s(i.currentUser)}))},g=v=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),u()};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Nr)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(At("string"==typeof i.accessToken),new gB(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new ts(e)}}class RG{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=ts.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class FG{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new RG(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NG{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.T;return this.T=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.T=t.token,new mB(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function LG(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class _B{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=LG(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function en(n,e){return n<e?-1:n>e?1:0}function yv(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function vB(n){return n+"\0"}class Ri{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Be(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ri.fromMillis(Date.now())}static fromDate(e){return Ri.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Ri(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?en(this.nanoseconds,e.nanoseconds):en(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new Ri(0,0))}static max(){return new kt(new Ri(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tw{constructor(e,t,i){void 0===t?t=0:t>e.length&&mt(),void 0===i?i=e.length-t:i>e.length-t&&mt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===tw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tw?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),l=t.get(r);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xn extends tw{construct(e,t,i){return new xn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new xn(t)}static emptyPath(){return new xn([])}}const VG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xi extends tw{construct(e,t,i){return new Xi(e,t,i)}static isValidIdentifier(e){return VG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xi(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const u=e[r];if("\\"===u){if(r+1===e.length)throw new Be(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Be(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else"`"===u?(l=!l,r++):"."!==u||l?(i+=u,r++):(s(),r++)}if(s(),l)throw new Be(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xi(t)}static emptyPath(){return new Xi([])}}class it{constructor(e){this.path=e}static fromPath(e){return new it(xn.fromString(e))}static fromName(e){return new it(xn.fromString(e).popFirst(5))}static empty(){return new it(xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new xn(e.slice()))}}class aS{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function nP(n){return n.fields.find(e=>2===e.kind)}function rm(n){return n.fields.filter(e=>2!==e.kind)}aS.UNKNOWN_ID=-1;class lS{constructor(e,t){this.fieldPath=e,this.kind=t}}class nw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nw(0,La.min())}}function yB(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=kt.fromTimestamp(1e9===i?new Ri(t+1,0):new Ri(t,i));return new La(r,it.empty(),e)}function bB(n){return new La(n.readTime,n.key,-1)}class La{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new La(kt.min(),it.empty(),-1)}static max(){return new La(kt.max(),it.empty(),-1)}}function iP(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=it.comparator(n.documentKey,e.documentKey),0!==t?t:en(n.largestBatchId,e.largestBatchId))}const wB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Yf(n){return rP.apply(this,arguments)}function rP(){return rP=(0,xe.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==wB)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),rP.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,i)=>{t(e)})}static reject(e){return new ce((t,i)=>{i(e)})}static waitFor(e){return new ce((t,i)=>{let r=0,s=0,l=!1;e.forEach(u=>{++r,u.next(()=>{++s,l&&s===r&&t()},g=>i(g))}),l=!0,s===r&&t()})}static or(e){let t=ce.resolve(!1);for(const i of e)t=t.next(r=>r?ce.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new ce((i,r)=>{const s=e.length,l=new Array(s);let u=0;for(let g=0;g<s;g++){const v=g;t(e[v]).next(w=>{l[v]=w,++u,u===s&&i(l)},w=>r(w))}})}static doWhile(e,t){return new ce((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class cS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Nr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new iw(e,t.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=sP(i.target.error);this.v.reject(new iw(e,r))}}static open(e,t,i,r){try{return new cS(t,e.transaction(r,i))}catch(s){throw new iw(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new HG(t)}}class Cc{constructor(e,t,i){this.name=e,this.version=t,this.V=i,12.2===Cc.S((0,Fn.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),sm(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Fn.hl)())return!1;if(Cc.C())return!0;const e=(0,Fn.z$)(),t=Cc.S(e),i=0<t&&t<10,r=Cc.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(e){var t=this;return(0,xe.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{i(l.target.result)},s.onblocked=()=>{r(new iw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const u=l.target.error;r("VersionError"===u.name?new Be(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===u.name?new Be(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u):new iw(e,u))},s.onupgradeneeded=l=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=i=>t.F(i)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,xe.Z)(function*(){const l="readonly"===t;let u=0;for(;;){++u;try{s.db=yield s.$(e);const g=cS.open(s.db,e,l?"readonly":"readwrite",i),v=r(g).next(w=>(g.P(),w)).catch(w=>(g.abort(w),ce.reject(w))).toPromise();return v.catch(()=>{}),yield g.R,v}catch(g){const v=g,w="FirebaseError"!==v.name&&u<3;if($e("SimpleDb","Transaction failed with error:",v.message,"Retrying:",w),s.close(),!w)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class jG{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return sm(this.L.delete())}}class iw extends Be{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qf(n){return"IndexedDbTransactionError"===n.name}class HG{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),sm(i)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),sm(this.store.add(e))}get(e){return sm(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),sm(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),sm(this.store.count())}j(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(l,u)=>{s.push(u)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ce((s,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{s(u.target.result)}})}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new ce((r,s)=>{i.onerror=l=>{s(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}J(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,l,u)=>u.delete())}X(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.W(r,t)}Z(e){const t=this.cursor({});return new ce((i,r)=>{t.onerror=s=>{const l=sP(s.target.error);r(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(u=>{u?l.continue():i()}):i()}})}W(e,t){const i=[];return new ce((r,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void r();const g=new jG(u),v=t(u.primaryKey,u.value,g);if(v instanceof ce){const w=v.catch(I=>(g.done(),ce.reject(I)));i.push(w)}g.isDone?r():null===g.K?u.continue():u.continue(g.K)}}).next(()=>ce.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sm(n){return new ce((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=sP(i.target.error);t(r)}})}let CB=!1;function sP(n){const e=Cc.S((0,Fn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return CB||(CB=!0,setTimeout(()=>{throw i},0)),i}}return n}class $G{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,xe.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(i){Qf(i)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Yf(i)}yield t.et(6e4)}))}}class zG{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,xe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.st(i,e))})()}st(e,t){const i=new Set;let r=t,s=!0;return ce.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!i.has(l))return $e("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,r).next(u=>{r-=u,i.add(l)});s=!1})).next(()=>t-r)}it(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(r,s)).next(u=>($e("IndexBackiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u))).next(()=>l.size)}))}rt(e,t){let i=e;return t.changes.forEach((r,s)=>{const l=bB(s);iP(l,i)>0&&(i=l)}),new La(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Va=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function rw(n){return null==n}function sw(n){return 0===n&&1/n==-1/0}function DB(n){return"number"==typeof n&&Number.isInteger(n)&&!sw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Zs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IB(e)),e=GG(n.get(t),e);return IB(e)}function GG(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function IB(n){return n+"\x01\x01"}function Tu(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),xn.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&mt(),n.charAt(l+1)){case"\x01":const u=n.substring(s,l);let g;0===r.length?g=u:(r+=u,g=r,r=""),i.push(g);break;case"\x10":r+=n.substring(s,l),r+="\0";break;case"\x11":r+=n.substring(s,l+1);break;default:mt()}s=l+2}return new xn(i)}const SB=["userId","batchId"];function uS(n,e){return[n,Zs(e)]}function TB(n,e,t){return[n,Zs(e),t]}const qG={},WG=["prefixPath","collectionGroup","readTime","documentId"],ZG=["prefixPath","collectionGroup","documentId"],KG=["collectionGroup","readTime","prefixPath","documentId"],YG=["canonicalId","targetId"],QG=["targetId","path"],XG=["path","targetId"],JG=["collectionId","parent"],e6=["indexId","uid"],t6=["uid","sequenceNumber"],n6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],i6=["indexId","uid","orderedDocumentKey"],r6=["userId","collectionPath","documentId"],s6=["userId","collectionPath","largestBatchId"],o6=["userId","collectionGroup","largestBatchId"],xB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],a6=[...xB,"documentOverlays"],AB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],MB=AB,l6=[...MB,"indexConfiguration","indexState","indexEntries"];class oP extends EB{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ns(n,e){const t=rt(n);return Cc.M(t.ht,e)}function kB(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class vi{constructor(e,t){this.comparator=e,this.root=t||Ds.EMPTY}insert(e,t){return new vi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ds.BLACK,null,null))}remove(e){return new vi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dS(this.root,e,this.comparator,!1)}getReverseIterator(){return new dS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dS(this.root,e,this.comparator,!0)}}class dS{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ds{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=null!=i?i:Ds.RED,this.left=null!=r?r:Ds.EMPTY,this.right=null!=s?s:Ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new Ds(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ds.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}Ds.EMPTY=null,Ds.RED=!0,Ds.BLACK=!1,Ds.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new Ds(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Si{constructor(e){this.comparator=e,this.data=new vi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OB(this.data.getIterator())}getIteratorFrom(e){return new OB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Si)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Si(this.comparator);return t.data=e,t}}class OB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bv(n){return n.hasNext()?n.getNext():void 0}class Yo{constructor(e){this.fields=e,e.sort(Xi.comparator)}static empty(){return new Yo([])}unionWith(e){let t=new Si(Xi.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Yo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yv(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class RB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw"undefined"!=typeof DOMException&&r instanceof DOMException?new RB("Invalid base64 string: "+r):r}}(e);return new Lr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return en(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const u6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jf(n){if(At(!!n),"string"==typeof n){let e=0;const t=u6.exec(n);if(At(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ji(n.seconds),nanos:Ji(n.nanos)}}function Ji(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function rh(n){return"string"==typeof n?Lr.fromBase64String(n):Lr.fromUint8Array(n)}function hS(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fS(n){const e=n.mapValue.fields.__previous_value__;return hS(e)?fS(e):e}function ow(n){const e=Jf(n.mapValue.fields.__local_write_time__.timestampValue);return new Ri(e.seconds,e.nanos)}class d6{constructor(e,t,i,r,s,l,u,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=g,this.useFetchStreams=v}}class ep{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ep("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ep&&e.projectId===this.projectId&&e.database===this.database}}const tp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pS={nullValue:"NULL_VALUE"};function np(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hS(n)?4:VB(n)?9007199254740991:10:mt()}function xu(n,e){if(n===e)return!0;const t=np(n);if(t!==np(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ow(n).isEqual(ow(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Jf(i.timestampValue),l=Jf(r.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,rh(n.bytesValue).isEqual(rh(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Ji(i.geoPointValue.latitude)===Ji(r.geoPointValue.latitude)&&Ji(i.geoPointValue.longitude)===Ji(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ji(i.integerValue)===Ji(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Ji(i.doubleValue),l=Ji(r.doubleValue);return s===l?sw(s)===sw(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return yv(n.arrayValue.values||[],e.arrayValue.values||[],xu);case 10:return function(i,r){const s=i.mapValue.fields||{},l=r.mapValue.fields||{};if(kB(s)!==kB(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===l[u]||!xu(s[u],l[u])))return!1;return!0}(n,e);default:return mt()}var r}function aw(n,e){return void 0!==(n.values||[]).find(t=>xu(t,e))}function ip(n,e){if(n===e)return 0;const t=np(n),i=np(e);if(t!==i)return en(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return en(n.booleanValue,e.booleanValue);case 2:return function(r,s){const l=Ji(r.integerValue||r.doubleValue),u=Ji(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,e);case 3:return FB(n.timestampValue,e.timestampValue);case 4:return FB(ow(n),ow(e));case 5:return en(n.stringValue,e.stringValue);case 6:return function(r,s){const l=rh(r),u=rh(s);return l.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const l=r.split("/"),u=s.split("/");for(let g=0;g<l.length&&g<u.length;g++){const v=en(l[g],u[g]);if(0!==v)return v}return en(l.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const l=en(Ji(r.latitude),Ji(s.latitude));return 0!==l?l:en(Ji(r.longitude),Ji(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const l=r.values||[],u=s.values||[];for(let g=0;g<l.length&&g<u.length;++g){const v=ip(l[g],u[g]);if(v)return v}return en(l.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===tp.mapValue&&s===tp.mapValue)return 0;if(r===tp.mapValue)return 1;if(s===tp.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),g=s.fields||{},v=Object.keys(g);u.sort(),v.sort();for(let w=0;w<u.length&&w<v.length;++w){const I=en(u[w],v[w]);if(0!==I)return I;const M=ip(l[u[w]],g[v[w]]);if(0!==M)return M}return en(u.length,v.length)}(n.mapValue,e.mapValue);default:throw mt()}}function FB(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return en(n,e);const t=Jf(n),i=Jf(e),r=en(t.seconds,i.seconds);return 0!==r?r:en(t.nanos,i.nanos)}function wv(n){return aP(n)}function aP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Jf(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?rh(n.bytesValue).toBase64():"referenceValue"in n?it.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const l of i.values||[])s?s=!1:r+=",",r+=aP(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",l=!0;for(const u of r)l?l=!1:s+=",",s+=`${u}:${aP(i.fields[u])}`;return s+"}"}(n.mapValue):mt();var e}function om(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lP(n){return!!n&&"integerValue"in n}function lw(n){return!!n&&"arrayValue"in n}function NB(n){return!!n&&"nullValue"in n}function LB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mS(n){return!!n&&"mapValue"in n}function cw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xf(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=cw(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function VB(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function h6(n){return"nullValue"in n?pS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?om(ep.empty(),it.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:mt()}function f6(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?om(ep.empty(),it.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?tp:mt()}function BB(n,e){const t=ip(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function UB(n,e){const t=ip(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Is{constructor(e){this.value=e}static empty(){return new Is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!mS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cw(t)}setAll(e){let t=Xi.emptyPath(),i={},r=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const g=this.getFieldsMap(t);this.applyChanges(g,i,r),i={},r=[],t=u.popLast()}l?i[u.lastSegment()]=cw(l):r.push(u.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());mS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];mS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Xf(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Is(cw(this.value))}}function jB(n){const e=[];return Xf(n.fields,(t,i)=>{const r=new Xi([t]);if(mS(i)){const s=jB(i.mapValue).fields;if(0===s.length)e.push(r);else for(const l of s)e.push(r.child(l))}else e.push(r)}),new Yo(e)}class Ti{constructor(e,t,i,r,s,l,u){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Ti(e,0,kt.min(),kt.min(),kt.min(),Is.empty(),0)}static newFoundDocument(e,t,i,r){return new Ti(e,1,t,kt.min(),i,r,0)}static newNoDocument(e,t){return new Ti(e,2,t,kt.min(),kt.min(),Is.empty(),0)}static newUnknownDocument(e,t){return new Ti(e,3,t,kt.min(),kt.min(),Is.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(kt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rp{constructor(e,t){this.position=e,this.inclusive=t}}function HB(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],l=n.position[r];if(i=s.field.isKeyField()?it.comparator(it.fromName(l.referenceValue),t.key):ip(l,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function $B(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xu(n.position[t],e.position[t]))return!1;return!0}class Ev{constructor(e,t="asc"){this.field=e,this.dir=t}}function p6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class zB{}class Cn extends zB{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new g6(e,t,i):"array-contains"===t?new v6(e,i):"in"===t?new YB(e,i):"not-in"===t?new y6(e,i):"array-contains-any"===t?new b6(e,i):new Cn(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new m6(e,i):new _6(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ip(t,this.value)):null!==t&&np(this.value)===np(t)&&this.matchesComparison(ip(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Xn extends zB{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Xn(e,t)}matches(e){return Cv(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Cv(n){return"and"===n.op}function cP(n){return"or"===n.op}function uP(n){return GB(n)&&Cv(n)}function GB(n){for(const e of n.filters)if(e instanceof Xn)return!1;return!0}function dP(n){if(n instanceof Cn)return n.field.canonicalString()+n.op.toString()+wv(n.value);if(uP(n))return n.filters.map(e=>dP(e)).join(",");{const e=n.filters.map(t=>dP(t)).join(",");return`${n.op}(${e})`}}function qB(n,e){return n instanceof Cn?function(t,i){return i instanceof Cn&&t.op===i.op&&t.field.isEqual(i.field)&&xu(t.value,i.value)}(n,e):n instanceof Xn?function(t,i){return i instanceof Xn&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,s,l)=>r&&qB(s,i.filters[l]),!0)}(n,e):void mt()}function WB(n,e){const t=n.filters.concat(e);return Xn.create(t,n.op)}function ZB(n){return n instanceof Cn?function(e){return`${e.field.canonicalString()} ${e.op} ${wv(e.value)}`}(n):n instanceof Xn?function(e){return e.op.toString()+" {"+e.getFilters().map(ZB).join(" ,")+"}"}(n):"Filter"}class g6 extends Cn{constructor(e,t,i){super(e,t,i),this.key=it.fromName(i.referenceValue)}matches(e){const t=it.comparator(e.key,this.key);return this.matchesComparison(t)}}class m6 extends Cn{constructor(e,t){super(e,"in",t),this.keys=KB(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _6 extends Cn{constructor(e,t){super(e,"not-in",t),this.keys=KB(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function KB(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>it.fromName(i.referenceValue))}class v6 extends Cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lw(t)&&aw(t.arrayValue,this.value)}}class YB extends Cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&aw(this.value.arrayValue,t)}}class y6 extends Cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(aw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!aw(this.value.arrayValue,t)}}class b6 extends Cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>aw(this.value.arrayValue,i))}}class w6{constructor(e,t=null,i=[],r=[],s=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=l,this.endAt=u,this.dt=null}}function hP(n,e=null,t=[],i=[],r=null,s=null,l=null){return new w6(n,e,t,i,r,s,l)}function am(n){const e=rt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>dP(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),rw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>wv(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>wv(i)).join(",")),e.dt=t}return e.dt}function uw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!p6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$B(n.startAt,e.startAt)&&$B(n.endAt,e.endAt)}function _S(n){return it.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function vS(n,e){return n.filters.filter(t=>t instanceof Cn&&t.field.isEqual(e))}function QB(n,e,t){let i=pS,r=!0;for(const s of vS(n,e)){let l=pS,u=!0;switch(s.op){case"<":case"<=":l=h6(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,u=!1;break;case"!=":case"not-in":l=pS}BB({value:i,inclusive:r},{value:l,inclusive:u})<0&&(i=l,r=u)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];BB({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}function XB(n,e,t){let i=tp,r=!0;for(const s of vS(n,e)){let l=tp,u=!0;switch(s.op){case">=":case">":l=f6(s.value),u=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,u=!1;break;case"!=":case"not-in":l=tp}UB({value:i,inclusive:r},{value:l,inclusive:u})>0&&(i=l,r=u)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];UB({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}class sh{constructor(e,t=null,i=[],r=[],s=null,l="F",u=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=l,this.startAt=u,this.endAt=g,this.wt=null,this._t=null}}function JB(n,e,t,i,r,s,l,u){return new sh(n,e,t,i,r,s,l,u)}function Dv(n){return new sh(n)}function eU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function fP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function yS(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function pP(n){return null!==n.collectionGroup}function lm(n){const e=rt(n);if(null===e.wt){e.wt=[];const t=yS(e),i=fP(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new Ev(t)),e.wt.push(new Ev(Xi.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ev(Xi.keyField(),s))}}}return e.wt}function yo(n){const e=rt(n);if(!e._t)if("F"===e.limitType)e._t=hP(e.path,e.collectionGroup,lm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of lm(e))t.push(new Ev(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new rp(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new rp(e.startAt.position,e.startAt.inclusive):null;e._t=hP(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e._t}function gP(n,e){e.getFirstInequalityField(),yS(n);const t=n.filters.concat([e]);return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bS(n,e,t){return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dw(n,e){return uw(yo(n),yo(e))&&n.limitType===e.limitType}function tU(n){return`${am(yo(n))}|lt:${n.limitType}`}function mP(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>ZB(i)).join(", ")}]`),rw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>wv(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>wv(i)).join(",")),`Target(${t})`}(yo(n))}; limitType=${n.limitType})`}function hw(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):it.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of lm(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&function(t,i){return!(t.startAt&&!function(r,s,l){const u=HB(r,s,l);return r.inclusive?u<=0:u<0}(t.startAt,lm(t),i)||t.endAt&&!function(r,s,l){const u=HB(r,s,l);return r.inclusive?u>=0:u>0}(t.endAt,lm(t),i))}(n,e)}function nU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iU(n){return(e,t)=>{let i=!1;for(const r of lm(n)){const s=E6(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function E6(n,e,t){const i=n.field.isKeyField()?it.comparator(e.key,t.key):function(r,s,l){const u=s.data.field(r),g=l.data.field(r);return null!==u&&null!==g?ip(u,g):mt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return mt()}}class oh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xf(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return PB(this.inner)}size(){return this.innerSize}}const C6=new vi(it.comparator);function Qo(){return C6}const rU=new vi(it.comparator);function fw(...n){let e=rU;for(const t of n)e=e.insert(t.key,t);return e}function sU(n){let e=rU;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Au(){return pw()}function oU(){return pw()}function pw(){return new oh(n=>n.toString(),(n,e)=>n.isEqual(e))}const D6=new vi(it.comparator),I6=new Si(it.comparator);function cn(...n){let e=I6;for(const t of n)e=e.add(t);return e}const S6=new Si(en);function _P(){return S6}function aU(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sw(e)?"-0":e}}function lU(n){return{integerValue:""+n}}function cU(n,e){return DB(e)?lU(e):aU(n,e)}class wS{constructor(){this._=void 0}}function T6(n,e,t){return n instanceof Iv?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&hS(r)&&(r=fS(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof cm?dU(n,e):n instanceof um?hU(n,e):function(i,r){const s=uU(i,r),l=fU(s)+fU(i.gt);return lP(s)&&lP(i.gt)?lU(l):aU(i.serializer,l)}(n,e)}function x6(n,e,t){return n instanceof cm?dU(n,e):n instanceof um?hU(n,e):t}function uU(n,e){return n instanceof Sv?lP(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class Iv extends wS{}class cm extends wS{constructor(e){super(),this.elements=e}}function dU(n,e){const t=pU(e);for(const i of n.elements)t.some(r=>xu(r,i))||t.push(i);return{arrayValue:{values:t}}}class um extends wS{constructor(e){super(),this.elements=e}}function hU(n,e){let t=pU(e);for(const i of n.elements)t=t.filter(r=>!xu(r,i));return{arrayValue:{values:t}}}class Sv extends wS{constructor(e,t){super(),this.serializer=e,this.gt=t}}function fU(n){return Ji(n.integerValue||n.doubleValue)}function pU(n){return lw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class gw{constructor(e,t){this.field=e,this.transform=t}}class M6{constructor(e,t){this.version=e,this.transformResults=t}}class Fi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fi}static exists(e){return new Fi(void 0,e)}static updateTime(e){return new Fi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ES(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class CS{}function gU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new xv(n.key,Fi.none()):new Tv(n.key,n.data,Fi.none());{const t=n.data,i=Is.empty();let r=new Si(Xi.comparator);for(let s of e.fields)if(!r.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?i.delete(s):i.set(s,l),r=r.add(s)}return new ah(n.key,i,new Yo(r.toArray()),Fi.none())}}function k6(n,e,t){n instanceof Tv?function(i,r,s){const l=i.value.clone(),u=vU(i.fieldTransforms,r,s.transformResults);l.setAll(u),r.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ah?function(i,r,s){if(!ES(i.precondition,r))return void r.convertToUnknownDocument(s.version);const l=vU(i.fieldTransforms,r,s.transformResults),u=r.data;u.setAll(_U(i)),u.setAll(l),r.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function mw(n,e,t,i){return n instanceof Tv?function(r,s,l,u){if(!ES(r.precondition,s))return l;const g=r.value.clone(),v=yU(r.fieldTransforms,u,s);return g.setAll(v),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),null}(n,e,t,i):n instanceof ah?function(r,s,l,u){if(!ES(r.precondition,s))return l;const g=yU(r.fieldTransforms,u,s),v=s.data;return v.setAll(_U(r)),v.setAll(g),s.convertToFoundDocument(s.version,v).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(w=>w.field))}(n,e,t,i):(l=t,ES(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function P6(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=uU(i.transform,r||null);null!=s&&(null===t&&(t=Is.empty()),t.set(i.field,s))}return t||null}function mU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(t,i){return void 0===t&&void 0===i||!(!t||!i)&&yv(t,i,(r,s)=>function A6(n,e){return n.field.isEqual(e.field)&&function(t,i){return t instanceof cm&&i instanceof cm||t instanceof um&&i instanceof um?yv(t.elements,i.elements,xu):t instanceof Sv&&i instanceof Sv?xu(t.gt,i.gt):t instanceof Iv&&i instanceof Iv}(n.transform,e.transform)}(r,s))}(n.fieldTransforms,e.fieldTransforms)&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tv extends CS{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ah extends CS{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _U(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function vU(n,e,t){const i=new Map;At(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],l=s.transform,u=e.data.field(s.field);i.set(s.field,x6(l,u,t[r]))}return i}function yU(n,e,t){const i=new Map;for(const r of n){const s=r.transform,l=t.data.field(r.field);i.set(r.field,T6(s,l,e))}return i}class xv extends CS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vP extends CS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yP{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&k6(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=mw(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=mw(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=oU();return this.mutations.forEach(r=>{const s=e.get(r.key),l=s.overlayedDocument;let u=this.applyToLocalView(l,s.mutatedFields);u=t.has(r.key)?null:u;const g=gU(l,u);null!==g&&i.set(r.key,g),l.isValidDocument()||l.convertToNoDocument(kt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cn())}isEqual(e){return this.batchId===e.batchId&&yv(this.mutations,e.mutations,(t,i)=>mU(t,i))&&yv(this.baseMutations,e.baseMutations,(t,i)=>mU(t,i))}}class bP{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){At(e.mutations.length===i.length);let r=D6;const s=e.mutations;for(let l=0;l<s.length;l++)r=r.insert(s[l].key,i[l].version);return new bP(e,t,i,r)}}class wP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class R6{constructor(e,t){this.count=e,this.unchangedNames=t}}var br,An;function bU(n){switch(n){default:return mt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function wU(n){if(void 0===n)return ur("GRPC error has no .code"),ge.UNKNOWN;switch(n){case br.OK:return ge.OK;case br.CANCELLED:return ge.CANCELLED;case br.UNKNOWN:return ge.UNKNOWN;case br.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case br.INTERNAL:return ge.INTERNAL;case br.UNAVAILABLE:return ge.UNAVAILABLE;case br.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case br.NOT_FOUND:return ge.NOT_FOUND;case br.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case br.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case br.ABORTED:return ge.ABORTED;case br.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case br.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case br.DATA_LOSS:return ge.DATA_LOSS;default:return mt()}}(An=br||(br={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";class EP{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return DS}static getOrCreateInstance(){return null===DS&&(DS=new EP),DS}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let DS=null;function EU(){return new TextEncoder}const F6=new _v([4294967295,4294967295],0);function CU(n){const e=EU().encode(n),t=new xG;return t.update(e),new Uint8Array(t.digest())}function DU(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _v([t,i],0),new _v([r,s],0)]}class CP{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new _w(`Invalid padding: ${t}`);if(i<0)throw new _w(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new _w(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new _w(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=_v.fromNumber(this.It)}Et(e,t,i){let r=e.add(t.multiply(_v.fromNumber(i)));return 1===r.compare(F6)&&(r=new _v([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=CU(e),[i,r]=DU(t);for(let s=0;s<this.hashCount;s++){const l=this.Et(i,r,s);if(!this.At(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),l=new CP(s,r,t);return i.forEach(u=>l.insert(u)),l}insert(e){if(0===this.It)return;const t=CU(e),[i,r]=DU(t);for(let s=0;s<this.hashCount;s++){const l=this.Et(i,r,s);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class _w extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vw{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,yw.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new vw(kt.min(),r,new vi(en),Qo(),cn())}}class yw{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new yw(i,t,cn(),cn(),cn())}}class IS{constructor(e,t,i,r){this.Pt=e,this.removedTargetIds=t,this.key=i,this.bt=r}}class IU{constructor(e,t){this.targetId=e,this.Vt=t}}class SU{constructor(e,t,i=Lr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class TU{constructor(){this.St=0,this.Dt=AU(),this.Ct=Lr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=cn(),t=cn(),i=cn();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:mt()}}),new yw(this.Ct,this.xt,e,t,i)}Ft(){this.Nt=!1,this.Dt=AU()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class N6{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Qo(),this.zt=xU(),this.Wt=new vi(en)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const i=this.Zt(t);switch(e.state){case 0:this.te(t)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(t);break;case 3:this.te(t)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),i.$t(e.resumeToken));break;default:mt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((i,r)=>{this.te(r)&&t(r)})}ne(e){var t;const i=e.targetId,r=e.Vt.count,s=this.se(i);if(s){const l=s.target;if(_S(l))if(0===r){const u=new it(l.path);this.Yt(i,u,Ti.newNoDocument(u,kt.min()))}else At(1===r);else{const u=this.ie(i);if(u!==r){const g=this.re(e,u);0!==g&&(this.ee(i),this.Wt=this.Wt.insert(i,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=EP.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,w,I){var M,O,N,H,Y,he;const _e={localCacheCount:w,existenceFilterCount:I.count},Oe=I.unchangedNames;return Oe&&(_e.bloomFilter={applied:0===v,hashCount:null!==(M=null==Oe?void 0:Oe.hashCount)&&void 0!==M?M:0,bitmapLength:null!==(H=null===(N=null===(O=null==Oe?void 0:Oe.bits)||void 0===O?void 0:O.bitmap)||void 0===N?void 0:N.length)&&void 0!==H?H:0,padding:null!==(he=null===(Y=null==Oe?void 0:Oe.bits)||void 0===Y?void 0:Y.padding)&&void 0!==he?he:0}),_e}(g,u,e.Vt))}}}}re(e,t){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:l=0},hashCount:u=0}=i;let g,v;try{g=rh(s).toUint8Array()}catch(w){if(w instanceof RB)return Al("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw w}try{v=new CP(g,l,u)}catch(w){return Al(w instanceof _w?"BloomFilter error: ":"Applying bloom filter failed: ",w),1}return 0===v.It?1:r!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const l=this.Gt.ue(),u=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;t.vt(u)||(this.Yt(e,s,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((s,l)=>{const u=this.se(l);if(u){if(s.current&&_S(u.target)){const g=new it(u.target.path);null!==this.jt.get(g)||this.ae(l,g)||this.Yt(l,g,Ti.newNoDocument(g,e))}s.Mt&&(t.set(l,s.Ot()),s.Ft())}});let i=cn();this.zt.forEach((s,l)=>{let u=!0;l.forEachWhile(g=>{const v=this.se(g);return!v||"TargetPurposeLimboResolution"===v.purpose||(u=!1,!1)}),u&&(i=i.add(s))}),this.jt.forEach((s,l)=>l.setReadTime(e));const r=new vw(e,t,this.Wt,this.jt,i);return this.jt=Qo(),this.zt=xU(),this.Wt=new vi(en),r}Jt(e,t){if(!this.te(e))return;const i=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,i),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),i&&(this.jt=this.jt.insert(t,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new TU,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Si(en),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new TU),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function xU(){return new vi(it.comparator)}function AU(){return new vi(it.comparator)}const L6={asc:"ASCENDING",desc:"DESCENDING"},V6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B6={and:"AND",or:"OR"};class U6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function DP(n,e){return n.useProto3Json||rw(e)?e:{value:e}}function Av(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function j6(n,e){return Av(n,e.toTimestamp())}function dr(n){return At(!!n),kt.fromTimestamp(function(e){const t=Jf(e);return new Ri(t.seconds,t.nanos)}(n))}function IP(n,e){return function(t){return new xn(["projects",t.projectId,"databases",t.database])}(n).child("documents").child(e).canonicalString()}function kU(n){const e=xn.fromString(n);return At(UU(e)),e}function bw(n,e){return IP(n.databaseId,e.path)}function Mu(n,e){const t=kU(e);if(t.get(1)!==n.databaseId.projectId)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Be(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new it(OU(t))}function SP(n,e){return IP(n.databaseId,e)}function PU(n){const e=kU(n);return 4===e.length?xn.emptyPath():OU(e)}function ww(n){return new xn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OU(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function RU(n,e,t){return{name:bw(n,e),fields:t.value.mapValue.fields}}function FU(n,e,t){const i=Mu(n,e.name),r=dr(e.updateTime),s=e.createTime?dr(e.createTime):kt.min(),l=new Is({mapValue:{fields:e.fields}}),u=Ti.newFoundDocument(i,r,s,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Ew(n,e){let t;if(e instanceof Tv)t={update:RU(n,e.key,e.value)};else if(e instanceof xv)t={delete:bw(n,e.key)};else if(e instanceof ah)t={update:RU(n,e.key,e.data),updateMask:K6(e.fieldMask)};else{if(!(e instanceof vP))return mt();t={verify:bw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const l=s.transform;if(l instanceof Iv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof cm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof um)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Sv)return{fieldPath:s.field.canonicalString(),increment:l.gt};throw mt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:j6(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:mt()),t;var r}function TP(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Fi.updateTime(dr(r.updateTime)):void 0!==r.exists?Fi.exists(r.exists):Fi.none():Fi.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,l){let u=null;"setToServerValue"in l?(At("REQUEST_TIME"===l.setToServerValue),u=new Iv):"appendMissingElements"in l?u=new cm(l.appendMissingElements.values||[]):"removeAllFromArray"in l?u=new um(l.removeAllFromArray.values||[]):"increment"in l?u=new Sv(s,l.increment):mt();const g=Xi.fromServerFormat(l.fieldPath);return new gw(g,u)}(n,r)):[];var r;if(e.update){const r=Mu(n,e.update.name),s=new Is({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Yo((e.updateMask.fieldPaths||[]).map(v=>Xi.fromServerFormat(v)));return new ah(r,s,l,t,i)}return new Tv(r,s,t,i)}if(e.delete){const r=Mu(n,e.delete);return new xv(r,t)}if(e.verify){const r=Mu(n,e.verify);return new vP(r,t)}return mt()}function NU(n,e){return{documents:[SP(n,e.path)]}}function xP(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=SP(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=SP(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(g){if(0!==g.length)return BU(Xn.create(g,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(g){if(0!==g.length)return g.map(v=>{return{field:sp((w=v).field),direction:q6(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=DP(n,e.limit);var u,g;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function LU(n){let e=PU(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){At(1===i);const w=t.from[0];w.allDescendants?r=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=function(w){const I=VU(w);return I instanceof Xn&&uP(I)?I.getFilters():[I]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(w=>{return new Ev(Mv((I=w).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let u=null;t.limit&&(u=function(w){let I;return I="object"==typeof w?w.value:w,rw(I)?null:I}(t.limit));let g=null;var w;t.startAt&&(g=new rp((w=t.startAt).values||[],!!w.before));let v=null;return t.endAt&&(v=function(w){return new rp(w.values||[],!w.before)}(t.endAt)),JB(e,r,l,s,u,"F",g,v)}function VU(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Mv(e.unaryFilter.field);return Cn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=Mv(e.unaryFilter.field);return Cn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Mv(e.unaryFilter.field);return Cn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Mv(e.unaryFilter.field);return Cn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(n):void 0!==n.fieldFilter?function(e){return Cn.create(Mv(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):void 0!==n.compositeFilter?function(e){return Xn.create(e.compositeFilter.filters.map(t=>VU(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return mt()}}(e.compositeFilter.op))}(n):mt()}function q6(n){return L6[n]}function W6(n){return V6[n]}function Z6(n){return B6[n]}function sp(n){return{fieldPath:n.canonicalString()}}function Mv(n){return Xi.fromServerFormat(n.fieldPath)}function BU(n){return n instanceof Cn?function(e){if("=="===e.op){if(LB(e.value))return{unaryFilter:{field:sp(e.field),op:"IS_NAN"}};if(NB(e.value))return{unaryFilter:{field:sp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(LB(e.value))return{unaryFilter:{field:sp(e.field),op:"IS_NOT_NAN"}};if(NB(e.value))return{unaryFilter:{field:sp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sp(e.field),op:W6(e.op),value:e.value}}}(n):n instanceof Xn?function(e){const t=e.getFilters().map(i=>BU(i));return 1===t.length?t[0]:{compositeFilter:{op:Z6(e.op),filters:t}}}(n):mt()}function K6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class lh{constructor(e,t,i,r,s=kt.min(),l=kt.min(),u=Lr.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=g}withSequenceNumber(e){return new lh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jU{constructor(e){this.fe=e}}function HU(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:SS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:bw(r=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Av(r,s.version.toTimestamp()),createTime:Av(r,s.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:dm(e.version)};else{if(!e.isUnknownDocument())return mt();i.unknownDocument={path:t.path.toArray(),version:dm(e.version)}}var r,s;return i}function SS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hm(n){const e=new Ri(n.seconds,n.nanoseconds);return kt.fromTimestamp(e)}function fm(n,e){const t=(e.baseMutations||[]).map(s=>TP(n.fe,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(l.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>TP(n.fe,s)),r=Ri.fromMillis(e.localWriteTimeMs);return new yP(e.batchId,r,t,i)}function Cw(n){const e=hm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hm(n.lastLimboFreeSnapshotVersion):kt.min();let i;var r;return void 0!==n.query.documents?(At(1===(r=n.query).documents.length),i=yo(Dv(PU(r.documents[0])))):i=yo(LU(n.query)),new lh(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Lr.fromBase64String(n.resumeToken))}function $U(n,e){const t=dm(e.snapshotVersion),i=dm(e.lastLimboFreeSnapshotVersion);let r;r=_S(e.target)?NU(n.fe,e.target):xP(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:am(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function AP(n){const e=LU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bS(e,e.limit,"L"):e}function MP(n,e){return new wP(e.largestBatchId,TP(n.fe,e.overlayMutation))}function zU(n,e){const t=e.path.lastSegment();return[n,Zs(e.path.popLast()),t]}function GU(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:dm(i.readTime),documentKey:Zs(i.documentKey.path),largestBatchId:i.largestBatchId}}class Q6{getBundleMetadata(e,t){return qU(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:hm(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return qU(e).put({bundleId:(i=t).id,createTime:dm(dr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return WU(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:AP(r.bundledQuery),readTime:hm(r.readTime)};var r})}saveNamedQuery(e,t){return WU(e).put({name:(i=t).name,readTime:dm(dr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function qU(n){return ns(n,"bundles")}function WU(n){return ns(n,"namedQueries")}class TS{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new TS(e,t.uid||"")}getOverlay(e,t){return Dw(e).get(zU(this.userId,t)).next(i=>i?MP(this.serializer,i):null)}getOverlays(e,t){const i=Au();return ce.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,l)=>{const u=new wP(t,l);r.push(this.we(e,u))}),ce.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(l=>r.add(Zs(l.getCollectionPath())));const s=[];return r.forEach(l=>{const u=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);s.push(Dw(e).J("collectionPathOverlayIndex",u))}),ce.waitFor(s)}getOverlaysForCollection(e,t,i){const r=Au(),s=Zs(t),l=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Dw(e).j("collectionPathOverlayIndex",l).next(u=>{for(const g of u){const v=MP(this.serializer,g);r.set(v.getKey(),v)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=Au();let l;const u=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dw(e).X({index:"collectionGroupOverlayIndex",range:u},(g,v,w)=>{const I=MP(this.serializer,v);s.size()<r||I.largestBatchId===l?(s.set(I.getKey(),I),l=I.largestBatchId):w.done()}).next(()=>s)}we(e,t){return Dw(e).put(function(i,r,s){const[l,u,g]=zU(r,s.mutation.key);return{userId:r,collectionPath:u,documentId:g,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ew(i.fe,s.mutation)}}(this.serializer,this.userId,t))}}function Dw(n){return ns(n,"documentOverlays")}class pm{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ji(e.integerValue));else if("doubleValue"in e){const i=Ji(e.doubleValue);isNaN(i)?this.ye(t,13):(this.ye(t,15),sw(i)?t.pe(0):t.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie(`${i.seconds||""}`),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(rh(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?VB(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):mt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const i=e.fields||{};this.ye(t,55);for(const r of Object.keys(i))this.Te(r,t),this.me(i[r],t)}Pe(e,t){const i=e.values||[];this.ye(t,50);for(const r of i)this.me(r,t)}ve(e,t){this.ye(t,37),it.fromName(e).path.forEach(i=>{this.ye(t,60),this.be(i,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function X6(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function ZU(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=X6(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}pm.Ve=new pm;class J6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.De(i.value),i=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ne(i.value),i=t.next();this.ke()}Me(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=t.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=t.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(e){const t=this.Fe(e),i=ZU(t);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),i=ZU(t);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class e5{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class t5{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Iw{constructor(){this.je=new J6,this.ze=new e5(this.je),this.We=new t5(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class gm{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new gm(this.indexId,this.documentKey,this.arrayValue,i)}}function op(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=KU(n.arrayValue,e.arrayValue),0!==t?t:(t=KU(n.directionalValue,e.directionalValue),0!==t?t:it.comparator(n.documentKey,e.documentKey)))}function KU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class n5{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const i=t;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(e){At(e.collectionGroup===this.collectionId);const t=nP(e);if(void 0!==t&&!this.en(t))return!1;const i=rm(e);let r=new Set,s=0,l=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const u=i[s];if(!this.nn(this.Ze,u)||!this.sn(this.Ye[l++],u))return!1}++s}for(;s<i.length;++s){const u=i[s];if(l>=this.Ye.length||!this.sn(this.Ye[l++],u))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function YU(n){var e,t;if(At(n instanceof Cn||n instanceof Xn),n instanceof Cn){if(n instanceof YB){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Cn.create(n.field,"==",s)))||[];return Xn.create(r,"or")}return n}const i=n.filters.map(r=>YU(r));return Xn.create(i,n.op)}function r5(n){if(0===n.getFilters().length)return[];const e=OP(YU(n));return At(QU(e)),kP(e)||PP(e)?[e]:e.getFilters()}function kP(n){return n instanceof Cn}function PP(n){return n instanceof Xn&&uP(n)}function QU(n){return kP(n)||PP(n)||function(e){if(e instanceof Xn&&cP(e)){for(const t of e.getFilters())if(!kP(t)&&!PP(t))return!1;return!0}return!1}(n)}function OP(n){if(At(n instanceof Cn||n instanceof Xn),n instanceof Cn)return n;if(1===n.filters.length)return OP(n.filters[0]);const e=n.filters.map(i=>OP(i));let t=Xn.create(e,n.op);return t=xS(t),QU(t)?t:(At(t instanceof Xn),At(Cv(t)),At(t.filters.length>1),t.filters.reduce((i,r)=>RP(i,r)))}function RP(n,e){let t;return At(n instanceof Cn||n instanceof Xn),At(e instanceof Cn||e instanceof Xn),t=n instanceof Cn?e instanceof Cn?Xn.create([n,e],"and"):XU(n,e):e instanceof Cn?XU(e,n):function(i,r){if(At(i.filters.length>0&&r.filters.length>0),Cv(i)&&Cv(r))return WB(i,r.getFilters());const s=cP(i)?i:r,l=cP(i)?r:i,u=s.filters.map(g=>RP(g,l));return Xn.create(u,"or")}(n,e),xS(t)}function XU(n,e){if(Cv(e))return WB(e,n.getFilters());{const t=e.filters.map(i=>RP(n,i));return Xn.create(t,"or")}}function xS(n){if(At(n instanceof Cn||n instanceof Xn),n instanceof Cn)return n;const e=n.getFilters();if(1===e.length)return xS(e[0]);if(GB(n))return n;const t=e.map(r=>xS(r)),i=[];return t.forEach(r=>{r instanceof Cn?i.push(r):r instanceof Xn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:Xn.create(i,n.op)}class s5{constructor(){this.rn=new FP}addToCollectionParentIndex(e,t){return this.rn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(La.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(La.min())}updateCollectionGroup(e,t,i){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class FP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Si(xn.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Si(xn.comparator)).toArray()}}const AS=new Uint8Array(0);class o5{constructor(e,t){this.user=e,this.databaseId=t,this.on=new FP,this.un=new oh(i=>am(i),(i,r)=>uw(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:i,parent:Zs(r)};return JU(e).put(s)}return ce.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[vB(t),""],!1,!0);return JU(e).j(r).next(s=>{for(const l of s){if(l.collectionId!==t)break;i.push(Tu(l.parent))}return i})}addFieldIndex(e,t){const i=MS(e),r={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var l;delete r.indexId;const s=i.add(r);if(t.indexState){const l=Tw(e);return s.next(u=>{l.put(GU(u,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=MS(e),r=Tw(e),s=Sw(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Sw(e);let r=!0;const s=new Map;return ce.forEach(this.cn(t),l=>this.an(e,l).next(u=>{r&&(r=!!u),s.set(l,u)})).next(()=>{if(r){let l=cn();const u=[];return ce.forEach(s,(g,v)=>{var w;$e("IndexedDbIndexManager",`Using index ${w=g,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(Oe=>`${Oe.fieldPath}:${Oe.kind}`).join(",")}`} to execute ${am(t)}`);const I=function(Oe,Ge){const st=nP(Ge);if(void 0===st)return null;for(const wt of vS(Oe,st.fieldPath))switch(wt.op){case"array-contains-any":return wt.value.arrayValue.values||[];case"array-contains":return[wt.value]}return null}(v,g),M=function(Oe,Ge){const st=new Map;for(const wt of rm(Ge))for(const Ot of vS(Oe,wt.fieldPath))switch(Ot.op){case"==":case"in":st.set(wt.fieldPath.canonicalString(),Ot.value);break;case"not-in":case"!=":return st.set(wt.fieldPath.canonicalString(),Ot.value),Array.from(st.values())}return null}(v,g),O=function(Oe,Ge){const st=[];let wt=!0;for(const Ot of rm(Ge)){const Rt=0===Ot.kind?QB(Oe,Ot.fieldPath,Oe.startAt):XB(Oe,Ot.fieldPath,Oe.startAt);st.push(Rt.value),wt&&(wt=Rt.inclusive)}return new rp(st,wt)}(v,g),N=function(Oe,Ge){const st=[];let wt=!0;for(const Ot of rm(Ge)){const Rt=0===Ot.kind?XB(Oe,Ot.fieldPath,Oe.endAt):QB(Oe,Ot.fieldPath,Oe.endAt);st.push(Rt.value),wt&&(wt=Rt.inclusive)}return new rp(st,wt)}(v,g),H=this.hn(g,v,O),Y=this.hn(g,v,N),he=this.ln(g,v,M),_e=this.fn(g.indexId,I,H,O.inclusive,Y,N.inclusive,he);return ce.forEach(_e,Oe=>i.H(Oe,t.limit).next(Ge=>{Ge.forEach(st=>{const wt=it.fromSegments(st.documentKey);l.has(wt)||(l=l.add(wt),u.push(wt))})}))}).next(()=>u)}return ce.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:r5(Xn.create(e.filters,"and")).map(i=>hP(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,i,r,s,l,u){const g=(null!=t?t.length:1)*Math.max(i.length,s.length),v=g/(null!=t?t.length:1),w=[];for(let I=0;I<g;++I){const M=t?this.dn(t[I/v]):AS,O=this.wn(e,M,i[I%v],r),N=this._n(e,M,s[I%v],l),H=u.map(Y=>this.wn(e,M,Y,!0));w.push(...this.createRange(O,N,H))}return w}wn(e,t,i,r){const s=new gm(e,it.empty(),t,i);return r?s:s.Je()}_n(e,t,i,r){const s=new gm(e,it.empty(),t,i);return r?s.Je():s}an(e,t){const i=new n5(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let l=null;for(const u of s)i.tn(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l})}getIndexType(e,t){let i=2;const r=this.cn(t);return ce.forEach(r,s=>this.an(e,s).next(l=>{l?0!==i&&l.fields.length<function(u){let g=new Si(Xi.comparator),v=!1;for(const w of u.filters)for(const I of w.getFlattenedFilters())I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?v=!0:g=g.add(I.field));for(const w of u.orderBy)w.field.isKeyField()||(g=g.add(w.field));return g.size+(v?1:0)}(s)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}mn(e,t){const i=new Iw;for(const r of rm(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const l=i.He(r.kind);pm.Ve._e(s,l)}return i.Qe()}dn(e){const t=new Iw;return pm.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const i=new Iw;return pm.Ve._e(om(this.databaseId,t),i.He(function(r){const s=rm(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.Qe()}ln(e,t,i){if(null===i)return[];let r=[];r.push(new Iw);let s=0;for(const l of rm(e)){const u=i[s++];for(const g of r)if(this.yn(t,l.fieldPath)&&lw(u))r=this.pn(r,l,u);else{const v=g.He(l.kind);pm.Ve._e(u,v)}}return this.In(r)}hn(e,t,i){return this.ln(e,t,i.position)}In(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Qe();return t}pn(e,t,i){const r=[...e],s=[];for(const l of i.arrayValue.values||[])for(const u of r){const g=new Iw;g.seed(u.Qe()),pm.Ve._e(l,g.He(t.kind)),s.push(g)}return s}yn(e,t){return!!e.filters.find(i=>i instanceof Cn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=MS(e),r=Tw(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next(s=>{const l=[];return ce.forEach(s,u=>r.get([u.indexId,this.uid]).next(g=>{l.push(function(v,w){const I=w?new nw(w.sequenceNumber,new La(hm(w.readTime),new it(Tu(w.documentKey)),w.largestBatchId)):nw.empty(),M=v.fields.map(([O,N])=>new lS(Xi.fromServerFormat(O),N));return new aS(v.indexId,v.collectionGroup,M,I)}(u,g))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:en(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=MS(e),s=Tw(e);return this.Tn(e).next(l=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(u=>ce.forEach(u,g=>s.put(GU(g.indexId,this.user,l,i)))))}updateIndexEntries(e,t){const i=new Map;return ce.forEach(t,(r,s)=>{const l=i.get(r.collectionGroup);return(l?ce.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next(u=>(i.set(r.collectionGroup,u),ce.forEach(u,g=>this.En(e,r,g).next(v=>{const w=this.An(s,g);return v.isEqual(w)?ce.resolve():this.vn(e,s,g,v,w)}))))})}Rn(e,t,i,r){return Sw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,i,r){return Sw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,t.key),t.key.path.toArray()])}En(e,t,i){const r=Sw(e);let s=new Si(op);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,t)])},(l,u)=>{s=s.add(new gm(i.indexId,t,u.arrayValue,u.directionalValue))}).next(()=>s)}An(e,t){let i=new Si(op);const r=this.mn(t,e);if(null==r)return i;const s=nP(t);if(null!=s){const l=e.data.field(s.fieldPath);if(lw(l))for(const u of l.arrayValue.values||[])i=i.add(new gm(t.indexId,e.key,this.dn(u),r))}else i=i.add(new gm(t.indexId,e.key,AS,r));return i}vn(e,t,i,r,s){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(u,g,v,w,I){const M=u.getIterator(),O=g.getIterator();let N=bv(M),H=bv(O);for(;N||H;){let Y=!1,he=!1;if(N&&H){const _e=v(N,H);_e<0?he=!0:_e>0&&(Y=!0)}else null!=N?he=!0:Y=!0;Y?(w(H),H=bv(O)):he?(I(N),N=bv(M)):(N=bv(M),H=bv(O))}}(r,s,op,u=>{l.push(this.Rn(e,t,i,u))},u=>{l.push(this.Pn(e,t,i,u))}),ce.waitFor(l)}Tn(e){let t=1;return Tw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((l,u)=>op(l,u)).filter((l,u,g)=>!u||0!==op(l,g[u-1]));const r=[];r.push(e);for(const l of i){const u=op(l,e),g=op(l,t);if(0===u)r[0]=e.Je();else if(u>0&&g<0)r.push(l),r.push(l.Je());else if(g>0)break}r.push(t);const s=[];for(let l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];s.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,AS,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,AS,[]]))}return s}bn(e,t){return op(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ej)}getMinOffset(e,t){return ce.mapArray(this.cn(t),i=>this.an(e,i).next(r=>r||mt())).next(ej)}}function JU(n){return ns(n,"collectionParents")}function Sw(n){return ns(n,"indexEntries")}function MS(n){return ns(n,"indexConfiguration")}function Tw(n){return ns(n,"indexState")}function ej(n){At(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;iP(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new La(e.readTime,e.documentKey,t)}const tj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ks{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Ks(e,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nj(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let u=0;const g=i.X({range:l},(w,I,M)=>(u++,M.delete()));s.push(g.next(()=>{At(1===u)}));const v=[];for(const w of t.mutations){const I=TB(e,w.key.path,t.batchId);s.push(r.delete(I)),v.push(w.key)}return ce.waitFor(s).next(()=>v)}function kS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw mt();e=n.noDocument}return JSON.stringify(e).length}Ks.DEFAULT_COLLECTION_PERCENTILE=10,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ks.DEFAULT=new Ks(41943040,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ks.DISABLED=new Ks(-1,0,0);class PS{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(e,t,i,r){At(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new PS(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ap(e).X({index:"userMutationsIndex",range:i},(r,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=kv(e),l=ap(e);return l.add({}).next(u=>{At("number"==typeof u);const g=new yP(u,t,i,r),v=function(M,O,N){const H=N.baseMutations.map(he=>Ew(M.fe,he)),Y=N.mutations.map(he=>Ew(M.fe,he));return{userId:O,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:H,mutations:Y}}(this.serializer,this.userId,g),w=[];let I=new Si((M,O)=>en(M.canonicalString(),O.canonicalString()));for(const M of r){const O=TB(this.userId,M.key.path,u);I=I.add(M.key.path.popLast()),w.push(l.put(v)),w.push(s.put(O,qG))}return I.forEach(M=>{w.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.Vn[u]=g.keys()}),ce.waitFor(w).next(()=>g)})}lookupMutationBatch(e,t){return ap(e).get(t).next(i=>i?(At(i.userId===this.userId),fm(this.serializer,i)):null)}Sn(e,t){return this.Vn[t]?ce.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Vn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ap(e).X({index:"userMutationsIndex",range:r},(l,u,g)=>{u.userId===this.userId&&(At(u.batchId>=i),s=fm(this.serializer,u)),g.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ap(e).X({index:"userMutationsIndex",range:t,reverse:!0},(r,s,l)=>{i=s.batchId,l.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ap(e).j("userMutationsIndex",t).next(i=>i.map(r=>fm(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=uS(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return kv(e).X({range:r},(l,u,g)=>{const[v,w,I]=l,M=Tu(w);if(v===this.userId&&t.path.isEqual(M))return ap(e).get(I).next(O=>{if(!O)throw mt();At(O.userId===this.userId),s.push(fm(this.serializer,O))});g.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Si(en);const r=[];return t.forEach(s=>{const l=uS(this.userId,s.path),u=IDBKeyRange.lowerBound(l),g=kv(e).X({range:u},(v,w,I)=>{const[M,O,N]=v,H=Tu(O);M===this.userId&&s.path.isEqual(H)?i=i.add(N):I.done()});r.push(g)}),ce.waitFor(r).next(()=>this.Dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=uS(this.userId,i),l=IDBKeyRange.lowerBound(s);let u=new Si(en);return kv(e).X({range:l},(g,v,w)=>{const[I,M,O]=g,N=Tu(M);I===this.userId&&i.isPrefixOf(N)?N.length===r&&(u=u.add(O)):w.done()}).next(()=>this.Dn(e,u))}Dn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(ap(e).get(s).next(l=>{if(null===l)throw mt();At(l.userId===this.userId),i.push(fm(this.serializer,l))}))}),ce.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return nj(e.ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ce.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return kv(e).X({range:i},(s,l,u)=>{if(s[0]===this.userId){const g=Tu(s[1]);r.push(g)}else u.done()}).next(()=>{At(0===r.length)})})}containsKey(e,t){return ij(e,this.userId,t)}xn(e){return rj(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ij(n,e,t){const i=uS(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let l=!1;return kv(n).X({range:s,Y:!0},(u,g,v)=>{const[w,I,M]=u;w===e&&I===r&&(l=!0),v.done()}).next(()=>l)}function ap(n){return ns(n,"mutations")}function kv(n){return ns(n,"documentMutations")}function rj(n){return ns(n,"mutationQueues")}class mm{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new mm(0)}static Mn(){return new mm(-1)}}class a5{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const i=new mm(t.highestTargetId);return t.highestTargetId=i.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>kt.fromTimestamp(new Ri(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(i=>(i.targetCount+=1,this.Bn(t,i),this.On(e,i))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Pv(e).delete(t.targetId)).next(()=>this.$n(e)).next(i=>(At(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return Pv(e).X((l,u)=>{const g=Cw(u);g.sequenceNumber<=t&&null===i.get(g.targetId)&&(r++,s.push(this.removeTargetData(e,g)))}).next(()=>ce.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Pv(e).X((i,r)=>{const s=Cw(r);t(s)})}$n(e){return sj(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}On(e,t){return sj(e).put("targetGlobalKey",t)}Fn(e,t){return Pv(e).put($U(this.serializer,t))}Bn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const i=am(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Pv(e).X({range:r,index:"queryTargetsIndex"},(l,u,g)=>{const v=Cw(u);uw(t,v.target)&&(s=v,g.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=lp(e);return t.forEach(l=>{const u=Zs(l.path);r.push(s.put({targetId:i,path:u})),r.push(this.referenceDelegate.addReference(e,i,l))}),ce.waitFor(r)}removeMatchingKeys(e,t,i){const r=lp(e);return ce.forEach(t,s=>{const l=Zs(s.path);return ce.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=lp(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=lp(e);let s=cn();return r.X({range:i,Y:!0},(l,u,g)=>{const v=Tu(l[1]),w=new it(v);s=s.add(w)}).next(()=>s)}containsKey(e,t){const i=Zs(t.path),r=IDBKeyRange.bound([i],[vB(i)],!1,!0);let s=0;return lp(e).X({index:"documentTargetsIndex",Y:!0,range:r},([l,u],g,v)=>{0!==l&&(s++,v.done())}).next(()=>s>0)}le(e,t){return Pv(e).get(t).next(i=>i?Cw(i):null)}}function Pv(n){return ns(n,"targets")}function sj(n){return ns(n,"targetGlobal")}function lp(n){return ns(n,"targetDocuments")}function oj([n,e],[t,i]){const r=en(n,t);return 0===r?en(e,i):r}class l5{constructor(e){this.Ln=e,this.buffer=new Si(oj),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();oj(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aj{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,xe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Qf(i)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Yf(i)}yield t.Qn(3e5)}))}}class c5{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Va.ct);const i=new l5(t);return this.jn.forEachTarget(e,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(e,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(tj)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tj):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let i,r,s,l,u,g,v;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),r=this.params.maximumSequenceNumbersToCollect):r=I,l=Date.now(),this.nthSequenceNumber(e,r))).next(I=>(i=I,u=Date.now(),this.removeTargets(e,i,t))).next(I=>(s=I,g=Date.now(),this.removeOrphanedDocuments(e,i))).next(I=>(v=Date.now(),eP()<=qf.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-w}ms\n\tDetermined least recently used ${r} in `+(u-l)+`ms\n\tRemoved ${s} targets in `+(g-u)+`ms\n\tRemoved ${I} documents in `+(v-g)+`ms\nTotal Duration: ${v-w}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:I})))}}class u5{constructor(e,t){this.db=e,this.garbageCollector=function lj(n,e){return new c5(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Jn(e){let t=0;return this.Wn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(i,r)=>t(r))}addReference(e,t,i){return OS(e,i)}removeReference(e,t,i){return OS(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return OS(e,t)}Xn(e,t){return function(i,r){let s=!1;return rj(i).Z(l=>ij(i,l,r).next(u=>(u&&(s=!0),ce.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(l,u)=>{if(u<=t){const g=this.Xn(e,l).next(v=>{if(!v)return s++,i.getEntry(e,l).next(()=>(i.removeEntry(l,kt.min()),lp(e).delete([0,Zs(l.path)])))});r.push(g)}}).next(()=>ce.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return OS(e,t)}Yn(e,t){const i=lp(e);let r,s=Va.ct;return i.X({index:"documentTargetsIndex"},([l,u],{path:g,sequenceNumber:v})=>{0===l?(s!==Va.ct&&t(new it(Tu(r)),s),s=v,r=g):s=Va.ct}).next(()=>{s!==Va.ct&&t(new it(Tu(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function OS(n,e){return lp(n).put(function(t,i){return{targetId:0,path:Zs(t.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}class cj{constructor(){this.changes=new oh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?ce.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class d5{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return _m(e).put(i)}removeEntry(e,t,i){return _m(e).delete(function(r,s){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],SS(s),l[l.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Zn(e,i)))}getEntry(e,t){let i=Ti.newInvalidDocument(t);return _m(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(xw(t))},(r,s)=>{i=this.ts(t,s)}).next(()=>i)}es(e,t){let i={size:0,document:Ti.newInvalidDocument(t)};return _m(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(xw(t))},(r,s)=>{i={document:this.ts(t,s),size:kS(s)}}).next(()=>i)}getEntries(e,t){let i=Qo();return this.ns(e,t,(r,s)=>{const l=this.ts(r,s);i=i.insert(r,l)}).next(()=>i)}ss(e,t){let i=Qo(),r=new vi(it.comparator);return this.ns(e,t,(s,l)=>{const u=this.ts(s,l);i=i.insert(s,u),r=r.insert(s,kS(l))}).next(()=>({documents:i,rs:r}))}ns(e,t,i){if(t.isEmpty())return ce.resolve();let r=new Si(fj);t.forEach(g=>r=r.add(g));const s=IDBKeyRange.bound(xw(r.first()),xw(r.last())),l=r.getIterator();let u=l.getNext();return _m(e).X({index:"documentKeyIndex",range:s},(g,v,w)=>{const I=it.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;u&&fj(u,I)<0;)i(u,null),u=l.getNext();u&&u.isEqual(I)&&(i(u,v),u=l.hasNext()?l.getNext():null),u?w.G(xw(u)):w.done()}).next(()=>{for(;u;)i(u,null),u=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,i,r){const s=t.path,l=[s.popLast().toArray(),s.lastSegment(),SS(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _m(e).j(IDBKeyRange.bound(l,u,!0)).next(g=>{let v=Qo();for(const w of g){const I=this.ts(it.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);I.isFoundDocument()&&(hw(t,I)||r.has(I.key))&&(v=v.insert(I.key,I))}return v})}getAllFromCollectionGroup(e,t,i,r){let s=Qo();const l=hj(t,i),u=hj(t,La.max());return _m(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,u,!0)},(g,v,w)=>{const I=this.ts(it.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);s=s.insert(I.key,I),s.size===r&&w.done()}).next(()=>s)}newChangeBuffer(e){return new h5(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dj(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}Zn(e,t){return dj(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const i=function Y6(n,e){let t;if(e.document)t=FU(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=it.fromSegments(e.noDocument.path),r=hm(e.noDocument.readTime);t=Ti.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return mt();{const i=it.fromSegments(e.unknownDocument.path),r=hm(e.unknownDocument.version);t=Ti.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Ri(i[0],i[1]);return kt.fromTimestamp(r)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(kt.min()))return i}return Ti.newInvalidDocument(e)}}function uj(n){return new d5(n)}class h5 extends cj{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new oh(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new Si((s,l)=>en(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const u=this.us.get(s);if(t.push(this.os.removeEntry(e,s,u.readTime)),l.isValidDocument()){const g=HU(this.os.serializer,l);r=r.add(s.path.popLast()),i+=kS(g)-u.size,t.push(this.os.addEntry(e,s,g))}else if(i-=u.size,this.trackRemovals){const g=HU(this.os.serializer,l.convertToNoDocument(kt.min()));t.push(this.os.addEntry(e,s,g))}}),r.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,i)),ce.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(i=>(this.us.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:i,rs:r})=>(r.forEach((s,l)=>{this.us.set(s,{size:l,readTime:i.get(s).readTime})}),i))}}function dj(n){return ns(n,"remoteDocumentGlobal")}function _m(n){return ns(n,"remoteDocumentsV14")}function xw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hj(n,e){const t=e.documentKey.path.toArray();return[n,SS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fj(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=en(t[s],i[s]),r)return r;return r=en(t.length,i.length),r||(r=en(t[t.length-2],i[i.length-2]),r||en(t[t.length-1],i[i.length-1]))}class f5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pj{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&mw(i.mutation,r,Yo.empty(),Ri.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,cn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=cn()){const r=Au();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let l=fw();return s.forEach((u,g)=>{l=l.insert(u,g.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=Au();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,cn()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,i,r){let s=Qo();const l=pw(),u=pw();return t.forEach((g,v)=>{const w=i.get(v.key);r.has(v.key)&&(void 0===w||w.mutation instanceof ah)?s=s.insert(v.key,v):void 0!==w?(l.set(v.key,w.mutation.getFieldMask()),mw(w.mutation,v,w.mutation.getFieldMask(),Ri.now())):l.set(v.key,Yo.empty())}),this.recalculateAndSaveOverlays(e,s).next(g=>(g.forEach((v,w)=>l.set(v,w)),t.forEach((v,w)=>{var I;return u.set(v,new f5(w,null!==(I=l.get(v))&&void 0!==I?I:null))}),u))}recalculateAndSaveOverlays(e,t){const i=pw();let r=new vi((l,u)=>l-u),s=cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(g=>{const v=t.get(g);if(null===v)return;let w=i.get(g)||Yo.empty();w=u.applyToLocalView(v,w),i.set(g,w);const I=(r.get(u.batchId)||cn()).add(g);r=r.insert(u.batchId,I)})}).next(()=>{const l=[],u=r.getReverseIterator();for(;u.hasNext();){const g=u.getNext(),v=g.key,w=g.value,I=oU();w.forEach(M=>{if(!s.has(M)){const O=gU(t.get(M),i.get(M));null!==O&&I.set(M,O),s=s.add(M)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,I))}return ce.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return it.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):pP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const l=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):ce.resolve(Au());let u=-1,g=s;return l.next(v=>ce.forEach(v,(w,I)=>(u<I.largestBatchId&&(u=I.largestBatchId),s.get(w)?ce.resolve():this.remoteDocumentCache.getEntry(e,w).next(M=>{g=g.insert(w,M)}))).next(()=>this.populateOverlays(e,v,s)).next(()=>this.computeViews(e,g,v,cn())).next(w=>({batchId:u,changes:sU(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new it(t)).next(i=>{let r=fw();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=fw();return this.indexManager.getCollectionParents(e,r).next(l=>ce.forEach(l,u=>{const g=(v=t,w=u.child(r),new sh(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,w;return this.getDocumentsMatchingCollectionQuery(e,g,i).next(v=>{v.forEach((w,I)=>{s=s.insert(w,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(s=>{r.forEach((u,g)=>{const v=g.getKey();null===s.get(v)&&(s=s.insert(v,Ti.newInvalidDocument(v)))});let l=fw();return s.forEach((u,g)=>{const v=r.get(u);void 0!==v&&mw(v.mutation,g,Yo.empty(),Ri.now()),hw(t,g)&&(l=l.insert(u,g))}),l})}}class p5{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ce.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var i;return this.cs.set(t.id,{id:(i=t).id,version:i.version,createTime:dr(i.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(i=t).name,query:AP(i.bundledQuery),readTime:dr(i.readTime)}),ce.resolve();var i}}class g5{constructor(){this.overlays=new vi(it.comparator),this.ls=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Au();return ce.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.we(e,t,s)}),ce.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),ce.resolve()}getOverlaysForCollection(e,t,i){const r=Au(),s=t.length+1,l=new it(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const g=u.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===s&&g.largestBatchId>i&&r.set(g.getKey(),g)}return ce.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new vi((v,w)=>v-w);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let w=s.get(v.largestBatchId);null===w&&(w=Au(),s=s.insert(v.largestBatchId,w)),w.set(v.getKey(),v)}}const u=Au(),g=s.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,w)=>u.set(v,w)),!(u.size()>=r)););return ce.resolve(u)}we(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new wP(t,i));let s=this.ls.get(t);void 0===s&&(s=cn(),this.ls.set(t,s)),this.ls.set(t,s.add(i.key))}}class NP{constructor(){this.fs=new Si(is.ds),this.ws=new Si(is._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const i=new is(e,t);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ys(new is(e,t))}ps(e,t){e.forEach(i=>this.removeReference(i,t))}Is(e){const t=new it(new xn([])),i=new is(t,e),r=new is(t,e+1),s=[];return this.ws.forEachInRange([i,r],l=>{this.ys(l),s.push(l.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new it(new xn([])),i=new is(t,e),r=new is(t,e+1);let s=cn();return this.ws.forEachInRange([i,r],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new is(e,0),i=this.fs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class is{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return it.comparator(e.key,t.key)||en(e.As,t.As)}static _s(e,t){return en(e.As,t.As)||it.comparator(e.key,t.key)}}class m5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Si(is.ds)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.vs;this.vs++;const l=new yP(s,t,i,r);this.mutationQueue.push(l);for(const u of r)this.Rs=this.Rs.add(new is(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ce.resolve(l)}lookupMutationBatch(e,t){return ce.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.bs(t+1),s=r<0?0:r;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new is(t,0),r=new is(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],l=>{const u=this.Ps(l.As);s.push(u)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Si(en);return t.forEach(r=>{const s=new is(r,0),l=new is(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,l],u=>{i=i.add(u.As)})}),ce.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;it.isDocumentKey(s)||(s=s.child(""));const l=new is(new it(s),0);let u=new Si(en);return this.Rs.forEachWhile(g=>{const v=g.key.path;return!!i.isPrefixOf(v)&&(v.length===r&&(u=u.add(g.As)),!0)},l),ce.resolve(this.Vs(u))}Vs(e){const t=[];return e.forEach(i=>{const r=this.Ps(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){At(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return ce.forEach(t.mutations,r=>{const s=new is(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,t){const i=new is(t,0),r=this.Rs.firstAfterOrEqual(i);return ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return ce.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _5{constructor(e){this.Ds=e,this.docs=new vi(it.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,l=this.Ds(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ce.resolve(i?i.document.mutableCopy():Ti.newInvalidDocument(t))}getEntries(e,t){let i=Qo();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ti.newInvalidDocument(r))}),ce.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Qo();const l=t.path,u=new it(l.child("")),g=this.docs.getIteratorFrom(u);for(;g.hasNext();){const{key:v,value:{document:w}}=g.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||iP(bB(w),i)<=0||(r.has(w.key)||hw(t,w))&&(s=s.insert(w.key,w.mutableCopy()))}return ce.resolve(s)}getAllFromCollectionGroup(e,t,i,r){mt()}Cs(e,t){return ce.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new v5(this)}getSize(e){return ce.resolve(this.size)}}class v5 extends cj{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),ce.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class y5{constructor(e){this.persistence=e,this.xs=new oh(t=>am(t),uw),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new NP,this.targetCount=0,this.Ms=mm.kn()}forEachTarget(e,t){return this.xs.forEach((i,r)=>t(r)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ns&&(this.Ns=t),ce.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new mm(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Fn(t),ce.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.xs.forEach((l,u)=>{u.sequenceNumber<=t&&null===i.get(u.targetId)&&(this.xs.delete(l),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),ce.waitFor(s).next(()=>r)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const i=this.xs.get(t)||null;return ce.resolve(i)}addMatchingKeys(e,t,i){return this.ks.gs(t,i),ce.resolve()}removeMatchingKeys(e,t,i){this.ks.ps(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(l=>{s.push(r.markPotentiallyOrphaned(e,l))}),ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ks.Es(t);return ce.resolve(i)}containsKey(e,t){return ce.resolve(this.ks.containsKey(t))}}class LP{constructor(e,t){this.$s={},this.overlays={},this.Os=new Va(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new y5(this),this.indexManager=new s5,this.remoteDocumentCache=new _5(i=>this.referenceDelegate.Ls(i)),this.serializer=new jU(t),this.qs=new p5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new g5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.$s[e.toKey()];return i||(i=new m5(t,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,i){$e("MemoryPersistence","Starting transaction:",e);const r=new b5(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,t){return ce.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,t)))}}class b5 extends EB{constructor(e){super(),this.currentSequenceNumber=e}}class RS{constructor(e){this.persistence=e,this.Qs=new NP,this.js=null}static zs(e){return new RS(e)}get Ws(){if(this.js)return this.js;throw mt()}addReference(e,t,i){return this.Qs.addReference(i,t),this.Ws.delete(i.toString()),ce.resolve()}removeReference(e,t,i){return this.Qs.removeReference(i,t),this.Ws.add(i.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ws,i=>{const r=it.fromPath(i);return this.Hs(e,r).next(s=>{s||t.removeEntry(r,kt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(i=>{i?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ce.or([()=>ce.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class w5{constructor(e){this.serializer=e}O(e,t,i,r){const s=new cS("createOrUpgrade",t);var u;i<1&&r>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SB,{unique:!0}),u.createObjectStore("documentMutations"),gj(e),function(u){u.createObjectStore("remoteDocuments")}(e));let l=ce.resolve();return i<3&&r>=3&&(0!==i&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),gj(e)),l=l.next(()=>function(u){const g=u.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:kt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",v)}(s))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(u,g){return g.store("mutations").j().next(v=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SB,{unique:!0});const w=g.store("mutations"),I=v.map(M=>w.put(M));return ce.waitFor(I)})}(e,s))),l=l.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(l=l.next(()=>this.Ys(s))),i<6&&r>=6&&(l=l.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),i<7&&r>=7&&(l=l.next(()=>this.Zs(s))),i<8&&r>=8&&(l=l.next(()=>this.ti(e,s))),i<9&&r>=9&&(l=l.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(l=l.next(()=>this.ei(s))),i<11&&r>=11&&(l=l.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(l=l.next(()=>{!function(u){const g=u.createObjectStore("documentOverlays",{keyPath:r6});g.createIndex("collectionPathOverlayIndex",s6,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",o6,{unique:!1})}(e)})),i<13&&r>=13&&(l=l.next(()=>function(u){const g=u.createObjectStore("remoteDocumentsV14",{keyPath:WG});g.createIndex("documentKeyIndex",ZG),g.createIndex("collectionGroupIndex",KG)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.si(e,s))),i<15&&r>=15&&(l=l.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:e6}).createIndex("sequenceNumberIndex",t6,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:n6}).createIndex("documentKeyIndex",i6,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((i,r)=>{t+=kS(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.j().next(r=>ce.forEach(r,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",l).next(u=>ce.forEach(u,g=>{At(g.userId===s.userId);const v=fm(this.serializer,g);return nj(e,s.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((l,u)=>{const g=new xn(l),v=[0,Zs(g)];s.push(t.get(v).next(w=>w?ce.resolve():t.put({targetId:0,path:Zs(g),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ce.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:JG});const i=t.store("collectionParents"),r=new FP,s=l=>{if(r.add(l)){const u=l.lastSegment(),g=l.popLast();return i.put({collectionId:u,parent:Zs(g)})}};return t.store("remoteDocuments").X({Y:!0},(l,u)=>{const g=new xn(l);return s(g.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,u,g],v)=>{const w=Tu(u);return s(w.popLast())}))}ei(e){const t=e.store("targets");return t.X((i,r)=>{const s=Cw(r),l=$U(this.serializer,s);return t.put(l)})}ni(e,t){const i=t.store("remoteDocuments"),r=[];return i.X((s,l)=>{const u=t.store("remoteDocumentsV14"),g=(v=l,v.document?new it(xn.fromString(v.document.name).popFirst(5)):v.noDocument?it.fromSegments(v.noDocument.path):v.unknownDocument?it.fromSegments(v.unknownDocument.path):mt()).path.toArray();var v;const w={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(u.put(w))}).next(()=>ce.waitFor(r))}si(e,t){const i=t.store("mutations"),r=uj(this.serializer),s=new LP(RS.zs,this.serializer.fe);return i.j().next(l=>{const u=new Map;return l.forEach(g=>{var v;let w=null!==(v=u.get(g.userId))&&void 0!==v?v:cn();fm(this.serializer,g).keys().forEach(I=>w=w.add(I)),u.set(g.userId,w)}),ce.forEach(u,(g,v)=>{const w=new ts(v),I=TS.de(this.serializer,w),M=s.getIndexManager(w),O=PS.de(w,this.serializer,M,s.referenceDelegate);return new pj(r,O,I,M).recalculateAndSaveOverlaysForDocumentKeys(new oP(t,Va.ct),g).next()})})}}function gj(n){n.createObjectStore("targetDocuments",{keyPath:QG}).createIndex("documentTargetsIndex",XG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",YG,{unique:!0}),n.createObjectStore("targetGlobal")}const VP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class BP{constructor(e,t,i,r,s,l,u,g,v,w,I=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ii=s,this.window=l,this.document=u,this.ri=v,this.oi=w,this.ui=I,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=M=>Promise.resolve(),!BP.D())throw new Be(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new u5(this,r),this.di=t+"main",this.serializer=new jU(g),this.wi=new Cc(this.di,this.ui,new w5(this.serializer)),this.Bs=new a5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uj(this.serializer),this.qs=new Q6,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===w&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,VP);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Va(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var i=(0,xe.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,xe.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,xe.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>NS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Qf(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Aw(e).get("owner").next(t=>ce.resolve(this.Ri(t)))}Pi(e){return NS(e).delete(this.clientId)}bi(){var e=this;return(0,xe.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=ns(i,"clientMetadata");return r.j().next(s=>{const l=e.Si(s,18e5),u=s.filter(g=>-1===l.indexOf(g));return ce.forEach(u,g=>r.delete(g.clientId)).next(()=>u)})}).catch(()=>[]);if(e._i)for(const i of t)e._i.removeItem(e.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ce.resolve(!0):Aw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Be(ge.FAILED_PRECONDITION,VP);return!1}}return!(!this.networkEnabled||!this.inForeground)||NS(e).j().next(i=>void 0===this.Si(i,5e3).find(r=>{if(this.clientId!==r.clientId){const l=!this.inForeground&&r.inForeground,u=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||l&&u)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,xe.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new oP(t,Va.ct);return e.Ai(i).next(()=>e.Pi(i))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(i=>this.Vi(i.updateTimeMs,t)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>NS(e).j().next(t=>this.Si(t,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return PS.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new o5(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return TS.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,i){$e("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(l=this.ui)?l6:14===l?MB:13===l?AB:12===l?a6:11===l?xB:void mt();var l;let u;return this.wi.runTransaction(e,r,s,g=>(u=new oP(g,this.Os?this.Os.next():Va.ct),"readwrite-primary"===t?this.Ti(u).next(v=>!!v||this.Ei(u)).next(v=>{if(!v)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Be(ge.FAILED_PRECONDITION,wB);return i(u)}).next(v=>this.vi(u).next(()=>v)):this.Oi(u).next(()=>i(u)))).then(g=>(u.raiseOnCommittedEvent(),g))}Oi(e){return Aw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Be(ge.FAILED_PRECONDITION,VP)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Aw(e).put("owner",t)}static D(){return Cc.D()}Ai(e){const t=Aw(e);return t.get("owner").next(i=>this.Ri(i)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}Vi(e,t){const i=Date.now();return!(e<i-t||e>i&&(ur(`Detected an update time that is in the future: ${e} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Fn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const i=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return $e("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ur("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Aw(n){return ns(n,"owner")}function NS(n){return ns(n,"clientMetadata")}function UP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class jP{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Fi=i,this.Bi=r}static Li(e,t){let i=cn(),r=cn();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new jP(e,t.fromCache,i,r)}}class mj{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,i)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(eU(t))return ce.resolve(null);let i=yo(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=bS(t,null,"F"),i=yo(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const l=cn(...s);return this.Ui.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,i).next(g=>{const v=this.ji(t,u);return this.zi(t,v,l,g.readTime)?this.Ki(e,bS(t,null,"F")):this.Wi(e,v,t,g)}))})))}Gi(e,t,i,r){return eU(t)||r.isEqual(kt.min())?this.Qi(e,t):this.Ui.getDocuments(e,i).next(s=>{const l=this.ji(t,s);return this.zi(t,l,i,r)?this.Qi(e,t):(eP()<=qf.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mP(t)),this.Wi(e,l,t,yB(r,-1)))})}ji(e,t){let i=new Si(iU(e));return t.forEach((r,s)=>{hw(e,s)&&(i=i.add(s))}),i}zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return eP()<=qf.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",mP(t)),this.Ui.getDocumentsMatchingQuery(e,t,La.min())}Wi(e,t,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class E5{constructor(e,t,i,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new vi(en),this.Yi=new oh(s=>am(s),uw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pj(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function _j(n,e,t,i){return new E5(n,e,t,i)}function vj(n,e){return HP.apply(this,arguments)}function HP(){return HP=(0,xe.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.tr(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const l=[],u=[];let g=cn();for(const v of r){l.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}for(const v of s){u.push(v.batchId);for(const w of v.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next(v=>({er:v,removedBatchIds:l,addedBatchIds:u}))})})}),HP.apply(this,arguments)}function C5(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,u,g,v){const w=g.batch,I=w.keys();let M=ce.resolve();return I.forEach(O=>{M=M.next(()=>v.getEntry(u,O)).next(N=>{const H=g.docVersions.get(O);At(null!==H),N.version.compareTo(H)<0&&(w.applyToRemoteDocument(N,g),N.isValidDocument()&&(N.setReadTime(g.commitVersion),v.addEntry(N)))})}),M.next(()=>l.mutationQueue.removeMutationBatch(u,w))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=cn();for(let g=0;g<l.mutationResults.length;++g)l.mutationResults[g].transformResults.length>0&&(u=u.add(l.batch.mutations[g].key));return u}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function yj(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function D5(n,e){const t=rt(n),i=e.snapshotVersion;let r=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});r=t.Ji;const u=[];e.targetChanges.forEach((w,I)=>{const M=r.get(I);if(!M)return;u.push(t.Bs.removeMatchingKeys(s,w.removedDocuments,I).next(()=>t.Bs.addMatchingKeys(s,w.addedDocuments,I)));let O=M.withSequenceNumber(s.currentSequenceNumber);var N,H,Y;null!==e.targetMismatches.get(I)?O=O.withResumeToken(Lr.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),r=r.insert(I,O),H=O,Y=w,(0===(N=M).resumeToken.approximateByteSize()||H.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0)&&u.push(t.Bs.updateTargetData(s,O))});let g=Qo(),v=cn();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),u.push(bj(s,l,e.documentUpdates).next(w=>{g=w.nr,v=w.sr})),!i.isEqual(kt.min())){const w=t.Bs.getLastRemoteSnapshotVersion(s).next(I=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));u.push(w)}return ce.waitFor(u).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,g,v)).next(()=>g)}).then(s=>(t.Ji=r,s))}function bj(n,e,t){let i=cn(),r=cn();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let l=Qo();return t.forEach((u,g)=>{const v=s.get(u);g.isFoundDocument()!==v.isFoundDocument()&&(r=r.add(u)),g.isNoDocument()&&g.version.isEqual(kt.min())?(e.removeEntry(u,g.readTime),l=l.insert(u,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),l=l.insert(u,g)):$e("LocalStore","Ignoring outdated watch update for ",u,". Current version:",v.version," Watch version:",g.version)}),{nr:l,sr:r}})}function I5(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ov(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Bs.getTargetData(i,e).next(s=>s?(r=s,ce.resolve(r)):t.Bs.allocateTargetId(i).next(l=>(r=new lh(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(i.targetId,i),t.Yi.set(e,i.targetId)),i})}function Rv(n,e,t){return $P.apply(this,arguments)}function $P(){return $P=(0,xe.Z)(function*(n,e,t){const i=rt(n),r=i.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Qf(l))throw l;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}),$P.apply(this,arguments)}function LS(n,e,t){const i=rt(n);let r=kt.min(),s=cn();return i.persistence.runTransaction("Execute query","readonly",l=>function(u,g,v){const w=rt(u),I=w.Yi.get(v);return void 0!==I?ce.resolve(w.Ji.get(I)):w.Bs.getTargetData(g,v)}(i,l,yo(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(l,u.targetId).next(g=>{s=g})}).next(()=>i.Hi.getDocumentsMatchingQuery(l,e,t?r:kt.min(),t?s:cn())).next(u=>(Cj(i,nU(e),u),{documents:u,ir:s})))}function wj(n,e){const t=rt(n),i=rt(t.Bs),r=t.Ji.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.le(s,e).next(l=>l?l.target:null))}function Ej(n,e){const t=rt(n),i=t.Xi.get(e)||kt.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Zi.getAllFromCollectionGroup(r,e,yB(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Cj(t,e,r),r))}function Cj(n,e,t){let i=n.Xi.get(e)||kt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(e,i)}function zP(){return zP=(0,xe.Z)(function*(n,e,t,i){const r=rt(n);let s=cn(),l=Qo();for(const v of t){const w=e.rr(v.metadata.name);v.document&&(s=s.add(w));const I=e.ur(v);I.setReadTime(e.cr(v.metadata.readTime)),l=l.insert(w,I)}const u=r.Zi.newChangeBuffer({trackRemovals:!0}),g=yield Ov(r,(v=i,yo(Dv(xn.fromString(`__bundle__/docs/${v}`)))));var v;return r.persistence.runTransaction("Apply bundle documents","readwrite",v=>bj(v,u,l).next(w=>(u.apply(v),w)).next(w=>r.Bs.removeMatchingKeysForTargetId(v,g.targetId).next(()=>r.Bs.addMatchingKeys(v,s,g.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(v,w.nr,w.sr)).next(()=>w.nr)))}),zP.apply(this,arguments)}function T5(n,e){return GP.apply(this,arguments)}function GP(){return GP=(0,xe.Z)(function*(n,e,t=cn()){const i=yield Ov(n,yo(AP(e.bundledQuery))),r=rt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const l=dr(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.qs.saveNamedQuery(s,e);const u=i.withResumeToken(Lr.EMPTY_BYTE_STRING,l);return r.Ji=r.Ji.insert(u.targetId,u),r.Bs.updateTargetData(s,u).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,t,i.targetId)).next(()=>r.qs.saveNamedQuery(s,e))})}),GP.apply(this,arguments)}function Dj(n,e){return`firestore_clients_${n}_${e}`}function Ij(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function qP(n,e){return`firestore_targets_${n}_${e}`}class VS{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static ar(e,t,i){const r=JSON.parse(i);let s,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new Be(r.error.code,r.error.message))),l?new VS(e,t,r.state,s):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mw{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static ar(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Be(i.error.code,i.error.message))),s?new Mw(e,i.state,r):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class BS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=_P();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=DB(i.activeTargetIds[l]),s=s.add(i.activeTargetIds[l]);return r?new BS(e,s):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class WP{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new WP(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ZP{constructor(){this.activeTargetIds=_P()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KP{constructor(e,t,i,r,s){this.window=e,this.ii=t,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new vi(en),this.started=!1,this.yr=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=Dj(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new ZP),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,xe.Z)(function*(){const t=yield e.syncEngine.$i();for(const r of t){if(r===e.wr)continue;const s=e.getItem(Dj(e.persistenceKey,r));if(s){const l=BS.ar(r,s);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const i=e.storage.getItem(e.vr);if(i){const r=e.br(i);r&&e.Vr(r)}for(const r of e.yr)e.mr(r);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,i){this.Dr(e,t,i),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(qP(this.persistenceKey,e));if(i){const r=Mw.ar(e,i);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(qP(this.persistenceKey,e))}updateQueryState(e,t,i){this.kr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Cr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const i=e;if(i.storageArea===this.storage){if($e("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,xe.Z)(function*(){if(t.started){if(null!==i.key)if(t.Tr.test(i.key)){if(null==i.newValue){const r=t.Or(i.key);return t.Fr(r,null)}{const r=t.Br(i.key,i.newValue);if(r)return t.Fr(r.clientId,r)}}else if(t.Er.test(i.key)){if(null!==i.newValue){const r=t.Lr(i.key,i.newValue);if(r)return t.qr(r)}}else if(t.Ar.test(i.key)){if(null!==i.newValue){const r=t.Ur(i.key,i.newValue);if(r)return t.Kr(r)}}else if(i.key===t.vr){if(null!==i.newValue){const r=t.br(i.newValue);if(r)return t.Vr(r)}}else if(i.key===t.Ir){const r=function(s){let l=Va.ct;if(null!=s)try{const u=JSON.parse(s);At("number"==typeof u),l=u}catch(u){ur("SharedClientState","Failed to read sequence number from WebStorage",u)}return l}(i.newValue);r!==Va.ct&&t.sequenceNumberHandler(r)}else if(i.key===t.Rr){const r=t.Gr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,i){const r=new VS(this.currentUser,e,t,i),s=Ij(this.persistenceKey,this.currentUser,e);this.setItem(s,r.hr())}Cr(e){const t=Ij(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,i){const r=qP(this.persistenceKey,e),s=new Mw(e,t,i);this.setItem(r,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const i=this.Or(e);return BS.ar(i,t)}Lr(e,t){const i=this.Er.exec(e),r=Number(i[1]);return VS.ar(new ts(void 0!==i[2]?i[2]:null),r,t)}Ur(e,t){const i=this.Ar.exec(e),r=Number(i[1]);return Mw.ar(r,t)}br(e){return WP.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,xe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const i=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),s=this.Sr(i),l=[],u=[];return s.forEach(g=>{r.has(g)||l.push(g)}),r.forEach(g=>{s.has(g)||u.push(g)}),this.syncEngine.Wr(l,u).then(()=>{this.gr=i})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=_P();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class Sj{constructor(){this.Hr=new ZP,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,i){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ZP,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class x5{Yr(e){}shutdown(){}}class Tj{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let US=null;function YP(){return null===US?US=268435456+Math.round(2147483648*Math.random()):US++,"0x"+US.toString(16)}const A5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class M5{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ys="WebChannelConnection";class k5 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,i,r,s){const l=YP(),u=this.To(e,t);$e("RestConnection",`Sending RPC '${e}' ${l}:`,u,i);const g={};return this.Eo(g,r,s),this.Ao(e,u,g,i).then(v=>($e("RestConnection",`Received RPC '${e}' ${l}: `,v),v),v=>{throw Al("RestConnection",`RPC '${e}' ${l} failed with error: `,v,"url: ",u,"request:",i),v})}vo(e,t,i,r,s,l){return this.Io(e,t,i,r,s)}Eo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+vv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}To(e,t){return`${this.mo}/v1/${t}:${A5[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,i,r){const s=YP();return new Promise((l,u)=>{const g=new TG;g.setWithCredentials(!0),g.listenOnce(DG.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Jk.NO_ERROR:const w=g.getResponseJson();$e(Ys,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(w)),l(w);break;case Jk.TIMEOUT:$e(Ys,`RPC '${e}' ${s} timed out`),u(new Be(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Jk.HTTP_ERROR:const I=g.getStatus();if($e(Ys,`RPC '${e}' ${s} failed with status:`,I,"response text:",g.getResponseText()),I>0){let M=g.getResponseJson();Array.isArray(M)&&(M=M[0]);const O=null==M?void 0:M.error;if(O&&O.status&&O.message){const N=function(H){const Y=H.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Y)>=0?Y:ge.UNKNOWN}(O.status);u(new Be(N,O.message))}else u(new Be(ge.UNKNOWN,"Server responded with status "+g.getStatus()))}else u(new Be(ge.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{$e(Ys,`RPC '${e}' ${s} completed.`)}});const v=JSON.stringify(r);$e(Ys,`RPC '${e}' ${s} sending request:`,r),g.send(t,"POST",v,i,15)})}Ro(e,t,i){const r=YP(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=EG(),u=CG(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.xmlHttpFactory=new SG({})),this.Eo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const w=s.join("");$e(Ys,`Creating RPC '${e}' stream ${r}: ${w}`,g);const I=l.createWebChannel(w,g);let M=!1,O=!1;const N=new M5({ro:Y=>{O?$e(Ys,`Not sending because RPC '${e}' stream ${r} is closed:`,Y):(M||($e(Ys,`Opening RPC '${e}' stream ${r} transport.`),I.open(),M=!0),$e(Ys,`RPC '${e}' stream ${r} sending:`,Y),I.send(Y))},oo:()=>I.close()}),H=(Y,he,_e)=>{Y.listen(he,Oe=>{try{_e(Oe)}catch(Ge){setTimeout(()=>{throw Ge},0)}})};return H(I,oS.EventType.OPEN,()=>{O||$e(Ys,`RPC '${e}' stream ${r} transport opened.`)}),H(I,oS.EventType.CLOSE,()=>{O||(O=!0,$e(Ys,`RPC '${e}' stream ${r} transport closed`),N.wo())}),H(I,oS.EventType.ERROR,Y=>{O||(O=!0,Al(Ys,`RPC '${e}' stream ${r} transport errored:`,Y),N.wo(new Be(ge.UNAVAILABLE,"The operation could not be completed")))}),H(I,oS.EventType.MESSAGE,Y=>{var he;if(!O){const _e=Y.data[0];At(!!_e);const Oe=_e,Ge=Oe.error||(null===(he=Oe[0])||void 0===he?void 0:he.error);if(Ge){$e(Ys,`RPC '${e}' stream ${r} received error:`,Ge);const st=Ge.status;let wt=function(Rt){const bn=br[Rt];if(void 0!==bn)return wU(bn)}(st),Ot=Ge.message;void 0===wt&&(wt=ge.INTERNAL,Ot="Unknown error status: "+st+" with message "+Ge.message),O=!0,N.wo(new Be(wt,Ot)),I.close()}else $e(Ys,`RPC '${e}' stream ${r} received:`,_e),N._o(_e)}}),H(u,IG.STAT_EVENT,Y=>{Y.stat===fB.PROXY?$e(Ys,`RPC '${e}' stream ${r} detected buffering proxy`):Y.stat===fB.NOPROXY&&$e(Ys,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{N.fo()},0),N}}function xj(){return"undefined"!=typeof window?window:null}function jS(){return"undefined"!=typeof document?document:null}function kw(n){return new U6(n,!0)}class QP{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-i);r>0&&$e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Aj{constructor(e,t,i,r,s,l,u,g){this.ii=e,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=g,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new QP(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,xe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,xe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var i=this;return(0,xe.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==e?i.qo.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):t&&t.code===ge.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===t&&this.Zo(i,r)},i=>{e(()=>{const r=new Be(ge.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,t){const i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var e=this;this.state=5,this.qo.No((0,xe.Z)(function*(){e.state=0,e.start()}))}tu(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P5 extends Aj{constructor(e,t,i,r,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function $6(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:mt(),r=e.targetChange.targetIds||[],s=function(g,v){return g.useProto3Json?(At(void 0===v||"string"==typeof v),Lr.fromBase64String(v||"")):(At(void 0===v||v instanceof Uint8Array),Lr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(g){const v=void 0===g.code?ge.UNKNOWN:wU(g.code);return new Be(v,g.message||"")}(l);t=new SU(i,r,s,u||null)}else if("documentChange"in e){const i=e.documentChange,r=Mu(n,i.document.name),s=dr(i.document.updateTime),l=i.document.createTime?dr(i.document.createTime):kt.min(),u=new Is({mapValue:{fields:i.document.fields}}),g=Ti.newFoundDocument(r,s,l,u);t=new IS(i.targetIds||[],i.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const i=e.documentDelete,r=Mu(n,i.document),s=i.readTime?dr(i.readTime):kt.min(),l=Ti.newNoDocument(r,s);t=new IS([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const i=e.documentRemove,r=Mu(n,i.document);t=new IS([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return mt();{const i=e.filter,{count:r=0,unchangedNames:s}=i,l=new R6(r,s);t=new IU(i.targetId,l)}}var g;return t}(this.serializer,e),i=function(r){if(!("targetChange"in r))return kt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?kt.min():s.readTime?dr(s.readTime):kt.min()}(e);return this.listener.nu(t,i)}su(e){const t={};t.database=ww(this.serializer),t.addTarget=function(r,s){let l;const u=s.target;if(l=_S(u)?{documents:NU(r,u)}:{query:xP(r,u)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=MU(r,s.resumeToken);const g=DP(r,s.expectedCount);null!==g&&(l.expectedCount=g)}else if(s.snapshotVersion.compareTo(kt.min())>0){l.readTime=Av(r,s.snapshotVersion.toTimestamp());const g=DP(r,s.expectedCount);null!==g&&(l.expectedCount=g)}return l}(this.serializer,e);const i=function G6(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Wo(t)}iu(e){const t={};t.database=ww(this.serializer),t.removeTarget=e,this.Wo(t)}}class O5 extends Aj{constructor(e,t,i,r,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function z6(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(i,r){let s=dr(i.updateTime?i.updateTime:r);return s.isEqual(kt.min())&&(s=dr(r)),new M6(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=dr(e.commitTime);return this.listener.cu(i,t)}return At(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=ww(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Ew(this.serializer,i))};this.Wo(t)}}class R5 extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Be(ge.UNKNOWN,r.toString())})}vo(e,t,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.vo(e,t,i,s,l,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Be(ge.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class N5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ur(t),this.mu=!1):$e("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class L5{constructor(e,t,i,r,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(u=>{i.enqueueAndForget((0,xe.Z)(function*(){var g;cp(l)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,xe.Z)(function*(v){const w=rt(v);w.vu.add(4),yield Fv(w),w.bu.set("Unknown"),w.vu.delete(4),yield Pw(w)}),function(v){return g.apply(this,arguments)})(l))}))}),this.bu=new N5(i,r)}}function Pw(n){return JP.apply(this,arguments)}function JP(){return JP=(0,xe.Z)(function*(n){if(cp(n))for(const e of n.Ru)yield e(!0)}),JP.apply(this,arguments)}function Fv(n){return eO.apply(this,arguments)}function eO(){return eO=(0,xe.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),eO.apply(this,arguments)}function HS(n,e){const t=rt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),iO(t)?nO(t):Lv(t).Ko()&&tO(t,e))}function Ow(n,e){const t=rt(n),i=Lv(t);t.Au.delete(e),i.Ko()&&Mj(t,e),0===t.Au.size&&(i.Ko()?i.jo():cp(t)&&t.bu.set("Unknown"))}function tO(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lv(n).su(e)}function Mj(n,e){n.Vu.qt(e),Lv(n).iu(e)}function nO(n){n.Vu=new N6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Lv(n).start(),n.bu.gu()}function iO(n){return cp(n)&&!Lv(n).Uo()&&n.Au.size>0}function cp(n){return 0===rt(n).vu.size}function kj(n){n.Vu=void 0}function V5(n){return rO.apply(this,arguments)}function rO(){return rO=(0,xe.Z)(function*(n){n.Au.forEach((e,t)=>{tO(n,e)})}),rO.apply(this,arguments)}function B5(n,e){return sO.apply(this,arguments)}function sO(){return sO=(0,xe.Z)(function*(n,e){kj(n),iO(n)?(n.bu.Iu(e),nO(n)):n.bu.set("Unknown")}),sO.apply(this,arguments)}function U5(n,e,t){return oO.apply(this,arguments)}function oO(){return oO=(0,xe.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof SU&&2===e.state&&e.cause)try{yield(i=(0,xe.Z)(function*(r,s){const l=s.cause;for(const u of s.targetIds)r.Au.has(u)&&(yield r.remoteSyncer.rejectListen(u,l),r.Au.delete(u),r.Vu.removeTarget(u))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield $S(n,i)}else if(e instanceof IS?n.Vu.Ht(e):e instanceof IU?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(kt.min()))try{const i=yield yj(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const l=r.Vu.ce(s);return l.targetChanges.forEach((u,g)=>{if(u.resumeToken.approximateByteSize()>0){const v=r.Au.get(g);v&&r.Au.set(g,v.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,g)=>{const v=r.Au.get(u);if(!v)return;r.Au.set(u,v.withResumeToken(Lr.EMPTY_BYTE_STRING,v.snapshotVersion)),Mj(r,u);const w=new lh(v.target,u,g,v.sequenceNumber);tO(r,w)}),r.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){$e("RemoteStore","Failed to raise snapshot:",i),yield $S(n,i)}var i}),oO.apply(this,arguments)}function $S(n,e,t){return aO.apply(this,arguments)}function aO(){return aO=(0,xe.Z)(function*(n,e,t){if(!Qf(e))throw e;n.vu.add(1),yield Fv(n),n.bu.set("Offline"),t||(t=()=>yj(n.localStore)),n.asyncQueue.enqueueRetryable((0,xe.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Pw(n)}))}),aO.apply(this,arguments)}function Pj(n,e){return e().catch(t=>$S(n,t,e))}function Nv(n){return lO.apply(this,arguments)}function lO(){return lO=(0,xe.Z)(function*(n){const e=rt(n),t=up(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;j5(e);)try{const r=yield I5(e.localStore,i);if(null===r){0===e.Eu.length&&t.jo();break}i=r.batchId,H5(e,r)}catch(r){yield $S(e,r)}Oj(e)&&Rj(e)}),lO.apply(this,arguments)}function j5(n){return cp(n)&&n.Eu.length<10}function H5(n,e){n.Eu.push(e);const t=up(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function Oj(n){return cp(n)&&!up(n).Uo()&&n.Eu.length>0}function Rj(n){up(n).start()}function $5(n){return cO.apply(this,arguments)}function cO(){return cO=(0,xe.Z)(function*(n){up(n).hu()}),cO.apply(this,arguments)}function z5(n){return uO.apply(this,arguments)}function uO(){return uO=(0,xe.Z)(function*(n){const e=up(n);for(const t of n.Eu)e.uu(t.mutations)}),uO.apply(this,arguments)}function G5(n,e,t){return dO.apply(this,arguments)}function dO(){return dO=(0,xe.Z)(function*(n,e,t){const i=n.Eu.shift(),r=bP.from(i,e,t);yield Pj(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Nv(n)}),dO.apply(this,arguments)}function q5(n,e){return hO.apply(this,arguments)}function hO(){return hO=(0,xe.Z)(function*(n,e){e&&up(n).ou&&(yield function(){var t=(0,xe.Z)(function*(i,r){if(bU(s=r.code)&&s!==ge.ABORTED){const l=i.Eu.shift();up(i).Qo(),yield Pj(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield Nv(i)}var s});return function(i,r){return t.apply(this,arguments)}}()(n,e)),Oj(n)&&Rj(n)}),hO.apply(this,arguments)}function Fj(n,e){return fO.apply(this,arguments)}function fO(){return fO=(0,xe.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const i=cp(t);t.vu.add(3),yield Fv(t),i&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Pw(t)}),fO.apply(this,arguments)}function pO(n,e){return gO.apply(this,arguments)}function gO(){return gO=(0,xe.Z)(function*(n,e){const t=rt(n);e?(t.vu.delete(2),yield Pw(t)):e||(t.vu.add(2),yield Fv(t),t.bu.set("Unknown"))}),gO.apply(this,arguments)}function Lv(n){return n.Su||(n.Su=function(e,t,i){const r=rt(e);return r.fu(),new P5(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:V5.bind(null,n),ao:B5.bind(null,n),nu:U5.bind(null,n)}),n.Ru.push(function(){var e=(0,xe.Z)(function*(t){t?(n.Su.Qo(),iO(n)?nO(n):n.bu.set("Unknown")):(yield n.Su.stop(),kj(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function up(n){return n.Du||(n.Du=function(e,t,i){const r=rt(e);return r.fu(),new O5(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:$5.bind(null,n),ao:q5.bind(null,n),au:z5.bind(null,n),cu:G5.bind(null,n)}),n.Ru.push(function(){var e=(0,xe.Z)(function*(t){t?(n.Du.Qo(),yield Nv(n)):(yield n.Du.stop(),n.Eu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class mO{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,i,r,s){const l=Date.now()+i,u=new mO(e,t,l,r,s);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Be(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vv(n,e){if(ur("AsyncQueue",`${e}: ${n}`),Qf(n))return new Be(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Bv{constructor(e){this.comparator=e?(t,i)=>e(t,i)||it.comparator(t.key,i.key):(t,i)=>it.comparator(t.key,i.key),this.keyedMap=fw(),this.sortedSet=new vi(this.comparator)}static emptySet(e){return new Bv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Bv;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Nj{constructor(){this.Cu=new vi(it.comparator)}track(e){const t=e.doc.key,i=this.Cu.get(t);i?0!==e.type&&3===i.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==i.type?this.Cu=this.Cu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Cu=this.Cu.remove(t):1===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):mt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Uv{constructor(e,t,i,r,s,l,u,g,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,r,s){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new Uv(e,t,Bv.emptySet(t),l,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class W5{constructor(){this.Nu=void 0,this.listeners=[]}}class Z5{constructor(){this.queries=new oh(e=>tU(e),dw),this.onlineState="Unknown",this.ku=new Set}}function _O(n,e){return vO.apply(this,arguments)}function vO(){return vO=(0,xe.Z)(function*(n,e){const t=rt(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new W5),r)try{s.Nu=yield t.onListen(i)}catch(l){const u=Vv(l,`Initialization of query '${mP(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&wO(t)}),vO.apply(this,arguments)}function yO(n,e){return bO.apply(this,arguments)}function bO(){return bO=(0,xe.Z)(function*(n,e){const t=rt(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),bO.apply(this,arguments)}function K5(n,e){const t=rt(n);let i=!1;for(const r of e){const l=t.queries.get(r.query);if(l){for(const u of l.listeners)u.$u(r)&&(i=!0);l.Nu=r}}i&&wO(t)}function Y5(n,e,t){const i=rt(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function wO(n){n.ku.forEach(e=>{e.next()})}class EO{constructor(e,t,i){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Uv(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Uv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Q5{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Lj{constructor(e){this.serializer=e}rr(e){return Mu(this.serializer,e)}ur(e){return e.metadata.exists?FU(this.serializer,e.document,!1):Ti.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return dr(e)}}class X5{constructor(e,t,i){this.ju=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Vj(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const i=xn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,i=new Lj(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const l of r.metadata.queries){const u=(t.get(l)||cn()).add(s);t.set(l,u)}}return t}complete(){var e=this;return(0,xe.Z)(function*(){const t=yield function S5(n,e,t,i){return zP.apply(this,arguments)}(e.localStore,new Lj(e.serializer),e.documents,e.ju.id),i=e.Wu(e.documents);for(const r of e.queries)yield T5(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Vj(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Bj{constructor(e){this.key=e}}class Uj{constructor(e){this.key=e}}class jj{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=cn(),this.mutatedKeys=cn(),this.tc=iU(e),this.ec=new Bv(this.tc)}get nc(){return this.Yu}sc(e,t){const i=t?t.ic:new Nj,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,l=r,u=!1;const g="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,v="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((w,I)=>{const M=r.get(w),O=hw(this.query,I)?I:null,N=!!M&&this.mutatedKeys.has(M.key),H=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let Y=!1;M&&O?M.data.isEqual(O.data)?N!==H&&(i.track({type:3,doc:O}),Y=!0):this.rc(M,O)||(i.track({type:2,doc:O}),Y=!0,(g&&this.tc(O,g)>0||v&&this.tc(O,v)<0)&&(u=!0)):!M&&O?(i.track({type:0,doc:O}),Y=!0):M&&!O&&(i.track({type:1,doc:M}),Y=!0,(g||v)&&(u=!0)),Y&&(O?(l=l.add(O),s=H?s.add(w):s.delete(w)):(l=l.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const w="F"===this.query.limitType?l.last():l.first();l=l.delete(w.key),s=s.delete(w.key),i.track({type:1,doc:w})}return{ec:l,ic:i,zi:u,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((v,w)=>function(I,M){const O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return O(I)-O(M)}(v.type,w.type)||this.tc(v.doc,w.doc)),this.oc(i);const l=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,g=u!==this.Xu;return this.Xu=u,0!==s.length||g?{snapshot:new Uv(this.query,e.ec,r,s,e.mutatedKeys,0===u,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Nj,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=cn(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const t=[];return e.forEach(i=>{this.Zu.has(i)||t.push(new Uj(i))}),this.Zu.forEach(i=>{e.has(i)||t.push(new Bj(i))}),t}hc(e){this.Yu=e.ir,this.Zu=cn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Uv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class J5{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class eq{constructor(e){this.key=e,this.fc=!1}}class tq{constructor(e,t,i,r,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new oh(u=>tU(u),dw),this._c=new Map,this.mc=new Set,this.gc=new vi(it.comparator),this.yc=new Map,this.Ic=new NP,this.Tc={},this.Ec=new Map,this.Ac=mm.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function nq(n,e){return CO.apply(this,arguments)}function CO(){return CO=(0,xe.Z)(function*(n,e){const t=qO(n);let i,r;const s=t.wc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const l=yield Ov(t.localStore,yo(e)),u=t.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield DO(t,e,i,"current"===u,l.resumeToken),t.isPrimaryClient&&HS(t.remoteStore,l)}return r}),CO.apply(this,arguments)}function DO(n,e,t,i,r){return IO.apply(this,arguments)}function IO(){return IO=(0,xe.Z)(function*(n,e,t,i,r){n.Rc=(I,M,O)=>{return(N=(0,xe.Z)(function*(H,Y,he,_e){let Oe=Y.view.sc(he);Oe.zi&&(Oe=yield LS(H.localStore,Y.query,!1).then(({documents:wt})=>Y.view.sc(wt,Oe)));const Ge=_e&&_e.targetChanges.get(Y.targetId),st=Y.view.applyChanges(Oe,H.isPrimaryClient,Ge);return FO(H,Y.targetId,st.cc),st.snapshot}),function(H,Y,he,_e){return N.apply(this,arguments)})(n,I,M,O);var N};const s=yield LS(n.localStore,e,!0),l=new jj(e,s.ir),u=l.sc(s.documents),g=yw.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),v=l.applyChanges(u,n.isPrimaryClient,g);FO(n,t,v.cc);const w=new J5(e,t,l);return n.wc.set(e,w),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),IO.apply(this,arguments)}function iq(n,e){return SO.apply(this,arguments)}function SO(){return SO=(0,xe.Z)(function*(n,e){const t=rt(n),i=t.wc.get(e),r=t._c.get(i.targetId);if(r.length>1)return t._c.set(i.targetId,r.filter(s=>!dw(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Rv(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Ow(t.remoteStore,i.targetId),jv(t,i.targetId)}).catch(Yf))):(jv(t,i.targetId),yield Rv(t.localStore,i.targetId,!0))}),SO.apply(this,arguments)}function TO(){return TO=(0,xe.Z)(function*(n,e,t){const i=WO(n);try{const r=yield function(s,l){const u=rt(s),g=Ri.now(),v=l.reduce((M,O)=>M.add(O.key),cn());let w,I;return u.persistence.runTransaction("Locally write mutations","readwrite",M=>{let O=Qo(),N=cn();return u.Zi.getEntries(M,v).next(H=>{O=H,O.forEach((Y,he)=>{he.isValidDocument()||(N=N.add(Y))})}).next(()=>u.localDocuments.getOverlayedDocuments(M,O)).next(H=>{w=H;const Y=[];for(const he of l){const _e=P6(he,w.get(he.key).overlayedDocument);null!=_e&&Y.push(new ah(he.key,_e,jB(_e.value.mapValue),Fi.exists(!0)))}return u.mutationQueue.addMutationBatch(M,g,Y,l)}).next(H=>{I=H;const Y=H.applyToLocalDocumentSet(w,N);return u.documentOverlayCache.saveOverlays(M,H.batchId,Y)})}).then(()=>({batchId:I.batchId,changes:sU(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,u){let g=s.Tc[s.currentUser.toKey()];g||(g=new vi(en)),g=g.insert(l,u),s.Tc[s.currentUser.toKey()]=g}(i,r.batchId,t),yield ch(i,r.changes),yield Nv(i.remoteStore)}catch(r){const s=Vv(r,"Failed to persist write");t.reject(s)}}),TO.apply(this,arguments)}function Hj(n,e){return xO.apply(this,arguments)}function xO(){return xO=(0,xe.Z)(function*(n,e){const t=rt(n);try{const i=yield D5(t.localStore,e);e.targetChanges.forEach((r,s)=>{const l=t.yc.get(s);l&&(At(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.fc=!0:r.modifiedDocuments.size>0?At(l.fc):r.removedDocuments.size>0&&(At(l.fc),l.fc=!1))}),yield ch(t,i,e)}catch(i){yield Yf(i)}}),xO.apply(this,arguments)}function $j(n,e,t){const i=rt(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.wc.forEach((s,l)=>{const u=l.view.Mu(e);u.snapshot&&r.push(u.snapshot)}),function(s,l){const u=rt(s);u.onlineState=l;let g=!1;u.queries.forEach((v,w)=>{for(const I of w.listeners)I.Mu(l)&&(g=!0)}),g&&wO(u)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function sq(n,e,t){return AO.apply(this,arguments)}function AO(){return AO=(0,xe.Z)(function*(n,e,t){const i=rt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.yc.get(e),s=r&&r.key;if(s){let l=new vi(it.comparator);l=l.insert(s,Ti.newNoDocument(s,kt.min()));const u=cn().add(s),g=new vw(kt.min(),new Map,new vi(en),l,u);yield Hj(i,g),i.gc=i.gc.remove(s),i.yc.delete(e),NO(i)}else yield Rv(i.localStore,e,!1).then(()=>jv(i,e,t)).catch(Yf)}),AO.apply(this,arguments)}function oq(n,e){return MO.apply(this,arguments)}function MO(){return MO=(0,xe.Z)(function*(n,e){const t=rt(n),i=e.batch.batchId;try{const r=yield C5(t.localStore,e);RO(t,i,null),OO(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield ch(t,r)}catch(r){yield Yf(r)}}),MO.apply(this,arguments)}function aq(n,e,t){return kO.apply(this,arguments)}function kO(){return kO=(0,xe.Z)(function*(n,e,t){const i=rt(n);try{const r=yield function(s,l){const u=rt(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return u.mutationQueue.lookupMutationBatch(g,l).next(w=>(At(null!==w),v=w.keys(),u.mutationQueue.removeMutationBatch(g,w))).next(()=>u.mutationQueue.performConsistencyCheck(g)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(g,v,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>u.localDocuments.getDocuments(g,v))})}(i.localStore,e);RO(i,e,t),OO(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield ch(i,r)}catch(r){yield Yf(r)}}),kO.apply(this,arguments)}function PO(){return PO=(0,xe.Z)(function*(n,e){const t=rt(n);cp(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const l=rt(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>l.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===i)return void e.resolve();const r=t.Ec.get(i)||[];r.push(e),t.Ec.set(i,r)}catch(i){const r=Vv(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),PO.apply(this,arguments)}function OO(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function RO(n,e,t){const i=rt(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function jv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n._c.get(e))n.wc.delete(i),t&&n.dc.Pc(i,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(i=>{n.Ic.containsKey(i)||zj(n,i)})}function zj(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Ow(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),NO(n))}function FO(n,e,t){for(const i of t)i instanceof Bj?(n.Ic.addReference(i.key,e),cq(n,i)):i instanceof Uj?($e("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,e),n.Ic.containsKey(i.key)||zj(n,i.key)):mt()}function cq(n,e){const t=e.key,i=t.path.canonicalString();n.gc.get(t)||n.mc.has(i)||($e("SyncEngine","New document in limbo: "+t),n.mc.add(i),NO(n))}function NO(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new it(xn.fromString(e)),i=n.Ac.next();n.yc.set(i,new eq(t)),n.gc=n.gc.insert(t,i),HS(n.remoteStore,new lh(yo(Dv(t.path)),i,"TargetPurposeLimboResolution",Va.ct))}}function ch(n,e,t){return LO.apply(this,arguments)}function LO(){return LO=(0,xe.Z)(function*(n,e,t){const i=rt(n),r=[],s=[],l=[];var u;i.wc.isEmpty()||(i.wc.forEach((u,g)=>{l.push(i.Rc(g,e,t).then(v=>{if((v||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(g.targetId,(null==v?void 0:v.fromCache)?"not-current":"current"),v){r.push(v);const w=jP.Li(g.targetId,v);s.push(w)}}))}),yield Promise.all(l),i.dc.nu(r),yield(u=(0,xe.Z)(function*(g,v){const w=rt(g);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>ce.forEach(v,M=>ce.forEach(M.Fi,O=>w.persistence.referenceDelegate.addReference(I,M.targetId,O)).next(()=>ce.forEach(M.Bi,O=>w.persistence.referenceDelegate.removeReference(I,M.targetId,O)))))}catch(I){if(!Qf(I))throw I;$e("LocalStore","Failed to update sequence numbers: "+I)}for(const I of v){const M=I.targetId;if(!I.fromCache){const O=w.Ji.get(M),H=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);w.Ji=w.Ji.insert(M,H)}}}),function(g,v){return u.apply(this,arguments)})(i.localStore,s))}),LO.apply(this,arguments)}function uq(n,e){return VO.apply(this,arguments)}function VO(){return VO=(0,xe.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const i=yield vj(t.localStore,e);t.currentUser=e,(r=t).Ec.forEach(l=>{l.forEach(u=>{u.reject(new Be(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield ch(t,i.er)}var r}),VO.apply(this,arguments)}function dq(n,e){const t=rt(n),i=t.yc.get(e);if(i&&i.fc)return cn().add(i.key);{let r=cn();const s=t._c.get(e);if(!s)return r;for(const l of s){const u=t.wc.get(l);r=r.unionWith(u.view.nc)}return r}}function hq(n,e){return BO.apply(this,arguments)}function BO(){return BO=(0,xe.Z)(function*(n,e){const t=rt(n),i=yield LS(t.localStore,e.query,!0),r=e.view.hc(i);return t.isPrimaryClient&&FO(t,e.targetId,r.cc),r}),BO.apply(this,arguments)}function fq(n,e){return UO.apply(this,arguments)}function UO(){return UO=(0,xe.Z)(function*(n,e){const t=rt(n);return Ej(t.localStore,e).then(i=>ch(t,i))}),UO.apply(this,arguments)}function pq(n,e,t,i){return jO.apply(this,arguments)}function jO(){return jO=(0,xe.Z)(function*(n,e,t,i){const r=rt(n),s=yield function(l,u){const g=rt(l),v=rt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",w=>v.Sn(w,u).next(I=>I?g.localDocuments.getDocuments(w,I):ce.resolve(null)))}(r.localStore,e);var u;null!==s?("pending"===t?yield Nv(r.remoteStore):"acknowledged"===t||"rejected"===t?(RO(r,e,i||null),OO(r,e),u=e,rt(rt(r.localStore).mutationQueue).Cn(u)):mt(),yield ch(r,s)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),jO.apply(this,arguments)}function HO(){return HO=(0,xe.Z)(function*(n,e){const t=rt(n);if(qO(t),WO(t),!0===e&&!0!==t.vc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield Gj(t,i.toArray());t.vc=!0,yield pO(t.remoteStore,!0);for(const s of r)HS(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const i=[];let r=Promise.resolve();t._c.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(jv(t,l),Rv(t.localStore,l,!0))),Ow(t.remoteStore,l)}),yield r,yield Gj(t,i),function(s){const l=rt(s);l.yc.forEach((u,g)=>{Ow(l.remoteStore,g)}),l.Ic.Ts(),l.yc=new Map,l.gc=new vi(it.comparator)}(t),t.vc=!1,yield pO(t.remoteStore,!1)}}),HO.apply(this,arguments)}function Gj(n,e,t){return $O.apply(this,arguments)}function $O(){return $O=(0,xe.Z)(function*(n,e,t){const i=rt(n),r=[],s=[];for(const l of e){let u;const g=i._c.get(l);if(g&&0!==g.length){u=yield Ov(i.localStore,yo(g[0]));for(const v of g){const w=i.wc.get(v),I=yield hq(i,w);I.snapshot&&s.push(I.snapshot)}}else{const v=yield wj(i.localStore,l);u=yield Ov(i.localStore,v),yield DO(i,qj(v),l,!1,u.resumeToken)}r.push(u)}return i.dc.nu(s),r}),$O.apply(this,arguments)}function qj(n){return JB(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function mq(n){const e=rt(n);return rt(rt(e.localStore).persistence).$i()}function _q(n,e,t,i){return zO.apply(this,arguments)}function zO(){return zO=(0,xe.Z)(function*(n,e,t,i){const r=rt(n);if(r.vc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield Ej(r.localStore,nU(s[0])),u=vw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Lr.EMPTY_BYTE_STRING);yield ch(r,l,u);break}case"rejected":yield Rv(r.localStore,e,!0),jv(r,e,i);break;default:mt()}}),zO.apply(this,arguments)}function vq(n,e,t){return GO.apply(this,arguments)}function GO(){return GO=(0,xe.Z)(function*(n,e,t){const i=qO(n);if(i.vc){for(const r of e){if(i._c.has(r)){$e("SyncEngine","Adding an already active target "+r);continue}const s=yield wj(i.localStore,r),l=yield Ov(i.localStore,s);yield DO(i,qj(s),l.targetId,!1,l.resumeToken),HS(i.remoteStore,l)}for(const r of t)i._c.has(r)&&(yield Rv(i.localStore,r,!1).then(()=>{Ow(i.remoteStore,r),jv(i,r)}).catch(Yf))}}),GO.apply(this,arguments)}function qO(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sq.bind(null,e),e.dc.nu=K5.bind(null,e.eventManager),e.dc.Pc=Y5.bind(null,e.eventManager),e}function WO(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aq.bind(null,e),e}class Rw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,xe.Z)(function*(){t.serializer=kw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return _j(this.persistence,new mj,e.initialUser,this.serializer)}createPersistence(e){return new LP(RS.zs,this.serializer)}createSharedClientState(e){return new Sj}terminate(){var e=this;return(0,xe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ZO extends Rw{constructor(e,t,i){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,xe.Z)(function*(){yield t().call(i,e),yield i.Vc.initialize(i,e),yield WO(i.Vc.syncEngine),yield Nv(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return _j(this.persistence,new mj,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new aj(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new zG(t,this.persistence);return new $G(e.asyncQueue,i)}createPersistence(e){const t=UP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Ks.withCacheSize(this.cacheSizeBytes):Ks.DEFAULT;return new BP(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,xj(),jS(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Sj}}class Wj extends ZO{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,xe.Z)(function*(){yield t().call(i,e);const r=i.Vc.syncEngine;i.sharedClientState instanceof KP&&(i.sharedClientState.syncEngine={jr:pq.bind(null,r),zr:_q.bind(null,r),Wr:vq.bind(null,r),$i:mq.bind(null,r),Qr:fq.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,xe.Z)(function*(l){yield function gq(n,e){return HO.apply(this,arguments)}(i.Vc.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=xj();if(!KP.D(t))throw new Be(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=UP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new KP(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Hv{initialize(e,t){var i=this;return(0,xe.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>$j(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=uq.bind(null,i.syncEngine),yield pO(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Z5}createDatastore(e){const t=kw(e.databaseInfo.databaseId),i=new k5(e.databaseInfo);return new R5(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=u=>$j(this.syncEngine,u,0),l=Tj.D()?new Tj:new x5,new L5(t,i,r,s,l);var t,i,r,s,l}createSyncEngine(e,t){return function(i,r,s,l,u,g,v){const w=new tq(i,r,s,l,u,g);return v&&(w.vc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return function(){var e=(0,xe.Z)(function*(t){const i=rt(t);$e("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield Fv(i),i.Pu.shutdown(),i.bu.set("Unknown")});return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}function Zj(n,e=10240){let t=0;return{read:()=>(0,xe.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,xe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class zS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wq{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Nr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,xe.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,xe.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.kc();if(null===t)return null;const i=e.xc.decode(t),r=Number(i);isNaN(r)&&e.Mc(`length string (${i}) is not valid number`);const s=yield e.$c(r);return new Q5(JSON.parse(s),t.length+r)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,xe.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}$c(e){var t=this;return(0,xe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const i=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class Eq{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Be(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,xe.Z)(function*(s,l){const u=rt(s),g=ww(u.serializer)+"/documents",v={documents:l.map(O=>bw(u.serializer,O))},w=yield u.vo("BatchGetDocuments",g,v,l.length),I=new Map;w.forEach(O=>{const N=function H6(n,e){return"found"in e?function(t,i){At(!!i.found);const r=Mu(t,i.found.name),s=dr(i.found.updateTime),l=i.found.createTime?dr(i.found.createTime):kt.min(),u=new Is({mapValue:{fields:i.found.fields}});return Ti.newFoundDocument(r,s,l,u)}(n,e):"missing"in e?function(t,i){At(!!i.missing),At(!!i.readTime);const r=Mu(t,i.missing),s=dr(i.readTime);return Ti.newNoDocument(r,s)}(n,e):mt()}(u.serializer,O);I.set(N.key.toString(),N)});const M=[];return l.forEach(O=>{const N=I.get(O.toString());At(!!N),M.push(N)}),M}),function(s,l){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new xv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=it.fromPath(r);e.mutations.push(new vP(s,e.precondition(s)))}),yield(i=(0,xe.Z)(function*(r,s){const l=rt(r),u=ww(l.serializer)+"/documents",g={writes:s.map(v=>Ew(l.serializer,v))};yield l.Io("Commit",u,g)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw mt();t=kt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Be(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(kt.min())?Fi.exists(!1):Fi.updateTime(t):Fi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(kt.min()))throw new Be(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fi.updateTime(t)}return Fi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Cq{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new QP(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,xe.Z)(function*(){const t=new Eq(e.datastore),i=e.qc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Uc(s)}))}).catch(r=>{e.Uc(r)})}))}qc(e){try{const t=this.updateFunction(e);return!rw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!bU(t)}return!1}}class Dq{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=ts.UNAUTHENTICATED,this.clientId=_B.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,xe.Z)(function*(u){$e("FirestoreClient","Received user=",u.uid),yield s.authCredentialListener(u),s.user=u});return function(u){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>($e("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,xe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Be(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Vv(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function GS(n,e){return KO.apply(this,arguments)}function KO(){return KO=(0,xe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,xe.Z)(function*(s){i.isEqual(s)||(yield vj(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),KO.apply(this,arguments)}function YO(n,e){return QO.apply(this,arguments)}function QO(){return QO=(0,xe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield XO(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>Fj(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Fj(e.remoteStore,s)),n._onlineComponents=e}),QO.apply(this,arguments)}function Kj(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function XO(n){return JO.apply(this,arguments)}function JO(){return JO=(0,xe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield GS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Kj(t))throw t;Al("Error using user provided cache. Falling back to memory cache: "+t),yield GS(n,new Rw)}}else $e("FirestoreClient","Using default OfflineComponentProvider"),yield GS(n,new Rw);return n._offlineComponents}),JO.apply(this,arguments)}function qS(n){return eR.apply(this,arguments)}function eR(){return eR=(0,xe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($e("FirestoreClient","Using user provided OnlineComponentProvider"),yield YO(n,n._uninitializedComponentsProvider._online)):($e("FirestoreClient","Using default OnlineComponentProvider"),yield YO(n,new Hv))),n._onlineComponents}),eR.apply(this,arguments)}function Yj(n){return XO(n).then(e=>e.persistence)}function WS(n){return XO(n).then(e=>e.localStore)}function Qj(n){return qS(n).then(e=>e.remoteStore)}function tR(n){return qS(n).then(e=>e.syncEngine)}function $v(n){return nR.apply(this,arguments)}function nR(){return nR=(0,xe.Z)(function*(n){const e=yield qS(n),t=e.eventManager;return t.onListen=nq.bind(null,e.syncEngine),t.onUnlisten=iq.bind(null,e.syncEngine),t}),nR.apply(this,arguments)}function Jj(n,e,t={}){const i=new Nr;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(r,s,l,u,g){const v=new zS({next:I=>{s.enqueueAndForget(()=>yO(r,w));const M=I.docs.has(l);!M&&I.fromCache?g.reject(new Be(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&I.fromCache&&u&&"server"===u.source?g.reject(new Be(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new EO(Dv(l.path),v,{includeMetadataChanges:!0,Ku:!0});return _O(r,w)}(yield $v(n),n.asyncQueue,e,t,i)})),i.promise}function eH(n,e,t={}){const i=new Nr;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(r,s,l,u,g){const v=new zS({next:I=>{s.enqueueAndForget(()=>yO(r,w)),I.fromCache&&"server"===u.source?g.reject(new Be(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new EO(l,v,{includeMetadataChanges:!0,Ku:!0});return _O(r,w)}(yield $v(n),n.asyncQueue,e,t,i)})),i.promise}function tH(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const nH=new Map;function iR(n,e,t){if(!t)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iH(n,e,t,i){if(!0===e&&!0===i)throw new Be(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rH(n){if(!it.isDocumentKey(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sH(n){if(it.isDocumentKey(n))throw new Be(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return"function"==typeof n?"a function":mt()}function Dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Be(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ZS(n);throw new Be(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function oH(n,e){if(e<=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class aH{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new Be(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Be(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=tH(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new Be(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Be(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Be(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fw{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aH({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Be(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aH(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new kG;switch(t.type){case"firstParty":return new FG(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Be(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nH.get(e);t&&($e("ComponentProvider","Removing Datastore"),nH.delete(e),t.terminate())}(this),Promise.resolve()}}class xi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ku(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xi(this.firestore,e,this._key)}}class Ss{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ss(this.firestore,e,this._query)}}class ku extends Ss{constructor(e,t,i){super(e,t,Dv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xi(this.firestore,null,new it(e))}withConverter(e){return new ku(this.firestore,e,this._path)}}function cH(n,e,...t){if(n=(0,Fn.m9)(n),iR("collection","path",e),n instanceof Fw){const i=xn.fromString(e,...t);return sH(i),new ku(n,null,i)}{if(!(n instanceof xi||n instanceof ku))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(xn.fromString(e,...t));return sH(i),new ku(n.firestore,null,i)}}function KS(n,e,...t){if(n=(0,Fn.m9)(n),1===arguments.length&&(e=_B.A()),iR("doc","path",e),n instanceof Fw){const i=xn.fromString(e,...t);return rH(i),new xi(n,null,new it(i))}{if(!(n instanceof xi||n instanceof ku))throw new Be(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(xn.fromString(e,...t));return rH(i),new xi(n.firestore,n instanceof ku?n.converter:null,new it(i))}}function uH(n,e){return n=(0,Fn.m9)(n),e=(0,Fn.m9)(e),(n instanceof xi||n instanceof ku)&&(e instanceof xi||e instanceof ku)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function rR(n,e){return n=(0,Fn.m9)(n),e=(0,Fn.m9)(e),n instanceof Ss&&e instanceof Ss&&n.firestore===e.firestore&&dw(n._query,e._query)&&n.converter===e.converter}class Rq{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new QP(this,"async_queue_retry"),this.Xc=()=>{const t=jS();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=jS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=jS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Nr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,xe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Qf(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{throw this.Wc=i,this.Hc=!1,ur("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=t,t}enqueueAfterDelay(e,t,i){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=mO.createAndSchedule(this,e,t,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&mt()}verifyOperationInProgress(){}sa(){var e=this;return(0,xe.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function sR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class Fq{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ai extends Fw{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new Rq,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||dH(this),this._firestoreClient.terminate()}}function hr(n){return n._firestoreClient||dH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function dH(n){var e,t,i;const r=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new d6(n._databaseId,u,n._persistenceKey,(v=r).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,tH(v.experimentalLongPollingOptions),v.useFetchStreams));var u,v;n._firestoreClient=new Dq(n._authCredentials,n._appCheckCredentials,n._queue,s),(null===(t=r.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function hH(n,e,t){const i=new Nr;return n.asyncQueue.enqueue((0,xe.Z)(function*(){try{yield GS(n,t),yield YO(n,e),i.resolve()}catch(r){const s=r;if(!Kj(s))throw s;Al("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function fH(n){if(n._initialized||n._terminated)throw new Be(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(Lr.fromBase64String(e))}catch(t){throw new Be(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pu(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class uh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Be(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vm{constructor(e){this._methodName=e}}class YS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Be(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Be(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return en(this._lat,e._lat)||en(this._long,e._long)}}const qq=/^__.*__$/;class Wq{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new ah(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tv(e,this.data,t,this.fieldTransforms)}}class pH{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ah(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class QS{constructor(e,t,i,r,s,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new QS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return eT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(gH(this.ca)&&qq.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Zq{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||kw(e)}ya(e,t,i,r=!1){return new QS({ca:e,methodName:t,ga:i,path:Xi.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ym(n){const e=n._freezeSettings(),t=kw(n._databaseId);return new Zq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XS(n,e,t,i,r,s={}){const l=n.ya(s.merge||s.mergeFields?2:0,e,t,r);cR("Data must be an object, but it was:",l,i);const u=vH(i,l);let g,v;if(s.merge)g=new Yo(l.fieldMask),v=l.fieldTransforms;else if(s.mergeFields){const w=[];for(const I of s.mergeFields){const M=Vw(e,I,t);if(!l.contains(M))throw new Be(ge.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);bH(w,M)||w.push(M)}g=new Yo(w),v=l.fieldTransforms.filter(I=>g.covers(I.field))}else g=null,v=l.fieldTransforms;return new Wq(new Is(u),g,v)}class Lw extends vm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lw}}function mH(n,e,t){return new QS({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class oR extends vm{_toFieldTransform(e){return new gw(e.path,new Iv)}isEqual(e){return e instanceof oR}}class Kq extends vm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=mH(this,e,!0),i=this.pa.map(s=>bm(s,t)),r=new cm(i);return new gw(e.path,r)}isEqual(e){return this===e}}class Yq extends vm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=mH(this,e,!0),i=this.pa.map(s=>bm(s,t)),r=new um(i);return new gw(e.path,r)}isEqual(e){return this===e}}class Qq extends vm{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Sv(e.serializer,cU(e.serializer,this.Ia));return new gw(e.path,t)}isEqual(e){return this===e}}function aR(n,e,t,i){const r=n.ya(1,e,t);cR("Data must be an object, but it was:",r,i);const s=[],l=Is.empty();Xf(i,(g,v)=>{const w=JS(e,g,t);v=(0,Fn.m9)(v);const I=r.da(w);if(v instanceof Lw)s.push(w);else{const M=bm(v,I);null!=M&&(s.push(w),l.set(w,M))}});const u=new Yo(s);return new pH(l,u,r.fieldTransforms)}function lR(n,e,t,i,r,s){const l=n.ya(1,e,t),u=[Vw(e,i,t)],g=[r];if(s.length%2!=0)throw new Be(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)u.push(Vw(e,s[M])),g.push(s[M+1]);const v=[],w=Is.empty();for(let M=u.length-1;M>=0;--M)if(!bH(v,u[M])){const O=u[M];let N=g[M];N=(0,Fn.m9)(N);const H=l.da(O);if(N instanceof Lw)v.push(O);else{const Y=bm(N,H);null!=Y&&(v.push(O),w.set(O,Y))}}const I=new Yo(v);return new pH(w,I,l.fieldTransforms)}function _H(n,e,t,i=!1){return bm(t,n.ya(i?4:3,e))}function bm(n,e){if(yH(n=(0,Fn.m9)(n)))return cR("Unsupported field value:",e,n),vH(n,e);if(n instanceof vm)return function(t,i){if(!gH(i.ca))throw i._a(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const l of t){let u=bm(l,i.wa(s));null==u&&(u={nullValue:"NULL_VALUE"}),r.push(u),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,Fn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return cU(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Ri.fromDate(t);return{timestampValue:Av(i.serializer,r)}}if(t instanceof Ri){const r=new Ri(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Av(i.serializer,r)}}if(t instanceof YS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pu)return{bytesValue:MU(i.serializer,t._byteString)};if(t instanceof xi){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:IP(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i._a(`Unsupported field value: ${ZS(t)}`)}(n,e)}function vH(n,e){const t={};return PB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xf(n,(i,r)=>{const s=bm(r,e.ha(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function yH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ri||n instanceof YS||n instanceof Pu||n instanceof xi||n instanceof vm)}function cR(n,e,t){if(!yH(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=ZS(t);throw e._a("an object"===i?n+" a custom object":n+" "+i)}var i}function Vw(n,e,t){if((e=(0,Fn.m9)(e))instanceof uh)return e._internalPath;if("string"==typeof e)return JS(n,e);throw eT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Xq=new RegExp("[~\\*/\\[\\]]");function JS(n,e,t){if(e.search(Xq)>=0)throw eT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new uh(...e.split("."))._internalPath}catch(i){throw eT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function eT(n,e,t,i,r){const s=i&&!i.isEmpty(),l=void 0!==r;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let g="";return(s||l)&&(g+=" (found",s&&(g+=` in field ${i}`),l&&(g+=` in document ${r}`),g+=")"),new Be(ge.INVALID_ARGUMENT,u+n+g)}function bH(n,e){return n.some(t=>t.isEqual(e))}class Bw{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Jq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Jq extends Bw{data(){return super.data()}}function tT(n,e){return"string"==typeof e?JS(n,e):e instanceof uh?e._internalPath:e._delegate._internalPath}function wH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Be(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uR{}class Uw extends uR{}function dp(n,e,...t){let i=[];e instanceof uR&&i.push(e),i=i.concat(t),function(r){const s=r.filter(u=>u instanceof zv).length,l=r.filter(u=>u instanceof jw).length;if(s>1||s>0&&l>0)throw new Be(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class jw extends Uw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new jw(e,t,i)}_apply(e){const t=this._parse(e);return IH(e._query,t),new Ss(e.firestore,e.converter,gP(e._query,t))}_parse(e){const t=ym(e.firestore);return function(r,s,l,u,g,v,w){let I;if(g.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){DH(w,v);const M=[];for(const O of w)M.push(CH(u,r,O));I={arrayValue:{values:M}}}else I=CH(u,r,w)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||DH(w,v),I=_H(l,"where",w,"in"===v||"not-in"===v);return Cn.create(g,v,I)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class zv extends uR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zv(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:Xn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let s=i;const l=r.getFlattenedFilters();for(const u of l)IH(s,u),s=gP(s,u)}(e._query,t),new Ss(e.firestore,e.converter,gP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dR extends Uw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dR(e,t)}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Ev(r,s);return function(u,g){if(null===fP(u)){const v=yS(u);null!==v&&SH(0,v,g.field)}}(i,l),l}(e._query,this._field,this._direction);return new Ss(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new sh(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class nT extends Uw{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new nT(e,t,i)}_apply(e){return new Ss(e.firestore,e.converter,bS(e._query,this._limit,this._limitType))}}class iT extends Uw{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new iT(e,t,i)}_apply(e){const t=EH(e,this.type,this._docOrFields,this._inclusive);return new Ss(e.firestore,e.converter,(r=t,new sh((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class rT extends Uw{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new rT(e,t,i)}_apply(e){const t=EH(e,this.type,this._docOrFields,this._inclusive);return new Ss(e.firestore,e.converter,(r=t,new sh((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function EH(n,e,t,i){if(t[0]=(0,Fn.m9)(t[0]),t[0]instanceof Bw)return function(r,s,l,u,g){if(!u)throw new Be(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const w of lm(r))if(w.field.isKeyField())v.push(om(s,u.key));else{const I=u.data.field(w.field);if(hS(I))throw new Be(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const M=w.field.canonicalString();throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}v.push(I)}return new rp(v,g)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=ym(n.firestore);return function(s,l,u,g,v,w){const I=s.explicitOrderBy;if(v.length>I.length)throw new Be(ge.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let O=0;O<v.length;O++){const N=v[O];if(I[O].field.isKeyField()){if("string"!=typeof N)throw new Be(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof N}`);if(!pP(s)&&-1!==N.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${N}' contains a slash.`);const H=s.path.child(xn.fromString(N));if(!it.isDocumentKey(H))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${H}' is not because it contains an odd number of segments.`);const Y=new it(H);M.push(om(l,Y))}else{const H=_H(u,g,N);M.push(H)}}return new rp(M,w)}(n._query,n.firestore._databaseId,r,e,t,i)}}function CH(n,e,t){if("string"==typeof(t=(0,Fn.m9)(t))){if(""===t)throw new Be(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pP(e)&&-1!==t.indexOf("/"))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(xn.fromString(t));if(!it.isDocumentKey(i))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return om(n,new it(i))}if(t instanceof xi)return om(n,t._key);throw new Be(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZS(t)}.`)}function DH(n,e){if(!Array.isArray(n)||0===n.length)throw new Be(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IH(n,e){if(e.isInequality()){const i=yS(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=fP(n);null!==s&&SH(0,r,s)}const t=function(i,r){for(const s of i)for(const l of s.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Be(ge.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function SH(n,e,t){if(!t.isEqual(e))throw new Be(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class hR{convertValue(e,t="none"){switch(np(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ji(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Xf(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new YS(Ji(e.latitude),Ji(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=fS(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ow(e));default:return null}}convertTimestamp(e){const t=Jf(e);return new Ri(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=xn.fromString(e);At(UU(i));const r=new ep(i.get(1),i.get(3)),s=new it(i.popFirst(5));return r.isEqual(t)||ur(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function sT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class c7 extends hR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,t)}}class wm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dh extends Bw{constructor(e,t,i,r,s,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(tT("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Hw extends dh{data(e={}){return super.data(e)}}class hp{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new wm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Hw(this._firestore,this._userDataWriter,i.key,i,new wm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Be(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new Hw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new wm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const u=new Hw(i._firestore,i._userDataWriter,l.doc.key,l.doc,new wm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,v=-1;return 0!==l.type&&(g=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),v=s.indexOf(l.doc.key)),{type:d7(l.type),doc:u,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function d7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function xH(n,e){return n instanceof dh&&e instanceof dh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof hp&&e instanceof hp&&n._firestore===e._firestore&&rR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class fp extends hR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,t)}}function AH(n,e,t){n=Dn(n,xi);const i=Dn(n.firestore,Ai),r=sT(n.converter,e,t);return Gv(i,[XS(ym(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Fi.none())])}function MH(n,e,t,...i){n=Dn(n,xi);const r=Dn(n.firestore,Ai),s=ym(r);let l;return l="string"==typeof(e=(0,Fn.m9)(e))||e instanceof uh?lR(s,"updateDoc",n._key,e,t,i):aR(s,"updateDoc",n._key,e),Gv(r,[l.toMutation(n._key,Fi.exists(!0))])}function kH(n,...e){var t,i,r;n=(0,Fn.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||sR(e[l])||(s=e[l],l++);const u={includeMetadataChanges:s.includeMetadataChanges};if(sR(e[l])){const I=e[l];e[l]=null===(t=I.next)||void 0===t?void 0:t.bind(I),e[l+1]=null===(i=I.error)||void 0===i?void 0:i.bind(I),e[l+2]=null===(r=I.complete)||void 0===r?void 0:r.bind(I)}let g,v,w;if(n instanceof xi)v=Dn(n.firestore,Ai),w=Dv(n._key.path),g={next:I=>{e[l]&&e[l](fR(v,n,I))},error:e[l+1],complete:e[l+2]};else{const I=Dn(n,Ss);v=Dn(I.firestore,Ai),w=I._query;const M=new fp(v);g={next:O=>{e[l]&&e[l](new hp(v,M,I,O))},error:e[l+1],complete:e[l+2]},wH(n._query)}return function(I,M,O,N){const H=new zS(N),Y=new EO(M,H,O);return I.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return _O(yield $v(I),Y)})),()=>{H.Dc(),I.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return yO(yield $v(I),Y)}))}}(hr(v),w,u,g)}function Gv(n,e){return function(t,i){const r=new Nr;return t.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function rq(n,e,t){return TO.apply(this,arguments)}(yield tR(t),i,r)})),r.promise}(hr(n),e)}function fR(n,e,t){const i=t.docs.get(e._key),r=new fp(n);return new dh(n,r,e._key,i,new wm(t.hasPendingWrites,t.fromCache),e.converter)}const A7={maxAttempts:5};class PH{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ym(e)}set(e,t,i){this._verifyNotCommitted();const r=pp(e,this._firestore),s=sT(r.converter,t,i),l=XS(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,Fi.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=pp(e,this._firestore);let l;return l="string"==typeof(t=(0,Fn.m9)(t))||t instanceof uh?lR(this._dataReader,"WriteBatch.update",s._key,t,i,r):aR(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,Fi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pp(e,this._firestore);return this._mutations=this._mutations.concat(new xv(t._key,Fi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pp(n,e){if((n=(0,Fn.m9)(n)).firestore!==e)throw new Be(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class M7 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ym(e)}get(e){const t=pp(e,this._firestore),i=new c7(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return mt();const s=r[0];if(s.isFoundDocument())return new Bw(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new Bw(this._firestore,i,t._key,null,t.converter);throw mt()})}set(e,t,i){const r=pp(e,this._firestore),s=sT(r.converter,t,i),l=XS(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(e,t,i,...r){const s=pp(e,this._firestore);let l;return l="string"==typeof(t=(0,Fn.m9)(t))||t instanceof uh?lR(this._dataReader,"Transaction.update",s._key,t,i,r):aR(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=pp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=pp(e,this._firestore),i=new fp(this._firestore);return super.get(e).then(r=>new dh(this._firestore,i,t._key,r._document,new wm(!1,!1),t.converter))}}function pR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Be("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RH(){if("undefined"==typeof Uint8Array)throw new Be("unimplemented","Uint8Arrays are not available in this environment.")}function FH(){if(!function c6(){return"undefined"!=typeof atob}())throw new Be("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){(function(t){vv=t})(Jg.SDK_VERSION),(0,Jg._registerComponent)(new OI.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),l=new Ai(new OG(t.getProvider("auth-internal")),new NG(t.getProvider("app-check-internal")),function(u,g){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Be(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ep(u.options.projectId,g)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),(0,Jg.registerVersion)(pB,"3.13.0",n),(0,Jg.registerVersion)(pB,"3.13.0","esm2017")}();class $w{constructor(e){this._delegate=e}static fromBase64String(e){return FH(),new $w(Pu.fromBase64String(e))}static fromUint8Array(e){return RH(),new $w(Pu.fromUint8Array(e))}toBase64(){return FH(),this._delegate.toBase64()}toUint8Array(){return RH(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gR(n){return function B7(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class U7{enableIndexedDbPersistence(e,t){return function Lq(n,e){fH(n=Dn(n,Ai));const t=hr(n);if(t._uninitializedComponentsProvider)throw new Be(ge.FAILED_PRECONDITION,"SDK cache is already specified.");Al("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new Hv;return hH(t,r,new ZO(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Vq(n){fH(n=Dn(n,Ai));const e=hr(n);if(e._uninitializedComponentsProvider)throw new Be(ge.FAILED_PRECONDITION,"SDK cache is already specified.");Al("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new Hv;return hH(e,i,new Wj(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Bq(n){if(n._initialized&&!n._terminated)throw new Be(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{yield function(){var t=(0,xe.Z)(function*(i){if(!Cc.D())return Promise.resolve();const r=i+"main";yield Cc.delete(r)});return function(i){return t.apply(this,arguments)}}()(UP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}(e._delegate)}}class NH{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof ep||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Al("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function lH(n,e,t,i={}){var r;const s=(n=Dn(n,Fw))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==l&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:l,ssl:!1})),i.mockUserToken){let u,g;if("string"==typeof i.mockUserToken)u=i.mockUserToken,g=ts.MOCK_USER;else{u=(0,Fn.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new Be(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ts(v)}n._authCredentials=new PG(new gB(u,g))}}(this._delegate,e,t,i)}enableNetwork(){return function jq(n){return function Iq(n){return n.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Yj(n),t=yield Qj(n);return e.setNetworkEnabled(!0),function(i){const r=rt(i);return r.vu.delete(0),Pw(r)}(t)}))}(hr(n=Dn(n,Ai)))}(this._delegate)}disableNetwork(){return function Hq(n){return function Sq(n){return n.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Yj(n),t=yield Qj(n);return e.setNetworkEnabled(!1),(i=(0,xe.Z)(function*(r){const s=rt(r);s.vu.add(0),yield Fv(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(hr(n=Dn(n,Ai)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,iH("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Uq(n){return function(e){const t=new Nr;return e.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function lq(n,e){return PO.apply(this,arguments)}(yield tR(e),t)})),t.promise}(hr(n=Dn(n,Ai)))}(this._delegate)}onSnapshotsInSync(e){return function b7(n,e){return function Aq(n,e){const t=new zS(e);return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return i=yield $v(n),r=t,rt(i).ku.add(r),void r.next();var i,r})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return i=yield $v(n),r=t,void rt(i).ku.delete(r);var i,r}))}}(hr(n=Dn(n,Ai)),sR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Be("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qv(this,cH(this._delegate,e))}catch(t){throw bo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ml(this,KS(this._delegate,e))}catch(t){throw bo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wo(this,function Oq(n,e){if(n=Dn(n,Fw),iR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Be(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ss(n,null,function(t){return new sh(xn.emptyPath(),t)}(e))}(this._delegate,e))}catch(t){throw bo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function k7(n,e,t){n=Dn(n,Ai);const i=Object.assign(Object.assign({},A7),t);return function(r){if(r.maxAttempts<1)throw new Be(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,l){const u=new Nr;return r.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){const g=yield function Xj(n){return qS(n).then(e=>e.datastore)}(r);new Cq(r.asyncQueue,g,l,s,u).run()})),u.promise}(hr(n),r=>e(new M7(n,r)),i)}(this._delegate,t=>e(new LH(this,t)))}batch(){return hr(this._delegate),new VH(new PH(this._delegate,e=>Gv(this._delegate,e)))}loadBundle(e){return function $q(n,e){const t=hr(n=Dn(n,Ai)),i=new Fq;return function Mq(n,e,t,i){const r=function(s,l){let u;return u="string"==typeof s?EU().encode(s):s,g=function(g,v){if(g instanceof Uint8Array)return Zj(g,v);if(g instanceof ArrayBuffer)return Zj(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new wq(g,l);var g}(t,kw(e));n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){!function yq(n,e,t){const i=rt(n);var r;(r=(0,xe.Z)(function*(s,l,u){try{const g=yield l.getMetadata();if(yield function(M,O){const N=rt(M),H=dr(O.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",Y=>N.qs.getBundleMetadata(Y,O.id)).then(Y=>!!Y&&Y.createTime.compareTo(H)>=0)}(s.localStore,g))return yield l.close(),u._completeWith({taskState:"Success",documentsLoaded:(M=g).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);u._updateProgress(Vj(g));const v=new X5(g,s.localStore,l.serializer);let w=yield l.bc();for(;w;){const M=yield v.zu(w);M&&u._updateProgress(M),w=yield l.bc()}const I=yield v.complete();return yield ch(s,I.Ju,void 0),yield function(M,O){const N=rt(M);return N.persistence.runTransaction("Save bundle","readwrite",H=>N.qs.saveBundleMetadata(H,O))}(s.localStore,g),u._completeWith(I.progress),Promise.resolve(I.Hu)}catch(g){return Al("SyncEngine",`Loading bundle failed with ${g}`),u._failWith(g),Promise.resolve(new Set)}var M}),function(s,l,u){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield tR(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function zq(n,e){return function kq(n,e){return n.asyncQueue.enqueue((0,xe.Z)(function*(){return function(t,i){const r=rt(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield WS(n),e)}))}(hr(n=Dn(n,Ai)),e).then(t=>t?new Ss(n,null,t.query):null)}(this._delegate,e).then(t=>t?new wo(this,t):null)}}class oT extends hR{constructor(e){super(),this.firestore=e}convertBytes(e){return new $w(new Pu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ml.forKey(t,this.firestore,null)}}class LH{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oT(e)}get(e){const t=Cm(e);return this._delegate.get(t).then(i=>new zw(this._firestore,new dh(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Cm(e);return i?(pR("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Cm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Cm(e);return this._delegate.delete(t),this}}class VH{constructor(e){this._delegate=e}set(e,t,i){const r=Cm(e);return i?(pR("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Cm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Cm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Em{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Hw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gw(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Em.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Em(e,new oT(e),t),r.set(t,s)),s}}Em.INSTANCES=new WeakMap;class Ml{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oT(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Be("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ml(t,new xi(t._delegate,i,new it(e)))}static forKey(e,t,i){return new Ml(t,new xi(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new qv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qv(this.firestore,cH(this._delegate,e))}catch(t){throw bo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Fn.m9)(e))instanceof xi&&uH(this._delegate,e)}set(e,t){t=pR("DocumentReference.set",t);try{return t?AH(this._delegate,e,t):AH(this._delegate,e)}catch(i){throw bo(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?MH(this._delegate,e):MH(this._delegate,e,t,...i)}catch(r){throw bo(r,"updateDoc()","DocumentReference.update()")}}delete(){return function v7(n){return Gv(Dn(n.firestore,Ai),[new xv(n._key,Fi.none())])}(this._delegate)}onSnapshot(...e){const t=BH(e),i=UH(e,r=>new zw(this.firestore,new dh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return kH(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function f7(n){n=Dn(n,xi);const e=Dn(n.firestore,Ai),t=hr(e),i=new fp(e);return function Tq(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(i=(0,xe.Z)(function*(r,s,l){try{const u=yield function(g,v){const w=rt(g);return w.persistence.runTransaction("read document","readonly",I=>w.localDocuments.getDocument(I,v))}(r,s);u.isFoundDocument()?l.resolve(u):u.isNoDocument()?l.resolve(null):l.reject(new Be(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const g=Vv(u,`Failed to get document '${s} from cache`);l.reject(g)}}),function(r,s,l){return i.apply(this,arguments)})(yield WS(n),e,t);var i})),t.promise}(t,n._key).then(r=>new dh(e,i,n._key,r,new wm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function p7(n){n=Dn(n,xi);const e=Dn(n.firestore,Ai);return Jj(hr(e),n._key,{source:"server"}).then(t=>fR(e,n,t))}(this._delegate):function h7(n){n=Dn(n,xi);const e=Dn(n.firestore,Ai);return Jj(hr(e),n._key).then(t=>fR(e,n,t))}(this._delegate),t.then(i=>new zw(this.firestore,new dh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Ml(this.firestore,this._delegate.withConverter(e?Em.getInstance(this.firestore,e):null))}}function bo(n,e,t){return n.message=n.message.replace(e,t),n}function BH(n){for(const e of n)if("object"==typeof e&&!gR(e))return e;return{}}function UH(n,e){var t,i;let r;return r=gR(n[0])?n[0]:gR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class zw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ml(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return xH(this._delegate,e._delegate)}}class Gw extends zw{data(e){const t=this._delegate.data(e);return function MG(n,e){n||mt()}(void 0!==t),t}}class wo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oT(e)}where(e,t,i){try{return new wo(this.firestore,dp(this._delegate,function e7(n,e,t){const i=e,r=tT("where",n);return jw._create(r,i,t)}(e,t,i)))}catch(r){throw bo(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new wo(this.firestore,dp(this._delegate,function t7(n,e="asc"){const t=e,i=tT("orderBy",n);return dR._create(i,t)}(e,t)))}catch(i){throw bo(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new wo(this.firestore,dp(this._delegate,function n7(n){return oH("limit",n),nT._create("limit",n,"F")}(e)))}catch(t){throw bo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new wo(this.firestore,dp(this._delegate,function r7(n){return oH("limitToLast",n),nT._create("limitToLast",n,"L")}(e)))}catch(t){throw bo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new wo(this.firestore,dp(this._delegate,function s7(...n){return iT._create("startAt",n,!0)}(...e)))}catch(t){throw bo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new wo(this.firestore,dp(this._delegate,function o7(...n){return iT._create("startAfter",n,!1)}(...e)))}catch(t){throw bo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new wo(this.firestore,dp(this._delegate,function a7(...n){return rT._create("endBefore",n,!1)}(...e)))}catch(t){throw bo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new wo(this.firestore,dp(this._delegate,function l7(...n){return rT._create("endAt",n,!0)}(...e)))}catch(t){throw bo(t,"endAt()","Query.endAt()")}}isEqual(e){return rR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function m7(n){n=Dn(n,Ss);const e=Dn(n.firestore,Ai),t=hr(e),i=new fp(e);return function xq(n,e){const t=new Nr;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(i=(0,xe.Z)(function*(r,s,l){try{const u=yield LS(r,s,!0),g=new jj(s,u.ir),v=g.sc(u.documents),w=g.applyChanges(v,!1);l.resolve(w.snapshot)}catch(u){const g=Vv(u,`Failed to execute query '${s} against cache`);l.reject(g)}}),function(r,s,l){return i.apply(this,arguments)})(yield WS(n),e,t);var i})),t.promise}(t,n._query).then(r=>new hp(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function _7(n){n=Dn(n,Ss);const e=Dn(n.firestore,Ai),t=hr(e),i=new fp(e);return eH(t,n._query,{source:"server"}).then(r=>new hp(e,i,n,r))}(this._delegate):function g7(n){n=Dn(n,Ss);const e=Dn(n.firestore,Ai),t=hr(e),i=new fp(e);return wH(n._query),eH(t,n._query).then(r=>new hp(e,i,n,r))}(this._delegate),t.then(i=>new mR(this.firestore,new hp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=BH(e),i=UH(e,r=>new mR(this.firestore,new hp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return kH(this._delegate,t,i)}withConverter(e){return new wo(this.firestore,this._delegate.withConverter(e?Em.getInstance(this.firestore,e):null))}}class H7{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new wo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new H7(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Gw(this._firestore,i))})}isEqual(e){return xH(this._delegate,e._delegate)}}class qv extends wo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ml(this.firestore,e):null}doc(e){try{return new Ml(this.firestore,void 0===e?KS(this._delegate):KS(this._delegate,e))}catch(t){throw bo(t,"doc()","CollectionReference.doc()")}}add(e){return function y7(n,e){const t=Dn(n.firestore,Ai),i=KS(n),r=sT(n.converter,e);return Gv(t,[XS(ym(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Fi.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Ml(this.firestore,t))}isEqual(e){return uH(this._delegate,e._delegate)}withConverter(e){return new qv(this.firestore,this._delegate.withConverter(e?Em.getInstance(this.firestore,e):null))}}function Cm(n){return Dn(n,xi)}class _R{constructor(...e){this._delegate=new uh(...e)}static documentId(){return new _R(Xi.keyField().canonicalString())}isEqual(e){return(e=(0,Fn.m9)(e))instanceof uh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Dm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function O7(){return new oR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Dm(e)}static delete(){const e=function P7(){return new Lw("deleteField")}();return e._methodName="FieldValue.delete",new Dm(e)}static arrayUnion(...e){const t=function R7(...n){return new Kq("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Dm(t)}static arrayRemove(...e){const t=function F7(...n){return new Yq("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Dm(t)}static increment(e){const t=function N7(n){return new Qq("increment",n)}(e);return t._methodName="FieldValue.increment",new Dm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $7={Firestore:NH,GeoPoint:YS,Timestamp:Ri,Blob:$w,Transaction:LH,WriteBatch:VH,DocumentReference:Ml,DocumentSnapshot:zw,Query:wo,QueryDocumentSnapshot:Gw,QuerySnapshot:mR,CollectionReference:qv,FieldPath:_R,FieldValue:Dm,setLogLevel:function j7(n){!function AG(n){Kf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function G7(n){(function z7(n,e){n.INTERNAL.registerComponent(new OI.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},$7)))})(n,(e,t)=>new NH(e,t,new U7)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(w4.Z);var aT=L(5363),q7=L(6063);class W7 extends dn.x{constructor(e=1/0,t=1/0,i=q7.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;t||(i.push(e),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!e.closed;l+=i?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const l=t.now();let u=0;for(let g=1;g<i.length&&i[g]<=l;g+=2)u=g;u&&i.splice(0,u+1)}}}var Z7=L(3099);function jH(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=null!=n?n:1/0,(0,Z7.B)({connector:()=>new W7(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function HH(n,e){return(0,hs.m)(e)?Zi(()=>n,e):Zi(()=>n)}var vR=L(9468);L(259);const bR=new Map,zH={activated:!1,tokenObservers:[]},J7={initialized:!1,enabled:!1};function er(n){return bR.get(n)||Object.assign({},zH)}function cT(){return J7}class o8{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,xe.Z)(function*(){t.stop();try{t.pending=new Fn.BH,yield function a8(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Fn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ts=new Fn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ER(n){if(!er(n).activated)throw Ts.create("use-before-activation",{appName:n.name})}function hT(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,xe.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const I=yield r.getHeartbeatsHeader();I&&(i["X-Firebase-Client"]=I)}const s={method:"POST",body:JSON.stringify(e),headers:i};let l,u;try{l=yield fetch(n,s)}catch(I){throw Ts.create("fetch-network-error",{originalErrorMessage:null==I?void 0:I.message})}if(200!==l.status)throw Ts.create("fetch-status-error",{httpStatus:l.status});try{u=yield l.json()}catch(I){throw Ts.create("fetch-parse-error",{originalErrorMessage:null==I?void 0:I.message})}const g=u.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});const v=1e3*Number(g[1]),w=Date.now();return{token:u.token,expireTimeMillis:w+v,issuedAtTimeMillis:w}}),DR.apply(this,arguments)}function qH(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const qw="firebase-app-check-store";let fT=null;function ZH(){return fT||(fT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Ts.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(qw,{keyPath:"compositeKey"})}}catch(t){e(Ts.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),fT)}function IR(){return IR=(0,xe.Z)(function*(n,e){const i=(yield ZH()).transaction(qw,"readwrite"),s=i.objectStore(qw).put({compositeKey:n,value:e});return new Promise((l,u)=>{s.onsuccess=g=>{l()},i.onerror=g=>{var v;u(Ts.create("storage-set",{originalErrorMessage:null===(v=g.target.error)||void 0===v?void 0:v.message}))}})}),IR.apply(this,arguments)}const Ww=new qf.Yd("@firebase/app-check");function xR(n,e){return(0,Fn.hl)()?function p8(n,e){return function KH(n,e){return IR.apply(this,arguments)}(function QH(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ww.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function MR(){return cT().enabled}function kR(){return PR.apply(this,arguments)}function PR(){return PR=(0,xe.Z)(function*(){const n=cT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),PR.apply(this,arguments)}const b8={error:"UNKNOWN_ERROR"};function w8(n){return Fn.US.encodeString(JSON.stringify(n),!1)}function pT(n){return OR.apply(this,arguments)}function OR(){return OR=(0,xe.Z)(function*(n,e=!1){const t=n.app;ER(t);const i=er(t);let s,r=i.token;if(r&&!Wv(r)&&(i.token=void 0,r=void 0),!r){const g=yield i.cachedTokenPromise;g&&(Wv(g)?r=g:yield xR(t,void 0))}if(!e&&r&&Wv(r))return{token:r.token};let u,l=!1;if(MR()){i.exchangeTokenPromise||(i.exchangeTokenPromise=hT(qH(t,yield kR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),l=!0);const g=yield i.exchangeTokenPromise;return yield xR(t,g),i.token=g,{token:g.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),r=yield er(t).exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?Ww.warn(g.message):Ww.error(g),s=g}return r?s?u=Wv(r)?{token:r.token,internalError:s}:t3(s):(u={token:r.token},i.token=r,yield xR(t,r)):u=t3(s),l&&e3(t,u),u}),OR.apply(this,arguments)}function RR(){return RR=(0,xe.Z)(function*(n){const e=n.app;ER(e);const{provider:t}=er(e);if(MR()){const i=yield kR(),{token:r}=yield hT(qH(e,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield t.getToken();return{token:i}}}),RR.apply(this,arguments)}function NR(n,e){const t=er(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function JH(n){const{app:e}=n,t=er(e);let i=t.tokenRefresher;i||(i=function E8(n){const{app:e}=n;return new o8((0,xe.Z)(function*(){let i;if(i=er(e).token?yield pT(n,!0):yield pT(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=er(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function e3(n,e){const t=er(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function Wv(n){return n.expireTimeMillis-Date.now()>0}function t3(n){return{token:w8(b8),error:n}}class C8{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=er(this.app);for(const t of e)NR(this.app,t.next);return Promise.resolve()}}const u3="app-check-internal";!function L8(){(0,Jg._registerComponent)(new OI.wA("app-check",n=>function D8(n,e){return new C8(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(u3).initialize()})),(0,Jg._registerComponent)(new OI.wA(u3,n=>function I8(n){return{getToken:e=>pT(n,e),getLimitedUseToken:()=>function XH(n){return RR.apply(this,arguments)}(n),addTokenListener:e=>function FR(n,e,t,i){const{app:r}=n,s=er(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&Wv(s.token)){const u=s.token;Promise.resolve().then(()=>{t({token:u.token}),JH(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>JH(n))}(n,"INTERNAL",e),removeTokenListener:e=>NR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Jg.registerVersion)("@firebase/app-check","0.8.0")}();class UR{constructor(){return(0,ws.vb)("app-check")}}"undefined"!=typeof window&&window;var H8=L(9260);const h3=new h.OlP("angularfire2.auth.use-emulator"),f3=new h.OlP("angularfire2.auth.settings"),p3=new h.OlP("angularfire2.auth.tenant-id"),g3=new h.OlP("angularfire2.auth.langugage-code"),m3=new h.OlP("angularfire2.auth.use-device-language"),_3=new h.OlP("angularfire.auth.persistence"),v3=(n,e,t,i,r,s,l,u)=>(0,bc.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),i&&(g.tenantId=i),g.languageCode=r,s&&g.useDeviceLanguage(),l)for(const[v,w]of Object.entries(l))g.settings[v]=w;return u&&g.setPersistence(u),g},[t,i,r,s,l,u]);let HR=(()=>{class n{constructor(t,i,r,s,l,u,g,v,w,I,M,O){const N=new dn.x,H=Nt(void 0).pipe((0,aT.Q)(l.outsideAngular),Zi(()=>s.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,2644)))),(0,$t.U)(()=>(0,bc.on)(t,s,i)),(0,$t.U)(Y=>v3(Y,s,u,v,w,I,g,M)),jH({bufferSize:1,refCount:!1}));if(Mc(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Nt(null);else{H.pipe(vu()).subscribe();const he=H.pipe(Zi(Ge=>Ge.getRedirectResult().then(st=>st,()=>null)),ws.iC,jH({bufferSize:1,refCount:!1})),_e=H.pipe(Zi(Ge=>new Ui.y(st=>({unsubscribe:s.runOutsideAngular(()=>Ge.onAuthStateChanged(wt=>st.next(wt),wt=>st.error(wt),()=>st.complete()))})))),Oe=H.pipe(Zi(Ge=>new Ui.y(st=>({unsubscribe:s.runOutsideAngular(()=>Ge.onIdTokenChanged(wt=>st.next(wt),wt=>st.error(wt),()=>st.complete()))}))));this.authState=he.pipe(HH(_e),(0,vR.R)(l.outsideAngular),(0,aT.Q)(l.insideAngular)),this.user=he.pipe(HH(Oe),(0,vR.R)(l.outsideAngular),(0,aT.Q)(l.insideAngular)),this.idToken=this.user.pipe(Zi(Ge=>Ge?(0,ni.D)(Ge.getIdToken()):Nt(null))),this.idTokenResult=this.user.pipe(Zi(Ge=>Ge?(0,ni.D)(Ge.getIdTokenResult()):Nt(null))),this.credential=(0,Nd.T)(he,N,this.authState.pipe(ai(Ge=>!Ge))).pipe((0,$t.U)(Ge=>(null==Ge?void 0:Ge.user)?Ge:null),(0,vR.R)(l.outsideAngular),(0,aT.Q)(l.insideAngular))}return(0,bc.pX)(this,H,s,{spy:{apply:(Y,he,_e)=>{(Y.startsWith("signIn")||Y.startsWith("createUser"))&&_e.then(Oe=>N.next(Oe))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bc.Dh),h.LFG(bc.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(ws.HU),h.LFG(h3,8),h.LFG(f3,8),h.LFG(p3,8),h.LFG(g3,8),h.LFG(m3,8),h.LFG(_3,8),h.LFG(UR,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),z8=(()=>{class n{constructor(){H8.Z.registerVersion("angularfire",ws.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[HR]}),n})();function y3(n,e){return function G8(n,e=ng.z){return new Ui.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function $R(n,e){return y3(n,e).pipe((0,$t.U)(t=>({payload:t,type:"query"})))}function mT(n,e){return $R(n,e).pipe(zd(void 0),dk(),(0,$t.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,u)=>{const g=r.find(w=>w.doc.ref.isEqual(l.ref)),v=null==t?void 0:t.payload.docs.find(w=>w.ref.isEqual(l.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(l.metadata)||!g&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:l}})}),s}))}function b3(n,e,t){return mT(n,t).pipe(Og((i,r)=>function W8(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function Z8(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zR(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),function wy(n,e=Fd.y){return n=null!=n?n:YT,(0,Hn.e)((t,i)=>{let r,s=!0;t.subscribe((0,$n.x)(i,l=>{const u=e(l);(s||!n(r,u))&&(s=!1,r=u,i.next(l))}))})}(),(0,$t.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function zR(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function w3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class E3{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=mT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,$t.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(zd(void 0),dk(),ai(([i,r])=>r.length>0||!i),(0,$t.U)(([i,r])=>r),ws.iC)}auditTrail(e){return this.stateChanges(e).pipe(Og((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=w3(e);return b3(this.query,t,this.afs.schedulers.outsideAngular).pipe(ws.iC)}valueChanges(e={}){return $R(this.query,this.afs.schedulers.outsideAngular).pipe((0,$t.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),ws.iC)}get(e){return(0,ni.D)(this.query.get(e)).pipe(ws.iC)}add(e){return this.ref.add(e)}doc(e){return new C3(this.ref.doc(e),this.afs)}}class C3{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=D3(i,t);return new E3(r,s,this.afs)}snapshotChanges(){return function q8(n,e){return y3(n,e).pipe(zd(void 0),dk(),(0,$t.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ws.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,$t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ni.D)(this.ref.get(e)).pipe(ws.iC)}}class K8{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?mT(this.query,this.afs.schedulers.outsideAngular).pipe((0,$t.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),ai(t=>t.length>0),ws.iC):mT(this.query,this.afs.schedulers.outsideAngular).pipe(ws.iC)}auditTrail(e){return this.stateChanges(e).pipe(Og((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=w3(e);return b3(this.query,t,this.afs.schedulers.outsideAngular).pipe(ws.iC)}valueChanges(e={}){return $R(this.query,this.afs.schedulers.outsideAngular).pipe((0,$t.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),ws.iC)}get(e){return(0,ni.D)(this.query.get(e)).pipe(ws.iC)}}const Y8=new h.OlP("angularfire2.enableFirestorePersistence"),Q8=new h.OlP("angularfire2.firestore.persistenceSettings"),X8=new h.OlP("angularfire2.firestore.settings"),J8=new h.OlP("angularfire2.firestore.use-emulator");function D3(n,e=(t=>t)){return{query:e(n),ref:n}}let eW=(()=>{class n{constructor(t,i,r,s,l,u,g,v,w,I,M,O,N,H,Y,he,_e){this.schedulers=g;const Oe=(0,bc.on)(t,u,i),Ge=w;I&&v3(Oe,u,M,N,H,Y,O,he),[this.firestore,this.persistenceEnabled$]=(0,bc.cc)(`${Oe.name}.firestore`,"AngularFirestore",Oe.name,()=>{const st=u.runOutsideAngular(()=>Oe.firestore());if(s&&st.settings(s),Ge&&st.useEmulator(...Ge),r&&!Mc(l)){const wt=()=>{try{return(0,ni.D)(st.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Ot){return"undefined"!=typeof console&&console.warn(Ot),Nt(!1)}};return[st,u.runOutsideAngular(wt)]}return[st,Nt(!1)]},[s,Ge,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=D3(r,i),u=this.schedulers.ngZone.run(()=>s);return new E3(u,l,this)}collectionGroup(t,i){const r=i||(l=>l),s=this.firestore.collectionGroup(t);return new K8(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new C3(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bc.Dh),h.LFG(bc.xv,8),h.LFG(Y8,8),h.LFG(X8,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(ws.HU),h.LFG(Q8,8),h.LFG(J8,8),h.LFG(HR,8),h.LFG(h3,8),h.LFG(f3,8),h.LFG(p3,8),h.LFG(g3,8),h.LFG(m3,8),h.LFG(_3,8),h.LFG(UR,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),I3=(()=>{class n{constructor(t){this.firestore=t}createDoc(t,i){return this.firestore.collection(t).add(i)}getCollection(t){return this.firestore.collection(t).valueChanges({idField:"id"})}updateDoc(t,i,r){return this.firestore.collection(t).doc(i).update(r)}deleteDoc(t,i){return this.firestore.collection(t).doc(i).delete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(eW))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tW=[{path:"",component:Q2},{path:"landing-page",component:Q2},{path:"email-opt-in",component:(()=>{class n{constructor(t,i,r){this.router=t,this.firestore=i,this.posthog=r,this.email=""}ngOnInit(){this.posthog.trackEvent("$pageview")}onSkip(){this.posthog.trackEvent("newsletter skipped"),this.navigateToMaintenance()}onSubmit(){var t=this;return(0,xe.Z)(function*(){if(""===t.email)alert("Please provide an email"),t.posthog.trackEvent("submit to newsletter with empty email");else if(t.email.trim())try{yield t.firestore.createDoc("users",{email:t.email}),alert("Thank you for subscribing!")}catch(i){console.error("Error saving email to Firestore:",i)}finally{console.log("i get here"),t.posthog.identifyUser(t.generateGUID(),{email:t.email}),t.posthog.trackEvent("submit to newsletter")}""===t.email||t.navigateToMaintenance()})()}navigateToMaintenance(){setTimeout(()=>{this.router.navigate(["/maintenance"])},1e3)}generateGUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const i=16*Math.random()|0;return("x"===t?i:3&i|8).toString(16)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lt),h.Y36(I3),h.Y36(PI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-email-opt-in"]],decls:15,vars:1,consts:[[1,"entire-container"],[1,"email-opt-in-container"],[3,"ngSubmit"],["type","email","name","email","placeholder","Enter your email","required","",3,"ngModel","ngModelChange"],[1,"button-container"],[3,"click"],[1,"button-text"]],template:function(t,i){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h2"),h._uU(3,"Before Accessing Our Services"),h.qZA(),h.TgZ(4,"p"),h._uU(5," Would you like to receive updates on new trips and announcements? Share your email with us! "),h.qZA(),h.TgZ(6,"form",2),h.NdJ("ngSubmit",function(){return i.onSubmit()}),h.TgZ(7,"input",3),h.NdJ("ngModelChange",function(s){return i.email=s}),h.qZA()(),h.TgZ(8,"div",4)(9,"button",5),h.NdJ("click",function(){return i.onSubmit()}),h.TgZ(10,"span",6),h._uU(11,"Submit"),h.qZA()(),h.TgZ(12,"button",5),h.NdJ("click",function(){return i.onSkip()}),h.TgZ(13,"span",6),h._uU(14,"Skip"),h.qZA()()()()()),2&t&&(h.xp6(7),h.Q6J("ngModel",i.email))},directives:[Cd,ul,oc,ga,pl,zh,tu],styles:[".entire-container[_ngcontent-%COMP%]{background-color:#fff;background-size:cover;height:100vh;width:100%;display:flex;justify-content:center;align-items:center;color:#fff;text-align:center}.email-opt-in-container[_ngcontent-%COMP%]{text-align:center;margin:auto;padding:40px;max-width:600px;font-family:Poppins,sans-serif;background-color:#fff;box-shadow:0 8px 60px #0000001a;border-radius:15px}h2[_ngcontent-%COMP%]{font-size:24px;color:#333;margin-bottom:10px}p[_ngcontent-%COMP%]{font-size:16px;color:#666;margin-bottom:20px}form[_ngcontent-%COMP%]{margin:20px 0;display:flex;flex-direction:column;align-items:center;gap:15px}input[type=email][_ngcontent-%COMP%]{width:100%;max-width:400px;padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:25px;font-family:Poppins,sans-serif;font-size:16px;box-shadow:0 4px 8px #0000001a}input[type=email][_ngcontent-%COMP%]::placeholder{color:#aaa}button[_ngcontent-%COMP%]{width:252.76px;height:71px;background-color:#000;border:none;border-radius:30px;display:flex;justify-content:center;align-items:center;cursor:pointer;outline:none;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#333}.button-text[_ngcontent-%COMP%]{color:#fff;font-size:18px;font-family:Poppins,sans-serif}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}@media (max-width: 768px){.email-opt-in-container[_ngcontent-%COMP%]{padding:20px}h2[_ngcontent-%COMP%]{font-size:20px}p[_ngcontent-%COMP%]{font-size:14px}button[_ngcontent-%COMP%]{width:200px;height:60px}.button-text[_ngcontent-%COMP%]{font-size:16px}input[type=email][_ngcontent-%COMP%]{max-width:300px}}"]}),n})()},{path:"maintenance",component:(()=>{class n{constructor(t,i,r){this.router=t,this.firestore=i,this.posthog=r,this.email=""}ngOnInit(){this.posthog.trackEvent("$pageview")}onSubmit(){var t=this;return(0,xe.Z)(function*(){if(""===t.email)alert("Please provide an email"),t.posthog.trackEvent("submit for services with empty email");else if(t.email.trim())try{yield t.firestore.createDoc("users",{email:t.email}),alert("Thank you for subscribing!")}catch(i){console.error("Error saving email to Firestore:",i)}finally{t.posthog.identifyUser(t.generateGUID(),{email:t.email}),t.posthog.trackEvent("submit for services")}""===t.email||setTimeout(()=>{t.router.navigate(["/"])},1e3)})()}generateGUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const i=16*Math.random()|0;return("x"===t?i:3&i|8).toString(16)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lt),h.Y36(I3),h.Y36(PI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-maintenance"]],decls:15,vars:1,consts:[[1,"maintenance-container"],[1,"loader"],[1,"email-opt-in-container"],[3,"ngSubmit"],["type","email","name","email","placeholder","Enter your email","required","",3,"ngModel","ngModelChange"],[1,"button-container"],[3,"click"],[1,"button-text"]],template:function(t,i){1&t&&(h.TgZ(0,"div",0)(1,"h1"),h._uU(2,"We're Still Working on It!"),h.qZA(),h.TgZ(3,"p"),h._uU(4,"Our website is under construction. We'll be live soon with amazing features for you."),h.qZA(),h._UZ(5,"div",1),h.TgZ(6,"div",2)(7,"p"),h._uU(8," Would you like to receive updates on our services status? Share your email with us! "),h.qZA(),h.TgZ(9,"form",3),h.NdJ("ngSubmit",function(){return i.onSubmit()}),h.TgZ(10,"input",4),h.NdJ("ngModelChange",function(s){return i.email=s}),h.qZA()(),h.TgZ(11,"div",5)(12,"button",6),h.NdJ("click",function(){return i.onSubmit()}),h.TgZ(13,"span",7),h._uU(14,"Submit"),h.qZA()()()()()),2&t&&(h.xp6(10),h.Q6J("ngModel",i.email))},directives:[Cd,ul,oc,ga,pl,zh,tu],styles:[".maintenance-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;text-align:center;font-family:Poppins,sans-serif;background-color:#fff}.maintenance-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;margin-bottom:20px;color:#333;margin-top:40px}.maintenance-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin-bottom:40px;color:#666}.loader[_ngcontent-%COMP%]{border:6px solid #f3f3f3;border-top:6px solid #333;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.email-opt-in-container[_ngcontent-%COMP%]{text-align:center;margin-top:100px;padding:40px;max-width:600px;font-family:Poppins,sans-serif;background-color:#fff;box-shadow:0 8px 60px #0000001a;border-radius:15px}form[_ngcontent-%COMP%]{margin:20px 0;display:flex;flex-direction:column;align-items:center;gap:15px}input[type=email][_ngcontent-%COMP%]{width:100%;max-width:400px;padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:25px;font-family:Poppins,sans-serif;font-size:16px;box-shadow:0 4px 8px #0000001a}input[type=email][_ngcontent-%COMP%]::placeholder{color:#aaa}button[_ngcontent-%COMP%]{width:252.76px;height:71px;background-color:#000;border:none;border-radius:30px;display:flex;justify-content:center;align-items:center;cursor:pointer;outline:none;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#333}.button-text[_ngcontent-%COMP%]{color:#fff;font-size:18px;font-family:Poppins,sans-serif}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}@media (max-width: 768px){.email-opt-in-container[_ngcontent-%COMP%]{padding:20px}h2[_ngcontent-%COMP%]{font-size:20px}p[_ngcontent-%COMP%]{font-size:14px}button[_ngcontent-%COMP%]{width:200px;height:60px}.button-text[_ngcontent-%COMP%]{font-size:16px}input[type=email][_ngcontent-%COMP%]{max-width:300px}}"]}),n})()}];let nW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[KN.forRoot(tW)],KN]}),n})();const gp_firebase={apiKey:"AIzaSyADb9B6Z38oTD2nCKpsUYcdHUVu4veQ_1Y",authDomain:"travelgenius-b4eb7.firebaseapp.com",databaseURL:"https://travelgenius-b4eb7-default-rtdb.europe-west1.firebasedatabase.app",projectId:"travelgenius-b4eb7",storageBucket:"travelgenius-b4eb7.firebasestorage.app",messagingSenderId:"903496072959",appId:"1:903496072959:web:7efcc95d4ccb8bbd4f96ca",measurementId:"G-HS11WEJ8HF"};let iW=(()=>{class n{constructor(t,i){this.router=t,this.http=i,this.dropdownOpenSource=new Pr(!1),this.accessTokenKey="accessToken",this.refreshTokenKey="refreshToken",this.latitude=44.44,this.longitude=26.11,this.usernameKey="username",this.userPhotoKey="userPhoto",this.userPhoto="assets/download.jpeg",this.dropdownOpen$=this.dropdownOpenSource.asObservable();const r=localStorage.getItem(this.accessTokenKey),s=localStorage.getItem(this.refreshTokenKey);r&&s&&this.setTokens(r,s)}ngOnInit(){this.router.events.subscribe(t=>{t instanceof Df&&this.closeDropdown()})}setDropdownOpen(t){this.dropdownOpenSource.next(t)}closeDropdown(){this.setDropdownOpen(!1)}getProfile(){const i={Authorization:"Bearer "+this.getAccessToken()},r={headers:new _r(i),observe:"response"};return this.http.get("http://34.88.245.78:8081/user/completeProfile",r).pipe((0,$t.U)(s=>(console.log("Profile response:",s),s.body)),El(s=>(console.error("Backend error:",s),Cf(s))))}setTokens(t,i){localStorage.setItem(this.accessTokenKey,t),localStorage.setItem(this.refreshTokenKey,i),this.validateToken().subscribe(r=>{console.log("User:",r),localStorage.setItem(this.usernameKey,r.username)}),this.getProfile().subscribe(r=>{console.log("Profile:",r),localStorage.setItem(this.userPhotoKey,r.profilePhoto.photoUrl),this.userPhoto=r.profilePhoto.photoUrl})}validateToken(){const r={token:this.getAccessToken()};return this.http.post("http://34.88.245.78:8888/authService/validateToken",r,{observe:"response"}).pipe((0,$t.U)(s=>(console.log("Profile response:",s),s.body)),El(s=>(console.error("Backend error:",s),Cf(s))))}getAccessToken(){return localStorage.getItem(this.accessTokenKey)?localStorage.getItem(this.accessTokenKey):(console.log("Access token is null"),"default")}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUsername(){return localStorage.getItem(this.usernameKey)}getUserPhoto(){return localStorage.getItem(this.userPhotoKey)}getUserPhotoObservable(){return Nt(localStorage.getItem(this.userPhotoKey)||"assets/download.jpeg")}clearTokens(){localStorage.removeItem(this.accessTokenKey),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.usernameKey)}areTokensSet(){return!!this.getAccessToken()&&!!this.getRefreshToken()&&"default"!==this.getAccessToken()}navigateToDeal(t){console.log(t),this.router.navigate("TOURISTIC_ATTRACTION"===t.entityType?["/countries","generic","ta",t.name.toLowerCase()+"_"+t.id]:"CITY"===t.entityType?["/countries","search",t.name.toLowerCase()+"_"+t.id]:["/countries",t.name.toLowerCase()+"_"+t.id])}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lt),h.LFG(sl))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rW=(()=>{class n{constructor(t,i,r){this.globalsService=t,this.router=i,this.http=r,this.isDropdownOpen=!1,this.searchResults=[],this.profilePhoto=this.globalsService.userPhoto}ngOnInit(){this.router.events.subscribe(t=>{t instanceof Df&&this.globalsService.closeDropdown()}),this.globalsService.dropdownOpen$.subscribe(t=>{this.isDropdownOpen=t}),this.globalsService.getUserPhotoObservable().subscribe(t=>{console.log("Photo:",t),this.profilePhoto="null"==t?"assets/download.jpeg":t||"assets/download.jpeg"})}onSearch(t){const i=t.target.value,r="http://34.88.245.78:8081/search?query="+i,s={Authorization:"Bearer "+this.globalsService.getAccessToken()},u={headers:new _r(s)};i.length>=1?this.http.get(r,u).subscribe(g=>{this.searchResults=g},g=>{console.error("Search error:",g),this.searchResults=[]}):this.searchResults=[]}onSelectResult(t,i){console.log(t),i.value="",this.searchResults=[],this.router.navigate("TOURISTIC_ATTRACTION"===t.entityType?["/countries","generic","ta",t.name.toLowerCase()+"_"+t.id]:"CITY"===t.entityType?["/countries","search",t.name.toLowerCase()+"_"+t.id]:["/countries",t.name.toLowerCase()+"_"+t.id])}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen,this.globalsService.setDropdownOpen(this.isDropdownOpen)}closeDropdown(){this.globalsService.closeDropdown()}isLoggedIn(){return this.globalsService.areTokensSet()}navigateToLogin(){this.router.navigate(["/login"])}navigateToProfile(){this.router.navigate(["/profile"])}navigateToSettings(){this.router.navigate(["/settings"])}logout(){const t={accessToken:this.globalsService.getAccessToken(),refreshToken:this.globalsService.getRefreshToken()};this.http.post("http://34.88.245.78:8888/authService/logout",t).subscribe(()=>{this.globalsService.clearTokens(),this.globalsService.closeDropdown(),this.router.navigate(["/login"])},r=>{console.error("Logout error:",r),this.globalsService.clearTokens(),this.globalsService.closeDropdown()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(iW),h.Y36(lt),h.Y36(sl))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-header"]],decls:14,vars:0,consts:[[1,"header-container"],[1,"logo"],["onclick","toggleMenu()",1,"menu-toggle"],["id","nav-links",1,"nav-links"],["href","#",1,"home"],["href","#"]],template:function(t,i){1&t&&(h.TgZ(0,"div",0)(1,"div",1),h._uU(2,"TravelGenius"),h.qZA(),h.TgZ(3,"button",2),h._uU(4,"\u2630"),h.qZA(),h.TgZ(5,"div",3)(6,"a",4),h._uU(7,"Home"),h.qZA(),h.TgZ(8,"a",5),h._uU(9,"Countries"),h.qZA(),h.TgZ(10,"a",5),h._uU(11,"News"),h.qZA(),h.TgZ(12,"a",5),h._uU(13,"Plan a trip"),h.qZA()()())},styles:[".header-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:128px;background-color:#120b0b82;display:flex;justify-content:space-between;align-items:center;padding:0 40px;z-index:100}.header-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:700;font-size:24px;color:#fff}.header-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{display:flex;gap:30px}.header-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;font-size:18px;line-height:27px;color:#fff;text-decoration:none;padding:13px 10px;display:inline-block;transition:color .3s ease}.header-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:gold}.menu-toggle[_ngcontent-%COMP%]{display:none;background:none;border:none;font-size:24px;color:#fff;cursor:pointer;position:absolute;right:20px;top:10px;z-index:101}@media (max-width: 768px){.header-container[_ngcontent-%COMP%]{flex-direction:column;height:60px;padding:10px 20px}.logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.menu-toggle[_ngcontent-%COMP%]{display:block;background:none;border:none;font-size:24px;color:#fff;cursor:pointer}.header-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{display:none;flex-direction:column;position:absolute;top:60px;right:20px;background:rgba(0,0,0,.8);padding:10px;border-radius:5px;z-index:99}.header-container[_ngcontent-%COMP%]   .nav-links.show[_ngcontent-%COMP%]{display:flex}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;padding:5px 0}}"]}),n})(),sW=(()=>{class n{constructor(t,i){this.router=t,this.posthogService=i,this.title="TravelGenius"}ngOnInit(){this.router.events.subscribe(t=>{t instanceof Gd&&this.posthogService.trackEvent("Page Viewed",{path:t.urlAfterRedirects})})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lt),h.Y36(PI))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:41,vars:0,consts:[[1,"footer-container"],[1,"footer-logo"],[1,"heading"],[1,"subtitle"],[1,"contact-container"],[1,"contact-title"],[1,"contact-info"],[1,"fas","fa-map-marker-alt"],[1,"fas","fa-phone"],[1,"fas","fa-envelope"],[1,"footer-links"],[1,"quick-link-title"],[1,"quick-links"],["href","#"]],template:function(t,i){1&t&&(h._UZ(0,"app-header")(1,"router-outlet"),h.TgZ(2,"footer")(3,"div",0)(4,"div",1)(5,"div",2),h._uU(6,"TravelGenius"),h.qZA(),h.TgZ(7,"div",3),h._uU(8,"Your ideal solution for finding and planning the trip of your life."),h.qZA()(),h.TgZ(9,"div",4)(10,"div",5),h._uU(11,"Contact Information"),h.qZA(),h.TgZ(12,"ul",6)(13,"li"),h._UZ(14,"i",7),h._uU(15," Bucharest, Romania"),h.qZA(),h.TgZ(16,"li"),h._UZ(17,"i",8),h._uU(18," +40 773 320 818"),h.qZA(),h.TgZ(19,"li"),h._UZ(20,"i",9),h._uU(21," dariaflorea49@gmail.com"),h.qZA()()(),h.TgZ(22,"div",10)(23,"div",11),h._uU(24,"Quick Link"),h.qZA(),h.TgZ(25,"ul",12)(26,"li")(27,"a",13),h._uU(28,"Home"),h.qZA()(),h.TgZ(29,"li")(30,"a",13),h._uU(31,"Countries"),h.qZA()(),h.TgZ(32,"li")(33,"a",13),h._uU(34,"News"),h.qZA()(),h.TgZ(35,"li")(36,"a",13),h._uU(37,"Plan a trip"),h.qZA()(),h.TgZ(38,"li")(39,"a",13),h._uU(40,"Contact"),h.qZA()()()()()())},directives:[rW,ib],styles:["footer[_ngcontent-%COMP%]{background-color:#f4f4f4;color:#333;padding:40px 20px;position:relative;z-index:1}.footer-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;max-width:1200px;margin:0 auto;gap:20px;padding-bottom:20px}.footer-logo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.footer-logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-top:10px;line-height:1.6}.footer-contact[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]{flex:1;min-width:100px}.footer-contact[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.footer-contact[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;font-size:14px}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#333;transition:color .3s}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff}.footer-bottom[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-size:14px;border-top:1px solid #ddd;padding-top:10px}.footer-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}body[_ngcontent-%COMP%]{margin:0;padding:0;line-height:1.6}main[_ngcontent-%COMP%]{padding-bottom:60px}.heading[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:30px;font-weight:700;line-height:110px;text-align:center;text-underline-position:from-font;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none;color:#000;text-shadow:0px 4px 4px rgba(0,0,0,.2)}.subtitle[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:16px;font-weight:400;line-height:1.5;color:#6c6c6c;height:50px;position:relative;margin:0;padding:0;text-align:center}.contact-title[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;font-size:24px;line-height:70px;text-align:center;color:#000;margin:0 0 20px;padding:0}.contact-info[_ngcontent-%COMP%]{list-style:none;padding:0}.contact-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:16px;font-weight:400;color:#6c6c6c;margin-bottom:10px;display:flex;align-items:center;text-align:center}.contact-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000;margin-right:10px;font-size:16px}.contact-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin-left:30px}.quick-links[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));list-style:none;padding:0;margin-left:30px;font-family:Poppins,sans-serif;font-size:16px;font-weight:400;color:#6c6c6c;text-align:center}.quick-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;padding:0}.quick-link-title[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;font-size:24px;line-height:70px;color:#000;margin-bottom:10px;text-align:center}"]}),n})(),oW=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[oW]}),n})(),_T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[ea,Or,aW],Or]}),n})(),S3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),fW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Ky],imports:[[S3,_T,Or],S3,_T]}),n})();class GR{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class pW extends GR{constructor(e,t,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r}}class T3 extends GR{constructor(e,t,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class gW extends GR{constructor(e){super(),this.element=e instanceof h.SBq?e.nativeElement:e}}class _W extends class mW{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof pW?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof T3?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof gW?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=l=>{const u=l.element,g=this._document.createComment("dom-portal");u.parentNode.insertBefore(g,u),this.outletElement.appendChild(u),this._attachedPortal=l,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(u,g)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||h.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let vW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const x3=z();class yW{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ei(-this._previousScrollPosition.left),e.style.top=Ei(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",l=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),x3&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),x3&&(i.scrollBehavior=s,r.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class bW{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class A3{enable(){}disable(){}attach(){}}function qR(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function M3(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class wW{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();qR(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let EW=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new A3,this.close=l=>new bW(this._scrollDispatcher,this._ngZone,this._viewportRuler,l),this.block=()=>new yW(this._viewportRuler,this._document),this.reposition=l=>new wW(this._scrollDispatcher,this._viewportRuler,this._ngZone,l),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Tx),h.LFG(uu),h.LFG(h.R0b),h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class k3{constructor(e){if(this.scrollStrategy=new A3,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class CW{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class DW{constructor(e,t,i,r,s,l,u,g,v){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=l,this._document=u,this._location=g,this._outsideClickDispatcher=v,this._backdropElement=null,this._backdropClick=new dn.x,this._attachments=new dn.x,this._detachments=new dn.x,this._locationChanges=jo.w0.EMPTY,this._backdropClickHandler=w=>this._backdropClick.next(w),this._backdropTransitionendHandler=w=>{this._disposeBackdrop(w.target)},this._keydownEvents=new dn.x,this._outsidePointerEvents=new dn.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(wl(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ei(this._config.width),e.height=Ei(this._config.height),e.minWidth=Ei(this._config.minWidth),e.minHeight=Ei(this._config.minHeight),e.maxWidth=Ei(this._config.maxWidth),e.maxHeight=Ei(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,i){const r=Zp(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Ey((0,Nd.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let P3=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||kr()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),kr()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(lo))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const O3="cdk-overlay-connected-position-bounding-box",IW=/([A-Za-z%]+)$/;class SW{constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new dn.x,this._resizeSubscription=jo.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(O3),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let l;for(let u of this._preferredPositions){let g=this._getOriginPoint(e,r,u),v=this._getOverlayPoint(g,t,u),w=this._getOverlayFit(v,t,i,u);if(w.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,g);this._canFitWithFlexibleDimensions(w,v,i)?s.push({position:u,origin:g,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(g,u)}):(!l||l.overlayFit.visibleArea<w.visibleArea)&&(l={overlayFit:w,overlayPoint:v,originPoint:g,position:u,overlayRect:t})}if(s.length){let u=null,g=-1;for(const v of s){const w=v.boundingBoxRect.width*v.boundingBoxRect.height*(v.position.weight||1);w>g&&(g=w,u=v)}return this._isPushed=!1,void this._applyPosition(u.position,u.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(l.position,l.originPoint);this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Im(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(O3),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const l=this._isRtl()?e.right:e.left,u=this._isRtl()?e.left:e.right;r="start"==i.originX?l:u}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=F3(t);let{x:l,y:u}=e,g=this._getOffset(r,"x"),v=this._getOffset(r,"y");g&&(l+=g),v&&(u+=v);let M=0-u,O=u+s.height-i.height,N=this._subtractOverflows(s.width,0-l,l+s.width-i.width),H=this._subtractOverflows(s.height,M,O),Y=N*H;return{visibleArea:Y,isCompletelyWithinViewport:s.width*s.height===Y,fitsInViewportVertically:H===s.height,fitsInViewportHorizontally:N==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,l=R3(this._overlayRef.getConfig().minHeight),u=R3(this._overlayRef.getConfig().minWidth),v=e.fitsInViewportHorizontally||null!=u&&u<=s;return(e.fitsInViewportVertically||null!=l&&l<=r)&&v}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=F3(t),s=this._viewportRect,l=Math.max(e.x+r.width-s.width,0),u=Math.max(e.y+r.height-s.height,0),g=Math.max(s.top-i.top-e.y,0),v=Math.max(s.left-i.left-e.x,0);let w=0,I=0;return w=r.width<=s.width?v||-l:e.x<this._viewportMargin?s.left-i.left-e.x:0,I=r.height<=s.height?g||-u:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:w,y:I},{x:e.x+w,y:e.y+I}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new CW(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,l,u,w,I,M;if("top"===t.overlayY)l=e.y,s=i.height-l+this._viewportMargin;else if("bottom"===t.overlayY)u=i.height-e.y+2*this._viewportMargin,s=i.height-u+this._viewportMargin;else{const O=Math.min(i.bottom-e.y+i.top,e.y),N=this._lastBoundingBoxSize.height;s=2*O,l=e.y-O,s>N&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-N/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)M=i.width-e.x+this._viewportMargin,w=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)I=e.x,w=i.right-e.x;else{const O=Math.min(i.right-e.x+i.left,e.x),N=this._lastBoundingBoxSize.width;w=2*O,I=e.x-O,w>N&&!this._isInitialRender&&!this._growAfterOpen&&(I=e.x-N/2)}return{top:l,left:I,bottom:u,right:M,width:w,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;r.height=Ei(i.height),r.top=Ei(i.top),r.bottom=Ei(i.bottom),r.width=Ei(i.width),r.left=Ei(i.left),r.right=Ei(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Ei(s)),l&&(r.maxWidth=Ei(l))}this._lastBoundingBoxSize=i,Im(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Im(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Im(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(r){const w=this._viewportRuler.getViewportScrollPosition();Im(i,this._getExactOverlayY(t,e,w)),Im(i,this._getExactOverlayX(t,e,w))}else i.position="static";let u="",g=this._getOffset(t,"x"),v=this._getOffset(t,"y");g&&(u+=`translateX(${g}px) `),v&&(u+=`translateY(${v}px)`),i.transform=u.trim(),l.maxHeight&&(r?i.maxHeight=Ei(l.maxHeight):s&&(i.maxHeight="")),l.maxWidth&&(r?i.maxWidth=Ei(l.maxWidth):s&&(i.maxWidth="")),Im(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Ei(s.y),r}_getExactOverlayX(e,t,i){let l,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),l=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===l?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Ei(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:M3(e,i),isOriginOutsideView:qR(e,i),isOverlayClipped:M3(t,i),isOverlayOutsideView:qR(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Zp(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof h.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function Im(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function R3(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(IW);return t&&"px"!==t?null:parseFloat(e)}return n||null}function F3(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const N3="cdk-global-overlay-wrapper";class TW{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(N3),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:l,maxHeight:u}=i,g=!("100%"!==r&&"100vw"!==r||l&&"100%"!==l&&"100vw"!==l),v=!("100%"!==s&&"100vh"!==s||u&&"100%"!==u&&"100vh"!==u);e.position=this._cssPosition,e.marginLeft=g?"0":this._leftOffset,e.marginTop=v?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,g?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=v?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(N3),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let xW=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new TW}flexibleConnectedTo(t){return new SW(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(uu),h.LFG(ue),h.LFG(lo),h.LFG(P3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),L3=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AW=(()=>{class n extends L3{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let l=s.length-1;l>-1;l--)if(s[l]._keydownEvents.observers.length>0){const u=s[l]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(r)):u.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(h.R0b,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MW=(()=>{class n extends L3{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=ln(s)},this._clickListener=s=>{const l=ln(s),u="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:l;this._pointerDownEventTarget=null;const g=this._attachedOverlays.slice();for(let v=g.length-1;v>-1;v--){const w=g[v];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(w.overlayElement.contains(l)||w.overlayElement.contains(u))break;const I=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>I.next(s)):I.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ue),h.LFG(lo),h.LFG(h.R0b,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kW=0,Zw=(()=>{class n{constructor(t,i,r,s,l,u,g,v,w,I,M){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=l,this._injector=u,this._ngZone=g,this._document=v,this._directionality=w,this._location=I,this._outsideClickDispatcher=M}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),l=new k3(t);return l.direction=l.direction||this._directionality.value,new DW(s,i,r,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+kW++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(h.z2F)),new _W(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(EW),h.LFG(P3),h.LFG(h._Vd),h.LFG(xW),h.LFG(AW),h.LFG(h.zs3),h.LFG(h.R0b),h.LFG(ue),h.LFG(Fy),h.LFG(Se),h.LFG(MW))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const RW={provide:new h.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Zw],useFactory:function OW(n){return()=>n.scrollStrategies.reposition()}};let V3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Zw,RW],imports:[[sg,vW,Ld],Ld]}),n})();const BW={provide:new h.OlP("mat-select-scroll-strategy"),deps:[Zw],useFactory:function VW(n){return()=>n.scrollStrategies.reposition()}};let UW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[BW],imports:[[ea,V3,co,Or],bl,_T,co,Or]}),n})(),jW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[rC,Or],Or]}),n})();const ZW={provide:new h.OlP("mat-autocomplete-scroll-strategy"),deps:[Zw],useFactory:function WW(n){return()=>n.scrollStrategies.reposition()}};let XW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[ZW],imports:[[V3,co,Or,ea],bl,co,Or]}),n})(),JW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[sW]}),n.\u0275inj=h.cJS({providers:[],imports:[[Po,nW,Ju,kd,Bo,tD,fW,UW,_T,jW,XW,qy,DM,bc.hO.initializeApp(gp_firebase),z8]]}),n})();(0,h.G48)(),kI.init("phc_lqsZ43Tgho5FnOwDui7VyMzG7trkCHzNRJX9p5KOYQk",{api_host:"https://us.i.posthog.com",person_profiles:"identified_only"}),Bl().bootstrapModule(JW).catch(n=>console.error(n))},8306:(nt,De,L)=>{L.d(De,{y:()=>K});var h=L(930),te=L(727),V=L(8822),pe=L(4671);var ue=L(2416),Ie=L(576),we=L(2806);let K=(()=>{class Pe{constructor(Qe){Qe&&(this._subscribe=Qe)}lift(Qe){const ye=new Pe;return ye.source=this,ye.operator=Qe,ye}subscribe(Qe,ye,Fe){const dt=function et(Pe){return Pe&&Pe instanceof h.Lv||function ie(Pe){return Pe&&(0,Ie.m)(Pe.next)&&(0,Ie.m)(Pe.error)&&(0,Ie.m)(Pe.complete)}(Pe)&&(0,te.Nn)(Pe)}(Qe)?Qe:new h.Hp(Qe,ye,Fe);return(0,we.x)(()=>{const{operator:gt,source:He}=this;dt.add(gt?gt.call(dt,He):He?this._subscribe(dt):this._trySubscribe(dt))}),dt}_trySubscribe(Qe){try{return this._subscribe(Qe)}catch(ye){Qe.error(ye)}}forEach(Qe,ye){return new(ye=q(ye))((Fe,dt)=>{const gt=new h.Hp({next:He=>{try{Qe(He)}catch(Se){dt(Se),gt.unsubscribe()}},error:dt,complete:Fe});this.subscribe(gt)})}_subscribe(Qe){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(Qe)}[V.L](){return this}pipe(...Qe){return function ve(Pe){return 0===Pe.length?pe.y:1===Pe.length?Pe[0]:function(Qe){return Pe.reduce((ye,Fe)=>Fe(ye),Qe)}}(Qe)(this)}toPromise(Qe){return new(Qe=q(Qe))((ye,Fe)=>{let dt;this.subscribe(gt=>dt=gt,gt=>Fe(gt),()=>ye(dt))})}}return Pe.create=ze=>new Pe(ze),Pe})();function q(Pe){var ze;return null!==(ze=null!=Pe?Pe:ue.v.Promise)&&void 0!==ze?ze:Promise}},7579:(nt,De,L)=>{L.d(De,{x:()=>ue});var h=L(8306),te=L(727);const pe=(0,L(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=L(8737),ve=L(2806);let ue=(()=>{class we extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ie=new Ie(this,this);return ie.operator=q,ie}_throwIfClosed(){if(this.closed)throw new pe}next(q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(q)}})}error(q){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ie}=this;for(;ie.length;)ie.shift().error(q)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ie,isStopped:et,observers:Pe}=this;return ie||et?te.Lc:(this.currentObservers=null,Pe.push(q),new te.w0(()=>{this.currentObservers=null,(0,fe.P)(Pe,q)}))}_checkFinalizedStatuses(q){const{hasError:ie,thrownError:et,isStopped:Pe}=this;ie?q.error(et):Pe&&q.complete()}asObservable(){const q=new h.y;return q.source=this,q}}return we.create=(K,q)=>new Ie(K,q),we})();class Ie extends ue{constructor(K,q){super(),this.destination=K,this.source=q}next(K){var q,ie;null===(ie=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ie||ie.call(q,K)}error(K){var q,ie;null===(ie=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ie||ie.call(q,K)}complete(){var K,q;null===(q=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===q||q.call(K)}_subscribe(K){var q,ie;return null!==(ie=null===(q=this.source)||void 0===q?void 0:q.subscribe(K))&&void 0!==ie?ie:te.Lc}}},930:(nt,De,L)=>{L.d(De,{Hp:()=>Qe,Lv:()=>ie});var h=L(576),te=L(727),V=L(2416),pe=L(7849),fe=L(5032);const ve=we("C",void 0,void 0);function we(He,Se,Ee){return{kind:He,value:Se,error:Ee}}var K=L(3410),q=L(2806);class ie extends te.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,te.Nn)(Se)&&Se.add(this)):this.destination=gt}static create(Se,Ee,Xe){return new Qe(Se,Ee,Xe)}next(Se){this.isStopped?dt(function Ie(He){return we("N",He,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?dt(function ue(He){return we("E",void 0,He)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?dt(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function Pe(He,Se){return et.call(He,Se)}class ze{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Se)}catch(Xe){ye(Xe)}}error(Se){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Se)}catch(Xe){ye(Xe)}else ye(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(Ee){ye(Ee)}}}class Qe extends ie{constructor(Se,Ee,Xe){let We;if(super(),(0,h.m)(Se)||!Se)We={next:null!=Se?Se:void 0,error:null!=Ee?Ee:void 0,complete:null!=Xe?Xe:void 0};else{let xt;this&&V.v.useDeprecatedNextContext?(xt=Object.create(Se),xt.unsubscribe=()=>this.unsubscribe(),We={next:Se.next&&Pe(Se.next,xt),error:Se.error&&Pe(Se.error,xt),complete:Se.complete&&Pe(Se.complete,xt)}):We=Se}this.destination=new ze(We)}}function ye(He){V.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(He):(0,pe.h)(He)}function dt(He,Se){const{onStoppedNotification:Ee}=V.v;Ee&&K.z.setTimeout(()=>Ee(He,Se))}const gt={closed:!0,next:fe.Z,error:function Fe(He){throw He},complete:fe.Z}},727:(nt,De,L)=>{L.d(De,{Lc:()=>ve,w0:()=>fe,Nn:()=>ue});var h=L(576);const V=(0,L(3888).d)(we=>function(q){we(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ie,et)=>`${et+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var pe=L(8737);class fe{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Pe of q)Pe.remove(this);else q.remove(this);const{initialTeardown:ie}=this;if((0,h.m)(ie))try{ie()}catch(Pe){K=Pe instanceof V?Pe.errors:[Pe]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const Pe of et)try{Ie(Pe)}catch(ze){K=null!=K?K:[],ze instanceof V?K=[...K,...ze.errors]:K.push(ze)}}if(K)throw new V(K)}}add(K){var q;if(K&&K!==this)if(this.closed)Ie(K);else{if(K instanceof fe){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(K)}}_hasParent(K){const{_parentage:q}=this;return q===K||Array.isArray(q)&&q.includes(K)}_addParent(K){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(K),q):q?[q,K]:K}_removeParent(K){const{_parentage:q}=this;q===K?this._parentage=null:Array.isArray(q)&&(0,pe.P)(q,K)}remove(K){const{_finalizers:q}=this;q&&(0,pe.P)(q,K),K instanceof fe&&K._removeParent(this)}}fe.EMPTY=(()=>{const we=new fe;return we.closed=!0,we})();const ve=fe.EMPTY;function ue(we){return we instanceof fe||we&&"closed"in we&&(0,h.m)(we.remove)&&(0,h.m)(we.add)&&(0,h.m)(we.unsubscribe)}function Ie(we){(0,h.m)(we)?we():we.unsubscribe()}},2416:(nt,De,L)=>{L.d(De,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,De,L)=>{L.d(De,{E:()=>te});const te=new(L(8306).y)(fe=>fe.complete())},8996:(nt,De,L)=>{L.d(De,{D:()=>Se});var h=L(8421),te=L(5363),V=L(9468),ve=L(8306),Ie=L(2202),we=L(576),K=L(9672);function ie(Ee,Xe){if(!Ee)throw new Error("Iterable cannot be null");return new ve.y(We=>{(0,K.f)(We,Xe,()=>{const xt=Ee[Symbol.asyncIterator]();(0,K.f)(We,Xe,()=>{xt.next().then(le=>{le.done?We.complete():We.next(le.value)})},0,!0)})})}var et=L(3670),Pe=L(8239),ze=L(1144),Qe=L(6495),ye=L(2206),Fe=L(4532),dt=L(3260);function Se(Ee,Xe){return Xe?function He(Ee,Xe){if(null!=Ee){if((0,et.c)(Ee))return function pe(Ee,Xe){return(0,h.Xf)(Ee).pipe((0,V.R)(Xe),(0,te.Q)(Xe))}(Ee,Xe);if((0,ze.z)(Ee))return function ue(Ee,Xe){return new ve.y(We=>{let xt=0;return Xe.schedule(function(){xt===Ee.length?We.complete():(We.next(Ee[xt++]),We.closed||this.schedule())})})}(Ee,Xe);if((0,Pe.t)(Ee))return function fe(Ee,Xe){return(0,h.Xf)(Ee).pipe((0,V.R)(Xe),(0,te.Q)(Xe))}(Ee,Xe);if((0,ye.D)(Ee))return ie(Ee,Xe);if((0,Qe.T)(Ee))return function q(Ee,Xe){return new ve.y(We=>{let xt;return(0,K.f)(We,Xe,()=>{xt=Ee[Ie.h](),(0,K.f)(We,Xe,()=>{let le,Vt;try{({value:le,done:Vt}=xt.next())}catch(Gt){return void We.error(Gt)}Vt?We.complete():We.next(le)},0,!0)}),()=>(0,we.m)(null==xt?void 0:xt.return)&&xt.return()})}(Ee,Xe);if((0,dt.L)(Ee))return function gt(Ee,Xe){return ie((0,dt.Q)(Ee),Xe)}(Ee,Xe)}throw(0,Fe.z)(Ee)}(Ee,Xe):(0,h.Xf)(Ee)}},8421:(nt,De,L)=>{L.d(De,{Xf:()=>et});var h=L(7582),te=L(1144),V=L(8239),pe=L(8306),fe=L(3670),ve=L(2206),ue=L(4532),Ie=L(6495),we=L(3260),K=L(576),q=L(7849),ie=L(8822);function et(He){if(He instanceof pe.y)return He;if(null!=He){if((0,fe.c)(He))return function Pe(He){return new pe.y(Se=>{const Ee=He[ie.L]();if((0,K.m)(Ee.subscribe))return Ee.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(He);if((0,te.z)(He))return function ze(He){return new pe.y(Se=>{for(let Ee=0;Ee<He.length&&!Se.closed;Ee++)Se.next(He[Ee]);Se.complete()})}(He);if((0,V.t)(He))return function Qe(He){return new pe.y(Se=>{He.then(Ee=>{Se.closed||(Se.next(Ee),Se.complete())},Ee=>Se.error(Ee)).then(null,q.h)})}(He);if((0,ve.D)(He))return Fe(He);if((0,Ie.T)(He))return function ye(He){return new pe.y(Se=>{for(const Ee of He)if(Se.next(Ee),Se.closed)return;Se.complete()})}(He);if((0,we.L)(He))return function dt(He){return Fe((0,we.Q)(He))}(He)}throw(0,ue.z)(He)}function Fe(He){return new pe.y(Se=>{(function gt(He,Se){var Ee,Xe,We,xt;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,h.KL)(He);!(Xe=yield Ee.next()).done;)if(Se.next(Xe.value),Se.closed)return}catch(le){We={error:le}}finally{try{Xe&&!Xe.done&&(xt=Ee.return)&&(yield xt.call(Ee))}finally{if(We)throw We.error}}Se.complete()})})(He,Se).catch(Ee=>Se.error(Ee))})}},6451:(nt,De,L)=>{L.d(De,{T:()=>ve});var h=L(8189),te=L(8421),V=L(515),pe=L(3269),fe=L(8996);function ve(...ue){const Ie=(0,pe.yG)(ue),we=(0,pe._6)(ue,1/0),K=ue;return K.length?1===K.length?(0,te.Xf)(K[0]):(0,h.J)(we)((0,fe.D)(K,Ie)):V.E}},5403:(nt,De,L)=>{L.d(De,{x:()=>te});var h=L(930);function te(pe,fe,ve,ue,Ie){return new V(pe,fe,ve,ue,Ie)}class V extends h.Lv{constructor(fe,ve,ue,Ie,we,K){super(fe),this.onFinalize=we,this.shouldUnsubscribe=K,this._next=ve?function(q){try{ve(q)}catch(ie){fe.error(ie)}}:super._next,this._error=Ie?function(q){try{Ie(q)}catch(ie){fe.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(q){fe.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},4004:(nt,De,L)=>{L.d(De,{U:()=>V});var h=L(4482),te=L(5403);function V(pe,fe){return(0,h.e)((ve,ue)=>{let Ie=0;ve.subscribe((0,te.x)(ue,we=>{ue.next(pe.call(fe,we,Ie++))}))})}},8189:(nt,De,L)=>{L.d(De,{J:()=>V});var h=L(5577),te=L(4671);function V(pe=1/0){return(0,h.z)(te.y,pe)}},5577:(nt,De,L)=>{L.d(De,{z:()=>Ie});var h=L(4004),te=L(8421),V=L(4482),pe=L(9672),fe=L(5403),ue=L(576);function Ie(we,K,q=1/0){return(0,ue.m)(K)?Ie((ie,et)=>(0,h.U)((Pe,ze)=>K(ie,Pe,et,ze))((0,te.Xf)(we(ie,et))),q):("number"==typeof K&&(q=K),(0,V.e)((ie,et)=>function ve(we,K,q,ie,et,Pe,ze,Qe){const ye=[];let Fe=0,dt=0,gt=!1;const He=()=>{gt&&!ye.length&&!Fe&&K.complete()},Se=Xe=>Fe<ie?Ee(Xe):ye.push(Xe),Ee=Xe=>{Pe&&K.next(Xe),Fe++;let We=!1;(0,te.Xf)(q(Xe,dt++)).subscribe((0,fe.x)(K,xt=>{null==et||et(xt),Pe?Se(xt):K.next(xt)},()=>{We=!0},void 0,()=>{if(We)try{for(Fe--;ye.length&&Fe<ie;){const xt=ye.shift();ze?(0,pe.f)(K,ze,()=>Ee(xt)):Ee(xt)}He()}catch(xt){K.error(xt)}}))};return we.subscribe((0,fe.x)(K,Se,()=>{gt=!0,He()})),()=>{null==Qe||Qe()}}(ie,et,we,q)))}},5363:(nt,De,L)=>{L.d(De,{Q:()=>pe});var h=L(9672),te=L(4482),V=L(5403);function pe(fe,ve=0){return(0,te.e)((ue,Ie)=>{ue.subscribe((0,V.x)(Ie,we=>(0,h.f)(Ie,fe,()=>Ie.next(we),ve),()=>(0,h.f)(Ie,fe,()=>Ie.complete(),ve),we=>(0,h.f)(Ie,fe,()=>Ie.error(we),ve)))})}},3099:(nt,De,L)=>{L.d(De,{B:()=>fe});var h=L(8421),te=L(7579),V=L(930),pe=L(4482);function fe(ue={}){const{connector:Ie=(()=>new te.x),resetOnError:we=!0,resetOnComplete:K=!0,resetOnRefCountZero:q=!0}=ue;return ie=>{let et,Pe,ze,Qe=0,ye=!1,Fe=!1;const dt=()=>{null==Pe||Pe.unsubscribe(),Pe=void 0},gt=()=>{dt(),et=ze=void 0,ye=Fe=!1},He=()=>{const Se=et;gt(),null==Se||Se.unsubscribe()};return(0,pe.e)((Se,Ee)=>{Qe++,!Fe&&!ye&&dt();const Xe=ze=null!=ze?ze:Ie();Ee.add(()=>{Qe--,0===Qe&&!Fe&&!ye&&(Pe=ve(He,q))}),Xe.subscribe(Ee),!et&&Qe>0&&(et=new V.Hp({next:We=>Xe.next(We),error:We=>{Fe=!0,dt(),Pe=ve(gt,we,We),Xe.error(We)},complete:()=>{ye=!0,dt(),Pe=ve(gt,K),Xe.complete()}}),(0,h.Xf)(Se).subscribe(et))})(ie)}}function ve(ue,Ie,...we){if(!0===Ie)return void ue();if(!1===Ie)return;const K=new V.Hp({next:()=>{K.unsubscribe(),ue()}});return Ie(...we).subscribe(K)}},9468:(nt,De,L)=>{L.d(De,{R:()=>te});var h=L(4482);function te(V,pe=0){return(0,h.e)((fe,ve)=>{ve.add(V.schedule(()=>fe.subscribe(ve),pe))})}},8505:(nt,De,L)=>{L.d(De,{b:()=>fe});var h=L(576),te=L(4482),V=L(5403),pe=L(4671);function fe(ve,ue,Ie){const we=(0,h.m)(ve)||ue||Ie?{next:ve,error:ue,complete:Ie}:ve;return we?(0,te.e)((K,q)=>{var ie;null===(ie=we.subscribe)||void 0===ie||ie.call(we);let et=!0;K.subscribe((0,V.x)(q,Pe=>{var ze;null===(ze=we.next)||void 0===ze||ze.call(we,Pe),q.next(Pe)},()=>{var Pe;et=!1,null===(Pe=we.complete)||void 0===Pe||Pe.call(we),q.complete()},Pe=>{var ze;et=!1,null===(ze=we.error)||void 0===ze||ze.call(we,Pe),q.error(Pe)},()=>{var Pe,ze;et&&(null===(Pe=we.unsubscribe)||void 0===Pe||Pe.call(we)),null===(ze=we.finalize)||void 0===ze||ze.call(we)}))}):pe.y}},4408:(nt,De,L)=>{L.d(De,{o:()=>fe});var h=L(727);class te extends h.w0{constructor(ue,Ie){super()}schedule(ue,Ie=0){return this}}const V={setInterval(ve,ue,...Ie){const{delegate:we}=V;return(null==we?void 0:we.setInterval)?we.setInterval(ve,ue,...Ie):setInterval(ve,ue,...Ie)},clearInterval(ve){const{delegate:ue}=V;return((null==ue?void 0:ue.clearInterval)||clearInterval)(ve)},delegate:void 0};var pe=L(8737);class fe extends te{constructor(ue,Ie){super(ue,Ie),this.scheduler=ue,this.work=Ie,this.pending=!1}schedule(ue,Ie=0){var we;if(this.closed)return this;this.state=ue;const K=this.id,q=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(q,K,Ie)),this.pending=!0,this.delay=Ie,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(q,this.id,Ie),this}requestAsyncId(ue,Ie,we=0){return V.setInterval(ue.flush.bind(ue,this),we)}recycleAsyncId(ue,Ie,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return Ie;null!=Ie&&V.clearInterval(Ie)}execute(ue,Ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(ue,Ie);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,Ie){let K,we=!1;try{this.work(ue)}catch(q){we=!0,K=q||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:ue,scheduler:Ie}=this,{actions:we}=Ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,pe.P)(we,this),null!=ue&&(this.id=this.recycleAsyncId(Ie,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,De,L)=>{L.d(De,{v:()=>V});var h=L(6063);class te{constructor(fe,ve=te.now){this.schedulerActionCtor=fe,this.now=ve}schedule(fe,ve=0,ue){return new this.schedulerActionCtor(this,fe).schedule(ue,ve)}}te.now=h.l.now;class V extends te{constructor(fe,ve=te.now){super(fe,ve),this.actions=[],this._active=!1}flush(fe){const{actions:ve}=this;if(this._active)return void ve.push(fe);let ue;this._active=!0;do{if(ue=fe.execute(fe.state,fe.delay))break}while(fe=ve.shift());if(this._active=!1,ue){for(;fe=ve.shift();)fe.unsubscribe();throw ue}}}},4986:(nt,De,L)=>{L.d(De,{P:()=>pe,z:()=>V});var h=L(4408);const V=new(L(7565).v)(h.o),pe=V},6063:(nt,De,L)=>{L.d(De,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(nt,De,L)=>{L.d(De,{z:()=>h});const h={setTimeout(te,V,...pe){const{delegate:fe}=h;return(null==fe?void 0:fe.setTimeout)?fe.setTimeout(te,V,...pe):setTimeout(te,V,...pe)},clearTimeout(te){const{delegate:V}=h;return((null==V?void 0:V.clearTimeout)||clearTimeout)(te)},delegate:void 0}},2202:(nt,De,L)=>{L.d(De,{h:()=>te});const te=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,De,L)=>{L.d(De,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(nt,De,L)=>{L.d(De,{_6:()=>ve,jO:()=>pe,yG:()=>fe});var h=L(576),te=L(3532);function V(ue){return ue[ue.length-1]}function pe(ue){return(0,h.m)(V(ue))?ue.pop():void 0}function fe(ue){return(0,te.K)(V(ue))?ue.pop():void 0}function ve(ue,Ie){return"number"==typeof V(ue)?ue.pop():Ie}},8737:(nt,De,L)=>{function h(te,V){if(te){const pe=te.indexOf(V);0<=pe&&te.splice(pe,1)}}L.d(De,{P:()=>h})},3888:(nt,De,L)=>{function h(te){const pe=te(fe=>{Error.call(fe),fe.stack=(new Error).stack});return pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,pe}L.d(De,{d:()=>h})},2806:(nt,De,L)=>{L.d(De,{O:()=>pe,x:()=>V});var h=L(2416);let te=null;function V(fe){if(h.v.useDeprecatedSynchronousErrorHandling){const ve=!te;if(ve&&(te={errorThrown:!1,error:null}),fe(),ve){const{errorThrown:ue,error:Ie}=te;if(te=null,ue)throw Ie}}else fe()}function pe(fe){h.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=fe)}},9672:(nt,De,L)=>{function h(te,V,pe,fe=0,ve=!1){const ue=V.schedule(function(){pe(),ve?te.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(te.add(ue),!ve)return ue}L.d(De,{f:()=>h})},4671:(nt,De,L)=>{function h(te){return te}L.d(De,{y:()=>h})},1144:(nt,De,L)=>{L.d(De,{z:()=>h});const h=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(nt,De,L)=>{L.d(De,{D:()=>te});var h=L(576);function te(V){return Symbol.asyncIterator&&(0,h.m)(null==V?void 0:V[Symbol.asyncIterator])}},576:(nt,De,L)=>{function h(te){return"function"==typeof te}L.d(De,{m:()=>h})},3670:(nt,De,L)=>{L.d(De,{c:()=>V});var h=L(8822),te=L(576);function V(pe){return(0,te.m)(pe[h.L])}},6495:(nt,De,L)=>{L.d(De,{T:()=>V});var h=L(2202),te=L(576);function V(pe){return(0,te.m)(null==pe?void 0:pe[h.h])}},8239:(nt,De,L)=>{L.d(De,{t:()=>te});var h=L(576);function te(V){return(0,h.m)(null==V?void 0:V.then)}},3260:(nt,De,L)=>{L.d(De,{L:()=>pe,Q:()=>V});var h=L(7582),te=L(576);function V(fe){return(0,h.FC)(this,arguments,function*(){const ue=fe.getReader();try{for(;;){const{value:Ie,done:we}=yield(0,h.qq)(ue.read());if(we)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Ie)}}finally{ue.releaseLock()}})}function pe(fe){return(0,te.m)(null==fe?void 0:fe.getReader)}},3532:(nt,De,L)=>{L.d(De,{K:()=>te});var h=L(576);function te(V){return V&&(0,h.m)(V.schedule)}},4482:(nt,De,L)=>{L.d(De,{A:()=>te,e:()=>V});var h=L(576);function te(pe){return(0,h.m)(null==pe?void 0:pe.lift)}function V(pe){return fe=>{if(te(fe))return fe.lift(function(ve){try{return pe(ve,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(nt,De,L)=>{function h(){}L.d(De,{Z:()=>h})},7849:(nt,De,L)=>{L.d(De,{h:()=>V});var h=L(2416),te=L(3410);function V(pe){te.z.setTimeout(()=>{const{onUnhandledError:fe}=h.v;if(!fe)throw pe;fe(pe)})}},4532:(nt,De,L)=>{function h(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(De,{z:()=>h})},5e3:(nt,De,L)=>{L.d(De,{$8M:()=>qi,$Z:()=>Hx,AFp:()=>DD,AaK:()=>Ie,CRH:()=>aD,CZH:()=>Af,CqO:()=>zx,DdM:()=>M0,EJc:()=>AD,F4k:()=>$x,FYo:()=>mf,FiY:()=>nc,G48:()=>YM,Gf:()=>vu,GfV:()=>qC,Gpc:()=>q,Ikx:()=>fg,JOm:()=>Wr,LFG:()=>_i,LSH:()=>E,Lbi:()=>TD,NdJ:()=>QE,OlP:()=>zn,Oqu:()=>g_,PXZ:()=>FD,Q6J:()=>c_,QGY:()=>Zy,Qsj:()=>D0,R0b:()=>Oa,RDi:()=>Za,Rgc:()=>xg,SBq:()=>Ig,Sil:()=>$_,Suo:()=>vs,TTD:()=>Ol,TgZ:()=>u_,VLi:()=>zM,X6Q:()=>ib,XFs:()=>It,Xpm:()=>si,Y36:()=>l_,YKP:()=>QC,Yjl:()=>qt,Yz7:()=>Ce,ZZ4:()=>db,_Bn:()=>zC,_UZ:()=>Or,_Vd:()=>P_,_c5:()=>KD,_uU:()=>hg,aQg:()=>hb,c2e:()=>gc,cJS:()=>Yt,cg1:()=>m_,dDg:()=>Q0,deG:()=>Gc,dqk:()=>Xt,eFA:()=>LD,ekj:()=>Qy,f3M:()=>ec,g9A:()=>SD,h0i:()=>bf,hGG:()=>u1,iGM:()=>oD,ifc:()=>Wt,ip1:()=>CD,kL8:()=>s0,lG2:()=>ct,n5z:()=>mi,oAB:()=>Q,q4F:()=>WC,qLn:()=>Ci,qOj:()=>Oy,qZA:()=>d_,sBO:()=>JM,sIi:()=>t_,s_b:()=>Ag,soG:()=>H_,tBr:()=>_a,tb:()=>j_,tp0:()=>ll,uIk:()=>jE,vHH:()=>ze,vpe:()=>zs,wAp:()=>zt,xp6:()=>AT,z2F:()=>tb,zSh:()=>TE,zs3:()=>Hs});var h=L(7579),te=L(727),V=L(8306),pe=L(6451),fe=L(3099);function ve(o){for(let a in o)if(o[a]===ve)return a;throw Error("Could not find renamed property on target object.")}function ue(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function Ie(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(Ie).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function we(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const K=ve({__forward_ref__:ve});function q(o){return o.__forward_ref__=q,o.toString=function(){return Ie(this())},o}function ie(o){return et(o)?o():o}function et(o){return"function"==typeof o&&o.hasOwnProperty(K)&&o.__forward_ref__===q}class ze extends Error{constructor(a,c){super(function Qe(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,c)),this.code=a}}function ye(o){return"string"==typeof o?o:null==o?"":String(o)}function Fe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ye(o)}function Se(o,a){const c=a?` in ${a}`:"";throw new ze(-201,`No provider for ${Fe(o)} found${c}`)}function se(o,a){null==o&&function ne(o,a,c,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function Ce(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Yt(o){return{providers:o.providers||[],imports:o.imports||[]}}function on(o){return Et(o,Wn)||Et(o,hi)}function Et(o,a){return o.hasOwnProperty(a)?o[a]:null}function Nn(o){return o&&(o.hasOwnProperty(Ni)||o.hasOwnProperty(Br))?o[Ni]:null}const Wn=ve({\u0275prov:ve}),Ni=ve({\u0275inj:ve}),hi=ve({ngInjectableDef:ve}),Br=ve({ngInjectorDef:ve});var It=(()=>((It=It||{})[It.Default=0]="Default",It[It.Host=1]="Host",It[It.Self=2]="Self",It[It.SkipSelf=4]="SkipSelf",It[It.Optional=8]="Optional",It))();let kl;function fi(o){const a=kl;return kl=o,a}function Dc(o,a,c){const d=on(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&It.Optional?null:void 0!==a?a:void Se(Ie(o),"Injector")}function pi(o){return{toString:o}.toString()}var Li=(()=>((Li=Li||{})[Li.OnPush=0]="OnPush",Li[Li.Default=1]="Default",Li))(),Wt=(()=>{return(o=Wt||(Wt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Wt;var o})();const Tt="undefined"!=typeof globalThis&&globalThis,Ht="undefined"!=typeof window&&window,Eo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Xt=Tt||"undefined"!=typeof global&&global||Ht||Eo,Ur={},Bt=[],Do=ve({\u0275cmp:ve}),sn=ve({\u0275dir:ve}),ss=ve({\u0275pipe:ve}),tr=ve({\u0275mod:ve}),Ln=ve({\u0275fac:ve}),Zn=ve({__NG_ELEMENT_ID__:ve});let Io=0;function si(o){return pi(()=>{const c={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Li.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||Bt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Wt.Emulated,id:"c",styles:o.styles||Bt,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,_=o.features,b=o.pipes;return d.id+=Io++,d.inputs=oe(o.inputs,c),d.outputs=oe(o.outputs),_&&_.forEach(D=>D(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(zi):null,d.pipeDefs=b?()=>("function"==typeof b?b():b).map($):null,d})}function zi(o){return Ut(o)||function Un(o){return o[sn]||null}(o)}function $(o){return function kn(o){return o[ss]||null}(o)}const j={};function Q(o){return pi(()=>{const a={type:o.type,bootstrap:o.bootstrap||Bt,declarations:o.declarations||Bt,imports:o.imports||Bt,exports:o.exports||Bt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(j[o.id]=o.type),a})}function oe(o,a){if(null==o)return Ur;const c={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),c[f]=d,a&&(a[f]=_)}return c}const ct=si;function qt(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function Ut(o){return o[Do]||null}function yn(o,a){const c=o[tr]||null;if(!c&&!0===a)throw new Error(`Type ${Ie(o)} does not have '\u0275mod' property.`);return c}function Er(o){return Array.isArray(o)&&"object"==typeof o[1]}function $r(o){return Array.isArray(o)&&!0===o[1]}function Lu(o){return 0!=(8&o.flags)}function Ao(o){return 2==(2&o.flags)}function za(o){return 1==(1&o.flags)}function rr(o){return null!==o.template}function Sc(o){return 0!=(512&o[2])}function Jo(o,a){return o.hasOwnProperty(Ln)?o[Ln]:null}class Rs{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ol(){return Ga}function Ga(o){return o.type.prototype.ngOnChanges&&(o.setInput=wh),Ep}function Ep(){const o=Rl(this),a=null==o?void 0:o.current;if(a){const c=o.previous;if(c===Ur)o.previous=a;else for(let d in a)c[d]=a[d];o.current=null,this.ngOnChanges(a)}}function wh(o,a,c,d){const f=Rl(o)||function Cp(o,a){return o[ea]=a}(o,{previous:Ur,current:null}),_=f.current||(f.current={}),b=f.previous,D=this.declaredInputs[c],T=b[D];_[D]=new Rs(T&&T.currentValue,a,b===Ur),o[d]=a}Ol.ngInherit=!0;const ea="__ngSimpleChanges__";function Rl(o){return o[ea]||null}let os;function Za(o){os=o}function On(o){return!!o.listen}const Hu={createRenderer:(o,a)=>function Fs(){return void 0!==os?os:"undefined"!=typeof document?document:void 0}()};function En(o){for(;Array.isArray(o);)o=o[0];return o}function Ya(o,a){return En(a[o])}function yi(o,a){return En(a[o.index])}function Gi(o,a){return o.data[a]}function Dr(o,a){const c=a[o];return Er(c)?c:c[0]}function ta(o){return 4==(4&o[2])}function ls(o){return 128==(128&o[2])}function Ns(o,a){return null==a?null:o[a]}function Qa(o){o[18]=0}function mr(o,a){o[5]+=a;let c=o,d=o[3];for(;null!==d&&(1===a&&1===c[5]||-1===a&&0===c[5]);)d[5]+=a,c=d,d=d[3]}const Ft={lFrame:Gu(null),bindingsEnabled:!0};function Rc(){return Ft.bindingsEnabled}function Ne(){return Ft.lFrame.lView}function hn(){return Ft.lFrame.tView}function ti(){let o=Fc();for(;null!==o&&64===o.type;)o=o.parent;return o}function Fc(){return Ft.lFrame.currentTNode}function cs(o,a){const c=Ft.lFrame;c.currentTNode=o,c.isParent=a}function Mo(){return Ft.lFrame.isParent}function ko(){return Ft.lFrame.bindingIndex++}function Bl(o,a){const c=Ft.lFrame;c.bindingIndex=c.bindingRootIndex=o,Po(a)}function Po(o){Ft.lFrame.currentDirectiveIndex=o}function el(){return Ft.lFrame.currentQueryIndex}function Sh(o){Ft.lFrame.currentQueryIndex=o}function Th(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function tl(o,a,c){if(c&It.SkipSelf){let f=a,_=o;for(;!(f=f.parent,null!==f||c&It.Host||(f=Th(_),null===f||(_=_[15],10&f.type))););if(null===f)return!1;a=f,o=_}const d=Ft.lFrame=Pi();return d.currentTNode=a,d.lView=o,!0}function Lc(o){const a=Pi(),c=o[1];Ft.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Pi(){const o=Ft.lFrame,a=null===o?null:o.child;return null===a?Gu(o):a}function Gu(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function qu(){const o=Ft.lFrame;return Ft.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Ul=qu;function Tr(){const o=qu();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function oi(){return Ft.lFrame.selectedIndex}function ds(o){Ft.lFrame.selectedIndex=o}function Rn(){const o=Ft.lFrame;return Gi(o.tView,o.selectedIndex)}function Uc(o,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const _=o.data[c].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:D,ngAfterViewInit:T,ngAfterViewChecked:k,ngOnDestroy:R}=_;b&&(o.contentHooks||(o.contentHooks=[])).push(-c,b),D&&((o.contentHooks||(o.contentHooks=[])).push(c,D),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,D)),T&&(o.viewHooks||(o.viewHooks=[])).push(-c,T),k&&((o.viewHooks||(o.viewHooks=[])).push(c,k),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,k)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(c,R)}}function sa(o,a,c){kh(o,a,3,c)}function jl(o,a,c,d){(3&o[2])===c&&kh(o,a,c,d)}function eo(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function kh(o,a,c,d){const _=null!=d?d:-1,b=a.length-1;let D=0;for(let T=void 0!==d?65535&o[18]:0;T<b;T++)if("number"==typeof a[T+1]){if(D=a[T],null!=d&&D>=d)break}else a[T]<0&&(o[18]+=65536),(D<_||-1==_)&&(Ph(o,c,a,T),o[18]=(4294901760&o[18])+T+2),T++}function Ph(o,a,c,d){const f=c[d]<0,_=c[d+1],D=o[f?-c[d]:c[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{_.call(D)}finally{}}}else try{_.call(D)}finally{}}class Hl{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Ui(o,a,c){const d=On(o);let f=0;for(;f<c.length;){const _=c[f];if("number"==typeof _){if(0!==_)break;f++;const b=c[f++],D=c[f++],T=c[f++];d?o.setAttribute(a,D,T,b):a.setAttributeNS(b,D,T)}else{const b=_,D=c[++f];hs(b)?d&&o.setProperty(a,b,D):d?o.setAttribute(a,b,D):a.setAttribute(b,D),f++}}return f}function gi(o){return 3===o||4===o||6===o}function hs(o){return 64===o.charCodeAt(0)}function xr(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?c=f:0===c||Hn(o,c,f,null,-1===c||2===c?a[++d]:null)}}return o}function Hn(o,a,c,d,f){let _=0,b=o.length;if(-1===a)b=-1;else for(;_<o.length;){const D=o[_++];if("number"==typeof D){if(D===a){b=-1;break}if(D>a){b=_-1;break}}}for(;_<o.length;){const D=o[_];if("number"==typeof D)break;if(D===c){if(null===d)return void(null!==f&&(o[_+1]=f));if(d===o[_+1])return void(o[_+2]=f)}_++,null!==d&&_++,null!==f&&_++}-1!==b&&(o.splice(b,0,a),_=b+1),o.splice(_++,0,c),null!==d&&o.splice(_++,0,d),null!==f&&o.splice(_++,0,f)}function $n(o){return-1!==o}function ai(o){return 32767&o}function aa(o,a){let c=function $t(o){return o>>16}(o),d=a;for(;c>0;)d=d[15],c--;return d}let $l=!0;function _r(o){const a=$l;return $l=o,a}let Rh=0;function la(o,a){const c=Ku(o,a);if(-1!==c)return c;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Ls(d.data,o),Ls(a,null),Ls(d.blueprint,null));const f=rl(o,a),_=o.injectorIndex;if($n(f)){const b=ai(f),D=aa(f,a),T=D[1].data;for(let k=0;k<8;k++)a[_+k]=D[b+k]|T[b+k]}return a[_+8]=f,_}function Ls(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Ku(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function rl(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,d=null,f=a;for(;null!==f;){const _=f[1],b=_.type;if(d=2===b?_.declTNode:1===b?f[6]:null,null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function Yu(o,a,c){!function Gl(o,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Zn)&&(d=c[Zn]),null==d&&(d=c[Zn]=Rh++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,c)}function Fh(o,a,c){if(c&It.Optional)return o;Se(a,"NodeInjector")}function to(o,a,c,d){if(c&It.Optional&&void 0===d&&(d=null),0==(c&(It.Self|It.Host))){const f=o[9],_=fi(void 0);try{return f?f.get(a,d,c&It.Optional):Dc(a,d,c&It.Optional)}finally{fi(_)}}return Fh(d,a,c)}function xp(o,a,c,d=It.Default,f){if(null!==o){const _=function jc(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Zn)?o[Zn]:void 0;return"number"==typeof a?a>=0?255&a:Yn:a}(c);if("function"==typeof _){if(!tl(a,o,d))return d&It.Host?Fh(f,c,d):to(a,c,d,f);try{const b=_(d);if(null!=b||d&It.Optional)return b;Se(c)}finally{Ul()}}else if("number"==typeof _){let b=null,D=Ku(o,a),T=-1,k=d&It.Host?a[16][6]:null;for((-1===D||d&It.SkipSelf)&&(T=-1===D?rl(o,a):a[D+8],-1!==T&&sl(d,!1)?(b=a[1],D=ai(T),a=aa(T,a)):D=-1);-1!==D;){const R=a[1];if(Hc(_,D,R.data)){const U=Nh(D,a,c,b,d,k);if(U!==Oo)return U}T=a[D+8],-1!==T&&sl(d,a[1].data[D+8]===k)&&Hc(_,D,a)?(b=R,D=ai(T),a=aa(T,a)):D=-1}}}return to(a,c,d,f)}const Oo={};function Yn(){return new no(ti(),Ne())}function Nh(o,a,c,d,f,_){const b=a[1],D=b.data[o+8],R=Tn(D,b,c,null==d?Ao(D)&&$l:d!=b&&0!=(3&D.type),f&It.Host&&_===D);return null!==R?Ro(a,b,R,D):Oo}function Tn(o,a,c,d,f){const _=o.providerIndexes,b=a.data,D=1048575&_,T=o.directiveStart,R=_>>20,G=f?D+R:o.directiveEnd;for(let J=d?D:D+R;J<G;J++){const Te=b[J];if(J<T&&c===Te||J>=T&&Te.type===c)return J}if(f){const J=b[T];if(J&&rr(J)&&J.type===c)return T}return null}function Ro(o,a,c,d){let f=o[c];const _=a.data;if(function Am(o){return o instanceof Hl}(f)){const b=f;b.resolving&&function dt(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new ze(-200,`Circular dependency in DI detected for ${o}${c}`)}(Fe(_[c]));const D=_r(b.canSeeViewProviders);b.resolving=!0;const T=b.injectImpl?fi(b.injectImpl):null;tl(o,d,It.Default);try{f=o[c]=b.factory(void 0,_,o,d),a.firstCreatePass&&c>=d.directiveStart&&function Mh(o,a,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:_}=a.type.prototype;if(d){const b=Ga(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,b),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,b)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,f),_&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,_),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,_))}(c,_[c],a)}finally{null!==T&&fi(T),_r(D),b.resolving=!1,Ul()}}return f}function Hc(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function sl(o,a){return!(o&It.Self||o&It.Host&&a)}class no{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return xp(this._tNode,this._lView,a,d,c)}}function mi(o){return pi(()=>{const a=o.prototype.constructor,c=a[Ln]||$c(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const _=f[Ln]||$c(f);if(_&&_!==c)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function $c(o){return et(o)?()=>{const a=$c(ie(o));return a&&a()}:Jo(o)}function qi(o){return function ca(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const _=c[f];if(gi(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(_===a)return c[f+1];f+=2}}}return null}(ti(),o)}const ua="__parameters__";function da(o,a,c){return pi(()=>{const d=function Lh(o){return function(...c){if(o){const d=o(...c);for(const f in d)this[f]=d[f]}}}(a);function f(..._){if(this instanceof f)return d.apply(this,_),this;const b=new f(..._);return D.annotation=b,D;function D(T,k,R){const U=T.hasOwnProperty(ua)?T[ua]:Object.defineProperty(T,ua,{value:[]})[ua];for(;U.length<=R;)U.push(null);return(U[R]=U[R]||[]).push(b),T}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class zn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Ce({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Gc=new zn("AnalyzeForEntryComponents");function Gr(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let d=o[c];Array.isArray(d)?(a===o&&(a=o.slice(0,c)),Gr(d,a)):a!==o&&a.push(d)}return a}function qr(o,a){o.forEach(c=>Array.isArray(c)?qr(c,a):a(c))}function Uh(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function fa(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Oi(o,a,c){let d=ci(o,a);return d>=0?o[1|d]=c:(d=~d,function Wc(o,a,c,d){let f=o.length;if(f==a)o.push(c,d);else if(1===f)o.push(d,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=d}}(o,d,a,c)),d}function so(o,a){const c=ci(o,a);if(c>=0)return o[1|c]}function ci(o,a){return function pa(o,a,c){let d=0,f=o.length>>c;for(;f!==d;){const _=d+(f-d>>1),b=o[_<<c];if(a===b)return _<<c;b>a?f=_:d=_+1}return~(f<<c)}(o,a,1)}const Kl={},Yl="__NG_DI_FLAG__",No="ngTempTokenPath",Kc=/\n/gm,Xl="__source",id=ve({provide:String,useValue:ve});let ol;function ma(o){const a=ol;return ol=o,a}function Pp(o,a=It.Default){if(void 0===ol)throw new ze(203,"");return null===ol?Dc(o,void 0,a):ol.get(o,a&It.Optional?null:void 0,a)}function _i(o,a=It.Default){return(function ri(){return kl}()||Pp)(ie(o),a)}const ec=_i;function al(o){const a=[];for(let c=0;c<o.length;c++){const d=ie(o[c]);if(Array.isArray(d)){if(0===d.length)throw new ze(900,"");let f,_=It.Default;for(let b=0;b<d.length;b++){const D=d[b],T=Yc(D);"number"==typeof T?-1===T?f=D.token:_|=T:f=D}a.push(_i(f,_))}else a.push(_i(d))}return a}function tc(o,a){return o[Yl]=a,o.prototype[Yl]=a,o}function Yc(o){return o[Yl]}const _a=tc(da("Inject",o=>({token:o})),-1),nc=tc(da("Optional"),8),ll=tc(da("SkipSelf"),4);var Wr=(()=>((Wr=Wr||{})[Wr.Important=1]="Important",Wr[Wr.DashCase=2]="DashCase",Wr))();const ud="__ngContext__";function bi(o,a){o[ud]=a}function Zr(o){const a=function Us(o){return o[ud]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function P(o,a){return undefined(o,a)}function X(o){const a=o[3];return $r(a)?a[3]:a}function Ze(o){return jt(o[13])}function ut(o){return jt(o[4])}function jt(o){for(;null!==o&&!$r(o);)o=o[4];return o}function wi(o,a,c,d,f){if(null!=d){let _,b=!1;$r(d)?_=d:Er(d)&&(b=!0,d=d[0]);const D=En(d);0===o&&null!==c?null==f?Vm(a,c,D):Ca(a,c,D,f||null,!0):1===o&&null!==c?Ca(a,c,D,f||null,!0):2===o?function Cd(o,a,c){const d=oc(o,a);d&&function bd(o,a,c,d){On(o)?o.removeChild(a,c,d):a.removeChild(c)}(o,d,a,c)}(a,D,b):3===o&&a.destroyNode(D),null!=_&&function Um(o,a,c,d,f){const _=c[7];_!==En(c)&&wi(a,o,d,_,f);for(let D=10;D<c.length;D++){const T=c[D];nu(T[1],T,o,a,d,_)}}(a,o,_,c,f)}}function Ar(o,a,c){if(On(o))return o.createElement(a,c);{const d=null!==c?function ju(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(c):null;return null===d?o.createElement(a):o.createElementNS(d,a)}}function _d(o,a){const c=o[9],d=c.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,mr(f,-1)),c.splice(d,1)}function eu(o,a){if(o.length<=10)return;const c=10+a,d=o[c];if(d){const f=d[17];null!==f&&f!==o&&_d(f,d),a>0&&(o[c-1][4]=d[4]);const _=fa(o,10+a);!function gs(o,a){nu(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const b=_[19];null!==b&&b.detachView(_[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function vd(o,a){if(!(256&a[2])){const c=a[11];On(c)&&c.destroyNode&&nu(o,a,c,3,null,null),function md(o){let a=o[13];if(!a)return yd(o[1],o);for(;a;){let c=null;if(Er(a))c=a[13];else{const d=a[10];d&&(c=d)}if(!c){for(;a&&!a[4]&&a!==o;)Er(a)&&yd(a[1],a),a=a[3];null===a&&(a=o),Er(a)&&yd(a[1],a),c=a&&a[4]}a=c}}(a)}}function yd(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function Lm(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let d=0;d<c.length;d+=2){const f=a[c[d]];if(!(f instanceof Hl)){const _=c[d+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const D=f[_[b]],T=_[b+1];try{T.call(D)}finally{}}else try{_.call(f)}finally{}}}}(o,a),function Lp(o,a){const c=o.cleanup,d=a[7];let f=-1;if(null!==c)for(let _=0;_<c.length-1;_+=2)if("string"==typeof c[_]){const b=c[_+1],D="function"==typeof b?b(a):En(a[b]),T=d[f=c[_+2]],k=c[_+3];"boolean"==typeof k?D.removeEventListener(c[_],T,k):k>=0?d[f=k]():d[f=-k].unsubscribe(),_+=2}else{const b=d[f=c[_+1]];c[_].call(b)}if(null!==d){for(let _=f+1;_<d.length;_++)d[_]();a[7]=null}}(o,a),1===a[1].type&&On(a[11])&&a[11].destroy();const c=a[17];if(null!==c&&$r(a[3])){c!==a[3]&&_d(c,a);const d=a[19];null!==d&&d.detachView(o)}}}function Wh(o,a,c){return function Vp(o,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===Wt.None||f===Wt.Emulated)return null}return yi(d,c)}(o,a.parent,c)}function Ca(o,a,c,d,f){On(o)?o.insertBefore(a,c,d,f):a.insertBefore(c,d,f)}function Vm(o,a,c){On(o)?o.appendChild(a,c):a.appendChild(c)}function Bp(o,a,c,d,f){null!==d?Ca(o,a,c,d,f):Vm(o,a,c)}function oc(o,a){return On(o)?o.parentNode(a):a.parentNode}let Up=function Xv(o,a,c){return 40&o.type?yi(o,c):null};function wd(o,a,c,d){const f=Wh(o,d,a),_=a[11],D=function Qv(o,a,c){return Up(o,a,c)}(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(c))for(let T=0;T<c.length;T++)Bp(_,f,c[T],D,!1);else Bp(_,f,c,D,!1)}function Kh(o,a){if(null!==a){const c=a.type;if(3&c)return yi(a,o);if(4&c)return tu(-1,o[a.index]);if(8&c){const d=a.child;if(null!==d)return Kh(o,d);{const f=o[a.index];return $r(f)?tu(-1,f):En(f)}}if(32&c)return P(a,o)()||En(o[a.index]);{const d=Ed(o,a);return null!==d?Array.isArray(d)?d[0]:Kh(X(o[16]),d):Kh(o,a.next)}}return null}function Ed(o,a){return null!==a?o[16][6].projection[a.projection]:null}function tu(o,a){const c=10+o+1;if(c<a.length){const d=a[c],f=d[1].firstChild;if(null!==f)return Kh(d,f)}return a[7]}function Dd(o,a,c,d,f,_,b){for(;null!=c;){const D=d[c.index],T=c.type;if(b&&0===a&&(D&&bi(En(D),d),c.flags|=4),64!=(64&c.flags))if(8&T)Dd(o,a,c.child,d,f,_,!1),wi(a,o,f,D,_);else if(32&T){const k=P(c,d);let R;for(;R=k();)wi(a,o,f,R,_);wi(a,o,f,D,_)}else 16&T?ey(o,a,d,c,f,_):wi(a,o,f,D,_);c=b?c.projectionNext:c.next}}function nu(o,a,c,d,f,_){Dd(c,d,o.firstChild,a,f,_,!1)}function ey(o,a,c,d,f,_){const b=c[16],T=b[6].projection[d.projection];if(Array.isArray(T))for(let k=0;k<T.length;k++)wi(a,o,f,T[k],_);else Dd(o,a,T,b[3],f,_,!0)}function Yh(o,a,c){On(o)?o.setAttribute(a,"style",c):a.style.cssText=c}function Id(o,a,c){On(o)?""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c):a.className=c}class Hp{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function fl(o){return o instanceof Hp?o.changingThisBreaksApplicationSecurity:o}const Ad=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ay=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var y=(()=>((y=y||{})[y.NONE=0]="NONE",y[y.HTML=1]="HTML",y[y.STYLE=2]="STYLE",y[y.SCRIPT=3]="SCRIPT",y[y.URL=4]="URL",y[y.RESOURCE_URL=5]="RESOURCE_URL",y))();function E(o){const a=function ln(){const o=Ne();return o&&o[12]}();return a?a.sanitize(y.URL,o)||"":function ru(o,a){const c=function ry(o){return o instanceof Hp&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}(o,"URL")?fl(o):function su(o){return(o=String(o)).match(Ad)||o.match(ay)?o:"unsafe:"+o}(ye(o))}function Pd(o){return o.ngOriginalError}function Ei(o,...a){o.error(...a)}class Ci{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a),d=function Zp(o){return o&&o.ngErrorLogger||Ei}(a);d(this._console,"ERROR",a),c&&d(this._console,"ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Pd(a);for(;c&&Pd(c);)c=Pd(c);return c||null}}const tE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Xt))();function lc(o){return o instanceof Function?o():o}function nE(o,a,c){let d=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const _=a.length;if(f+_===d||o.charCodeAt(f+_)<=32)return f}c=f+1}}const iE="ng-template";function IT(o,a,c){let d=0;for(;d<o.length;){let f=o[d++];if(c&&"class"===f){if(f=o[d],-1!==nE(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function Zm(o){return 4===o.type&&o.value!==iE}function ST(o,a,c){return a===(4!==o.type||c?o.value:iE)}function rE(o,a,c){let d=4;const f=o.attrs||[],_=function tF(o){for(let a=0;a<o.length;a++)if(gi(o[a]))return a;return o.length}(f);let b=!1;for(let D=0;D<a.length;D++){const T=a[D];if("number"!=typeof T){if(!b)if(4&d){if(d=2|1&d,""!==T&&!ST(o,T,c)||""===T&&1===a.length){if(ml(d))return!1;b=!0}}else{const k=8&d?T:a[++D];if(8&d&&null!==o.attrs){if(!IT(o.attrs,k,c)){if(ml(d))return!1;b=!0}continue}const U=JR(8&d?"class":T,f,Zm(o),c);if(-1===U){if(ml(d))return!1;b=!0;continue}if(""!==k){let G;G=U>_?"":f[U+1].toLowerCase();const J=8&d?G:null;if(J&&-1!==nE(J,k,0)||2&d&&k!==G){if(ml(d))return!1;b=!0}}}}else{if(!b&&!ml(d)&&!ml(T))return!1;if(b&&ml(T))continue;b=!1,d=T|1&d}}return ml(d)||b}function ml(o){return 0==(1&o)}function JR(o,a,c,d){if(null===a)return-1;let f=0;if(d||!c){let _=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)_=!0;else{if(1===b||2===b){let D=a[++f];for(;"string"==typeof D;)D=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=_?1:2}return-1}return function nF(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const d=o[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,o)}function TT(o,a,c=!1){for(let d=0;d<a.length;d++)if(rE(o,a[d],c))return!0;return!1}function xT(o,a){return o?":not("+a.trim()+")":a}function rF(o){let a=o[0],c=1,d=2,f="",_=!1;for(;c<o.length;){let b=o[c];if("string"==typeof b)if(2&d){const D=o[++c];f+="["+b+(D.length>0?'="'+D+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!ml(b)&&(a+=xT(_,f),f=""),d=b,_=_||!ml(d);c++}return""!==f&&(a+=xT(_,f)),a}const tn={};function AT(o){MT(hn(),Ne(),oi()+o,!1)}function MT(o,a,c,d){if(!d)if(3==(3&a[2])){const _=o.preOrderCheckHooks;null!==_&&sa(a,_,c)}else{const _=o.preOrderHooks;null!==_&&jl(a,_,0,c)}ds(c)}function gy(o,a){return o<<17|a<<2}function _l(o){return o>>17&32767}function sE(o){return 2|o}function lu(o){return(131068&o)>>2}function oE(o,a){return-131069&o|a<<2}function aE(o){return 1|o}function jT(o,a){const c=o.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],_=c[d+1];if(-1!==_){const b=o.data[_];Sh(f),b.contentQueries(2,a[_],_)}}}function Km(o,a,c,d,f,_,b,D,T,k){const R=a.blueprint.slice();return R[0]=f,R[2]=140|d,Qa(R),R[3]=R[15]=o,R[8]=c,R[10]=b||o&&o[10],R[11]=D||o&&o[11],R[12]=T||o&&o[12]||null,R[9]=k||o&&o[9]||null,R[6]=_,R[16]=2==a.type?o[16]:R,R}function Yp(o,a,c,d,f){let _=o.data[a];if(null===_)_=function gE(o,a,c,d,f){const _=Fc(),b=Mo(),T=o.data[a]=function EF(o,a,c,d,f,_){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,c,a,d,f);return null===o.firstChild&&(o.firstChild=T),null!==_&&(b?null==_.child&&null!==T.parent&&(_.child=T):null===_.next&&(_.next=T)),T}(o,a,c,d,f),function Js(){return Ft.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=c,_.value=d,_.attrs=f;const b=function Ja(){const o=Ft.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();_.injectorIndex=null===b?-1:b.injectorIndex}return cs(_,!0),_}function Qp(o,a,c,d){if(0===c)return-1;const f=a.length;for(let _=0;_<c;_++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function Ym(o,a,c){Lc(a);try{const d=o.viewQuery;null!==d&&IE(1,d,c);const f=o.template;null!==f&&HT(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&jT(o,a),o.staticViewQueries&&IE(2,o.viewQuery,c);const _=o.components;null!==_&&function yF(o,a){for(let c=0;c<a.length;c++)tx(o,a[c])}(a,_)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,Tr()}}function Xp(o,a,c,d){const f=a[2];if(256!=(256&f)){Lc(a);try{Qa(a),function Dh(o){return Ft.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&HT(o,a,c,2,d);const b=3==(3&f);if(b){const k=o.preOrderCheckHooks;null!==k&&sa(a,k,null)}else{const k=o.preOrderHooks;null!==k&&jl(a,k,0,null),eo(a,0)}if(function PF(o){for(let a=Ze(o);null!==a;a=ut(a)){if(!a[2])continue;const c=a[9];for(let d=0;d<c.length;d++){const f=c[d],_=f[3];0==(1024&f[2])&&mr(_,1),f[2]|=1024}}}(a),function kF(o){for(let a=Ze(o);null!==a;a=ut(a))for(let c=10;c<a.length;c++){const d=a[c],f=d[1];ls(d)&&Xp(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&jT(o,a),b){const k=o.contentCheckHooks;null!==k&&sa(a,k)}else{const k=o.contentHooks;null!==k&&jl(a,k,1),eo(a,1)}!function _F(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)ds(~f);else{const _=f,b=c[++d],D=c[++d];Bl(b,_),D(2,a[_])}}}finally{ds(-1)}}(o,a);const D=o.components;null!==D&&function vF(o,a){for(let c=0;c<a.length;c++)OF(o,a[c])}(a,D);const T=o.viewQuery;if(null!==T&&IE(2,T,d),b){const k=o.viewCheckHooks;null!==k&&sa(a,k)}else{const k=o.viewHooks;null!==k&&jl(a,k,2),eo(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-73,1024&a[2]&&(a[2]&=-1025,mr(a[3],-1))}finally{Tr()}}}function bF(o,a,c,d){const f=a[10],b=ta(a);try{!b&&f.begin&&f.begin(),b&&Ym(o,a,d),Xp(o,a,c,d)}finally{!b&&f.end&&f.end()}}function HT(o,a,c,d,f){const _=oi(),b=2&d;try{ds(-1),b&&a.length>20&&MT(o,a,20,!1),c(d,f)}finally{ds(_)}}function zT(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=yy(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function yy(o,a,c,d,f,_,b,D,T,k){const R=20+d,U=R+f,G=function wF(o,a){const c=[];for(let d=0;d<a;d++)c.push(d<o?null:tn);return c}(R,U),J="function"==typeof k?k():k;return G[1]={type:o,blueprint:G,template:c,queries:null,viewQuery:D,declTNode:a,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:T,consts:J,incompleteFirstPass:!1}}function WT(o,a,c,d){const f=sx(a);null===c?f.push(d):(f.push(c),o.firstCreatePass&&ox(o).push(d,f.length-1))}function ZT(o,a,c){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(a,f):c[d]=[a,f]}return c}function Uo(o,a,c,d,f,_,b,D){const T=yi(a,c);let R,k=a.inputs;!D&&null!=k&&(R=k[d])?(cx(o,c,R,d,f),Ao(a)&&function IF(o,a){const c=Dr(a,o);16&c[2]||(c[2]|=64)}(c,a.index)):3&a.type&&(d=function DF(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=b?b(f,a.value||"",d):f,On(_)?_.setProperty(T,d,f):hs(d)||(T.setProperty?T.setProperty(d,f):T[d]=f))}function wy(o,a,c,d,f,_){const b=_.hostBindings;if(b){let D=o.hostBindingOpCodes;null===D&&(D=o.hostBindingOpCodes=[]);const T=~a.index;(function YT(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(D)!=T&&D.push(T),D.push(d,f,b)}}function Cy(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function QT(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function xF(o,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=o;rr(a)&&(c[""]=o)}}function wE(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function XT(o,a,c,d,f){o.data[d]=f;const _=f.factory||(f.factory=Jo(f.type)),b=new Hl(_,rr(f),null);o.blueprint[d]=b,c[d]=b,wy(o,a,0,d,Qp(o,c,f.hostVars,tn),f)}function JT(o,a,c){const d=yi(a,o),f=zT(c),_=o[10],b=Qm(o,Km(o,f,null,c.onPush?64:16,d,a,_,_.createRenderer(d,c),null,null));o[a.index]=b}function cc(o,a,c,d,f,_){const b=yi(o,a);!function EE(o,a,c,d,f,_,b){if(null==_)On(o)?o.removeAttribute(a,f,c):a.removeAttribute(f);else{const D=null==b?ye(_):b(_,d||"",f);On(o)?o.setAttribute(a,f,D,c):c?a.setAttributeNS(c,f,D):a.setAttribute(f,D)}}(a[11],b,_,o.value,c,d,f)}function AF(o,a,c,d,f,_){const b=_[a];if(null!==b){const D=d.setInput;for(let T=0;T<b.length;){const k=b[T++],R=b[T++],U=b[T++];null!==D?d.setInput(c,U,k,R):c[R]=U}}}function MF(o,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return c}function OF(o,a){const c=Dr(a,o);if(ls(c)){const d=c[1];80&c[2]?Xp(d,c,d.template,c[8]):c[5]>0&&CE(c)}}function CE(o){for(let d=Ze(o);null!==d;d=ut(d))for(let f=10;f<d.length;f++){const _=d[f];if(1024&_[2]){const b=_[1];Xp(b,_,b.template,_[8])}else _[5]>0&&CE(_)}const c=o[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=Dr(c[d],o);ls(f)&&f[5]>0&&CE(f)}}function tx(o,a){const c=Dr(a,o),d=c[1];(function nx(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(d,c),Ym(d,c,c[8])}function Qm(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Dy(o){for(;o;){o[2]|=64;const a=X(o);if(Sc(o)&&!a)return o;o=a}return null}function rx(o){!function Xm(o){for(let a=0;a<o.components.length;a++){const c=o.components[a],d=Zr(c),f=d[1];bF(f,d,f.template,c)}}(o[8])}function IE(o,a,c){Sh(0),a(o,c)}const RF=(()=>Promise.resolve(null))();function sx(o){return o[7]||(o[7]=[])}function ox(o){return o.cleanup||(o.cleanup=[])}function lx(o,a){const c=o[9],d=c?c.get(Ci,null):null;d&&d.handleError(a)}function cx(o,a,c,d,f){for(let _=0;_<c.length;){const b=c[_++],D=c[_++],T=a[b],k=o.data[b];null!==k.setInput?k.setInput(T,f,d,D):T[D]=f}}function vl(o,a,c){const d=Ya(a,o);!function js(o,a,c){On(o)?o.setValue(a,c):a.textContent=c}(o[11],d,c)}function Jp(o,a,c){let d=c?o.styles:null,f=c?o.classes:null,_=0;if(null!==a)for(let b=0;b<a.length;b++){const D=a[b];"number"==typeof D?_=D:1==_?f=we(f,D):2==_&&(d=we(d,D+": "+a[++b]+";"))}c?o.styles=d:o.stylesWithoutHost=d,c?o.classes=f:o.classesWithoutHost=f}const cu=new zn("INJECTOR",-1);class SE{get(a,c=Kl){if(c===Kl){const d=new Error(`NullInjectorError: No provider for ${Ie(a)}!`);throw d.name="NullInjectorError",d}return c}}const TE=new zn("Set Injector scope."),eg={},FF={};let xE;function fx(){return void 0===xE&&(xE=new SE),xE}function AE(o,a=null,c=null,d){const f=tg(o,a,c,d);return f._resolveInjectorDefTypes(),f}function tg(o,a=null,c=null,d){return new px(o,c,a||fx(),d)}class px{constructor(a,c,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];c&&qr(c,D=>this.processProvider(D,a,c)),qr([a],D=>this.processInjectorType(D,[],_)),this.records.set(cu,sf(void 0,this));const b=this.records.get(TE);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof a?null:Ie(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,c=Kl,d=It.Default){this.assertNotDestroyed();const f=ma(this),_=fi(void 0);try{if(!(d&It.SkipSelf)){let D=this.records.get(a);if(void 0===D){const T=function OE(o){return"function"==typeof o||"object"==typeof o&&o instanceof zn}(a)&&on(a);D=T&&this.injectableDefInScope(T)?sf(ME(a),eg):null,this.records.set(a,D)}if(null!=D)return this.hydrate(a,D)}return(d&It.Self?fx():this.parent).get(a,c=d&It.Optional&&c===Kl?null:c)}catch(b){if("NullInjectorError"===b.name){if((b[No]=b[No]||[]).unshift(Ie(a)),f)throw b;return function Qc(o,a,c,d){const f=o[No];throw a[Xl]&&f.unshift(a[Xl]),o.message=function rd(o,a,c,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=Ie(a);if(Array.isArray(a))f=a.map(Ie).join(" -> ");else if("object"==typeof a){let _=[];for(let b in a)if(a.hasOwnProperty(b)){let D=a[b];_.push(b+":"+("string"==typeof D?JSON.stringify(D):Ie(D)))}f=`{${_.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${o.replace(Kc,"\n  ")}`}("\n"+o.message,f,c,d),o.ngTokenPath=f,o[No]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{fi(_),ma(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,f)=>a.push(Ie(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ze(205,!1)}processInjectorType(a,c,d){if(!(a=ie(a)))return!1;let f=Nn(a);const _=null==f&&a.ngModule||void 0,b=void 0===_?a:_,D=-1!==d.indexOf(b);if(void 0!==_&&(f=Nn(_)),null==f)return!1;if(null!=f.imports&&!D){let R;d.push(b);try{qr(f.imports,U=>{this.processInjectorType(U,c,d)&&(void 0===R&&(R=[]),R.push(U))})}finally{}if(void 0!==R)for(let U=0;U<R.length;U++){const{ngModule:G,providers:J}=R[U];qr(J,Te=>this.processProvider(Te,G,J||Bt))}}this.injectorDefTypes.add(b);const T=Jo(b)||(()=>new b);this.records.set(b,sf(T,eg));const k=f.providers;if(null!=k&&!D){const R=a;qr(k,U=>this.processProvider(U,R,k))}return void 0!==_&&void 0!==a.providers}processProvider(a,c,d){let f=af(a=ie(a))?a:ie(a&&a.provide);const _=function PE(o,a,c){return gx(o)?sf(void 0,o.useValue):sf(Jm(o),eg)}(a);if(af(a)||!0!==a.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=sf(void 0,eg,!0),b.factory=()=>al(b.multi),this.records.set(f,b)),f=a,b.multi.push(a)}this.records.set(f,_)}hydrate(a,c){return c.value===eg&&(c.value=FF,c.value=c.factory()),"object"==typeof c.value&&c.value&&function _x(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this.onDestroy.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=ie(a.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function ME(o){const a=on(o),c=null!==a?a.factory:Jo(o);if(null!==c)return c;if(o instanceof zn)throw new ze(204,!1);if(o instanceof Function)return function kE(o){const a=o.length;if(a>0)throw function ql(o,a){const c=[];for(let d=0;d<o;d++)c.push(a);return c}(a,"?"),new ze(204,!1);const c=function gn(o){const a=o&&(o[Wn]||o[hi]);if(a){const c=function qn(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new ze(204,!1)}function Jm(o,a,c){let d;if(af(o)){const f=ie(o);return Jo(f)||ME(f)}if(gx(o))d=()=>ie(o.useValue);else if(function ng(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...al(o.deps||[]));else if(function jo(o){return!(!o||!o.useExisting)}(o))d=()=>_i(ie(o.useExisting));else{const f=ie(o&&(o.useClass||o.provide));if(!function Iy(o){return!!o.deps}(o))return Jo(f)||ME(f);d=()=>new f(...al(o.deps))}return d}function sf(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function gx(o){return null!==o&&"object"==typeof o&&id in o}function af(o){return"function"==typeof o}let Hs=(()=>{class o{static create(c,d){var f;if(Array.isArray(c))return AE({name:""},d,c,"");{const _=null!==(f=c.name)&&void 0!==f?f:"";return AE({name:_},c.parent,c.providers,_)}}}return o.THROW_IF_NOT_FOUND=Kl,o.NULL=new SE,o.\u0275prov=Ce({token:o,providedIn:"any",factory:()=>_i(cu)}),o.__NG_ELEMENT_ID__=-1,o})();function BF(o,a){Uc(Zr(o)[1],ti())}function Oy(o){let a=function Py(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const d=[o];for(;a;){let f;if(rr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ze(903,"");f=a.\u0275dir}if(f){if(c){d.push(f);const b=o;b.inputs=Ry(o.inputs),b.declaredInputs=Ry(o.declaredInputs),b.outputs=Ry(o.outputs);const D=f.hostBindings;D&&jF(o,D);const T=f.viewQuery,k=f.contentQueries;if(T&&Ix(o,T),k&&Fy(o,k),ue(o.inputs,f.inputs),ue(o.declaredInputs,f.declaredInputs),ue(o.outputs,f.outputs),rr(f)&&f.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let b=0;b<_.length;b++){const D=_[b];D&&D.ngInherit&&D(o),D===Oy&&(c=!1)}}a=Object.getPrototypeOf(a)}!function Dx(o){let a=0,c=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=xr(f.hostAttrs,c=xr(c,f.hostAttrs))}}(d)}function Ry(o){return o===Ur?{}:o===Bt?[]:o}function Ix(o,a){const c=o.viewQuery;o.viewQuery=c?(d,f)=>{a(d,f),c(d,f)}:a}function Fy(o,a){const c=o.contentQueries;o.contentQueries=c?(d,f,_)=>{a(d,f,_),c(d,f,_)}:a}function jF(o,a){const c=o.hostBindings;o.hostBindings=c?(d,f)=>{a(d,f),c(d,f)}:a}let Ny=null;function og(){if(!Ny){const o=Xt.Symbol;if(o&&o.iterator)Ny=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const d=a[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Ny=d)}}}return Ny}function t_(o){return!!UE(o)&&(Array.isArray(o)||!(o instanceof Map)&&og()in o)}function UE(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function _s(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function jE(o,a,c,d){const f=Ne();return _s(f,ko(),a)&&(hn(),cc(Rn(),f,o,a,c,d)),jE}function l_(o,a=It.Default){const c=Ne();return null===c?_i(o,a):xp(ti(),c,ie(o),a)}function Hx(){throw new Error("invalid")}function c_(o,a,c){const d=Ne();return _s(d,ko(),a)&&Uo(hn(),Rn(),d,o,a,d[11],c,!1),c_}function ZE(o,a,c,d,f){const b=f?"class":"style";cx(o,c,a.inputs[b],b,d)}function u_(o,a,c,d){const f=Ne(),_=hn(),b=20+o,D=f[11],T=f[b]=Ar(D,a,function Ah(){return Ft.lFrame.currentNamespace}()),k=_.firstCreatePass?function rN(o,a,c,d,f,_,b){const D=a.consts,k=Yp(a,o,2,f,Ns(D,_));return function Fd(o,a,c,d){let f=!1;if(Rc()){const _=function TF(o,a,c){const d=o.directiveRegistry;let f=null;if(d)for(let _=0;_<d.length;_++){const b=d[_];TT(c,b.selectors,!1)&&(f||(f=[]),Yu(la(c,a),o,b.type),rr(b)?(QT(o,c),f.unshift(b)):f.push(b))}return f}(o,a,c),b=null===d?null:{"":-1};if(null!==_){f=!0,wE(c,o.data.length,_.length);for(let R=0;R<_.length;R++){const U=_[R];U.providersResolver&&U.providersResolver(U)}let D=!1,T=!1,k=Qp(o,a,_.length,null);for(let R=0;R<_.length;R++){const U=_[R];c.mergedAttrs=xr(c.mergedAttrs,U.hostAttrs),XT(o,c,a,k,U),xF(k,U,b),null!==U.contentQueries&&(c.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(c.flags|=128);const G=U.type.prototype;!D&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),D=!0),!T&&(G.ngOnChanges||G.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),T=!0),k++}!function CF(o,a){const d=a.directiveEnd,f=o.data,_=a.attrs,b=[];let D=null,T=null;for(let k=a.directiveStart;k<d;k++){const R=f[k],U=R.inputs,G=null===_||Zm(a)?null:MF(U,_);b.push(G),D=ZT(U,k,D),T=ZT(R.outputs,k,T)}null!==D&&(D.hasOwnProperty("class")&&(a.flags|=16),D.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=D,a.outputs=T}(o,c)}b&&function bE(o,a,c){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const _=c[a[f+1]];if(null==_)throw new ze(-301,!1);d.push(a[f],_)}}}(c,d,b)}return c.mergedAttrs=xr(c.mergedAttrs,c.attrs),f}(a,c,k,Ns(D,b)),null!==k.attrs&&Jp(k,k.attrs,!1),null!==k.mergedAttrs&&Jp(k,k.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,k),k}(b,_,f,0,a,c,d):_.data[b];cs(k,!0);const R=k.mergedAttrs;null!==R&&Ui(D,T,R);const U=k.classes;null!==U&&Id(D,T,U);const G=k.styles;return null!==G&&Yh(D,T,G),64!=(64&k.flags)&&wd(_,f,T,k),0===function Oc(){return Ft.lFrame.elementDepthCount}()&&bi(T,f),function Eh(){Ft.lFrame.elementDepthCount++}(),za(k)&&(function mE(o,a,c){!Rc()||(function yE(o,a,c,d){const f=c.directiveStart,_=c.directiveEnd;o.firstCreatePass||la(c,a),bi(d,a);const b=c.initialInputs;for(let D=f;D<_;D++){const T=o.data[D],k=rr(T);k&&JT(a,c,T);const R=Ro(a,o,D,c);bi(R,a),null!==b&&AF(0,D-f,R,T,0,b),k&&(Dr(c.index,a)[8]=R)}}(o,a,c,yi(c,a)),128==(128&c.flags)&&function Ey(o,a,c){const d=c.directiveStart,f=c.directiveEnd,b=c.index,D=function Ih(){return Ft.lFrame.currentDirectiveIndex}();try{ds(b);for(let T=d;T<f;T++){const k=o.data[T],R=a[T];Po(T),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&Cy(k,R)}}finally{ds(-1),Po(D)}}(o,a,c))}(_,f,k),function $T(o,a,c){if(Lu(a)){const f=a.directiveEnd;for(let _=a.directiveStart;_<f;_++){const b=o.data[_];b.contentQueries&&b.contentQueries(1,c[_],_)}}}(_,k,f)),null!==d&&function _E(o,a,c=yi){const d=a.localNames;if(null!==d){let f=a.index+1;for(let _=0;_<d.length;_+=2){const b=d[_+1],D=-1===b?c(a,o):o[b];o[f++]=D}}}(f,k),u_}function d_(){let o=ti();Mo()?function Ir(){Ft.lFrame.isParent=!1}():(o=o.parent,cs(o,!1));const a=o;!function Fl(){Ft.lFrame.elementDepthCount--}();const c=hn();return c.firstCreatePass&&(Uc(c,o),Lu(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Tp(o){return 0!=(16&o.flags)}(a)&&ZE(c,a,Ne(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function nl(o){return 0!=(32&o.flags)}(a)&&ZE(c,a,Ne(),a.stylesWithoutHost,!1),d_}function Or(o,a,c,d){return u_(o,a,c,d),d_(),Or}function Zy(o){return!!o&&"function"==typeof o.then}function $x(o){return!!o&&"function"==typeof o.subscribe}const zx=$x;function QE(o,a,c,d){const f=Ne(),_=hn(),b=ti();return function Gx(o,a,c,d,f,_,b,D){const T=za(d),R=o.firstCreatePass&&ox(o),U=a[8],G=sx(a);let J=!0;if(3&d.type||D){const tt=yi(d,a),yt=D?D(tt):tt,Le=G.length,lt=D?_n=>D(En(_n[d.index])):d.index;if(On(c)){let _n=null;if(!D&&T&&(_n=function aN(o,a,c,d){const f=o.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const b=f[_];if(b===c&&f[_+1]===d){const D=a[7],T=f[_+2];return D.length>T?D[T]:null}"string"==typeof b&&(_+=2)}return null}(o,a,f,d.index)),null!==_n)(_n.__ngLastListenerFn__||_n).__ngNextListenerFn__=_,_n.__ngLastListenerFn__=_,J=!1;else{_=JE(d,a,U,_,!1);const Mn=c.listen(yt,f,_);G.push(_,Mn),R&&R.push(f,lt,Le,Le+1)}}else _=JE(d,a,U,_,!0),yt.addEventListener(f,_,b),G.push(_),R&&R.push(f,lt,Le,b)}else _=JE(d,a,U,_,!1);const Te=d.outputs;let qe;if(J&&null!==Te&&(qe=Te[f])){const tt=qe.length;if(tt)for(let yt=0;yt<tt;yt+=2){const Yr=a[qe[yt]][qe[yt+1]].subscribe(_),mc=G.length;G.push(_,Yr),R&&R.push(f,d.index,mc,-(mc+1))}}}(_,f,f[11],b,o,a,!!c,d),QE}function qx(o,a,c,d){try{return!1!==c(d)}catch(f){return lx(o,f),!1}}function JE(o,a,c,d,f){return function _(b){if(b===Function)return d;const D=2&o.flags?Dr(o.index,a):a;0==(32&a[2])&&Dy(D);let T=qx(a,0,d,b),k=_.__ngNextListenerFn__;for(;k;)T=qx(a,0,k,b)&&T,k=k.__ngNextListenerFn__;return f&&!1===T&&(b.preventDefault(),b.returnValue=!1),T}}function iC(o,a,c,d,f){const _=o[c+1],b=null===a;let D=d?_l(_):lu(_),T=!1;for(;0!==D&&(!1===T||b);){const R=o[D+1];Xx(o[D],a)&&(T=!0,o[D+1]=d?aE(R):sE(R)),D=d?_l(R):lu(R)}T&&(o[c+1]=d?sE(_):aE(_))}function Xx(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&ci(o,a)>=0}function Qy(o,a){return function uo(o,a,c,d){const f=Ne(),_=hn(),b=function Xs(o){const a=Ft.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}(2);_.firstUpdatePass&&function Xy(o,a,c,d){const f=o.data;if(null===f[c+1]){const _=f[oi()],b=function oA(o,a){return a>=o.expandoStartIndex}(o,c);(function mn(o,a){return 0!=(o.flags&(a?16:32))})(_,d)&&null===a&&!b&&(a=!1),a=function fu(o,a,c,d){const f=function Nc(o){const a=Ft.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let _=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(c=ug(c=lC(null,o,a,c,d),a.attrs,d),_=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(c=lC(f,o,a,c,d),null===_){let T=function f_(o,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==lu(d))return o[_l(d)]}(o,a,d);void 0!==T&&Array.isArray(T)&&(T=lC(null,o,a,T[1],d),T=ug(T,a.attrs,d),function _N(o,a,c,d){o[_l(c?a.classBindings:a.styleBindings)]=d}(o,a,d,T))}else _=function p_(o,a,c){let d;const f=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<f;_++)d=ug(d,o[_].hostAttrs,c);return ug(d,a.attrs,c)}(o,a,d)}return void 0!==_&&(d?a.residualClasses=_:a.residualStyles=_),c}(f,_,a,d),function nC(o,a,c,d,f,_){let b=_?a.classBindings:a.styleBindings,D=_l(b),T=lu(b);o[d]=c;let R,k=!1;if(Array.isArray(c)){const U=c;R=U[1],(null===R||ci(U,R)>0)&&(k=!0)}else R=c;if(f)if(0!==T){const G=_l(o[D+1]);o[d+1]=gy(G,D),0!==G&&(o[G+1]=oE(o[G+1],d)),o[D+1]=function aF(o,a){return 131071&o|a<<17}(o[D+1],d)}else o[d+1]=gy(D,0),0!==D&&(o[D+1]=oE(o[D+1],d)),D=d;else o[d+1]=gy(T,0),0===D?D=d:o[T+1]=oE(o[T+1],d),T=d;k&&(o[d+1]=sE(o[d+1])),iC(o,R,d,!0),iC(o,R,d,!1),function hN(o,a,c,d,f){const _=f?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&ci(_,a)>=0&&(c[d+1]=aE(c[d+1]))}(a,R,o,d,_),b=gy(D,T),_?a.classBindings=b:a.styleBindings=b}(f,_,a,c,b,d)}}(_,o,b,d),a!==tn&&_s(f,b,a)&&function Jy(o,a,c,d,f,_,b,D){if(!(3&a.type))return;const T=o.data,k=T[D+1];dg(function OT(o){return 1==(1&o)}(k)?ff(T,a,c,f,lu(k),b):void 0)||(dg(_)||function PT(o){return 2==(2&o)}(k)&&(_=ff(T,null,c,f,D,b)),function ty(o,a,c,d,f){const _=On(o);if(a)f?_?o.addClass(c,d):c.classList.add(d):_?o.removeClass(c,d):c.classList.remove(d);else{let b=-1===d.indexOf("-")?void 0:Wr.DashCase;if(null==f)_?o.removeStyle(c,d,b):c.style.removeProperty(d);else{const D="string"==typeof f&&f.endsWith("!important");D&&(f=f.slice(0,-10),b|=Wr.Important),_?o.setStyle(c,d,f,b):c.style.setProperty(d,f,D?"important":"")}}}(d,b,Ya(oi(),c),f,_))}(_,_.data[oi()],f,f[11],o,f[b+1]=function e0(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=Ie(fl(o)))),o}(a,c),d,b)}(o,a,null,!0),Qy}function lC(o,a,c,d,f){let _=null;const b=c.directiveEnd;let D=c.directiveStylingLast;for(-1===D?D=c.directiveStart:D++;D<b&&(_=a[D],d=ug(d,_.hostAttrs,f),_!==o);)D++;return null!==o&&(c.directiveStylingLast=D),d}function ug(o,a,c){const d=c?1:2;let f=-1;if(null!==a)for(let _=0;_<a.length;_++){const b=a[_];"number"==typeof b?f=b:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Oi(o,b,!!c||a[++_]))}return void 0===o?null:o}function ff(o,a,c,d,f,_){const b=null===a;let D;for(;f>0;){const T=o[f],k=Array.isArray(T),R=k?T[1]:T,U=null===R;let G=c[f+1];G===tn&&(G=U?Bt:void 0);let J=U?so(G,d):R===d?G:void 0;if(k&&!dg(J)&&(J=so(T,d)),dg(J)&&(D=J,b))return D;const Te=o[f+1];f=b?_l(Te):lu(Te)}if(null!==a){let T=_?a.residualClasses:a.residualStyles;null!=T&&(D=so(T,d))}return D}function dg(o){return void 0!==o}function hg(o,a=""){const c=Ne(),d=hn(),f=o+20,_=d.firstCreatePass?Yp(d,f,1,a,null):d.data[f],b=c[f]=function Bn(o,a){return On(o)?o.createText(a):o.createTextNode(a)}(c[11],a);wd(d,c,b,_),cs(_,!1)}function g_(o){return t0("",o,""),g_}function t0(o,a,c){const d=Ne(),f=function Ld(o,a,c,d){return _s(o,ko(),c)?a+ye(c)+d:tn}(d,o,a,c);return f!==tn&&vl(d,oi(),f),t0}function fg(o,a,c){const d=Ne();return _s(d,ko(),a)&&Uo(hn(),Rn(),d,o,a,d[11],c,!0),fg}const pu=void 0;var r0=["en",[["a","p"],["AM","PM"],pu],[["AM","PM"],pu,pu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pu,"{1} 'at' {0}",pu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function n0(o){const c=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let gu={};function m_(o){const a=function IA(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=o0(a);if(c)return c;const d=a.split("-")[0];if(c=o0(d),c)return c;if("en"===d)return r0;throw new Error(`Missing locale data for the locale "${o}".`)}function s0(o){return m_(o)[zt.PluralCase]}function o0(o){return o in gu||(gu[o]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[o]),gu[o]}var zt=(()=>((zt=zt||{})[zt.LocaleId=0]="LocaleId",zt[zt.DayPeriodsFormat=1]="DayPeriodsFormat",zt[zt.DayPeriodsStandalone=2]="DayPeriodsStandalone",zt[zt.DaysFormat=3]="DaysFormat",zt[zt.DaysStandalone=4]="DaysStandalone",zt[zt.MonthsFormat=5]="MonthsFormat",zt[zt.MonthsStandalone=6]="MonthsStandalone",zt[zt.Eras=7]="Eras",zt[zt.FirstDayOfWeek=8]="FirstDayOfWeek",zt[zt.WeekendRange=9]="WeekendRange",zt[zt.DateFormat=10]="DateFormat",zt[zt.TimeFormat=11]="TimeFormat",zt[zt.DateTimeFormat=12]="DateTimeFormat",zt[zt.NumberSymbols=13]="NumberSymbols",zt[zt.NumberFormats=14]="NumberFormats",zt[zt.CurrencyCode=15]="CurrencyCode",zt[zt.CurrencySymbol=16]="CurrencySymbol",zt[zt.CurrencyName=17]="CurrencyName",zt[zt.Currencies=18]="Currencies",zt[zt.Directionality=19]="Directionality",zt[zt.PluralCase=20]="PluralCase",zt[zt.ExtraData=21]="ExtraData",zt))();const pg="en-US";let __=pg;function Dg(o,a,c,d,f){if(o=ie(o),Array.isArray(o))for(let _=0;_<o.length;_++)Dg(o[_],a,c,d,f);else{const _=hn(),b=Ne();let D=af(o)?o:ie(o.provide),T=Jm(o);const k=ti(),R=1048575&k.providerIndexes,U=k.directiveStart,G=k.providerIndexes>>20;if(af(o)||!o.multi){const J=new Hl(T,f,l_),Te=w0(D,a,f?R:R+G,U);-1===Te?(Yu(la(k,b),_,D),M_(_,o,a.length),a.push(D),k.directiveStart++,k.directiveEnd++,f&&(k.providerIndexes+=1048576),c.push(J),b.push(J)):(c[Te]=J,b[Te]=J)}else{const J=w0(D,a,R+G,U),Te=w0(D,a,R,R+G),qe=J>=0&&c[J],tt=Te>=0&&c[Te];if(f&&!tt||!f&&!qe){Yu(la(k,b),_,D);const yt=function $C(o,a,c,d,f){const _=new Hl(o,c,l_);return _.multi=[],_.index=a,_.componentProviders=0,HC(_,f,d&&!c),_}(f?eM:JA,c.length,f,d,T);!f&&tt&&(c[Te].providerFactory=yt),M_(_,o,a.length,0),a.push(D),k.directiveStart++,k.directiveEnd++,f&&(k.providerIndexes+=1048576),c.push(yt),b.push(yt)}else M_(_,o,J>-1?J:Te,HC(c[f?Te:J],T,!f&&d));!f&&d&&tt&&c[Te].componentProviders++}}}function M_(o,a,c,d){const f=af(a),_=function mx(o){return!!o.useClass}(a);if(f||_){const T=(_?ie(a.useClass):a).prototype.ngOnDestroy;if(T){const k=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const R=k.indexOf(c);-1===R?k.push(c,[d,T]):k[R+1].push(d,T)}else k.push(c,T)}}}function HC(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function w0(o,a,c,d){for(let f=c;f<d;f++)if(a[f]===o)return f;return-1}function JA(o,a,c,d){return E0(this.multi,[])}function eM(o,a,c,d){const f=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,D=Ro(c,c[1],this.providerFactory.index,d);_=D.slice(0,b),E0(f,_);for(let T=b;T<D.length;T++)_.push(D[T])}else _=[],E0(f,_);return _}function E0(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function zC(o,a=[]){return c=>{c.providersResolver=(d,f)=>function jC(o,a,c){const d=hn();if(d.firstCreatePass){const f=rr(o);Dg(c,d.data,d.blueprint,f,!0),Dg(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class C0{}class iM{resolveComponentFactory(a){throw function nM(o){const a=Error(`No component factory found for ${Ie(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let P_=(()=>{class o{}return o.NULL=new iM,o})();function rM(){return Hd(ti(),Ne())}function Hd(o,a){return new Ig(yi(o,a))}let Ig=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=rM,o})();function zo(o){return o instanceof Ig?o.nativeElement:o}class mf{}let D0=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function oM(){const o=Ne(),c=Dr(ti().index,o);return function sM(o){return o[11]}(Er(c)?c:o)}(),o})(),I0=(()=>{class o{}return o.\u0275prov=Ce({token:o,providedIn:"root",factory:()=>null}),o})();class qC{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const WC=new qC("13.3.12"),_f={};function O_(o,a,c,d,f=!1){for(;null!==c;){const _=a[c.index];if(null!==_&&d.push(En(_)),$r(_))for(let D=10;D<_.length;D++){const T=_[D],k=T[1].firstChild;null!==k&&O_(T[1],T,k,d)}const b=c.type;if(8&b)O_(o,a,c.child,d);else if(32&b){const D=P(c,a);let T;for(;T=D();)d.push(T)}else if(16&b){const D=Ed(a,c);if(Array.isArray(D))d.push(...D);else{const T=X(a[16]);O_(T[1],T,D,d,!0)}}c=f?c.projectionNext:c.next}return d}class vf{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return O_(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if($r(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(eu(a,d),fa(c,d))}this._attachedToViewContainer=!1}vd(this._lView[1],this._lView)}onDestroy(a){WT(this._lView[1],this._lView,null,a)}markForCheck(){Dy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function DE(o,a,c){const d=a[10];d.begin&&d.begin();try{Xp(o,a,o.template,c)}catch(f){throw lx(a,f),f}finally{d.end&&d.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ze(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gd(o,a){nu(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ze(902,"");this._appRef=a}}class ZC extends vf{constructor(a){super(a),this._view=a}detectChanges(){rx(this._view)}checkNoChanges(){}get context(){return null}}class S0 extends P_{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Ut(a);return new T0(c,this.ngModule)}}function fo(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class T0 extends C0{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function sF(o){return o.map(rF).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return fo(this.componentDef.inputs)}get outputs(){return fo(this.componentDef.outputs)}create(a,c,d,f){const _=(f=f||this.ngModule)?function aM(o,a){return{get:(c,d,f)=>{const _=o.get(c,_f,f);return _!==_f||d===_f?_:a.get(c,d,f)}}}(a,f.injector):a,b=_.get(mf,Hu),D=_.get(I0,null),T=b.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",R=d?function qT(o,a,c){if(On(o))return o.selectRootElement(a,c===Wt.ShadowDom);let d="string"==typeof a?o.querySelector(a):a;return d.textContent="",d}(T,d,this.componentDef.encapsulation):Ar(b.createRenderer(null,this.componentDef),k,function yf(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(k)),U=this.componentDef.onPush?576:528,G=function BE(o,a){return{components:[],scheduler:o||tE,clean:RF,playerHandler:a||null,flags:0}}(),J=yy(0,null,null,1,0,null,null,null,null,null),Te=Km(null,J,G,U,null,null,b,T,D,_);let qe,tt;Lc(Te);try{const yt=function LE(o,a,c,d,f,_){const b=c[1];c[20]=o;const T=Yp(b,20,2,"#host",null),k=T.mergedAttrs=a.hostAttrs;null!==k&&(Jp(T,k,!0),null!==o&&(Ui(f,o,k),null!==T.classes&&Id(f,o,T.classes),null!==T.styles&&Yh(f,o,T.styles)));const R=d.createRenderer(o,a),U=Km(c,zT(a),null,a.onPush?64:16,c[20],T,d,R,_||null,null);return b.firstCreatePass&&(Yu(la(T,c),b,a.type),QT(b,T),wE(T,c.length,1)),Qm(c,U),c[20]=U}(R,this.componentDef,Te,b,T);if(R)if(d)Ui(T,R,["ng-version",WC.full]);else{const{attrs:Le,classes:lt}=function oF(o){const a=[],c=[];let d=1,f=2;for(;d<o.length;){let _=o[d];if("string"==typeof _)2===f?""!==_&&a.push(_,o[++d]):8===f&&c.push(_);else{if(!ml(f))break;f=_}d++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);Le&&Ui(T,R,Le),lt&&lt.length>0&&Id(T,R,lt.join(" "))}if(tt=Gi(J,20),void 0!==c){const Le=tt.projection=[];for(let lt=0;lt<this.ngContentSelectors.length;lt++){const _n=c[lt];Le.push(null!=_n?Array.from(_n):null)}}qe=function VE(o,a,c,d,f){const _=c[1],b=function KT(o,a,c){const d=ti();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),XT(o,d,a,Qp(o,a,1,null),c));const f=Ro(a,o,d.directiveStart,d);bi(f,a);const _=yi(d,a);return _&&bi(_,a),f}(_,c,a);if(d.components.push(b),o[8]=b,f&&f.forEach(T=>T(b,a)),a.contentQueries){const T=ti();a.contentQueries(1,b,T.directiveStart)}const D=ti();return!_.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ds(D.index),wy(c[1],D,0,D.directiveStart,D.directiveEnd,a),Cy(a,b)),b}(yt,this.componentDef,Te,G,[BF]),Ym(J,Te,null)}finally{Tr()}return new YC(this.componentType,qe,Hd(tt,Te),Te,tt)}}class YC extends class tM{}{constructor(a,c,d,f,_){super(),this.location=d,this._rootLView=f,this._tNode=_,this.instance=c,this.hostView=this.changeDetectorRef=new ZC(f),this.componentType=a}get injector(){return new no(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class bf{}class QC{}const _u=new Map;class A0 extends bf{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new S0(this);const d=yn(a);this._bootstrapComponents=lc(d.bootstrap),this._r3Injector=tg(a,c,[{provide:bf,useValue:this},{provide:P_,useValue:this.componentFactoryResolver}],Ie(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,c=Hs.THROW_IF_NOT_FOUND,d=It.Default){return a===Hs||a===bf||a===cu?this:this._r3Injector.get(a,c,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class wf extends QC{constructor(a){super(),this.moduleType=a,null!==yn(a)&&function lM(o){const a=new Set;!function c(d){const f=yn(d,!0),_=f.id;null!==_&&(function x0(o,a,c){if(a&&a!==c)throw new Error(`Duplicate module registered for ${o} - ${Ie(a)} vs ${Ie(a.name)}`)}(_,_u.get(_),d),_u.set(_,d));const b=lc(f.imports);for(const D of b)a.has(D)||(a.add(D),c(D))}(o)}(a)}create(a){return new A0(this.moduleType,a)}}function M0(o,a,c){const d=function or(){const o=Ft.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}()+o,f=Ne();return f[d]===tn?function yl(o,a,c){return o[a]=c}(f,d,c?a.call(c):a()):function uu(o,a){return o[a]}(f,d)}function F_(o){return a=>{setTimeout(o,void 0,a)}}const zs=class CM extends h.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){var f,_,b;let D=a,T=c||(()=>null),k=d;if(a&&"object"==typeof a){const U=a;D=null===(f=U.next)||void 0===f?void 0:f.bind(U),T=null===(_=U.error)||void 0===_?void 0:_.bind(U),k=null===(b=U.complete)||void 0===b?void 0:b.bind(U)}this.__isAsync&&(T=F_(T),D&&(D=F_(D)),k&&(k=F_(k)));const R=super.subscribe({next:D,error:T,complete:k});return a instanceof te.w0&&a.add(R),R}};function iD(){return this._results[og()]()}class Tg{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=og(),d=Tg.prototype;d[c]||(d[c]=iD)}get changes(){return this._changes||(this._changes=new zs)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const f=Gr(a);(this._changesDetected=!function ed(o,a,c){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],_=a[d];if(c&&(f=c(f),_=c(_)),_!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let xg=(()=>{class o{}return o.__NG_ELEMENT_ID__=SM,o})();const DM=xg,IM=class extends DM{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(a){const c=this._declarationTContainer.tViews,d=Km(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(d[19]=_.createEmbeddedView(c)),Ym(c,d,a),new vf(d)}};function SM(){return N_(ti(),Ne())}function N_(o,a){return 4&o.type?new IM(a,o,Hd(o,a)):null}let Ag=(()=>{class o{}return o.__NG_ELEMENT_ID__=Cf,o})();function Cf(){return Pg(ti(),Ne())}const TM=Ag,Mg=class extends TM{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return Hd(this._hostTNode,this._hostLView)}get injector(){return new no(this._hostTNode,this._hostLView)}get parentInjector(){const a=rl(this._hostTNode,this._hostLView);if($n(a)){const c=aa(a,this._hostLView),d=ai(a);return new no(c[1].data[d+8],c)}return new no(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=kg(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,d){const f=a.createEmbeddedView(c||{});return this.insert(f,d),f}createComponent(a,c,d,f,_){const b=a&&!function ro(o){return"function"==typeof o}(a);let D;if(b)D=c;else{const U=c||{};D=U.index,d=U.injector,f=U.projectableNodes,_=U.ngModuleRef}const T=b?a:new T0(Ut(a)),k=d||this.parentInjector;if(!_&&null==T.ngModule){const G=(b?k:this.parentInjector).get(bf,null);G&&(_=G)}const R=T.create(k,f,void 0,_);return this.insert(R.hostView,D),R}insert(a,c){const d=a._lView,f=d[1];if(function $u(o){return $r(o[3])}(d)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const U=d[3],G=new Mg(U,U[6],U[3]);G.detach(G.indexOf(a))}}const _=this._adjustIndex(c),b=this._lContainer;!function Nm(o,a,c,d){const f=10+d,_=c.length;d>0&&(c[f-1][4]=a),d<_-10?(a[4]=c[f],Uh(c,10+d,a)):(c.push(a),a[4]=null),a[3]=c;const b=a[17];null!==b&&c!==b&&function Np(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(b,a);const D=a[19];null!==D&&D.insertView(o),a[2]|=128}(f,d,b,_);const D=tu(_,b),T=d[11],k=oc(T,b[7]);return null!==k&&function ms(o,a,c,d,f,_){d[0]=f,d[6]=a,nu(o,d,c,1,f,_)}(f,b[6],T,d,k,D),a.attachToViewContainerRef(),Uh(O0(b),_,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=kg(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=eu(this._lContainer,c);d&&(fa(O0(this._lContainer),c),vd(d[1],d))}detach(a){const c=this._adjustIndex(a,-1),d=eu(this._lContainer,c);return d&&null!=fa(O0(this._lContainer),c)?new vf(d):null}_adjustIndex(a,c=0){return null==a?this.length+c:a}};function kg(o){return o[8]}function O0(o){return o[8]||(o[8]=[])}function Pg(o,a){let c;const d=a[o.index];if($r(d))c=d;else{let f;if(8&o.type)f=En(d);else{const _=a[11];f=_.createComment("");const b=yi(o,a);Ca(_,oc(_,b),f,function hl(o,a){return On(o)?o.nextSibling(a):a.nextSibling}(_,b),!1)}a[o.index]=c=function ex(o,a,c,d){return new Array(o,!0,!1,a,null,0,d,c,null,null)}(d,a,f,o),Qm(a,c)}return new Mg(c,o,a)}class F0{constructor(a){this.queryList=a,this.matches=null}clone(){return new F0(this.queryList)}setDirty(){this.queryList.setDirty()}}class Zi{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let _=0;_<d;_++){const b=c.getByIndex(_);f.push(this.queries[b.indexInDeclarationView].clone())}return new Zi(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==cD(a,c).matches&&this.queries[c].setDirty()}}class wl{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class zd{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,_=this.getByIndex(d).embeddedTView(a,f);_&&(_.indexInDeclarationView=d,null!==c?c.push(_):c=[_])}return null!==c?new zd(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class N0{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new N0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const _=d[f];this.matchTNodeWithReadOption(a,c,Og(c,_)),this.matchTNodeWithReadOption(a,c,Tn(c,a,_,!1,!1))}else d===xg?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Tn(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Ig||f===Ag||f===xg&&4&c.type)this.addMatch(c.index,-2);else{const _=Tn(c,a,f,!1,!1);null!==_&&this.addMatch(c.index,_)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function Og(o,a){const c=o.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function L0(o,a,c,d){return-1===c?function El(o,a){return 11&o.type?Hd(o,a):4&o.type?N_(o,a):null}(a,o):-2===c?function rD(o,a,c){return c===Ig?Hd(a,o):c===xg?N_(a,o):c===Ag?Pg(a,o):void 0}(o,a,d):Ro(o,o[1],c,a)}function sD(o,a,c,d){const f=a[19].queries[d];if(null===f.matches){const _=o.data,b=c.matches,D=[];for(let T=0;T<b.length;T+=2){const k=b[T];D.push(k<0?null:L0(a,_[k],b[T+1],c.metadata.read))}f.matches=D}return f.matches}function L_(o,a,c,d){const f=o.queries.getByIndex(c),_=f.matches;if(null!==_){const b=sD(o,a,f,c);for(let D=0;D<_.length;D+=2){const T=_[D];if(T>0)d.push(b[D/2]);else{const k=_[D+1],R=a[-T];for(let U=10;U<R.length;U++){const G=R[U];G[17]===G[3]&&L_(G[1],G,k,d)}if(null!==R[9]){const U=R[9];for(let G=0;G<U.length;G++){const J=U[G];L_(J[1],J,k,d)}}}}}return d}function oD(o){const a=Ne(),c=hn(),d=el();Sh(d+1);const f=cD(c,d);if(o.dirty&&ta(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const _=f.crossesNgTemplate?L_(c,a,d,[]):sD(c,a,f,d);o.reset(_,zo),o.notifyOnChanges()}return!0}return!1}function vu(o,a,c){const d=hn();d.firstCreatePass&&(Gd(d,new wl(o,a,c),-1),2==(2&a)&&(d.staticViewQueries=!0)),Df(d,Ne(),a)}function vs(o,a,c,d){const f=hn();if(f.firstCreatePass){const _=ti();Gd(f,new wl(a,c,d),_.index),function lD(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}Df(f,Ne(),c)}function aD(){return function pc(o,a){return o[19].queries[a].queryList}(Ne(),el())}function Df(o,a,c){const d=new Tg(4==(4&c));WT(o,a,d,d.destroy),null===a[19]&&(a[19]=new Zi),a[19].queries.push(new F0(d))}function Gd(o,a,c){null===o.queries&&(o.queries=new zd),o.queries.track(new N0(a,c))}function cD(o,a){return o.queries.getByIndex(a)}function U_(...o){}const CD=new zn("Application Initializer");let Af=(()=>{class o{constructor(c){this.appInits=c,this.resolve=U_,this.reject=U_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(Zy(_))c.push(_);else if(zx(_)){const b=new Promise((D,T)=>{_.subscribe({complete:D,error:T})});c.push(b)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(_i(CD,8))},o.\u0275prov=Ce({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const DD=new zn("AppId",{providedIn:"root",factory:function ID(){return`${Z0()}${Z0()}${Z0()}`}});function Z0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const SD=new zn("Platform Initializer"),TD=new zn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),j_=new zn("appBootstrapListener");let gc=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Ce({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const H_=new zn("LocaleId",{providedIn:"root",factory:()=>ec(H_,It.Optional|It.SkipSelf)||function Mf(){return"undefined"!=typeof $localize&&$localize.locale||pg}()}),AD=new zn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class UM{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let $_=(()=>{class o{compileModuleSync(c){return new wf(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),_=lc(yn(c).declarations).reduce((b,D)=>{const T=Ut(D);return T&&b.push(new T0(T)),b},[]);return new UM(d,_)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Ce({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const PD=(()=>Promise.resolve(0))();function Lg(o){"undefined"==typeof Zone?PD.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Oa{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zs(!1),this.onMicrotaskEmpty=new zs(!1),this.onStable=new zs(!1),this.onError=new zs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function K0(){let o=Xt.requestAnimationFrame,a=Xt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function HM(o){const a=()=>{!function jM(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Xt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,kf(o),o.isCheckStableRunning=!0,Y0(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),kf(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,_,b,D)=>{try{return Pf(o),c.invokeTask(f,_,b,D)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),z_(o)}},onInvoke:(c,d,f,_,b,D,T)=>{try{return Pf(o),c.invoke(f,_,b,D,T)}finally{o.shouldCoalesceRunChangeDetection&&a(),z_(o)}},onHasTask:(c,d,f,_)=>{c.hasTask(f,_),d===f&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,kf(o),Y0(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(c,d,f,_)=>(c.handleError(f,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Oa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Oa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,f){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+f,a,Vg,U_,U_);try{return _.runTask(b,c,d)}finally{_.cancelTask(b)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const Vg={};function Y0(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function kf(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Pf(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function z_(o){o._nesting--,Y0(o)}class OD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zs,this.onMicrotaskEmpty=new zs,this.onStable=new zs,this.onError=new zs}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,f){return a.apply(c,d)}}let Q0=(()=>{class o{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Oa.assertNotInAngularZone(),Lg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Lg(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:_,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(_i(Oa))},o.\u0275prov=Ce({token:o,factory:o.\u0275fac}),o})(),$M=(()=>{class o{constructor(){this._applications=new Map,J0.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return J0.findTestabilityInTree(this,c,d)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Ce({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();class X0{addToWindow(a){}findTestabilityInTree(a,c,d){return null}}function zM(o){J0=o}let J0=new X0,Wd=null;const eb=new zn("AllowMultipleToken"),Bg=new zn("PlatformOnDestroy");class FD{constructor(a,c){this.name=a,this.token=c}}function LD(o,a,c=[]){const d=`Platform: ${a}`,f=new zn(d);return(_=[])=>{let b=Dl();if(!b||b.injector.get(eb,!1)){const D=[...c,..._,{provide:f,useValue:!0}];o?o(D):function ND(o){if(Wd&&!Wd.get(eb,!1))throw new ze(400,"");Wd=o;const a=o.get(BD),c=o.get(SD,null);c&&c.forEach(d=>d())}(function ZM(o=[],a){return Hs.create({name:a,providers:[{provide:TE,useValue:"platform"},{provide:Bg,useValue:()=>Wd=null},...o]})}(D,d))}return function WM(o){const a=Dl();if(!a)throw new ze(401,"");return a}()}}function Dl(){var o;return null!==(o=null==Wd?void 0:Wd.get(BD))&&void 0!==o?o:null}let BD=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const D=function Zd(o,a){let c;return c="noop"===o?new OD:("zone.js"===o?void 0:o)||new Oa({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),T=[{provide:Oa,useValue:D}];return D.run(()=>{const k=Hs.create({providers:T,parent:this.injector,name:c.moduleType.name}),R=c.create(k),U=R.injector.get(Ci,null);if(!U)throw new ze(402,"");return D.runOutsideAngular(()=>{const G=D.onError.subscribe({next:J=>{U.handleError(J)}});R.onDestroy(()=>{nb(this._modules,R),G.unsubscribe()})}),function KM(o,a,c){try{const d=c();return Zy(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(U,D,()=>{const G=R.injector.get(Af);return G.runInitializers(),G.donePromise.then(()=>(function xA(o){se(o,"Expected localeId to be defined"),"string"==typeof o&&(__=o.toLowerCase().replace(/_/g,"-"))}(R.injector.get(H_,pg)||pg),this._moduleDoBootstrap(R),R))})})}bootstrapModule(c,d=[]){const f=UD({},d);return function GM(o,a,c){const d=new wf(c);return Promise.resolve(d)}(0,0,c).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(c){const d=c.injector.get(tb);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new ze(403,"");c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ze(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Bg,null);null==c||c(),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(_i(Hs))},o.\u0275prov=Ce({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function UD(o,a){return Array.isArray(a)?a.reduce(UD,o):Object.assign(Object.assign({},o),a)}let tb=(()=>{class o{constructor(c,d,f,_){this._zone=c,this._injector=d,this._exceptionHandler=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new V.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),D=new V.y(T=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{Oa.assertNotInAngularZone(),Lg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Oa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{k.unsubscribe(),R.unsubscribe()}});this.isStable=(0,pe.T)(b,D.pipe((0,fe.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new ze(405,"");let f;f=c instanceof C0?c:this._injector.get(P_).resolveComponentFactory(c),this.componentTypes.push(f.componentType);const _=function qM(o){return o.isBoundToModule}(f)?void 0:this._injector.get(bf),D=f.create(Hs.NULL,[],d||f.selector,_),T=D.location.nativeElement,k=D.injector.get(Q0,null),R=k&&D.injector.get($M);return k&&R&&R.registerApplication(T,k),D.onDestroy(()=>{this.detachView(D.hostView),nb(this.components,D),R&&R.unregisterApplication(T)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new ze(101,"");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;nb(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(j_,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(c){return new(c||o)(_i(Oa),_i(Hs),_i(Ci),_i(Af))},o.\u0275prov=Ce({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function nb(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let jD=!0,Rf=!1;function ib(){return Rf=!0,jD}function YM(){if(Rf)throw new Error("Cannot enable prod mode after platform setup.");jD=!1}let JM=(()=>{class o{}return o.__NG_ELEMENT_ID__=rb,o})();function rb(o){return function Wo(o,a,c){if(Ao(o)&&!c){const d=Dr(o.index,a);return new vf(d,d)}return 47&o.type?new vf(a[16],a):null}(ti(),Ne(),16==(16&o))}class ub{constructor(){}supports(a){return t_(a)}create(a){return new s1(a)}}const K_=(o,a)=>a;class s1{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||K_}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,f=0,_=null;for(;c||d;){const b=!d||c&&c.currentIndex<Ff(d,f,_)?c:d,D=Ff(b,f,_),T=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(c=c._next,null==b.previousIndex)f++;else{_||(_=[]);const k=D-f,R=T-f;if(k!=R){for(let G=0;G<k;G++){const J=G<_.length?_[G]:_[G]=0,Te=J+G;R<=Te&&Te<k&&(_[G]=J+1)}_[b.previousIndex]=R-k}}D!==T&&a(b,D,T)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!t_(a))throw new ze(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,_,b,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let D=0;D<this.length;D++)_=a[D],b=this._trackByFn(D,_),null!==c&&Object.is(c.trackById,b)?(d&&(c=this._verifyReinsertion(c,_,b,D)),Object.is(c.item,_)||this._addIdentityChange(c,_)):(c=this._mismatch(c,_,b,D),d=!0),c=c._next}else f=0,function Tx(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[og()]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,D=>{b=this._trackByFn(f,D),null!==c&&Object.is(c.trackById,b)?(d&&(c=this._verifyReinsertion(c,D,b,f)),Object.is(c.item,D)||this._addIdentityChange(c,D)):(c=this._mismatch(c,D,b,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,f){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,_,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,_,f)):a=this._addAfter(new o1(c,d),_,f),a}_verifyReinsertion(a,c,d,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?a=this._reinsertAfter(_,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,_=a._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new GD),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new GD),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class o1{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Y_{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class GD{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new Y_,this.map.set(c,d)),d.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ff(o,a,c){const d=o.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+a+f}class qD{constructor(){}supports(a){return a instanceof Map||UE(a)}create(){return new a1}}class a1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||UE(a)))throw new ze(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const _=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,_)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const _=f._prev,b=f._next;return _&&(_._next=b),b&&(b._prev=_),f._next=null,f._prev=null,f}const d=new Hg(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class Hg{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WD(){return new db([new ub])}let db=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||WD()),deps:[[o,new ll,new nc]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new ze(901,"")}}return o.\u0275prov=Ce({token:o,providedIn:"root",factory:WD}),o})();function ZD(){return new hb([new qD])}let hb=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||ZD()),deps:[[o,new ll,new nc]]}}find(c){const d=this.factories.find(_=>_.supports(c));if(d)return d;throw new ze(901,"")}}return o.\u0275prov=Ce({token:o,providedIn:"root",factory:ZD}),o})();const KD=LD(null,"core",[]);let u1=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(_i(tb))},o.\u0275mod=Q({type:o}),o.\u0275inj=Yt({}),o})()},3942:(nt,De,L)=>{L.d(De,{Z:()=>ze});var h=L(2090),te=L(4859),V=L(6881),pe=L(1877);class fe{constructor(ye,Fe){this._delegate=ye,this.firebase=Fe,(0,V._addComponent)(ye,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(ye,Fe=V._DEFAULT_ENTRY_NAME){var dt;this._delegate.checkDestroyed();const gt=this._delegate.container.getProvider(ye);return!gt.isInitialized()&&"EXPLICIT"===(null===(dt=gt.getComponent())||void 0===dt?void 0:dt.instantiationMode)&&gt.initialize(),gt.getImmediate({identifier:Fe})}_removeServiceInstance(ye,Fe=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(Fe)}_addComponent(ye){(0,V._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,V._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function we(){const Qe=function Ie(Qe){const ye={},Fe={__esModule:!0,initializeApp:function He(We,xt={}){const le=V.initializeApp(We,xt);if((0,h.r3)(ye,le.name))return ye[le.name];const Vt=new Qe(le,Fe);return ye[le.name]=Vt,Vt},app:gt,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function Ee(We){const xt=We.name,le=xt.replace("-compat","");if(V._registerComponent(We)&&"PUBLIC"===We.type){const Vt=(Gt=gt())=>{if("function"!=typeof Gt[le])throw ue.create("invalid-app-argument",{appName:xt});return Gt[le]()};void 0!==We.serviceProps&&(0,h.ZB)(Vt,We.serviceProps),Fe[le]=Vt,Qe.prototype[le]=function(...Gt){return this._getService.bind(this,xt).apply(this,We.multipleInstances?Gt:[])}}return"PUBLIC"===We.type?Fe[le]:null},removeApp:function dt(We){delete ye[We]},useAsService:function Xe(We,xt){return"serverAuth"===xt?null:xt},modularAPIs:V}};function gt(We){if(!(0,h.r3)(ye,We=We||V._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:We});return ye[We]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function Se(){return Object.keys(ye).map(We=>ye[We])}}),gt.App=Qe,Fe}(fe);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function ye(Fe){(0,h.ZB)(Qe,Fe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Qe}(),q=new pe.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ze=K;!function Pe(Qe){(0,V.registerVersion)("@firebase/app-compat","0.2.13",Qe)}()},6881:(nt,De,L)=>{L.r(De),L.d(De,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>Bt,_DEFAULT_ENTRY_NAME:()=>pi,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Tt,_apps:()=>Vi,_clearComponents:()=>Xt,_components:()=>wr,_getProvider:()=>Eo,_registerComponent:()=>Ht,_removeServiceInstance:()=>Co,deleteApp:()=>tr,getApp:()=>sn,getApps:()=>ss,initializeApp:()=>Do,onLog:()=>Io,registerVersion:()=>Zn,setLogLevel:()=>si});var h=L(5861),te=L(4859),V=L(1877),pe=L(2090);let ve,ue;const K=new WeakMap,q=new WeakMap,ie=new WeakMap,et=new WeakMap,Pe=new WeakMap;let ye={get(de,re,Re){if(de instanceof IDBTransaction){if("done"===re)return q.get(de);if("objectStoreNames"===re)return de.objectStoreNames||ie.get(de);if("store"===re)return Re.objectStoreNames[1]?void 0:Re.objectStore(Re.objectStoreNames[0])}return He(de[re])},set:(de,re,Re)=>(de[re]=Re,!0),has:(de,re)=>de instanceof IDBTransaction&&("done"===re||"store"===re)||re in de};function gt(de){return"function"==typeof de?function dt(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...re){return de.apply(Se(this),re),He(K.get(this))}:function(...re){return He(de.apply(Se(this),re))}:function(re,...Re){const be=de.call(Se(this),re,...Re);return ie.set(be,re.sort?re.sort():[re]),He(be)}}(de):(de instanceof IDBTransaction&&function Qe(de){if(q.has(de))return;const re=new Promise((Re,be)=>{const Ke=()=>{de.removeEventListener("complete",ft),de.removeEventListener("error",Qt),de.removeEventListener("abort",Qt)},ft=()=>{Re(),Ke()},Qt=()=>{be(de.error||new DOMException("AbortError","AbortError")),Ke()};de.addEventListener("complete",ft),de.addEventListener("error",Qt),de.addEventListener("abort",Qt)});q.set(de,re)}(de),((de,re)=>re.some(Re=>de instanceof Re))(de,function Ie(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,ye):de)}function He(de){if(de instanceof IDBRequest)return function ze(de){const re=new Promise((Re,be)=>{const Ke=()=>{de.removeEventListener("success",ft),de.removeEventListener("error",Qt)},ft=()=>{Re(He(de.result)),Ke()},Qt=()=>{be(de.error),Ke()};de.addEventListener("success",ft),de.addEventListener("error",Qt)});return re.then(Re=>{Re instanceof IDBCursor&&K.set(Re,de)}).catch(()=>{}),Pe.set(re,de),re}(de);if(et.has(de))return et.get(de);const re=gt(de);return re!==de&&(et.set(de,re),Pe.set(re,de)),re}const Se=de=>Pe.get(de),We=["get","getKey","getAll","getAllKeys","count"],xt=["put","add","delete","clear"],le=new Map;function Vt(de,re){if(!(de instanceof IDBDatabase)||re in de||"string"!=typeof re)return;if(le.get(re))return le.get(re);const Re=re.replace(/FromIndex$/,""),be=re!==Re,Ke=xt.includes(Re);if(!(Re in(be?IDBIndex:IDBObjectStore).prototype)||!Ke&&!We.includes(Re))return;const ft=function(){var Qt=(0,h.Z)(function*(Kn,...an){const ki=this.transaction(Kn,Ke?"readwrite":"readonly");let In=ki.store;return be&&(In=In.index(an.shift())),(yield Promise.all([In[Re](...an),Ke&&ki.done]))[0]});return function(an){return Qt.apply(this,arguments)}}();return le.set(re,ft),ft}!function Fe(de){ye=de(ye)}(de=>ii(Dt({},de),{get:(re,Re,be)=>Vt(re,Re)||de.get(re,Re,be),has:(re,Re)=>!!Vt(re,Re)||de.has(re,Re)}));class Gt{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function Mt(de){const re=de.getComponent();return"VERSION"===(null==re?void 0:re.type)}(Re)){const be=Re.getImmediate();return`${be.library}/${be.version}`}return null}).filter(Re=>Re).join(" ")}}const un="@firebase/app",Vr=new V.Yd("@firebase/app"),pi="[DEFAULT]",Li={[un]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Vi=new Map,wr=new Map;function Wt(de,re){try{de.container.addComponent(re)}catch(Re){Vr.debug(`Component ${re.name} failed to register with FirebaseApp ${de.name}`,Re)}}function Tt(de,re){de.container.addOrOverwriteComponent(re)}function Ht(de){const re=de.name;if(wr.has(re))return Vr.debug(`There were multiple attempts to register component ${re}.`),!1;wr.set(re,de);for(const Re of Vi.values())Wt(Re,de);return!0}function Eo(de,re){const Re=de.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),de.container.getProvider(re)}function Co(de,re,Re=pi){Eo(de,re).clearInstance(Re)}function Xt(){wr.clear()}const ei=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ur{constructor(re,Re,be){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=be,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}const Bt="9.23.0";function Do(de,re={}){let Re=de;"object"!=typeof re&&(re={name:re});const be=Object.assign({name:pi,automaticDataCollectionEnabled:!1},re),Ke=be.name;if("string"!=typeof Ke||!Ke)throw ei.create("bad-app-name",{appName:String(Ke)});if(Re||(Re=(0,pe.aH)()),!Re)throw ei.create("no-options");const ft=Vi.get(Ke);if(ft){if((0,pe.vZ)(Re,ft.options)&&(0,pe.vZ)(be,ft.config))return ft;throw ei.create("duplicate-app",{appName:Ke})}const Qt=new te.H0(Ke);for(const an of wr.values())Qt.addComponent(an);const Kn=new Ur(Re,be,Qt);return Vi.set(Ke,Kn),Kn}function sn(de=pi){const re=Vi.get(de);if(!re&&de===pi&&(0,pe.aH)())return Do();if(!re)throw ei.create("no-app",{appName:de});return re}function ss(){return Array.from(Vi.values())}function tr(de){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(de){const re=de.name;Vi.has(re)&&(Vi.delete(re),yield Promise.all(de.container.getProviders().map(Re=>Re.delete())),de.isDeleted=!0)})).apply(this,arguments)}function Zn(de,re,Re){var be;let Ke=null!==(be=Li[de])&&void 0!==be?be:de;Re&&(Ke+=`-${Re}`);const ft=Ke.match(/\s|\//),Qt=re.match(/\s|\//);if(ft||Qt){const Kn=[`Unable to register library "${Ke}" with version "${re}":`];return ft&&Kn.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),ft&&Qt&&Kn.push("and"),Qt&&Kn.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void Vr.warn(Kn.join(" "))}Ht(new te.wA(`${Ke}-version`,()=>({library:Ke,version:re}),"VERSION"))}function Io(de,re){if(null!==de&&"function"!=typeof de)throw ei.create("invalid-log-argument");(0,V.Am)(de,re)}function si(de){(0,V.Ub)(de)}const $="firebase-heartbeat-store";let j=null;function Q(){return j||(j=function Ee(de,re,{blocked:Re,upgrade:be,blocking:Ke,terminated:ft}={}){const Qt=indexedDB.open(de,re),Kn=He(Qt);return be&&Qt.addEventListener("upgradeneeded",an=>{be(He(Qt.result),an.oldVersion,an.newVersion,He(Qt.transaction),an)}),Re&&Qt.addEventListener("blocked",an=>Re(an.oldVersion,an.newVersion,an)),Kn.then(an=>{ft&&an.addEventListener("close",()=>ft()),Ke&&an.addEventListener("versionchange",ki=>Ke(ki.oldVersion,ki.newVersion,ki))}).catch(()=>{}),Kn}("firebase-heartbeat-database",1,{upgrade:(de,re)=>{0===re&&de.createObjectStore($)}}).catch(de=>{throw ei.create("idb-open",{originalErrorMessage:de.message})})),j}function oe(){return(oe=(0,h.Z)(function*(de){try{return yield(yield Q()).transaction($).objectStore($).get(Ut(de))}catch(re){if(re instanceof pe.ZR)Vr.warn(re.message);else{const Re=ei.create("idb-get",{originalErrorMessage:null==re?void 0:re.message});Vr.warn(Re.message)}}})).apply(this,arguments)}function ct(de,re){return qt.apply(this,arguments)}function qt(){return(qt=(0,h.Z)(function*(de,re){try{const be=(yield Q()).transaction($,"readwrite");yield be.objectStore($).put(re,Ut(de)),yield be.done}catch(Re){if(Re instanceof pe.ZR)Vr.warn(Re.message);else{const be=ei.create("idb-set",{originalErrorMessage:null==Re?void 0:Re.message});Vr.warn(be.message)}}})).apply(this,arguments)}function Ut(de){return`${de.name}!${de.options.appId}`}class yn{constructor(re){this.container=re,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new jr(Re),this._heartbeatsCachePromise=this._storage.read().then(be=>(this._heartbeatsCache=be,be))}triggerHeartbeat(){var re=this;return(0,h.Z)(function*(){const be=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ke=Jt();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Ke&&!re._heartbeatsCache.heartbeats.some(ft=>ft.date===Ke))return re._heartbeatsCache.heartbeats.push({date:Ke,agent:be}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter(ft=>{const Qt=new Date(ft.date).valueOf();return Date.now()-Qt<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,h.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Re=Jt(),{heartbeatsToSend:be,unsentEntries:Ke}=function Bi(de,re=1024){const Re=[];let be=de.slice();for(const Ke of de){const ft=Re.find(Qt=>Qt.agent===Ke.agent);if(ft){if(ft.dates.push(Ke.date),gr(Re)>re){ft.dates.pop();break}}else if(Re.push({agent:Ke.agent,dates:[Ke.date]}),gr(Re)>re){Re.pop();break}be=be.slice(1)}return{heartbeatsToSend:Re,unsentEntries:be}}(re._heartbeatsCache.heartbeats),ft=(0,pe.L)(JSON.stringify({version:2,heartbeats:be}));return re._heartbeatsCache.lastSentHeartbeatDate=Re,Ke.length>0?(re._heartbeatsCache.heartbeats=Ke,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),ft})()}}function Jt(){return(new Date).toISOString().substring(0,10)}class jr{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,pe.hl)()&&(0,pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,h.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function ke(de){return oe.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Re=this;return(0,h.Z)(function*(){var be;if(yield Re._canUseIndexedDBPromise){const ft=yield Re.read();return ct(Re.app,{lastSentHeartbeatDate:null!==(be=re.lastSentHeartbeatDate)&&void 0!==be?be:ft.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Re=this;return(0,h.Z)(function*(){var be;if(yield Re._canUseIndexedDBPromise){const ft=yield Re.read();return ct(Re.app,{lastSentHeartbeatDate:null!==(be=re.lastSentHeartbeatDate)&&void 0!==be?be:ft.lastSentHeartbeatDate,heartbeats:[...ft.heartbeats,...re.heartbeats]})}})()}}function gr(de){return(0,pe.L)(JSON.stringify({version:2,heartbeats:de})).length}!function Hr(de){Ht(new te.wA("platform-logger",re=>new Gt(re),"PRIVATE")),Ht(new te.wA("heartbeat",re=>new yn(re),"PRIVATE")),Zn(un,"0.9.13",de),Zn(un,"0.9.13","esm2017"),Zn("fire-js","")}("")},4859:(nt,De,L)=>{L.d(De,{H0:()=>Ie,wA:()=>V});var h=L(5861),te=L(2090);class V{constructor(K,q,ie){this.name=K,this.instanceFactory=q,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const pe="[DEFAULT]";class fe{constructor(K,q){this.name=K,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const q=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(q)){const ie=new te.BH;if(this.instancesDeferred.set(q,ie),this.isInitialized(q)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:q});et&&ie.resolve(et)}catch(et){}}return this.instancesDeferred.get(q).promise}getImmediate(K){var q;const ie=this.normalizeInstanceIdentifier(null==K?void 0:K.identifier),et=null!==(q=null==K?void 0:K.optional)&&void 0!==q&&q;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Pe){if(et)return null;throw Pe}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function ue(we){return"EAGER"===we.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:pe})}catch(q){}for(const[q,ie]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(q);try{const Pe=this.getOrInitializeService({instanceIdentifier:et});ie.resolve(Pe)}catch(Pe){}}}}clearInstance(K=pe){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,h.Z)(function*(){const q=Array.from(K.instances.values());yield Promise.all([...q.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...q.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=pe){return this.instances.has(K)}getOptions(K=pe){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:q={}}=K,ie=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:ie,options:q});for(const[Pe,ze]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Pe)&&ze.resolve(et);return et}onInit(K,q){var ie;const et=this.normalizeInstanceIdentifier(q),Pe=null!==(ie=this.onInitCallbacks.get(et))&&void 0!==ie?ie:new Set;Pe.add(K),this.onInitCallbacks.set(et,Pe);const ze=this.instances.get(et);return ze&&K(ze,et),()=>{Pe.delete(K)}}invokeOnInitCallbacks(K,q){const ie=this.onInitCallbacks.get(q);if(ie)for(const et of ie)try{et(K,q)}catch(Pe){}}getOrInitializeService({instanceIdentifier:K,options:q={}}){let ie=this.instances.get(K);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(we=K,we===pe?void 0:we),options:q}),this.instances.set(K,ie),this.instancesOptions.set(K,q),this.invokeOnInitCallbacks(ie,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,ie)}catch(et){}var we;return ie||null}normalizeInstanceIdentifier(K=pe){return this.component?this.component.multipleInstances?K:pe:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ie{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const q=this.getProvider(K.name);if(q.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);q.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const q=new fe(K,this);return this.providers.set(K,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,De,L)=>{L.d(De,{Am:()=>we,Ub:()=>Ie,Yd:()=>ue,in:()=>te});const h=[];var te=(()=>{return(K=te||(te={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",te;var K})();const V={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},pe=te.INFO,fe={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},ve=(K,q,...ie)=>{if(q<K.logLevel)return;const et=(new Date).toISOString(),Pe=fe[q];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Pe](`[${et}]  ${K.name}:`,...ie)};class ue{constructor(q){this.name=q,this._logLevel=pe,this._logHandler=ve,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in te))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?V[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...q),this._logHandler(this,te.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...q),this._logHandler(this,te.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,te.INFO,...q),this._logHandler(this,te.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,te.WARN,...q),this._logHandler(this,te.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...q),this._logHandler(this,te.ERROR,...q)}}function Ie(K){h.forEach(q=>{q.setLogLevel(K)})}function we(K,q){for(const ie of h){let et=null;q&&q.level&&(et=V[q.level]),ie.userLogHandler=null===K?null:(Pe,ze,...Qe)=>{const ye=Qe.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch(dt){return null}}).filter(Fe=>Fe).join(" ");ze>=(null!=et?et:Pe.logLevel)&&K({level:te[ze].toLowerCase(),message:ye,args:Qe,type:Pe.name})}}}},259:(nt,De,L)=>{L.d(De,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=L(6881);(0,h.registerVersion)("firebase","9.23.0","app")},9260:(nt,De,L)=>{L.d(De,{Z:()=>h.Z});var h=L(3942);h.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(nt,De,L)=>{L.r(De);var h=L(5861),te=L(3942),V=L(2090),pe=L(6881),fe=L(7582),ve=L(1877),ue=L(4859);const ze=function et(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Qe=function Pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),dt=new ve.Yd("@firebase/auth");function He(y,...p){dt.logLevel<=ve.in.ERROR&&dt.error(`Auth (${pe.SDK_VERSION}): ${y}`,...p)}function Se(y,...p){throw xt(y,...p)}function Ee(y,...p){return xt(y,...p)}function Xe(y,p,m){const E=Object.assign(Object.assign({},Qe()),{[p]:m});return new V.LL("auth","Firebase",E).create(p,{appName:y.name})}function We(y,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Se(y,"argument-error"),Xe(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xt(y,...p){if("string"!=typeof y){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return ye.create(y,...p)}function le(y,p,...m){if(!y)throw xt(p,...m)}function Vt(y){const p="INTERNAL ASSERTION FAILED: "+y;throw He(p),new Error(p)}function Gt(y,p){y||Vt(p)}function Mt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function un(){return"http:"===bt()||"https:"===bt()}function bt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class ks{constructor(p,m){this.shortDelay=p,this.longDelay=m,Gt(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Vr(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(un()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function se(y,p){Gt(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ne{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Me=new ks(3e4,6e4);function Ue(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function Ce(y,p,m,E){return vt.apply(this,arguments)}function vt(){return(vt=(0,h.Z)(function*(y,p,m,E,x={}){return Yt(y,x,(0,h.Z)(function*(){let F={},z={};E&&("GET"===p?z=E:F={body:JSON.stringify(E)});const ee=(0,V.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),ne.fetch()(qn(y,y.config.apiHost,m,ee),Object.assign({method:p,headers:Ve,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Yt(y,p,m){return on.apply(this,arguments)}function on(){return(on=(0,h.Z)(function*(y,p,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ae),p);try{const x=new Nn(y),F=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const z=yield F.json();if("needConfirmation"in z)throw Wn(y,"account-exists-with-different-credential",z);if(F.ok&&!("errorMessage"in z))return z;{const ee=F.ok?z.errorMessage:z.error.message,[Ve,Ye]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Wn(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ve)throw Wn(y,"email-already-in-use",z);if("USER_DISABLED"===Ve)throw Wn(y,"user-disabled",z);const ot=E[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Xe(y,ot,Ye);Se(y,ot)}}catch(x){if(x instanceof V.ZR)throw x;Se(y,"network-request-failed",{message:String(x)})}})).apply(this,arguments)}function Et(y,p,m,E){return gn.apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(y,p,m,E,x={}){const F=yield Ce(y,p,m,E,x);return"mfaPendingCredential"in F&&Se(y,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function qn(y,p,m,E){const x=`${p}${m}?${E}`;return y.config.emulator?se(y.config,x):`${y.config.apiScheme}://${x}`}class Nn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),Me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wn(y,p,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const x=Ee(y,p,E);return x.customData._tokenResponse=m,x}function hi(){return(hi=(0,h.Z)(function*(y,p){return Ce(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Br(y,p){return It.apply(this,arguments)}function It(){return(It=(0,h.Z)(function*(y,p){return Ce(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function kl(y,p){return ri.apply(this,arguments)}function ri(){return(ri=(0,h.Z)(function*(y,p){return Ce(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function fi(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function pi(){return(pi=(0,h.Z)(function*(y,p=!1){const m=(0,V.m9)(y),E=yield m.getIdToken(p),x=Vi(E);le(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const F="object"==typeof x.firebase?x.firebase:void 0,z=null==F?void 0:F.sign_in_provider;return{claims:x,token:E,authTime:fi(Li(x.auth_time)),issuedAtTime:fi(Li(x.iat)),expirationTime:fi(Li(x.exp)),signInProvider:z||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function Li(y){return 1e3*Number(y)}function Vi(y){const[p,m,E]=y.split(".");if(void 0===p||void 0===m||void 0===E)return He("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,V.tV)(m);return x?JSON.parse(x):(He("Failed to decode base64 JWT payload"),null)}catch(x){return He("Caught error parsing JWT payload as JSON",null==x?void 0:x.toString()),null}}function Wt(y,p){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(y,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof V.ZR&&Ht(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Ht({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Eo{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===(null==m?void 0:m.code)&&p.schedule(!0))}p.schedule()})()}}class Co{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=fi(this.lastLoginAt),this.creationTime=fi(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xt(y){return pr.apply(this,arguments)}function pr(){return(pr=(0,h.Z)(function*(y){var p;const m=y.auth,E=yield y.getIdToken(),x=yield Wt(y,kl(m,{idToken:E}));le(null==x?void 0:x.users.length,m,"internal-error");const F=x.users[0];y._notifyReloadListener(F);const z=(null===(p=F.providerUserInfo)||void 0===p?void 0:p.length)?Do(F.providerUserInfo):[],ee=Bt(y.providerData,z),ot=!!y.isAnonymous&&!(y.email&&F.passwordHash||(null==ee?void 0:ee.length)),pt={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:ee,metadata:new Co(F.createdAt,F.lastLoginAt),isAnonymous:ot};Object.assign(y,pt)})).apply(this,arguments)}function Ur(){return(Ur=(0,h.Z)(function*(y){const p=(0,V.m9)(y);yield Xt(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Bt(y,p){return[...y.filter(E=>!p.some(x=>x.providerId===E.providerId)),...p]}function Do(y){return y.map(p=>{var{providerId:m}=p,E=(0,fe._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ss(){return(ss=(0,h.Z)(function*(y,p){const m=yield Yt(y,{},(0,h.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:F}=y.config,z=qn(y,x,"/v1/token",`key=${F}`),ee=yield y._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",ne.fetch()(z,{method:"POST",headers:ee,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class tr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){le(p.idToken,"internal-error"),le(void 0!==p.idToken,"internal-error"),le(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function wr(y){const p=Vi(y);return le(p,"internal-error"),le(void 0!==p.exp,"internal-error"),le(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,h.Z)(function*(){return le(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,h.Z)(function*(){const{accessToken:x,refreshToken:F,expiresIn:z}=yield function sn(y,p){return ss.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(x,F,Number(z))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:x,expirationTime:F}=m,z=new tr;return E&&(le("string"==typeof E,"internal-error",{appName:p}),z.refreshToken=E),x&&(le("string"==typeof x,"internal-error",{appName:p}),z.accessToken=x),F&&(le("number"==typeof F,"internal-error",{appName:p}),z.expirationTime=F),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new tr,this.toJSON())}_performRefresh(){return Vt("not implemented")}}function Ln(y,p){le("string"==typeof y||void 0===y,"internal-error",{appName:p})}class Zn{constructor(p){var{uid:m,auth:E,stsTokenManager:x}=p,F=(0,fe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Eo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Co(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const E=yield Wt(m,m.stsTokenManager.getToken(m.auth,p));return le(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function Ic(y){return pi.apply(this,arguments)}(this,p)}reload(){return function ei(y){return Ur.apply(this,arguments)}(this)}_assign(p){this!==p&&(le(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Zn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,h.Z)(function*(){let x=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),x=!0),m&&(yield Xt(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield Wt(p,function Ni(y,p){return hi.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,x,F,z,ee,Ve,Ye,ot;const pt=null!==(E=m.displayName)&&void 0!==E?E:void 0,ln=null!==(x=m.email)&&void 0!==x?x:void 0,kr=null!==(F=m.phoneNumber)&&void 0!==F?F:void 0,Ta=null!==(z=m.photoURL)&&void 0!==z?z:void 0,ac=null!==(ee=m.tenantId)&&void 0!==ee?ee:void 0,Pd=null!==(Ve=m._redirectEventId)&&void 0!==Ve?Ve:void 0,Zp=null!==(Ye=m.createdAt)&&void 0!==Ye?Ye:void 0,Ei=null!==(ot=m.lastLoginAt)&&void 0!==ot?ot:void 0,{uid:Ci,emailVerified:fy,isAnonymous:dn,providerData:Pr,stsTokenManager:py}=m;le(Ci&&py,p,"internal-error");const eE=tr.fromJSON(this.name,py);le("string"==typeof Ci,p,"internal-error"),Ln(pt,p.name),Ln(ln,p.name),le("boolean"==typeof fy,p,"internal-error"),le("boolean"==typeof dn,p,"internal-error"),Ln(kr,p.name),Ln(Ta,p.name),Ln(ac,p.name),Ln(Pd,p.name),Ln(Zp,p.name),Ln(Ei,p.name);const Kp=new Zn({uid:Ci,auth:p,email:ln,emailVerified:fy,displayName:pt,isAnonymous:dn,photoURL:Ta,phoneNumber:kr,tenantId:ac,stsTokenManager:eE,createdAt:Zp,lastLoginAt:Ei});return Pr&&Array.isArray(Pr)&&(Kp.providerData=Pr.map(tE=>Object.assign({},tE))),Pd&&(Kp._redirectEventId=Pd),Kp}static _fromIdTokenResponse(p,m,E=!1){return(0,h.Z)(function*(){const x=new tr;x.updateFromServerResponse(m);const F=new Zn({uid:m.localId,auth:p,stsTokenManager:x,isAnonymous:E});return yield Xt(F),F})()}}const Io=new Map;function si(y){Gt(y instanceof Function,"Expected a class definition");let p=Io.get(y);return p?(Gt(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,Io.set(y,p),p)}const zi=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var x=this;return(0,h.Z)(function*(){x.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const x=E.storage[m];return void 0===x?null:x})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function $(y,p,m){return`firebase:${y}:${p}:${m}`}class j{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:x,name:F}=this.auth;this.fullUserKey=$(this.userKey,x.apiKey,F),this.fullPersistenceKey=$("persistence",x.apiKey,F),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Zn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new j(si(zi),p,E);const x=(yield Promise.all(m.map(function(){var Ye=(0,h.Z)(function*(ot){if(yield ot._isAvailable())return ot});return function(ot){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let F=x[0]||si(zi);const z=$(E,p.config.apiKey,p.name);let ee=null;for(const Ye of m)try{const ot=yield Ye._get(z);if(ot){const pt=Zn._fromJSON(p,ot);Ye!==F&&(ee=pt),F=Ye;break}}catch(ot){}const Ve=x.filter(Ye=>Ye._shouldAllowMigration);return F._shouldAllowMigration&&Ve.length?(F=Ve[0],ee&&(yield F._set(z,ee.toJSON())),yield Promise.all(m.map(function(){var Ye=(0,h.Z)(function*(ot){if(ot!==F)try{yield ot._remove(z)}catch(pt){}});return function(ot){return Ye.apply(this,arguments)}}())),new j(F,p,E)):new j(F,p,E)})()}}function Q(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(qt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(ke(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Un(p))return"Blackberry";if(kn(p))return"Webos";if(oe(p))return"Safari";if((p.includes("chrome/")||ct(p))&&!p.includes("edge/"))return"Chrome";if(Ut(p))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function ke(y=(0,V.z$)()){return/firefox\//i.test(y)}function oe(y=(0,V.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ct(y=(0,V.z$)()){return/crios\//i.test(y)}function qt(y=(0,V.z$)()){return/iemobile/i.test(y)}function Ut(y=(0,V.z$)()){return/android/i.test(y)}function Un(y=(0,V.z$)()){return/blackberry/i.test(y)}function kn(y=(0,V.z$)()){return/webos/i.test(y)}function yn(y=(0,V.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function gr(y=(0,V.z$)()){return yn(y)||Ut(y)||kn(y)||Un(y)||/windows phone/i.test(y)||qt(y)}function de(y,p=[]){let m;switch(y){case"Browser":m=Q((0,V.z$)());break;case"Worker":m=`${Q((0,V.z$)())}-${y}`;break;default:m=y}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${pe.SDK_VERSION}/${E}`}function Re(){return(Re=(0,h.Z)(function*(y){return(yield Ce(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function be(y,p){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,h.Z)(function*(y,p){return Ce(y,"GET","/v2/recaptchaConfig",Ue(y,p))})).apply(this,arguments)}function ft(y){return void 0!==y&&void 0!==y.getResponse}function Qt(y){return void 0!==y&&void 0!==y.enterprise}class Kn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function ki(y){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=p,E.onerror=x=>{const F=Ee("internal-error");F.customData=x,m(F)},E.type="text/javascript",E.charset="UTF-8",function an(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(E)})}function In(y){return`__${y}${Math.floor(1e6*Math.random())}`}class Ha{constructor(p){this.type="recaptcha-enterprise",this.auth=Pn(p)}verify(p="verify",m=!1){var E=this;return(0,h.Z)(function*(){function F(){return F=(0,h.Z)(function*(ee){if(!m){if(null==ee.tenantId&&null!=ee._agentRecaptchaConfig)return ee._agentRecaptchaConfig.siteKey;if(null!=ee.tenantId&&void 0!==ee._tenantRecaptchaConfigs[ee.tenantId])return ee._tenantRecaptchaConfigs[ee.tenantId].siteKey}return new Promise(function(){var Ve=(0,h.Z)(function*(Ye,ot){be(ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(pt=>{if(void 0!==pt.recaptchaKey){const ln=new Kn(pt);return null==ee.tenantId?ee._agentRecaptchaConfig=ln:ee._tenantRecaptchaConfigs[ee.tenantId]=ln,Ye(ln.siteKey)}ot(new Error("recaptcha Enterprise site key undefined"))}).catch(pt=>{ot(pt)})});return function(Ye,ot){return Ve.apply(this,arguments)}}())}),F.apply(this,arguments)}function z(ee,Ve,Ye){const ot=window.grecaptcha;Qt(ot)?ot.enterprise.ready(()=>{ot.enterprise.execute(ee,{action:p}).then(pt=>{Ve(pt)}).catch(()=>{Ve("NO_RECAPTCHA")})}):Ye(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ee,Ve)=>{(function x(ee){return F.apply(this,arguments)})(E.auth).then(Ye=>{if(!m&&Qt(window.grecaptcha))z(Ye,ee,Ve);else{if("undefined"==typeof window)return void Ve(new Error("RecaptchaVerifier is only supported in browser"));ki("https://www.google.com/recaptcha/enterprise.js?render="+Ye).then(()=>{z(Ye,ee,Ve)}).catch(ot=>{Ve(ot)})}}).catch(Ye=>{Ve(Ye)})})})()}}function nr(y,p,m){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,h.Z)(function*(y,p,m,E=!1){const x=new Ha(y);let F;try{F=yield x.verify(m)}catch(ee){F=yield x.verify(m,!0)}const z=Object.assign({},p);return Object.assign(z,E?{captchaResp:F}:{captchaResponse:F}),Object.assign(z,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(z,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),z})).apply(this,arguments)}class To{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=F=>new Promise((z,ee)=>{try{z(p(F))}catch(Ve){ee(Ve)}});E.onAbort=m,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const x of m.queue)yield x(p),x.onAbort&&E.push(x.onAbort)}catch(x){E.reverse();for(const F of E)try{F()}catch(z){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null==x?void 0:x.message})}})()}}class ir{constructor(p,m,E,x){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=E,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xo(this),this.idTokenSubscription=new xo(this),this.beforeStateQueue=new To(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=si(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var x,F;if(!E._deleted&&(E.persistenceManager=yield j.create(E,p),!E._deleted)){if(null===(x=E._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(z){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(F=E.currentUser)||void 0===F?void 0:F.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var E;const x=yield m.assertedPersistence.getCurrentUser();let F=x,z=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ee=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Ve=null==F?void 0:F._redirectEventId,Ye=yield m.tryRedirectSignIn(p);(!ee||ee===Ve)&&(null==Ye?void 0:Ye.user)&&(F=Ye.user,z=!0)}if(!F)return m.directlySetCurrentUser(null);if(!F._redirectEventId){if(z)try{yield m.beforeStateQueue.runMiddleware(F)}catch(ee){F=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ee))}return F?m.reloadAndSetCurrentUserOrClear(F):m.directlySetCurrentUser(null)}return le(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===F._redirectEventId?m.directlySetCurrentUser(F):m.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(x){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield Xt(p)}catch(E){if("auth/network-request-failed"!==(null==E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Xo(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const E=p?(0,V.m9)(p):null;return E&&le(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&le(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(si(p))}))}initializeRecaptchaConfig(){var p=this;return(0,h.Z)(function*(){const m=yield be(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new Kn(m);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new Ha(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new V.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,h.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(m);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&si(p)||m._popupRedirectResolver;le(E,m,"argument-error"),m.redirectPersistenceManager=yield j.create(m,[si(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var E,x;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,x){if(this._deleted)return()=>{};const F="function"==typeof m?m:m.next.bind(m),z=this._isInitialized?Promise.resolve():this._initializationPromise;return le(z,this,"internal-error"),z.then(()=>F(this.currentUser)),"function"==typeof m?p.addObserver(m,E,x):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=de(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();x&&(E["X-Firebase-Client"]=x);const F=yield p._getAppCheckToken();return F&&(E["X-Firebase-AppCheck"]=F),E})()}_getAppCheckToken(){var p=this;return(0,h.Z)(function*(){var m;const E=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return(null==E?void 0:E.error)&&function gt(y,...p){dt.logLevel<=ve.in.WARN&&dt.warn(`Auth (${pe.SDK_VERSION}): ${y}`,...p)}(`Error while retrieving App Check token: ${E.error}`),null==E?void 0:E.token})()}}function Pn(y){return(0,V.m9)(y)}class xo{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,V.ne)(m=>this.observer=m)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $a(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function $r(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class Ao{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Vt("not implemented")}_getIdTokenResponse(p){return Vt("not implemented")}_linkToIdToken(p,m){return Vt("not implemented")}_getReauthenticationResolver(p){return Vt("not implemented")}}function za(y,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,h.Z)(function*(y,p){return Ce(y,"POST","/v1/accounts:resetPassword",Ue(y,p))})).apply(this,arguments)}function Sc(y,p){return ph.apply(this,arguments)}function ph(){return(ph=(0,h.Z)(function*(y,p){return Ce(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function mp(y,p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,h.Z)(function*(y,p){return Ce(y,"POST","/v1/accounts:update",Ue(y,p))})).apply(this,arguments)}function sr(y,p){return gh.apply(this,arguments)}function gh(){return(gh=(0,h.Z)(function*(y,p){return Et(y,"POST","/v1/accounts:signInWithPassword",Ue(y,p))})).apply(this,arguments)}function Vu(y,p){return mh.apply(this,arguments)}function mh(){return(mh=(0,h.Z)(function*(y,p){return Ce(y,"POST","/v1/accounts:sendOobCode",Ue(y,p))})).apply(this,arguments)}function _p(y,p){return _h.apply(this,arguments)}function _h(){return(_h=(0,h.Z)(function*(y,p){return Vu(y,p)})).apply(this,arguments)}function Tc(y,p){return vp.apply(this,arguments)}function vp(){return(vp=(0,h.Z)(function*(y,p){return Vu(y,p)})).apply(this,arguments)}function vh(y,p){return xc.apply(this,arguments)}function xc(){return(xc=(0,h.Z)(function*(y,p){return Vu(y,p)})).apply(this,arguments)}function Sm(y,p){return yh.apply(this,arguments)}function yh(){return(yh=(0,h.Z)(function*(y,p){return Vu(y,p)})).apply(this,arguments)}function yp(){return(yp=(0,h.Z)(function*(y,p){return Et(y,"POST","/v1/accounts:signInWithEmailLink",Ue(y,p))})).apply(this,arguments)}function Ac(){return(Ac=(0,h.Z)(function*(y,p){return Et(y,"POST","/v1/accounts:signInWithEmailLink",Ue(y,p))})).apply(this,arguments)}class Bu extends Ao{constructor(p,m,E,x=null){super("password",E),this._email=p,this._password=m,this._tenantId=x}static _fromEmailAndPassword(p,m){return new Bu(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new Bu(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){var E;switch(m.signInMethod){case"password":const x={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null===(E=p._getRecaptchaConfig())||void 0===E?void 0:E.emailPasswordEnabled){const F=yield nr(p,x,"signInWithPassword");return sr(p,F)}return sr(p,x).catch(function(){var F=(0,h.Z)(function*(z){if("auth/missing-recaptcha-token"===z.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ee=yield nr(p,x,"signInWithPassword");return sr(p,ee)}return Promise.reject(z)});return function(z){return F.apply(this,arguments)}}());case"emailLink":return function bh(y,p){return yp.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Se(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Sc(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function bp(y,p){return Ac.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:Se(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function zr(y,p){return wp.apply(this,arguments)}function wp(){return(wp=(0,h.Z)(function*(y,p){return Et(y,"POST","/v1/accounts:signInWithIdp",Ue(y,p))})).apply(this,arguments)}class Rs extends Ao{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Rs(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Se("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:x}=m,F=(0,fe._T)(m,["providerId","signInMethod"]);if(!E||!x)return null;const z=new Rs(E,x);return z.idToken=F.idToken||void 0,z.accessToken=F.accessToken||void 0,z.secret=F.secret,z.nonce=F.nonce,z.pendingToken=F.pendingToken||null,z}_getIdTokenResponse(p){return zr(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,zr(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,zr(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,V.xO)(m)}return p}}function Ol(y,p){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,h.Z)(function*(y,p){return Ce(y,"POST","/v1/accounts:sendVerificationCode",Ue(y,p))})).apply(this,arguments)}function wh(){return(wh=(0,h.Z)(function*(y,p){return Et(y,"POST","/v1/accounts:signInWithPhoneNumber",Ue(y,p))})).apply(this,arguments)}function Rl(){return(Rl=(0,h.Z)(function*(y,p){const m=yield Et(y,"POST","/v1/accounts:signInWithPhoneNumber",Ue(y,p));if(m.temporaryProof)throw Wn(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Cp={USER_NOT_FOUND:"user-not-found"};function qa(){return(qa=(0,h.Z)(function*(y,p){return Et(y,"POST","/v1/accounts:signInWithPhoneNumber",Ue(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Cp)})).apply(this,arguments)}class jn extends Ao{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new jn({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new jn({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Ep(y,p){return wh.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function ea(y,p){return Rl.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Uu(y,p){return qa.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:x}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:F}=p;return E||m||x||F?new jn({verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:F}):null}}class Wa{constructor(p){var m,E,x,F,z,ee;const Ve=(0,V.zd)((0,V.pd)(p)),Ye=null!==(m=Ve.apiKey)&&void 0!==m?m:null,ot=null!==(E=Ve.oobCode)&&void 0!==E?E:null,pt=function Mc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Ve.mode)&&void 0!==x?x:null);le(Ye&&ot&&pt,"argument-error"),this.apiKey=Ye,this.operation=pt,this.code=ot,this.continueUrl=null!==(F=Ve.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(z=Ve.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ee=Ve.tenantId)&&void 0!==ee?ee:null}static parseLink(p){const m=function Tm(y){const p=(0,V.zd)((0,V.pd)(y)).link,m=p?(0,V.zd)((0,V.pd)(p)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(y)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||m||p||y}(p);try{return new Wa(m)}catch(E){return null}}}let ju=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return Bu._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const x=Wa.parseLink(E);return le(x,"argument-error"),Bu._fromEmailAndCode(m,x.code,x.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class os{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Za extends os{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Fs extends Za{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return le("providerId"in m&&"signInMethod"in m,"argument-error"),Rs._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return le(p.idToken||p.accessToken,"argument-error"),Rs._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Fs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Fs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:F,nonce:z,providerId:ee}=p;if(!E&&!x&&!m&&!F||!ee)return null;try{return new Fs(ee)._credential({idToken:m,accessToken:E,nonce:z,pendingToken:F})}catch(Ve){return null}}}let xm=(()=>{class y extends Za{constructor(){super("facebook.com")}static credential(m){return Rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),On=(()=>{class y extends Za{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:x}=m;if(!E&&!x)return null;try{return y.credential(E,x)}catch(F){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Hu=(()=>{class y extends Za{constructor(){super("github.com")}static credential(m){return Rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class En extends Ao{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return zr(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,zr(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,zr(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:x,pendingToken:F}=m;return E&&x&&F&&E===x?new En(E,F):null}static _create(p,m){return new En(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ka extends os{constructor(p){le(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ka.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ka.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=En.fromJSON(p);return le(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return En._create(E,m)}catch(x){return null}}}let Ya=(()=>{class y extends Za{constructor(){super("twitter.com")}static credential(m,E){return Rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=m;if(!E||!x)return null;try{return y.credential(E,x)}catch(F){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function yi(y,p){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,h.Z)(function*(y,p){return Et(y,"POST","/v1/accounts:signUp",Ue(y,p))})).apply(this,arguments)}class Gi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,x=!1){return(0,h.Z)(function*(){const F=yield Zn._fromIdTokenResponse(p,E,x),z=as(E);return new Gi({user:F,providerId:z,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const x=as(E);return new Gi({user:p,providerId:x,_tokenResponse:E,operationType:m})})()}}function as(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ta(){return(ta=(0,h.Z)(function*(y){var p;const m=Pn(y);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new Gi({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield yi(m,{returnSecureToken:!0}),x=yield Gi._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class ls extends V.ZR{constructor(p,m,E,x){var F;super(m.code,m.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,ls.prototype),this.customData={appName:p.name,tenantId:null!==(F=p.tenantId)&&void 0!==F?F:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,x){return new ls(p,m,E,x)}}function $u(y,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?ls._fromErrorAndOperation(y,F,p,E):F})}function Ns(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function mr(){return(mr=(0,h.Z)(function*(y,p){const m=(0,V.m9)(y);yield Xa(!0,m,p);const{providerUserInfo:E}=yield Br(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),x=Ns(E||[]);return m.providerData=m.providerData.filter(F=>x.has(F.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ft(y,p){return na.apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(y,p,m=!1){const E=yield Wt(y,p._linkToIdToken(y.auth,yield y.getIdToken()),m);return Gi._forOperation(y,"link",E)})).apply(this,arguments)}function Xa(y,p,m){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,h.Z)(function*(y,p,m){yield Xt(p);const x=!1===y?"provider-already-linked":"no-such-provider";le(Ns(p.providerData).has(m)===y,p.auth,x)})).apply(this,arguments)}function Eh(y,p){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,h.Z)(function*(y,p,m=!1){const{auth:E}=y,x="reauthenticate";try{const F=yield Wt(y,$u(E,x,p,y),m);le(F.idToken,E,"internal-error");const z=Vi(F.idToken);le(z,E,"internal-error");const{sub:ee}=z;return le(y.uid===ee,E,"user-mismatch"),Gi._forOperation(y,x,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&Se(E,"user-mismatch"),F}})).apply(this,arguments)}function Rc(y,p){return zu.apply(this,arguments)}function zu(){return(zu=(0,h.Z)(function*(y,p,m=!1){const E="signIn",x=yield $u(y,E,p),F=yield Gi._fromIdTokenResponse(y,E,x);return m||(yield y._updateCurrentUser(F.user)),F})).apply(this,arguments)}function ia(y,p){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,h.Z)(function*(y,p){return Rc(Pn(y),p)})).apply(this,arguments)}function hn(y,p){return ra.apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(y,p){const m=(0,V.m9)(y);return yield Xa(!1,m,p.providerId),Ft(m,p)})).apply(this,arguments)}function ti(y,p){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,h.Z)(function*(y,p){return Eh((0,V.m9)(y),p)})).apply(this,arguments)}function Ja(y,p){return cs.apply(this,arguments)}function cs(){return(cs=(0,h.Z)(function*(y,p){return Et(y,"POST","/v1/accounts:signInWithCustomToken",Ue(y,p))})).apply(this,arguments)}function Ir(){return(Ir=(0,h.Z)(function*(y,p){const m=Pn(y),E=yield Ja(m,{token:p,returnSecureToken:!0}),x=yield Gi._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Nl{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Ll._fromServerResponse(p,m):"totpInfo"in m?Ch._fromServerResponse(p,m):Se(p,"internal-error")}}class Ll extends Nl{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Ll(m)}}class Ch extends Nl{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new Ch(m)}}function us(y,p,m){var E;le((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),le(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(le(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(le(m.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Sr(){return Sr=(0,h.Z)(function*(y,p,m){var E;const x=Pn(y),F={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null===(E=x._getRecaptchaConfig())||void 0===E?void 0:E.emailPasswordEnabled){const z=yield nr(x,F,"getOobCode",!0);m&&us(x,z,m),yield Tc(x,z)}else m&&us(x,F,m),yield Tc(x,F).catch(function(){var z=(0,h.Z)(function*(ee){if("auth/missing-recaptcha-token"!==ee.code)return Promise.reject(ee);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ve=yield nr(x,F,"getOobCode",!0);m&&us(x,Ve,m),yield Tc(x,Ve)}});return function(ee){return z.apply(this,arguments)}}())}),Sr.apply(this,arguments)}function ko(){return(ko=(0,h.Z)(function*(y,p,m){yield za((0,V.m9)(y),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(y,p){yield mp((0,V.m9)(y),{oobCode:p})})).apply(this,arguments)}function Vl(y,p){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,h.Z)(function*(y,p){const m=(0,V.m9)(y),E=yield za(m,{oobCode:p}),x=E.requestType;switch(le(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(E.mfaInfo,m,"internal-error");default:le(E.email,m,"internal-error")}let F=null;return E.mfaInfo&&(F=Nl._fromServerResponse(Pn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:F},operation:x}})).apply(this,arguments)}function Po(){return(Po=(0,h.Z)(function*(y,p){const{data:m}=yield Vl((0,V.m9)(y),p);return m.email})).apply(this,arguments)}function el(){return el=(0,h.Z)(function*(y,p,m){var E;const x=Pn(y),F={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let z;if(null===(E=x._getRecaptchaConfig())||void 0===E?void 0:E.emailPasswordEnabled){const Ye=yield nr(x,F,"signUpPassword");z=yi(x,Ye)}else z=yi(x,F).catch(function(){var Ye=(0,h.Z)(function*(ot){if("auth/missing-recaptcha-token"===ot.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const pt=yield nr(x,F,"signUpPassword");return yi(x,pt)}return Promise.reject(ot)});return function(ot){return Ye.apply(this,arguments)}}());const ee=yield z.catch(Ye=>Promise.reject(Ye)),Ve=yield Gi._fromIdTokenResponse(x,"signIn",ee);return yield x._updateCurrentUser(Ve.user),Ve}),el.apply(this,arguments)}function tl(){return tl=(0,h.Z)(function*(y,p,m){var E;const x=Pn(y),F={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function z(ee,Ve){le(Ve.handleCodeInApp,x,"argument-error"),Ve&&us(x,ee,Ve)}if(null===(E=x._getRecaptchaConfig())||void 0===E?void 0:E.emailPasswordEnabled){const ee=yield nr(x,F,"getOobCode",!0);z(ee,m),yield vh(x,ee)}else z(F,m),yield vh(x,F).catch(function(){var ee=(0,h.Z)(function*(Ve){if("auth/missing-recaptcha-token"!==Ve.code)return Promise.reject(Ve);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ye=yield nr(x,F,"getOobCode",!0);z(Ye,m),yield vh(x,Ye)}});return function(Ve){return ee.apply(this,arguments)}}())}),tl.apply(this,arguments)}function Gu(){return(Gu=(0,h.Z)(function*(y,p,m){const E=(0,V.m9)(y),x=ju.credentialWithLink(p,m||Mt());return le(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ia(E,x)})).apply(this,arguments)}function qu(y,p){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,h.Z)(function*(y,p){return Ce(y,"POST","/v1/accounts:createAuthUri",Ue(y,p))})).apply(this,arguments)}function Vc(){return(Vc=(0,h.Z)(function*(y,p){const E={identifier:p,continueUri:un()?Mt():"http://localhost"},{signinMethods:x}=yield qu((0,V.m9)(y),E);return x||[]})).apply(this,arguments)}function oi(){return(oi=(0,h.Z)(function*(y,p){const m=(0,V.m9)(y),x={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&us(m.auth,x,p);const{email:F}=yield _p(m.auth,x);F!==y.email&&(yield y.reload())})).apply(this,arguments)}function Rn(){return(Rn=(0,h.Z)(function*(y,p,m){const E=(0,V.m9)(y),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};m&&us(E.auth,F,m);const{email:z}=yield Sm(E.auth,F);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ip(y,p){return xh.apply(this,arguments)}function xh(){return(xh=(0,h.Z)(function*(y,p){return Ce(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bc(){return(Bc=(0,h.Z)(function*(y,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,V.m9)(y),F={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},z=yield Wt(E,Ip(E.auth,F));E.displayName=z.displayName||null,E.photoURL=z.photoUrl||null;const ee=E.providerData.find(({providerId:Ve})=>"password"===Ve);ee&&(ee.displayName=E.displayName,ee.photoURL=E.photoURL),yield E._updateTokensIfNecessary(z)})).apply(this,arguments)}function Uc(y,p,m){return sa.apply(this,arguments)}function sa(){return(sa=(0,h.Z)(function*(y,p,m){const{auth:E}=y,F={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(F.email=p),m&&(F.password=m);const z=yield Wt(y,Sc(E,F));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class eo{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class kh extends eo{constructor(p,m,E,x){super(p,m,E),this.username=x}}class Ph extends eo{constructor(p,m){super(p,"facebook.com",m)}}class oa extends kh{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Hl extends eo{constructor(p,m){super(p,"google.com",m)}}class Am extends kh{constructor(p,m,E){super(p,"twitter.com",m,E)}}function Mm(y){const{user:p,_tokenResponse:m}=y;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function jl(y){var p,m;if(!y)return null;const{providerId:E}=y,x=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},F=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const z=null===(m=null===(p=Vi(y.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(z)return new eo(F,"anonymous"!==z&&"custom"!==z?z:null)}if(!E)return null;switch(E){case"facebook.com":return new Ph(F,x);case"github.com":return new oa(F,x);case"google.com":return new Hl(F,x);case"twitter.com":return new Am(F,x,y.screenName||null);case"custom":case"anonymous":return new eo(F,null);default:return new eo(F,E,x)}}(m)}class Hn{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new Hn("enroll",p,m)}static _fromMfaPendingCredential(p){return new Hn("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Hn._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(E=p.multiFactorSession)||void 0===E?void 0:E.idToken)return Hn._fromIdtoken(p.multiFactorSession.idToken)}return null}}class $n{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=Pn(p),x=m.customData._serverResponse,F=(x.mfaInfo||[]).map(ee=>Nl._fromServerResponse(E,ee));le(x.mfaPendingCredential,E,"internal-error");const z=Hn._fromMfaPendingCredential(x.mfaPendingCredential);return new $n(z,F,function(){var ee=(0,h.Z)(function*(Ve){const Ye=yield Ve._process(E,z);delete x.mfaInfo,delete x.mfaPendingCredential;const ot=Object.assign(Object.assign({},x),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(m.operationType){case"signIn":const pt=yield Gi._fromIdTokenResponse(E,m.operationType,ot);return yield E._updateCurrentUser(pt.user),pt;case"reauthenticate":return le(m.user,E,"internal-error"),Gi._forOperation(m.user,m.operationType,ot);default:Se(E,"internal-error")}});return function(Ve){return ee.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function $t(y,p){return Ce(y,"POST","/v2/accounts/mfaEnrollment:start",Ue(y,p))}class il{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Nl._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new il(p)}getSession(){var p=this;return(0,h.Z)(function*(){return Hn._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,h.Z)(function*(){const x=p,F=yield E.getSession(),z=yield Wt(E.user,x._process(E.user.auth,F,m));return yield E.user._updateTokensIfNecessary(z),E.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,x=yield m.user.getIdToken();try{const F=yield Wt(m.user,function km(y,p){return Ce(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ue(y,p))}(m.user.auth,{idToken:x,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:z})=>z!==E),yield m.user._updateTokensIfNecessary(F),yield m.user.reload()}catch(F){throw F}})()}}const zl=new WeakMap,Gl="__sak";class la{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Gl,"1"),this.storage.removeItem(Gl),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ca=(()=>{class y extends la{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ls(){const y=(0,V.z$)();return oe(y)||yn(y)}()&&function Hr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=gr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),F=this.localCache[E];x!==F&&m(E,F,x)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ee,Ve,Ye)=>{this.notifyListeners(ee,Ye)});const x=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(x);if(m.newValue!==ee)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!E)return}const F=()=>{const ee=this.storage.getItem(x);!E&&this.localCache[x]===ee||this.notifyListeners(x,ee)},z=this.storage.getItem(x);!function jr(){return(0,V.w1)()&&10===document.documentMode}()||z===m.newValue||m.newValue===m.oldValue?F():setTimeout(F,10)}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const F of Array.from(x))F(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var x=()=>super._set,F=this;return(0,h.Z)(function*(){yield x().call(F,m,E),F.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,x=this;return(0,h.Z)(function*(){const F=yield E().call(x,m);return x.localCache[m]=JSON.stringify(F),F})()}_remove(m){var E=()=>super._remove,x=this;return(0,h.Z)(function*(){yield E().call(x,m),delete x.localCache[m]})()}}return y.type="LOCAL",y})(),to=(()=>{class y extends la{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let Oo=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(F=>F.isListeningto(m));if(E)return E;const x=new y(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const x=m,{eventId:F,eventType:z,data:ee}=x.data,Ve=E.handlersMap[z];if(!(null==Ve?void 0:Ve.size))return;x.ports[0].postMessage({status:"ack",eventId:F,eventType:z});const Ye=Array.from(Ve).map(function(){var pt=(0,h.Z)(function*(ln){return ln(x.origin,ee)});return function(ln){return pt.apply(this,arguments)}}()),ot=yield function xp(y){return Promise.all(y.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(Ye);x.ports[0].postMessage({status:"done",eventId:F,eventType:z,response:ot})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Yn(y="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return y+m}class Nh{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var x=this;return(0,h.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let z,ee;return new Promise((Ve,Ye)=>{const ot=Yn("",20);F.port1.start();const pt=setTimeout(()=>{Ye(new Error("unsupported_event"))},E);ee={messageChannel:F,onMessage(ln){const kr=ln;if(kr.data.eventId===ot)switch(kr.data.status){case"ack":clearTimeout(pt),z=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ve(kr.data.response);break;default:clearTimeout(pt),clearTimeout(z),Ye(new Error("invalid_response"))}}},x.handlers.add(ee),F.port1.addEventListener("message",ee.onMessage),x.target.postMessage({eventType:p,eventId:ot,data:m},[F.port2])}).finally(()=>{ee&&x.removeMessageHandler(ee)})})()}}function Tn(){return window}function jc(){return void 0!==Tn().WorkerGlobalScope&&"function"==typeof Tn().importScripts}function sl(){return(sl=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const $c="firebaseLocalStorageDb",Fo="firebaseLocalStorage",ua="fbase_key";class io{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function zc(y,p){return y.transaction([Fo],p?"readwrite":"readonly").objectStore(Fo)}function da(){const y=indexedDB.open($c,1);return new Promise((p,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Fo,{keyPath:ua})}catch(x){m(x)}}),y.addEventListener("success",(0,h.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Fo)?p(E):(E.close(),yield function Lh(){const y=indexedDB.deleteDatabase($c);return new io(y).toPromise()}(),p(yield da()))}))})}function Vh(y,p,m){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,h.Z)(function*(y,p,m){const E=zc(y,!0).put({[ua]:p,value:m});return new io(E).toPromise()})).apply(this,arguments)}function Gc(){return(Gc=(0,h.Z)(function*(y,p){const m=zc(y,!1).get(p),E=yield new io(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Xu(y,p){const m=zc(y,!0).delete(p);return new io(m).toPromise()}const ha=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield da()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let x=0;for(;;)try{const F=yield E._openDb();return yield m(F)}catch(F){if(x++>3)throw F;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return jc()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Oo._getInstance(function mi(){return jc()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(x,F){return{keyProcessed:(yield m._poll()).includes(F.key)}});return function(x,F){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(x,F){return["keyChanged"]});return function(x,F){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,x;if(m.activeServiceWorker=yield function Hc(){return sl.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Nh(m.activeServiceWorker);const F=yield m.sender._send("ping",{},800);!F||(null===(E=F[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=F[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function no(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield da();return yield Vh(m,Gl,"1"),yield Xu(m,Gl),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var x=this;return(0,h.Z)(function*(){return x._withPendingWrite((0,h.Z)(function*(){return yield x._withRetries(F=>Vh(F,m,E)),x.localCache[m]=E,x.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const x=yield E._withRetries(F=>function zn(y,p){return Gc.apply(this,arguments)}(F,m));return E.localCache[m]=x,x})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(x=>Xu(x,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(z=>{const ee=zc(z,!1).getAll();return new io(ee).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const x=[],F=new Set;for(const{fbase_key:z,value:ee}of E)F.add(z),JSON.stringify(m.localCache[z])!==JSON.stringify(ee)&&(m.notifyListeners(z,ee),x.push(z));for(const z of Object.keys(m.localCache))m.localCache[z]&&!F.has(z)&&(m.notifyListeners(z,null),x.push(z));return x})()}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const F of Array.from(x))F(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Mp(y,p){return Ce(y,"POST","/v2/accounts/mfaSignIn:start",Ue(y,p))}const ro=1e12;class Pm{constructor(p){this.auth=p,this.counter=ro,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new ed(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||ro;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||ro))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(p||ro))||void 0===E||E.execute(),""})()}}class ed{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;le(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Gr(y){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qr=In("rcb"),Uh=new ks(3e4,6e4);class ql{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(p=Tn().grecaptcha)||void 0===p?void 0:p.render)}load(p,m=""){return le(function Vs(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&ft(Tn().grecaptcha)?Promise.resolve(Tn().grecaptcha):new Promise((E,x)=>{const F=Tn().setTimeout(()=>{x(Ee(p,"network-request-failed"))},Uh.get());Tn()[qr]=()=>{Tn().clearTimeout(F),delete Tn()[qr];const ee=Tn().grecaptcha;if(!ee||!ft(ee))return void x(Ee(p,"internal-error"));const Ve=ee.render;ee.render=(Ye,ot)=>{const pt=Ve(Ye,ot);return this.counter++,pt},this.hostLanguage=m,E(ee)},ki(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:qr,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(F),x(Ee(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!!(null===(m=Tn().grecaptcha)||void 0===m?void 0:m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kp{load(p){return(0,h.Z)(function*(){return new Pm(p)})()}clearedOneInstance(){}}const Wc="recaptcha",jh={theme:"light",type:"image"};class td{constructor(p,m=Object.assign({},jh),E){this.parameters=m,this.type=Wc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pn(E),this.isInvisible="invisible"===this.parameters.size,le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;le(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kp:new ql,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(F=>{const z=ee=>{!ee||(p.tokenChangeListeners.delete(z),F(ee))};p.tokenChangeListeners.add(z),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Tn()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){le(un()&&!jc(),p.auth,"internal-error"),yield function Hh(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function re(y){return Re.apply(this,arguments)}(p.auth);le(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Oi{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=jn._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function ci(){return(ci=(0,h.Z)(function*(y,p,m){const E=Pn(y),x=yield Wl(E,p,(0,V.m9)(m));return new Oi(x,F=>ia(E,F))})).apply(this,arguments)}function pa(){return(pa=(0,h.Z)(function*(y,p,m){const E=(0,V.m9)(y);yield Xa(!1,E,"phone");const x=yield Wl(E.auth,p,(0,V.m9)(m));return new Oi(x,F=>hn(E,F))})).apply(this,arguments)}function Zc(){return(Zc=(0,h.Z)(function*(y,p,m){const E=(0,V.m9)(y),x=yield Wl(E.auth,p,(0,V.m9)(m));return new Oi(x,F=>ti(E,F))})).apply(this,arguments)}function Wl(y,p,m){return ga.apply(this,arguments)}function ga(){return(ga=(0,h.Z)(function*(y,p,m){var E;const x=yield m.verify();try{let F;if(le("string"==typeof x,y,"argument-error"),le(m.type===Wc,y,"argument-error"),F="string"==typeof p?{phoneNumber:p}:p,"session"in F){const z=F.session;if("phoneNumber"in F)return le("enroll"===z.type,y,"internal-error"),(yield $t(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{le("signin"===z.type,y,"internal-error");const ee=(null===(E=F.multiFactorHint)||void 0===E?void 0:E.uid)||F.multiFactorUid;return le(ee,y,"missing-multi-factor-info"),(yield Mp(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Ol(y,{phoneNumber:F.phoneNumber,recaptchaToken:x});return z}}finally{m._reset()}})).apply(this,arguments)}function Zl(){return(Zl=(0,h.Z)(function*(y,p){yield Ft((0,V.m9)(y),p)})).apply(this,arguments)}let Gn=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Pn(m)}verifyPhoneNumber(m,E){return Wl(this.auth,m,(0,V.m9)(E))}static credential(m,E){return jn._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:x}=m;return E&&x?jn._fromTokenResponse(E,x):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ji(y,p){return p?si(p):(le(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class fs extends Ao{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return zr(p,this._buildIdpRequest())}_linkToIdToken(p,m){return zr(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return zr(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Kl(y){return Rc(y.auth,new fs(y),y.bypassAuthState)}function Yl(y){const{auth:p,user:m}=y;return le(m,p,"internal-error"),Eh(m,new fs(y),y.bypassAuthState)}function No(y){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,h.Z)(function*(y){const{auth:p,user:m}=y;return le(m,p,"internal-error"),Ft(m,new fs(y),y.bypassAuthState)})).apply(this,arguments)}class Kc{constructor(p,m,E,x,F=!1){this.auth=p,this.resolver=E,this.user=x,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(E,x){p.pendingPromise={resolve:E,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(F){p.reject(F)}});return function(E,x){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:F,tenantId:z,error:ee,type:Ve}=p;if(ee)return void m.reject(ee);const Ye={auth:m.auth,requestUri:E,sessionId:x,tenantId:z||void 0,postBody:F||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ve)(Ye))}catch(ot){m.reject(ot)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Kl;case"linkViaPopup":case"linkViaRedirect":return No;case"reauthViaPopup":case"reauthViaRedirect":return Yl;default:Se(this.auth,"internal-error")}}resolve(p){Gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ps=new ks(2e3,1e4);function id(){return(id=(0,h.Z)(function*(y,p,m){const E=Pn(y);We(y,p,os);const x=ji(E,m);return new Jl(E,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function ma(){return(ma=(0,h.Z)(function*(y,p,m){const E=(0,V.m9)(y);We(E.auth,p,os);const x=ji(E.auth,m);return new Jl(E.auth,"reauthViaPopup",p,x,E).executeNotNull()})).apply(this,arguments)}function _i(){return(_i=(0,h.Z)(function*(y,p,m){const E=(0,V.m9)(y);We(E.auth,p,os);const x=ji(E.auth,m);return new Jl(E.auth,"linkViaPopup",p,x,E).executeNotNull()})).apply(this,arguments)}let Jl=(()=>{class y extends Kc{constructor(m,E,x,F,z){super(m,E,F,z),this.provider=x,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return le(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){Gt(1===m.filter.length,"Popup operations only handle one event");const E=Yn();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(Ee(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,x;this.pollId=(null===(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,ps.get())};m()}}return y.currentPopupAction=null,y})();const al=new Map;class tc extends Kc{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=al.get(m.auth._key());if(!E){try{const F=(yield function Yc(y,p){return Qc.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(F)}catch(x){E=()=>Promise.reject(x)}al.set(m.auth._key(),E)}return m.bypassAuthState||al.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const x=yield E.auth._redirectUserForId(p.eventId);if(x)return E.user=x,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Qc(){return(Qc=(0,h.Z)(function*(y,p){const m=rc(p),E=ll(y);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(m));return yield E._remove(m),x})).apply(this,arguments)}function rd(y,p){return _a.apply(this,arguments)}function _a(){return(_a=(0,h.Z)(function*(y,p){return ll(y)._set(rc(p),"true")})).apply(this,arguments)}function ic(y,p){al.set(y._key(),p)}function ll(y){return si(y._redirectPersistence)}function rc(y){return $("pendingRedirect",y.config.apiKey,y.name)}function va(){return(va=(0,h.Z)(function*(y,p,m){const E=Pn(y);We(y,p,os),yield E._initializationPromise;const x=ji(E,m);return yield rd(x,E),x._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Hi(){return(Hi=(0,h.Z)(function*(y,p,m){const E=(0,V.m9)(y);We(E.auth,p,os),yield E.auth._initializationPromise;const x=ji(E.auth,m);yield rd(x,E.auth);const F=yield Jc(E);return x._openRedirect(E.auth,p,"reauthViaRedirect",F)})).apply(this,arguments)}function $h(){return($h=(0,h.Z)(function*(y,p,m){const E=(0,V.m9)(y);We(E.auth,p,os),yield E.auth._initializationPromise;const x=ji(E.auth,m);yield Xa(!1,E,p.providerId),yield rd(x,E.auth);const F=yield Jc(E);return x._openRedirect(E.auth,p,"linkViaRedirect",F)})).apply(this,arguments)}function ul(){return(ul=(0,h.Z)(function*(y,p){return yield Pn(y)._initializationPromise,dl(y,p,!1)})).apply(this,arguments)}function dl(y,p){return sc.apply(this,arguments)}function sc(){return(sc=(0,h.Z)(function*(y,p,m=!1){const E=Pn(y),x=ji(E,p),z=yield new tc(E,x,m).execute();return z&&!m&&(delete z.user._redirectEventId,yield E._persistUserIfCurrent(z.user),yield E._setRedirectUser(null,p)),z})).apply(this,arguments)}function Jc(y){return ba.apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(y){const p=Yn(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class ld{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function qh(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wr(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!Wr(p)){const x=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ee(this.auth,x))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gh(p))}saveEventToCache(p){this.cachedEventUids.add(Gh(p)),this.lastProcessedEventTime=Date.now()}}function Gh(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function Wr({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Rm(y){return Op.apply(this,arguments)}function Op(){return(Op=(0,h.Z)(function*(y,p={}){return Ce(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Rp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wi=/^https?/;function oo(){return(oo=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Rm(y);for(const m of p)try{if(ud(m))return}catch(E){}Se(y,"unauthorized-domain")})).apply(this,arguments)}function ud(y){const p=Mt(),{protocol:m,hostname:E}=new URL(p);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&z.hostname===E}if(!Wi.test(m))return!1;if(Rp.test(y))return E===y;const x=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const bi=new ks(3e4,6e4);function Us(){const y=Tn().___jsl;if(null==y?void 0:y.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let wa=null;function Ea(y){return wa=wa||function Zr(y){return new Promise((p,m)=>{var E,x,F;function z(){Us(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Us(),m(Ee(y,"network-request-failed"))},timeout:bi.get()})}if(null===(x=null===(E=Tn().gapi)||void 0===E?void 0:E.iframes)||void 0===x?void 0:x.Iframe)p(gapi.iframes.getContext());else{if(!(null===(F=Tn().gapi)||void 0===F?void 0:F.load)){const ee=In("iframefcb");return Tn()[ee]=()=>{gapi.load?z():m(Ee(y,"network-request-failed"))},ki(`https://apis.google.com/js/api.js?onload=${ee}`).catch(Ve=>m(Ve))}z()}}).catch(p=>{throw wa=null,p})}(y),wa}const dd=new ks(5e3,15e3),Fp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fm(y){const p=y.config;le(p.authDomain,y,"auth-domain-config-required");const m=p.emulator?se(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:y.name,v:pe.SDK_VERSION},x=pd.get(y.config.apiHost);x&&(E.eid=x);const F=y._getFrameworks();return F.length&&(E.fw=F.join(",")),`${m}?${(0,V.xO)(E).slice(1)}`}function S(){return S=(0,h.Z)(function*(y){const p=yield Ea(y),m=Tn().gapi;return le(m,y,"internal-error"),p.open({where:document.body,url:Fm(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fp,dontclear:!0},E=>new Promise(function(){var x=(0,h.Z)(function*(F,z){yield E.restyle({setHideOnLeave:!1});const ee=Ee(y,"network-request-failed"),Ve=Tn().setTimeout(()=>{z(ee)},dd.get());function Ye(){Tn().clearTimeout(Ve),F(E)}E.ping(Ye).then(Ye,()=>{z(ee)})});return function(F,z){return x.apply(this,arguments)}}()))}),S.apply(this,arguments)}const P={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Je{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}const wi=encodeURIComponent("fac");function Bn(y,p,m,E,x,F){return js.apply(this,arguments)}function js(){return(js=(0,h.Z)(function*(y,p,m,E,x,F){le(y.config.authDomain,y,"auth-domain-config-required"),le(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:pe.SDK_VERSION,eventId:x};if(p instanceof os){p.setDefaultLanguage(y.languageCode),z.providerId=p.providerId||"",(0,V.xb)(p.getCustomParameters())||(z.customParameters=JSON.stringify(p.getCustomParameters()));for(const[ot,pt]of Object.entries(F||{}))z[ot]=pt}if(p instanceof Za){const ot=p.getScopes().filter(pt=>""!==pt);ot.length>0&&(z.scopes=ot.join(","))}y.tenantId&&(z.tid=y.tenantId);const ee=z;for(const ot of Object.keys(ee))void 0===ee[ot]&&delete ee[ot];const Ve=yield y._getAppCheckToken(),Ye=Ve?`#${wi}=${encodeURIComponent(Ve)}`:"";return`${Vo(y)}?${(0,V.xO)(ee).slice(1)}${Ye}`})).apply(this,arguments)}function Vo({config:y}){return y.emulator?se(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}const Ar="webStorageSupport";class md extends class gd{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return Vt("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new md(p)}_finalizeEnroll(p,m,E){return function aa(y,p){return Ce(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ue(y,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function qc(y,p){return Ce(y,"POST","/v2/accounts/mfaSignIn:finalize",Ue(y,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Nm=(()=>{class y{constructor(){}static assertion(m){return md._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var yd="@firebase/auth";class Lm{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p((null==E?void 0:E.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hl(){return window}function Up(){return(Up=(0,h.Z)(function*(y,p,m){var E;const{BuildInfo:x}=hl();Gt(p.sessionId,"AuthEvent did not contain a session ID");const F=yield Cd(p.sessionId),z={};return yn()?z.ibi=x.packageName:Ut()?z.apn=x.packageName:Se(y,"operation-not-supported-in-this-environment"),x.displayName&&(z.appDisplayName=x.displayName),z.sessionId=F,Bn(y,m,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,z)})).apply(this,arguments)}function Zh(){return(Zh=(0,h.Z)(function*(y){const{BuildInfo:p}=hl(),m={};yn()?m.iosBundleId=p.packageName:Ut()?m.androidPackageName=p.packageName:Se(y,"operation-not-supported-in-this-environment"),yield Rm(y,m)})).apply(this,arguments)}function Ed(){return(Ed=(0,h.Z)(function*(y,p,m){const{cordova:E}=hl();let x=()=>{};try{yield new Promise((F,z)=>{let ee=null;function Ve(){var pt;F();const ln=null===(pt=E.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof ln&&ln(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Ye(){ee||(ee=window.setTimeout(()=>{z(Ee(y,"redirect-cancelled-by-user"))},2e3))}function ot(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}p.addPassiveListener(Ve),document.addEventListener("resume",Ye,!1),Ut()&&document.addEventListener("visibilitychange",ot,!1),x=()=>{p.removePassiveListener(Ve),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",ot,!1),ee&&window.clearTimeout(ee)}})}finally{x()}})).apply(this,arguments)}function Cd(y){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,h.Z)(function*(y){const p=nu(y),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function nu(y){if(Gt(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),m=new Uint8Array(p);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}(0,V.Pz)("authIdTokenMaxAge"),function Vp(y){(0,pe._registerComponent)(new ue.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),F=p.getProvider("app-check-internal"),{apiKey:z,authDomain:ee}=E.options;le(z&&!z.includes(":"),"invalid-api-key",{appName:E.name});const Ve={apiKey:z,authDomain:ee,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:de(y)},Ye=new ir(E,x,F,Ve);return function Vn(y,p){const m=(null==p?void 0:p.persistence)||[],E=(Array.isArray(m)?m:[m]).map(si);(null==p?void 0:p.errorMap)&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(E,null==p?void 0:p.popupRedirectResolver)}(Ye,m),Ye},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new ue.wA("auth-internal",p=>{const m=Pn(p.getProvider("auth").getImmediate());return new Lm(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(yd,"0.23.2",function Wh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,pe.registerVersion)(yd,"0.23.2","esm2017")}("Browser");class ey extends ld{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,h.Z)(function*(){yield p.initPromise})()}}function Yh(y){return Id.apply(this,arguments)}function Id(){return(Id=(0,h.Z)(function*(y){const p=yield Da()._get(Qh(y));return p&&(yield Da()._remove(Qh(y))),p})).apply(this,arguments)}function Td(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*p.length);y.push(p.charAt(E))}return y.join("")}function Da(){return si(ca)}function Qh(y){return $("authEvent",y.config.apiKey,y.name)}function Xh(y){if(!(null==y?void 0:y.includes("?")))return{};const[p,...m]=y.split("?");return(0,V.zd)(m.join("?"))}function ef(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function xd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function zm(y=(0,V.z$)()){return!("file:"!==xd()&&"ionic:"!==xd()&&"capacitor:"!==xd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function zp(){try{const y=self.localStorage,p=Yn();if(y)return y.setItem(p,"1"),y.removeItem(p),!function yT(y=(0,V.z$)()){return function ru(){return(0,V.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ry(y=(0,V.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,V.hl)()}catch(y){return Gm()&&(0,V.hl)()}return!1}function Gm(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gp(){return(function $p(){return"http:"===xd()||"https:"===xd()}()||(0,V.ru)()||zm())&&!function fl(){return(0,V.b$)()||(0,V.UG)()}()&&zp()&&!Gm()}function sy(){return zm()&&"undefined"!=typeof document}function Ia(){return(Ia=(0,h.Z)(function*(){return!!sy()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const Kr={LOCAL:"local",NONE:"none",SESSION:"session"},Ad=le,qm="persistence";function su(y){return pl.apply(this,arguments)}function pl(){return(pl=(0,h.Z)(function*(y){yield y._initializationPromise;const p=ou(),m=$(qm,y.config.apiKey,y.name);p&&p.setItem(m,y._getPersistence())})).apply(this,arguments)}function ou(){var y;try{return(null===(y=function oy(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(p){return null}}const Wp=le;class Sa{constructor(){this.browserResolver=si(class gs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=to,this._completeRedirectFn=dl,this._overrideRedirectResult=ic}_openPopup(p,m,E,x){var F=this;return(0,h.Z)(function*(){var z;Gt(null===(z=F.eventManagers[p._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ee=yield Bn(p,m,E,Mt(),x);return function Ze(y,p,m,E=500,x=600){const F=Math.max((window.screen.availHeight-x)/2,0).toString(),z=Math.max((window.screen.availWidth-E)/2,0).toString();let ee="";const Ve=Object.assign(Object.assign({},P),{width:E.toString(),height:x.toString(),top:F,left:z}),Ye=(0,V.z$)().toLowerCase();m&&(ee=ct(Ye)?"_blank":m),ke(Ye)&&(p=p||"http://localhost",Ve.scrollbars="yes");const ot=Object.entries(Ve).reduce((ln,[kr,Ta])=>`${ln}${kr}=${Ta},`,"");if(function Bi(y=(0,V.z$)()){var p;return yn(y)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ye)&&"_self"!==ee)return function ut(y,p){const m=document.createElement("a");m.href=y,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",ee),new Je(null);const pt=window.open(p||"",ee,ot);le(pt,y,"popup-blocked");try{pt.focus()}catch(ln){}return new Je(pt)}(p,ee,Yn())})()}_openRedirect(p,m,E,x){var F=this;return(0,h.Z)(function*(){return yield F._originValidation(p),function Ro(y){Tn().location.href=y}(yield Bn(p,m,E,Mt(),x)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:x,promise:F}=this.eventManagers[m];return x?Promise.resolve(x):(Gt(F,"If manager is not set, promise should be"),F)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const E=yield function C(y){return S.apply(this,arguments)}(p),x=new ld(p);return E.register("authEvent",F=>(le(null==F?void 0:F.authEvent,p,"invalid-auth-event"),{status:x.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:x},m.iframes[p._key()]=E,x})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Ar,{type:Ar},x=>{var F;const z=null===(F=null==x?void 0:x[0])||void 0===F?void 0:F[Ar];void 0!==z&&m(!!z),Se(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function cd(y){return oo.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return gr()||oe()||yn()}}),this.cordovaResolver=si(class jp{constructor(){this._redirectPersistence=to,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=dl,this._overrideRedirectResult=ic}_initialize(p){var m=this;return(0,h.Z)(function*(){const E=p._key();let x=m.eventManagers.get(E);return x||(x=new ey(p),m.eventManagers.set(E,x),m.attachCallbackListeners(p,x)),x})()}_openPopup(p){Se(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,E,x){var F=this;return(0,h.Z)(function*(){!function tu(y){var p,m,E,x,F,z,ee,Ve,Ye,ot;const pt=hl();le("function"==typeof(null===(p=null==pt?void 0:pt.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(void 0!==(null===(m=null==pt?void 0:pt.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(F=null===(x=null===(E=null==pt?void 0:pt.cordova)||void 0===E?void 0:E.plugins)||void 0===x?void 0:x.browsertab)||void 0===F?void 0:F.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Ve=null===(ee=null===(z=null==pt?void 0:pt.cordova)||void 0===z?void 0:z.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(ot=null===(Ye=null==pt?void 0:pt.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===ot?void 0:ot.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const z=yield F._initialize(p);yield z.initialized(),z.resetRedirect(),function nc(){al.clear()}(),yield F._originValidation(p);const ee=function Um(y,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Td(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(p,E,x);yield function ty(y,p){return Da()._set(Qh(y),p)}(p,ee);const Ve=yield function Xv(y,p,m){return Up.apply(this,arguments)}(p,ee,m),Ye=yield function wd(y){const{cordova:p}=hl();return new Promise(m=>{p.plugins.browsertab.isAvailable(E=>{let x=null;E?p.plugins.browsertab.openUrl(y):x=p.InAppBrowser.open(y,function Jt(y=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(x)})})}(Ve);return function Kh(y,p,m){return Ed.apply(this,arguments)}(p,z,Ye)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Bm(y){return Zh.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:E,handleOpenURL:x,BuildInfo:F}=hl(),z=setTimeout((0,h.Z)(function*(){yield Yh(p),m.onEvent(ef())}),500),ee=function(){var ot=(0,h.Z)(function*(pt){clearTimeout(z);const ln=yield Yh(p);let kr=null;ln&&(null==pt?void 0:pt.url)&&(kr=function Sd(y,p){var m,E;const x=function jm(y){const p=Xh(y),m=p.link?decodeURIComponent(p.link):void 0,E=Xh(m).link,x=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Xh(x).link||x||E||m||y}(p);if(x.includes("/__/auth/callback")){const F=Xh(x),z=F.firebaseError?function ny(y){try{return JSON.parse(y)}catch(p){return null}}(decodeURIComponent(F.firebaseError)):null,ee=null===(E=null===(m=null==z?void 0:z.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ve=ee?Ee(ee):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:x,postBody:null}}return null}(ln,pt.url)),m.onEvent(kr||ef())});return function(ln){return ot.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,ee);const Ve=x,Ye=`${F.packageName.toLowerCase()}://`;hl().handleOpenURL=function(){var ot=(0,h.Z)(function*(pt){if(pt.toLowerCase().startsWith(Ye)&&ee({url:pt}),"function"==typeof Ve)try{Ve(pt)}catch(ln){console.error(ln)}});return function(pt){return ot.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=to,this._completeRedirectFn=dl,this._overrideRedirectResult=ic}_initialize(p){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,E,x){var F=this;return(0,h.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openPopup(p,m,E,x)})()}_openRedirect(p,m,E,x){var F=this;return(0,h.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openRedirect(p,m,E,x)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return sy()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,h.Z)(function*(){if(p.underlyingResolver)return;const m=yield function qp(){return Ia.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function tf(y){return y.unwrap()}function ly(y){return Md(y)}function Md(y){const{_tokenResponse:p}=y instanceof V.ZR?y.customData:y;if(!p)return null;if(!(y instanceof V.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Gn.credentialFromResult(y);const m=p.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=On;break;case"facebook.com":E=xm;break;case"github.com":E=Hu;break;case"twitter.com":E=Ya;break;default:const{oauthIdToken:x,oauthAccessToken:F,oauthTokenSecret:z,pendingToken:ee,nonce:Ve}=p;return F||z||x||ee?ee?m.startsWith("saml.")?En._create(m,ee):Rs._fromParams({providerId:m,signInMethod:m,pendingToken:ee,idToken:x,accessToken:F}):new Fs(m).credential({idToken:x,accessToken:F,rawNonce:Ve}):null}return y instanceof V.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Mr(y,p){return p.catch(m=>{throw m instanceof V.ZR&&function Qw(y,p){var m;const E=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null==p?void 0:p.code))p.resolver=new uy(y,function ai(y,p){var m;const E=(0,V.m9)(y),x=p;return le(p.customData.operationType,E,"argument-error"),le(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),$n._fromError(E,x)}(y,p));else if(E){const x=Md(p),F=p;x&&(F.credential=x,F.tenantId=E.tenantId||void 0,F.email=E.email||void 0,F.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const x=m.user;return{operationType:m.operationType,credential:ly(m),additionalUserInfo:Mm(m),user:Bo.getOrCreate(x)}})}function nf(y,p){return cy.apply(this,arguments)}function cy(){return(cy=(0,h.Z)(function*(y,p){const m=yield p;return{verificationId:m.verificationId,confirm:E=>Mr(y,m.confirm(E))}})).apply(this,arguments)}class uy{constructor(p,m){this.resolver=m,this.auth=function Yw(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Mr(tf(this.auth),this.resolver.resolveSignIn(p))}}class Bo{constructor(p){this._delegate=p,this.multiFactor=function Rh(y){const p=(0,V.m9)(y);return zl.has(p)||zl.set(p,il._fromUser(p)),zl.get(p)}(p)}static getOrCreate(p){return Bo.USER_MAP.has(p)||Bo.USER_MAP.set(p,new Bo(p)),Bo.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,h.Z)(function*(){return Mr(m.auth,hn(m._delegate,p))})()}linkWithPhoneNumber(p,m){var E=this;return(0,h.Z)(function*(){return nf(E.auth,function Om(y,p,m){return pa.apply(this,arguments)}(E._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,h.Z)(function*(){return Mr(m.auth,function Pp(y,p,m){return _i.apply(this,arguments)}(m._delegate,p,Sa))})()}linkWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield su(Pn(m.auth)),function ya(y,p,m){return function od(y,p,m){return $h.apply(this,arguments)}(y,p,m)}(m._delegate,p,Sa)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,h.Z)(function*(){return Mr(m.auth,ti(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return nf(this.auth,function nd(y,p,m){return Zc.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return Mr(this.auth,function ol(y,p,m){return ma.apply(this,arguments)}(this._delegate,p,Sa))}reauthenticateWithRedirect(p){var m=this;return(0,h.Z)(function*(){return yield su(Pn(m.auth)),function sd(y,p,m){return function Lo(y,p,m){return Hi.apply(this,arguments)}(y,p,m)}(m._delegate,p,Sa)})()}sendEmailVerification(p){return function Wu(y,p){return oi.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,h.Z)(function*(){return yield function Qa(y,p){return mr.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function Ah(y,p){return Uc((0,V.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function Mh(y,p){return Uc((0,V.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Bs(y,p){return Zl.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Sp(y,p){return Bc.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function ds(y,p,m){return Rn.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bo.USER_MAP=new WeakMap;const kd=le;let dy=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=m.options;kd(x,"invalid-api-key",{appName:m.name}),kd(x,"invalid-api-key",{appName:m.name});const F="undefined"!=typeof window?Sa:void 0;this._delegate=E.initialize({options:{persistence:Xw(x,m.name),popupRedirectResolver:F}}),this._delegate._updateErrorMap(ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Nu(y,p,m){const E=Pn(y);le(E._canInitEmulator,E,"emulator-config-failed"),le(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const x=!!(null==m?void 0:m.disableWarnings),F=$a(p),{host:z,port:ee}=function Er(y){const p=$a(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const F=x[1];return{host:F,port:$r(E.substr(F.length+1))}}{const[F,z]=E.split(":");return{host:F,port:$r(z)}}}(p);E.config.emulator={url:`${F}//${z}${null===ee?"":`:${ee}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:z,port:ee,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Lu(){function y(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function Xs(y,p){return Js.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Vl(this._delegate,m)}confirmPasswordReset(m,E){return function Dh(y,p,m){return ko.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var x=this;return(0,h.Z)(function*(){return Mr(x._delegate,function Nc(y,p,m){return el.apply(this,arguments)}(x._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Tr(y,p){return Vc.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Lc(y,p){const m=Wa.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){kd(Gp(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function zh(y,p){return ul.apply(this,arguments)}(m._delegate,Sa);return E?Mr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Hm(y,p){Pn(y)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,E,x){const{next:F,error:z,complete:ee}=hy(m,E,x);return this._delegate.onAuthStateChanged(F,z,ee)}onIdTokenChanged(m,E,x){const{next:F,error:z,complete:ee}=hy(m,E,x);return this._delegate.onIdTokenChanged(F,z,ee)}sendSignInLinkToEmail(m,E){return function Th(y,p,m){return tl.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function or(y,p,m){return Sr.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,h.Z)(function*(){let x;switch(function ay(y,p){Ad(Object.values(Kr).includes(p),y,"invalid-persistence-type"),(0,V.b$)()?Ad(p!==Kr.SESSION,y,"unsupported-persistence-type"):(0,V.UG)()?Ad(p===Kr.NONE,y,"unsupported-persistence-type"):Gm()?Ad(p===Kr.NONE||p===Kr.LOCAL&&(0,V.hl)(),y,"unsupported-persistence-type"):Ad(p===Kr.NONE||zp(),y,"unsupported-persistence-type")}(E._delegate,m),m){case Kr.SESSION:x=to;break;case Kr.LOCAL:x=(yield si(ha)._isAvailable())?ha:ca;break;case Kr.NONE:x=zi;break;default:return Se("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Mr(this._delegate,function Dr(y){return ta.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Mr(this._delegate,ia(this._delegate,m))}signInWithCustomToken(m){return Mr(this._delegate,function Mo(y,p){return Ir.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return Mr(this._delegate,function Sh(y,p,m){return ia((0,V.m9)(y),ju.credential(p,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return Mr(this._delegate,function Pi(y,p,m){return Gu.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return nf(this._delegate,function so(y,p,m){return ci.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,h.Z)(function*(){return kd(Gp(),E._delegate,"operation-not-supported-in-this-environment"),Mr(E._delegate,function Xl(y,p,m){return id.apply(this,arguments)}(E._delegate,m,Sa))})()}signInWithRedirect(m){var E=this;return(0,h.Z)(function*(){return kd(Gp(),E._delegate,"operation-not-supported-in-this-environment"),yield su(E._delegate),function cl(y,p,m){return function Xc(y,p,m){return va.apply(this,arguments)}(y,p,m)}(E._delegate,m,Sa)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Ih(y,p){return Po.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Kr,y})();function hy(y,p,m){let E=y;"function"!=typeof y&&({next:E,error:p,complete:m}=y);const x=E;return{next:z=>x(z&&Bo.getOrCreate(z)),error:p,complete:m}}function Xw(y,p){const m=function ao(y,p){const m=ou();if(!m)return[];const E=$(qm,y,p);switch(m.getItem(E)){case Kr.NONE:return[zi];case Kr.LOCAL:return[ha,to];case Kr.SESSION:return[to];default:return[]}}(y,p);if("undefined"!=typeof self&&!m.includes(ha)&&m.push(ha),"undefined"!=typeof window)for(const E of[ca,to])m.includes(E)||m.push(E);return m.includes(zi)||m.push(zi),m}class au{constructor(){this.providerId="phone",this._delegate=new Gn(tf(te.Z.auth()))}static credential(p,m){return Gn.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}au.PHONE_SIGN_IN_METHOD=Gn.PHONE_SIGN_IN_METHOD,au.PROVIDER_ID=Gn.PROVIDER_ID;const lo=le;class Jw{constructor(p,m,E=te.Z.app()){var x;lo(null===(x=E.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new td(p,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Wm(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new dy(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ju,FacebookAuthProvider:xm,GithubAuthProvider:Hu,GoogleAuthProvider:On,OAuthProvider:Fs,SAMLAuthProvider:Ka,PhoneAuthProvider:au,PhoneMultiFactorGenerator:Nm,RecaptchaVerifier:Jw,TwitterAuthProvider:Ya,Auth:dy,AuthCredential:Ao,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(te.Z)},5861:(nt,De,L)=>{function h(V,pe,fe,ve,ue,Ie,we){try{var K=V[Ie](we),q=K.value}catch(ie){return void fe(ie)}K.done?pe(q):Promise.resolve(q).then(ve,ue)}function te(V){return function(){var pe=this,fe=arguments;return new Promise(function(ve,ue){var Ie=V.apply(pe,fe);function we(q){h(Ie,ve,ue,we,K,"next",q)}function K(q){h(Ie,ve,ue,we,K,"throw",q)}we(void 0)})}}L.d(De,{Z:()=>te})},7582:(nt,De,L)=>{function pe(se,ne){var Ae={};for(var Me in se)Object.prototype.hasOwnProperty.call(se,Me)&&ne.indexOf(Me)<0&&(Ae[Me]=se[Me]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(Me=Object.getOwnPropertySymbols(se);Ue<Me.length;Ue++)ne.indexOf(Me[Ue])<0&&Object.prototype.propertyIsEnumerable.call(se,Me[Ue])&&(Ae[Me[Ue]]=se[Me[Ue]])}return Ae}function ie(se,ne,Ae,Me){return new(Ae||(Ae=Promise))(function(Ce,vt){function Yt(gn){try{Et(Me.next(gn))}catch(qn){vt(qn)}}function on(gn){try{Et(Me.throw(gn))}catch(qn){vt(qn)}}function Et(gn){gn.done?Ce(gn.value):function Ue(Ce){return Ce instanceof Ae?Ce:new Ae(function(vt){vt(Ce)})}(gn.value).then(Yt,on)}Et((Me=Me.apply(se,ne||[])).next())})}function He(se){return this instanceof He?(this.v=se,this):new He(se)}function Se(se,ne,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,Me=Ae.apply(se,ne||[]),Ce=[];return Ue={},vt("next"),vt("throw"),vt("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function vt(Nn){Me[Nn]&&(Ue[Nn]=function(Wn){return new Promise(function(Ni,hi){Ce.push([Nn,Wn,Ni,hi])>1||Yt(Nn,Wn)})})}function Yt(Nn,Wn){try{!function on(Nn){Nn.value instanceof He?Promise.resolve(Nn.value.v).then(Et,gn):qn(Ce[0][2],Nn)}(Me[Nn](Wn))}catch(Ni){qn(Ce[0][3],Ni)}}function Et(Nn){Yt("next",Nn)}function gn(Nn){Yt("throw",Nn)}function qn(Nn,Wn){Nn(Wn),Ce.shift(),Ce.length&&Yt(Ce[0][0],Ce[0][1])}}function Xe(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,ne=se[Symbol.asyncIterator];return ne?ne.call(se):(se=function Qe(se){var ne="function"==typeof Symbol&&Symbol.iterator,Ae=ne&&se[ne],Me=0;if(Ae)return Ae.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&Me>=se.length&&(se=void 0),{value:se&&se[Me++],done:!se}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),Ae={},Me("next"),Me("throw"),Me("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function Me(Ce){Ae[Ce]=se[Ce]&&function(vt){return new Promise(function(Yt,on){!function Ue(Ce,vt,Yt,on){Promise.resolve(on).then(function(Et){Ce({value:Et,done:Yt})},vt)}(Yt,on,(vt=se[Ce](vt)).done,vt.value)})}}}L.d(De,{FC:()=>Se,KL:()=>Xe,_T:()=>pe,mG:()=>ie,qq:()=>He}),"function"==typeof SuppressedError&&SuppressedError}},nt=>{nt(nt.s=4117)}]);